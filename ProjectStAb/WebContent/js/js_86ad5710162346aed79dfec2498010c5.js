
/*
 * jQuery 1.2.6 - New Wave Javascript
 *
 * Copyright (c) 2008 John Resig (jquery.com)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * Date: 2008-05-24 14:22:17 -0400 (Sat, 24 May 2008)
 * Rev: 5685
 */
eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('(H(){J w=1b.4M,3m$=1b.$;J D=1b.4M=1b.$=H(a,b){I 2B D.17.5j(a,b)};J u=/^[^<]*(<(.|\\s)+>)[^>]*$|^#(\\w+)$/,62=/^.[^:#\\[\\.]*$/,12;D.17=D.44={5j:H(d,b){d=d||S;G(d.16){7[0]=d;7.K=1;I 7}G(1j d=="23"){J c=u.2D(d);G(c&&(c[1]||!b)){G(c[1])d=D.4h([c[1]],b);N{J a=S.61(c[3]);G(a){G(a.2v!=c[3])I D().2q(d);I D(a)}d=[]}}N I D(b).2q(d)}N G(D.1D(d))I D(S)[D.17.27?"27":"43"](d);I 7.6Y(D.2d(d))},5w:"1.2.6",8G:H(){I 7.K},K:0,3p:H(a){I a==12?D.2d(7):7[a]},2I:H(b){J a=D(b);a.5n=7;I a},6Y:H(a){7.K=0;2p.44.1p.1w(7,a);I 7},P:H(a,b){I D.P(7,a,b)},5i:H(b){J a=-1;I D.2L(b&&b.5w?b[0]:b,7)},1K:H(c,a,b){J d=c;G(c.1q==56)G(a===12)I 7[0]&&D[b||"1K"](7[0],c);N{d={};d[c]=a}I 7.P(H(i){R(c 1n d)D.1K(b?7.V:7,c,D.1i(7,d[c],b,i,c))})},1g:H(b,a){G((b==\'2h\'||b==\'1Z\')&&3d(a)<0)a=12;I 7.1K(b,a,"2a")},1r:H(b){G(1j b!="49"&&b!=U)I 7.4E().3v((7[0]&&7[0].2z||S).5F(b));J a="";D.P(b||7,H(){D.P(7.3t,H(){G(7.16!=8)a+=7.16!=1?7.76:D.17.1r([7])})});I a},5z:H(b){G(7[0])D(b,7[0].2z).5y().39(7[0]).2l(H(){J a=7;1B(a.1x)a=a.1x;I a}).3v(7);I 7},8Y:H(a){I 7.P(H(){D(7).6Q().5z(a)})},8R:H(a){I 7.P(H(){D(7).5z(a)})},3v:H(){I 7.3W(19,M,Q,H(a){G(7.16==1)7.3U(a)})},6F:H(){I 7.3W(19,M,M,H(a){G(7.16==1)7.39(a,7.1x)})},6E:H(){I 7.3W(19,Q,Q,H(a){7.1d.39(a,7)})},5q:H(){I 7.3W(19,Q,M,H(a){7.1d.39(a,7.2H)})},3l:H(){I 7.5n||D([])},2q:H(b){J c=D.2l(7,H(a){I D.2q(b,a)});I 7.2I(/[^+>] [^+>]/.11(b)||b.1h("..")>-1?D.4r(c):c)},5y:H(e){J f=7.2l(H(){G(D.14.1f&&!D.4n(7)){J a=7.6o(M),5h=S.3h("1v");5h.3U(a);I D.4h([5h.4H])[0]}N I 7.6o(M)});J d=f.2q("*").5c().P(H(){G(7[E]!=12)7[E]=U});G(e===M)7.2q("*").5c().P(H(i){G(7.16==3)I;J c=D.L(7,"3w");R(J a 1n c)R(J b 1n c[a])D.W.1e(d[i],a,c[a][b],c[a][b].L)});I f},1E:H(b){I 7.2I(D.1D(b)&&D.3C(7,H(a,i){I b.1k(a,i)})||D.3g(b,7))},4Y:H(b){G(b.1q==56)G(62.11(b))I 7.2I(D.3g(b,7,M));N b=D.3g(b,7);J a=b.K&&b[b.K-1]!==12&&!b.16;I 7.1E(H(){I a?D.2L(7,b)<0:7!=b})},1e:H(a){I 7.2I(D.4r(D.2R(7.3p(),1j a==\'23\'?D(a):D.2d(a))))},3F:H(a){I!!a&&D.3g(a,7).K>0},7T:H(a){I 7.3F("."+a)},6e:H(b){G(b==12){G(7.K){J c=7[0];G(D.Y(c,"2A")){J e=c.64,63=[],15=c.15,2V=c.O=="2A-2V";G(e<0)I U;R(J i=2V?e:0,2f=2V?e+1:15.K;i<2f;i++){J d=15[i];G(d.2W){b=D.14.1f&&!d.at.2x.an?d.1r:d.2x;G(2V)I b;63.1p(b)}}I 63}N I(7[0].2x||"").1o(/\\r/g,"")}I 12}G(b.1q==4L)b+=\'\';I 7.P(H(){G(7.16!=1)I;G(b.1q==2p&&/5O|5L/.11(7.O))7.4J=(D.2L(7.2x,b)>=0||D.2L(7.34,b)>=0);N G(D.Y(7,"2A")){J a=D.2d(b);D("9R",7).P(H(){7.2W=(D.2L(7.2x,a)>=0||D.2L(7.1r,a)>=0)});G(!a.K)7.64=-1}N 7.2x=b})},2K:H(a){I a==12?(7[0]?7[0].4H:U):7.4E().3v(a)},7b:H(a){I 7.5q(a).21()},79:H(i){I 7.3s(i,i+1)},3s:H(){I 7.2I(2p.44.3s.1w(7,19))},2l:H(b){I 7.2I(D.2l(7,H(a,i){I b.1k(a,i,a)}))},5c:H(){I 7.1e(7.5n)},L:H(d,b){J a=d.1R(".");a[1]=a[1]?"."+a[1]:"";G(b===12){J c=7.5C("9z"+a[1]+"!",[a[0]]);G(c===12&&7.K)c=D.L(7[0],d);I c===12&&a[1]?7.L(a[0]):c}N I 7.1P("9u"+a[1]+"!",[a[0],b]).P(H(){D.L(7,d,b)})},3b:H(a){I 7.P(H(){D.3b(7,a)})},3W:H(g,f,h,d){J e=7.K>1,3x;I 7.P(H(){G(!3x){3x=D.4h(g,7.2z);G(h)3x.9o()}J b=7;G(f&&D.Y(7,"1T")&&D.Y(3x[0],"4F"))b=7.3H("22")[0]||7.3U(7.2z.3h("22"));J c=D([]);D.P(3x,H(){J a=e?D(7).5y(M)[0]:7;G(D.Y(a,"1m"))c=c.1e(a);N{G(a.16==1)c=c.1e(D("1m",a).21());d.1k(b,a)}});c.P(6T)})}};D.17.5j.44=D.17;H 6T(i,a){G(a.4d)D.3Y({1a:a.4d,31:Q,1O:"1m"});N D.5u(a.1r||a.6O||a.4H||"");G(a.1d)a.1d.37(a)}H 1z(){I+2B 8J}D.1l=D.17.1l=H(){J b=19[0]||{},i=1,K=19.K,4x=Q,15;G(b.1q==8I){4x=b;b=19[1]||{};i=2}G(1j b!="49"&&1j b!="H")b={};G(K==i){b=7;--i}R(;i<K;i++)G((15=19[i])!=U)R(J c 1n 15){J a=b[c],2w=15[c];G(b===2w)6M;G(4x&&2w&&1j 2w=="49"&&!2w.16)b[c]=D.1l(4x,a||(2w.K!=U?[]:{}),2w);N G(2w!==12)b[c]=2w}I b};J E="4M"+1z(),6K=0,5r={},6G=/z-?5i|8B-?8A|1y|6B|8v-?1Z/i,3P=S.3P||{};D.1l({8u:H(a){1b.$=3m$;G(a)1b.4M=w;I D},1D:H(a){I!!a&&1j a!="23"&&!a.Y&&a.1q!=2p&&/^[\\s[]?H/.11(a+"")},4n:H(a){I a.1C&&!a.1c||a.2j&&a.2z&&!a.2z.1c},5u:H(a){a=D.3k(a);G(a){J b=S.3H("6w")[0]||S.1C,1m=S.3h("1m");1m.O="1r/4t";G(D.14.1f)1m.1r=a;N 1m.3U(S.5F(a));b.39(1m,b.1x);b.37(1m)}},Y:H(b,a){I b.Y&&b.Y.2r()==a.2r()},1Y:{},L:H(c,d,b){c=c==1b?5r:c;J a=c[E];G(!a)a=c[E]=++6K;G(d&&!D.1Y[a])D.1Y[a]={};G(b!==12)D.1Y[a][d]=b;I d?D.1Y[a][d]:a},3b:H(c,b){c=c==1b?5r:c;J a=c[E];G(b){G(D.1Y[a]){2U D.1Y[a][b];b="";R(b 1n D.1Y[a])1X;G(!b)D.3b(c)}}N{1U{2U c[E]}1V(e){G(c.5l)c.5l(E)}2U D.1Y[a]}},P:H(d,a,c){J e,i=0,K=d.K;G(c){G(K==12){R(e 1n d)G(a.1w(d[e],c)===Q)1X}N R(;i<K;)G(a.1w(d[i++],c)===Q)1X}N{G(K==12){R(e 1n d)G(a.1k(d[e],e,d[e])===Q)1X}N R(J b=d[0];i<K&&a.1k(b,i,b)!==Q;b=d[++i]){}}I d},1i:H(b,a,c,i,d){G(D.1D(a))a=a.1k(b,i);I a&&a.1q==4L&&c=="2a"&&!6G.11(d)?a+"2X":a},1F:{1e:H(c,b){D.P((b||"").1R(/\\s+/),H(i,a){G(c.16==1&&!D.1F.3T(c.1F,a))c.1F+=(c.1F?" ":"")+a})},21:H(c,b){G(c.16==1)c.1F=b!=12?D.3C(c.1F.1R(/\\s+/),H(a){I!D.1F.3T(b,a)}).6s(" "):""},3T:H(b,a){I D.2L(a,(b.1F||b).6r().1R(/\\s+/))>-1}},6q:H(b,c,a){J e={};R(J d 1n c){e[d]=b.V[d];b.V[d]=c[d]}a.1k(b);R(J d 1n c)b.V[d]=e[d]},1g:H(d,e,c){G(e=="2h"||e=="1Z"){J b,3X={30:"5x",5g:"1G",18:"3I"},35=e=="2h"?["5e","6k"]:["5G","6i"];H 5b(){b=e=="2h"?d.8f:d.8c;J a=0,2C=0;D.P(35,H(){a+=3d(D.2a(d,"57"+7,M))||0;2C+=3d(D.2a(d,"2C"+7+"4b",M))||0});b-=29.83(a+2C)}G(D(d).3F(":4j"))5b();N D.6q(d,3X,5b);I 29.2f(0,b)}I D.2a(d,e,c)},2a:H(f,l,k){J e,V=f.V;H 3E(b){G(!D.14.2k)I Q;J a=3P.54(b,U);I!a||a.52("3E")==""}G(l=="1y"&&D.14.1f){e=D.1K(V,"1y");I e==""?"1":e}G(D.14.2G&&l=="18"){J d=V.50;V.50="0 7Y 7W";V.50=d}G(l.1I(/4i/i))l=y;G(!k&&V&&V[l])e=V[l];N G(3P.54){G(l.1I(/4i/i))l="4i";l=l.1o(/([A-Z])/g,"-$1").3y();J c=3P.54(f,U);G(c&&!3E(f))e=c.52(l);N{J g=[],2E=[],a=f,i=0;R(;a&&3E(a);a=a.1d)2E.6h(a);R(;i<2E.K;i++)G(3E(2E[i])){g[i]=2E[i].V.18;2E[i].V.18="3I"}e=l=="18"&&g[2E.K-1]!=U?"2F":(c&&c.52(l))||"";R(i=0;i<g.K;i++)G(g[i]!=U)2E[i].V.18=g[i]}G(l=="1y"&&e=="")e="1"}N G(f.4g){J h=l.1o(/\\-(\\w)/g,H(a,b){I b.2r()});e=f.4g[l]||f.4g[h];G(!/^\\d+(2X)?$/i.11(e)&&/^\\d/.11(e)){J j=V.1A,66=f.65.1A;f.65.1A=f.4g.1A;V.1A=e||0;e=V.aM+"2X";V.1A=j;f.65.1A=66}}I e},4h:H(l,h){J k=[];h=h||S;G(1j h.3h==\'12\')h=h.2z||h[0]&&h[0].2z||S;D.P(l,H(i,d){G(!d)I;G(d.1q==4L)d+=\'\';G(1j d=="23"){d=d.1o(/(<(\\w+)[^>]*?)\\/>/g,H(b,a,c){I c.1I(/^(aK|4f|7E|aG|4T|7A|aB|3n|az|ay|av)$/i)?b:a+"></"+c+">"});J f=D.3k(d).3y(),1v=h.3h("1v");J e=!f.1h("<au")&&[1,"<2A 7w=\'7w\'>","</2A>"]||!f.1h("<ar")&&[1,"<7v>","</7v>"]||f.1I(/^<(aq|22|am|ak|ai)/)&&[1,"<1T>","</1T>"]||!f.1h("<4F")&&[2,"<1T><22>","</22></1T>"]||(!f.1h("<af")||!f.1h("<ad"))&&[3,"<1T><22><4F>","</4F></22></1T>"]||!f.1h("<7E")&&[2,"<1T><22></22><7q>","</7q></1T>"]||D.14.1f&&[1,"1v<1v>","</1v>"]||[0,"",""];1v.4H=e[1]+d+e[2];1B(e[0]--)1v=1v.5T;G(D.14.1f){J g=!f.1h("<1T")&&f.1h("<22")<0?1v.1x&&1v.1x.3t:e[1]=="<1T>"&&f.1h("<22")<0?1v.3t:[];R(J j=g.K-1;j>=0;--j)G(D.Y(g[j],"22")&&!g[j].3t.K)g[j].1d.37(g[j]);G(/^\\s/.11(d))1v.39(h.5F(d.1I(/^\\s*/)[0]),1v.1x)}d=D.2d(1v.3t)}G(d.K===0&&(!D.Y(d,"3V")&&!D.Y(d,"2A")))I;G(d[0]==12||D.Y(d,"3V")||d.15)k.1p(d);N k=D.2R(k,d)});I k},1K:H(d,f,c){G(!d||d.16==3||d.16==8)I 12;J e=!D.4n(d),40=c!==12,1f=D.14.1f;f=e&&D.3X[f]||f;G(d.2j){J g=/5Q|4d|V/.11(f);G(f=="2W"&&D.14.2k)d.1d.64;G(f 1n d&&e&&!g){G(40){G(f=="O"&&D.Y(d,"4T")&&d.1d)7p"O a3 a1\'t 9V 9U";d[f]=c}G(D.Y(d,"3V")&&d.7i(f))I d.7i(f).76;I d[f]}G(1f&&e&&f=="V")I D.1K(d.V,"9T",c);G(40)d.9Q(f,""+c);J h=1f&&e&&g?d.4G(f,2):d.4G(f);I h===U?12:h}G(1f&&f=="1y"){G(40){d.6B=1;d.1E=(d.1E||"").1o(/7f\\([^)]*\\)/,"")+(3r(c)+\'\'=="9L"?"":"7f(1y="+c*7a+")")}I d.1E&&d.1E.1h("1y=")>=0?(3d(d.1E.1I(/1y=([^)]*)/)[1])/7a)+\'\':""}f=f.1o(/-([a-z])/9H,H(a,b){I b.2r()});G(40)d[f]=c;I d[f]},3k:H(a){I(a||"").1o(/^\\s+|\\s+$/g,"")},2d:H(b){J a=[];G(b!=U){J i=b.K;G(i==U||b.1R||b.4I||b.1k)a[0]=b;N 1B(i)a[--i]=b[i]}I a},2L:H(b,a){R(J i=0,K=a.K;i<K;i++)G(a[i]===b)I i;I-1},2R:H(a,b){J i=0,T,2S=a.K;G(D.14.1f){1B(T=b[i++])G(T.16!=8)a[2S++]=T}N 1B(T=b[i++])a[2S++]=T;I a},4r:H(a){J c=[],2o={};1U{R(J i=0,K=a.K;i<K;i++){J b=D.L(a[i]);G(!2o[b]){2o[b]=M;c.1p(a[i])}}}1V(e){c=a}I c},3C:H(c,a,d){J b=[];R(J i=0,K=c.K;i<K;i++)G(!d!=!a(c[i],i))b.1p(c[i]);I b},2l:H(d,a){J c=[];R(J i=0,K=d.K;i<K;i++){J b=a(d[i],i);G(b!=U)c[c.K]=b}I c.7d.1w([],c)}});J v=9B.9A.3y();D.14={5B:(v.1I(/.+(?:9y|9x|9w|9v)[\\/: ]([\\d.]+)/)||[])[1],2k:/75/.11(v),2G:/2G/.11(v),1f:/1f/.11(v)&&!/2G/.11(v),42:/42/.11(v)&&!/(9s|75)/.11(v)};J y=D.14.1f?"7o":"72";D.1l({71:!D.14.1f||S.70=="6Z",3X:{"R":"9n","9k":"1F","4i":y,72:y,7o:y,9h:"9f",9e:"9d",9b:"99"}});D.P({6W:H(a){I a.1d},97:H(a){I D.4S(a,"1d")},95:H(a){I D.3a(a,2,"2H")},91:H(a){I D.3a(a,2,"4l")},8Z:H(a){I D.4S(a,"2H")},8X:H(a){I D.4S(a,"4l")},8W:H(a){I D.5v(a.1d.1x,a)},8V:H(a){I D.5v(a.1x)},6Q:H(a){I D.Y(a,"8U")?a.8T||a.8S.S:D.2d(a.3t)}},H(c,d){D.17[c]=H(b){J a=D.2l(7,d);G(b&&1j b=="23")a=D.3g(b,a);I 7.2I(D.4r(a))}});D.P({6P:"3v",8Q:"6F",39:"6E",8P:"5q",8O:"7b"},H(c,b){D.17[c]=H(){J a=19;I 7.P(H(){R(J i=0,K=a.K;i<K;i++)D(a[i])[b](7)})}});D.P({8N:H(a){D.1K(7,a,"");G(7.16==1)7.5l(a)},8M:H(a){D.1F.1e(7,a)},8L:H(a){D.1F.21(7,a)},8K:H(a){D.1F[D.1F.3T(7,a)?"21":"1e"](7,a)},21:H(a){G(!a||D.1E(a,[7]).r.K){D("*",7).1e(7).P(H(){D.W.21(7);D.3b(7)});G(7.1d)7.1d.37(7)}},4E:H(){D(">*",7).21();1B(7.1x)7.37(7.1x)}},H(a,b){D.17[a]=H(){I 7.P(b,19)}});D.P(["6N","4b"],H(i,c){J b=c.3y();D.17[b]=H(a){I 7[0]==1b?D.14.2G&&S.1c["5t"+c]||D.14.2k&&1b["5s"+c]||S.70=="6Z"&&S.1C["5t"+c]||S.1c["5t"+c]:7[0]==S?29.2f(29.2f(S.1c["4y"+c],S.1C["4y"+c]),29.2f(S.1c["2i"+c],S.1C["2i"+c])):a==12?(7.K?D.1g(7[0],b):U):7.1g(b,a.1q==56?a:a+"2X")}});H 25(a,b){I a[0]&&3r(D.2a(a[0],b,M),10)||0}J C=D.14.2k&&3r(D.14.5B)<8H?"(?:[\\\\w*3m-]|\\\\\\\\.)":"(?:[\\\\w\\8F-\\8E*3m-]|\\\\\\\\.)",6L=2B 4v("^>\\\\s*("+C+"+)"),6J=2B 4v("^("+C+"+)(#)("+C+"+)"),6I=2B 4v("^([#.]?)("+C+"*)");D.1l({6H:{"":H(a,i,m){I m[2]=="*"||D.Y(a,m[2])},"#":H(a,i,m){I a.4G("2v")==m[2]},":":{8D:H(a,i,m){I i<m[3]-0},8C:H(a,i,m){I i>m[3]-0},3a:H(a,i,m){I m[3]-0==i},79:H(a,i,m){I m[3]-0==i},3o:H(a,i){I i==0},3S:H(a,i,m,r){I i==r.K-1},6D:H(a,i){I i%2==0},6C:H(a,i){I i%2},"3o-4u":H(a){I a.1d.3H("*")[0]==a},"3S-4u":H(a){I D.3a(a.1d.5T,1,"4l")==a},"8z-4u":H(a){I!D.3a(a.1d.5T,2,"4l")},6W:H(a){I a.1x},4E:H(a){I!a.1x},8y:H(a,i,m){I(a.6O||a.8x||D(a).1r()||"").1h(m[3])>=0},4j:H(a){I"1G"!=a.O&&D.1g(a,"18")!="2F"&&D.1g(a,"5g")!="1G"},1G:H(a){I"1G"==a.O||D.1g(a,"18")=="2F"||D.1g(a,"5g")=="1G"},8w:H(a){I!a.3R},3R:H(a){I a.3R},4J:H(a){I a.4J},2W:H(a){I a.2W||D.1K(a,"2W")},1r:H(a){I"1r"==a.O},5O:H(a){I"5O"==a.O},5L:H(a){I"5L"==a.O},5p:H(a){I"5p"==a.O},3Q:H(a){I"3Q"==a.O},5o:H(a){I"5o"==a.O},6A:H(a){I"6A"==a.O},6z:H(a){I"6z"==a.O},2s:H(a){I"2s"==a.O||D.Y(a,"2s")},4T:H(a){I/4T|2A|6y|2s/i.11(a.Y)},3T:H(a,i,m){I D.2q(m[3],a).K},8t:H(a){I/h\\d/i.11(a.Y)},8s:H(a){I D.3C(D.3O,H(b){I a==b.T}).K}}},6x:[/^(\\[) *@?([\\w-]+) *([!*$^~=]*) *(\'?"?)(.*?)\\4 *\\]/,/^(:)([\\w-]+)\\("?\'?(.*?(\\(.*?\\))?[^(]*?)"?\'?\\)/,2B 4v("^([:.#]*)("+C+"+)")],3g:H(a,c,b){J d,1t=[];1B(a&&a!=d){d=a;J f=D.1E(a,c,b);a=f.t.1o(/^\\s*,\\s*/,"");1t=b?c=f.r:D.2R(1t,f.r)}I 1t},2q:H(t,o){G(1j t!="23")I[t];G(o&&o.16!=1&&o.16!=9)I[];o=o||S;J d=[o],2o=[],3S,Y;1B(t&&3S!=t){J r=[];3S=t;t=D.3k(t);J l=Q,3j=6L,m=3j.2D(t);G(m){Y=m[1].2r();R(J i=0;d[i];i++)R(J c=d[i].1x;c;c=c.2H)G(c.16==1&&(Y=="*"||c.Y.2r()==Y))r.1p(c);d=r;t=t.1o(3j,"");G(t.1h(" ")==0)6M;l=M}N{3j=/^([>+~])\\s*(\\w*)/i;G((m=3j.2D(t))!=U){r=[];J k={};Y=m[2].2r();m=m[1];R(J j=0,3i=d.K;j<3i;j++){J n=m=="~"||m=="+"?d[j].2H:d[j].1x;R(;n;n=n.2H)G(n.16==1){J g=D.L(n);G(m=="~"&&k[g])1X;G(!Y||n.Y.2r()==Y){G(m=="~")k[g]=M;r.1p(n)}G(m=="+")1X}}d=r;t=D.3k(t.1o(3j,""));l=M}}G(t&&!l){G(!t.1h(",")){G(o==d[0])d.4s();2o=D.2R(2o,d);r=d=[o];t=" "+t.6v(1,t.K)}N{J h=6J;J m=h.2D(t);G(m){m=[0,m[2],m[3],m[1]]}N{h=6I;m=h.2D(t)}m[2]=m[2].1o(/\\\\/g,"");J f=d[d.K-1];G(m[1]=="#"&&f&&f.61&&!D.4n(f)){J p=f.61(m[2]);G((D.14.1f||D.14.2G)&&p&&1j p.2v=="23"&&p.2v!=m[2])p=D(\'[@2v="\'+m[2]+\'"]\',f)[0];d=r=p&&(!m[3]||D.Y(p,m[3]))?[p]:[]}N{R(J i=0;d[i];i++){J a=m[1]=="#"&&m[3]?m[3]:m[1]!=""||m[0]==""?"*":m[2];G(a=="*"&&d[i].Y.3y()=="49")a="3n";r=D.2R(r,d[i].3H(a))}G(m[1]==".")r=D.5m(r,m[2]);G(m[1]=="#"){J e=[];R(J i=0;r[i];i++)G(r[i].4G("2v")==m[2]){e=[r[i]];1X}r=e}d=r}t=t.1o(h,"")}}G(t){J b=D.1E(t,r);d=r=b.r;t=D.3k(b.t)}}G(t)d=[];G(d&&o==d[0])d.4s();2o=D.2R(2o,d);I 2o},5m:H(r,m,a){m=" "+m+" ";J c=[];R(J i=0;r[i];i++){J b=(" "+r[i].1F+" ").1h(m)>=0;G(!a&&b||a&&!b)c.1p(r[i])}I c},1E:H(t,r,h){J d;1B(t&&t!=d){d=t;J p=D.6x,m;R(J i=0;p[i];i++){m=p[i].2D(t);G(m){t=t.8r(m[0].K);m[2]=m[2].1o(/\\\\/g,"");1X}}G(!m)1X;G(m[1]==":"&&m[2]=="4Y")r=62.11(m[3])?D.1E(m[3],r,M).r:D(r).4Y(m[3]);N G(m[1]==".")r=D.5m(r,m[2],h);N G(m[1]=="["){J g=[],O=m[3];R(J i=0,3i=r.K;i<3i;i++){J a=r[i],z=a[D.3X[m[2]]||m[2]];G(z==U||/5Q|4d|2W/.11(m[2]))z=D.1K(a,m[2])||\'\';G((O==""&&!!z||O=="="&&z==m[5]||O=="!="&&z!=m[5]||O=="^="&&z&&!z.1h(m[5])||O=="$="&&z.6v(z.K-m[5].K)==m[5]||(O=="*="||O=="~=")&&z.1h(m[5])>=0)^h)g.1p(a)}r=g}N G(m[1]==":"&&m[2]=="3a-4u"){J e={},g=[],11=/(-?)(\\d*)n((?:\\+|-)?\\d*)/.2D(m[3]=="6D"&&"2n"||m[3]=="6C"&&"2n+1"||!/\\D/.11(m[3])&&"8q+"+m[3]||m[3]),3o=(11[1]+(11[2]||1))-0,d=11[3]-0;R(J i=0,3i=r.K;i<3i;i++){J j=r[i],1d=j.1d,2v=D.L(1d);G(!e[2v]){J c=1;R(J n=1d.1x;n;n=n.2H)G(n.16==1)n.4q=c++;e[2v]=M}J b=Q;G(3o==0){G(j.4q==d)b=M}N G((j.4q-d)%3o==0&&(j.4q-d)/3o>=0)b=M;G(b^h)g.1p(j)}r=g}N{J f=D.6H[m[1]];G(1j f=="49")f=f[m[2]];G(1j f=="23")f=6u("Q||H(a,i){I "+f+";}");r=D.3C(r,H(a,i){I f(a,i,m,r)},h)}}I{r:r,t:t}},4S:H(b,c){J a=[],1t=b[c];1B(1t&&1t!=S){G(1t.16==1)a.1p(1t);1t=1t[c]}I a},3a:H(a,e,c,b){e=e||1;J d=0;R(;a;a=a[c])G(a.16==1&&++d==e)1X;I a},5v:H(n,a){J r=[];R(;n;n=n.2H){G(n.16==1&&n!=a)r.1p(n)}I r}});D.W={1e:H(f,i,g,e){G(f.16==3||f.16==8)I;G(D.14.1f&&f.4I)f=1b;G(!g.24)g.24=7.24++;G(e!=12){J h=g;g=7.3M(h,H(){I h.1w(7,19)});g.L=e}J j=D.L(f,"3w")||D.L(f,"3w",{}),1H=D.L(f,"1H")||D.L(f,"1H",H(){G(1j D!="12"&&!D.W.5k)I D.W.1H.1w(19.3L.T,19)});1H.T=f;D.P(i.1R(/\\s+/),H(c,b){J a=b.1R(".");b=a[0];g.O=a[1];J d=j[b];G(!d){d=j[b]={};G(!D.W.2t[b]||D.W.2t[b].4p.1k(f)===Q){G(f.3K)f.3K(b,1H,Q);N G(f.6t)f.6t("4o"+b,1H)}}d[g.24]=g;D.W.26[b]=M});f=U},24:1,26:{},21:H(e,h,f){G(e.16==3||e.16==8)I;J i=D.L(e,"3w"),1L,5i;G(i){G(h==12||(1j h=="23"&&h.8p(0)=="."))R(J g 1n i)7.21(e,g+(h||""));N{G(h.O){f=h.2y;h=h.O}D.P(h.1R(/\\s+/),H(b,a){J c=a.1R(".");a=c[0];G(i[a]){G(f)2U i[a][f.24];N R(f 1n i[a])G(!c[1]||i[a][f].O==c[1])2U i[a][f];R(1L 1n i[a])1X;G(!1L){G(!D.W.2t[a]||D.W.2t[a].4A.1k(e)===Q){G(e.6p)e.6p(a,D.L(e,"1H"),Q);N G(e.6n)e.6n("4o"+a,D.L(e,"1H"))}1L=U;2U i[a]}}})}R(1L 1n i)1X;G(!1L){J d=D.L(e,"1H");G(d)d.T=U;D.3b(e,"3w");D.3b(e,"1H")}}},1P:H(h,c,f,g,i){c=D.2d(c);G(h.1h("!")>=0){h=h.3s(0,-1);J a=M}G(!f){G(7.26[h])D("*").1e([1b,S]).1P(h,c)}N{G(f.16==3||f.16==8)I 12;J b,1L,17=D.1D(f[h]||U),W=!c[0]||!c[0].32;G(W){c.6h({O:h,2J:f,32:H(){},3J:H(){},4C:1z()});c[0][E]=M}c[0].O=h;G(a)c[0].6m=M;J d=D.L(f,"1H");G(d)b=d.1w(f,c);G((!17||(D.Y(f,\'a\')&&h=="4V"))&&f["4o"+h]&&f["4o"+h].1w(f,c)===Q)b=Q;G(W)c.4s();G(i&&D.1D(i)){1L=i.1w(f,b==U?c:c.7d(b));G(1L!==12)b=1L}G(17&&g!==Q&&b!==Q&&!(D.Y(f,\'a\')&&h=="4V")){7.5k=M;1U{f[h]()}1V(e){}}7.5k=Q}I b},1H:H(b){J a,1L,38,5f,4m;b=19[0]=D.W.6l(b||1b.W);38=b.O.1R(".");b.O=38[0];38=38[1];5f=!38&&!b.6m;4m=(D.L(7,"3w")||{})[b.O];R(J j 1n 4m){J c=4m[j];G(5f||c.O==38){b.2y=c;b.L=c.L;1L=c.1w(7,19);G(a!==Q)a=1L;G(1L===Q){b.32();b.3J()}}}I a},6l:H(b){G(b[E]==M)I b;J d=b;b={8o:d};J c="8n 8m 8l 8k 2s 8j 47 5d 6j 5E 8i L 8h 8g 4K 2y 5a 59 8e 8b 58 6f 8a 88 4k 87 86 84 6d 2J 4C 6c O 82 81 35".1R(" ");R(J i=c.K;i;i--)b[c[i]]=d[c[i]];b[E]=M;b.32=H(){G(d.32)d.32();d.80=Q};b.3J=H(){G(d.3J)d.3J();d.7Z=M};b.4C=b.4C||1z();G(!b.2J)b.2J=b.6d||S;G(b.2J.16==3)b.2J=b.2J.1d;G(!b.4k&&b.4K)b.4k=b.4K==b.2J?b.6c:b.4K;G(b.58==U&&b.5d!=U){J a=S.1C,1c=S.1c;b.58=b.5d+(a&&a.2e||1c&&1c.2e||0)-(a.6b||0);b.6f=b.6j+(a&&a.2c||1c&&1c.2c||0)-(a.6a||0)}G(!b.35&&((b.47||b.47===0)?b.47:b.5a))b.35=b.47||b.5a;G(!b.59&&b.5E)b.59=b.5E;G(!b.35&&b.2s)b.35=(b.2s&1?1:(b.2s&2?3:(b.2s&4?2:0)));I b},3M:H(a,b){b.24=a.24=a.24||b.24||7.24++;I b},2t:{27:{4p:H(){55();I},4A:H(){I}},3D:{4p:H(){G(D.14.1f)I Q;D(7).2O("53",D.W.2t.3D.2y);I M},4A:H(){G(D.14.1f)I Q;D(7).4e("53",D.W.2t.3D.2y);I M},2y:H(a){G(F(a,7))I M;a.O="3D";I D.W.1H.1w(7,19)}},3N:{4p:H(){G(D.14.1f)I Q;D(7).2O("51",D.W.2t.3N.2y);I M},4A:H(){G(D.14.1f)I Q;D(7).4e("51",D.W.2t.3N.2y);I M},2y:H(a){G(F(a,7))I M;a.O="3N";I D.W.1H.1w(7,19)}}}};D.17.1l({2O:H(c,a,b){I c=="4X"?7.2V(c,a,b):7.P(H(){D.W.1e(7,c,b||a,b&&a)})},2V:H(d,b,c){J e=D.W.3M(c||b,H(a){D(7).4e(a,e);I(c||b).1w(7,19)});I 7.P(H(){D.W.1e(7,d,e,c&&b)})},4e:H(a,b){I 7.P(H(){D.W.21(7,a,b)})},1P:H(c,a,b){I 7.P(H(){D.W.1P(c,a,7,M,b)})},5C:H(c,a,b){I 7[0]&&D.W.1P(c,a,7[0],Q,b)},2m:H(b){J c=19,i=1;1B(i<c.K)D.W.3M(b,c[i++]);I 7.4V(D.W.3M(b,H(a){7.4Z=(7.4Z||0)%i;a.32();I c[7.4Z++].1w(7,19)||Q}))},7X:H(a,b){I 7.2O(\'3D\',a).2O(\'3N\',b)},27:H(a){55();G(D.2Q)a.1k(S,D);N D.3A.1p(H(){I a.1k(7,D)});I 7}});D.1l({2Q:Q,3A:[],27:H(){G(!D.2Q){D.2Q=M;G(D.3A){D.P(D.3A,H(){7.1k(S)});D.3A=U}D(S).5C("27")}}});J x=Q;H 55(){G(x)I;x=M;G(S.3K&&!D.14.2G)S.3K("69",D.27,Q);G(D.14.1f&&1b==1S)(H(){G(D.2Q)I;1U{S.1C.7V("1A")}1V(3e){3B(19.3L,0);I}D.27()})();G(D.14.2G)S.3K("69",H(){G(D.2Q)I;R(J i=0;i<S.4W.K;i++)G(S.4W[i].3R){3B(19.3L,0);I}D.27()},Q);G(D.14.2k){J a;(H(){G(D.2Q)I;G(S.3f!="68"&&S.3f!="1J"){3B(19.3L,0);I}G(a===12)a=D("V, 7A[7U=7S]").K;G(S.4W.K!=a){3B(19.3L,0);I}D.27()})()}D.W.1e(1b,"43",D.27)}D.P(("7R,7Q,43,85,4y,4X,4V,7P,"+"7O,7N,89,53,51,7M,2A,"+"5o,7L,7K,8d,3e").1R(","),H(i,b){D.17[b]=H(a){I a?7.2O(b,a):7.1P(b)}});J F=H(a,c){J b=a.4k;1B(b&&b!=c)1U{b=b.1d}1V(3e){b=c}I b==c};D(1b).2O("4X",H(){D("*").1e(S).4e()});D.17.1l({67:D.17.43,43:H(g,d,c){G(1j g!=\'23\')I 7.67(g);J e=g.1h(" ");G(e>=0){J i=g.3s(e,g.K);g=g.3s(0,e)}c=c||H(){};J f="2P";G(d)G(D.1D(d)){c=d;d=U}N{d=D.3n(d);f="6g"}J h=7;D.3Y({1a:g,O:f,1O:"2K",L:d,1J:H(a,b){G(b=="1W"||b=="7J")h.2K(i?D("<1v/>").3v(a.4U.1o(/<1m(.|\\s)*?\\/1m>/g,"")).2q(i):a.4U);h.P(c,[a.4U,b,a])}});I 7},aL:H(){I D.3n(7.7I())},7I:H(){I 7.2l(H(){I D.Y(7,"3V")?D.2d(7.aH):7}).1E(H(){I 7.34&&!7.3R&&(7.4J||/2A|6y/i.11(7.Y)||/1r|1G|3Q/i.11(7.O))}).2l(H(i,c){J b=D(7).6e();I b==U?U:b.1q==2p?D.2l(b,H(a,i){I{34:c.34,2x:a}}):{34:c.34,2x:b}}).3p()}});D.P("7H,7G,7F,7D,7C,7B".1R(","),H(i,o){D.17[o]=H(f){I 7.2O(o,f)}});J B=1z();D.1l({3p:H(d,b,a,c){G(D.1D(b)){a=b;b=U}I D.3Y({O:"2P",1a:d,L:b,1W:a,1O:c})},aE:H(b,a){I D.3p(b,U,a,"1m")},aD:H(c,b,a){I D.3p(c,b,a,"3z")},aC:H(d,b,a,c){G(D.1D(b)){a=b;b={}}I D.3Y({O:"6g",1a:d,L:b,1W:a,1O:c})},aA:H(a){D.1l(D.60,a)},60:{1a:5Z.5Q,26:M,O:"2P",2T:0,7z:"4R/x-ax-3V-aw",7x:M,31:M,L:U,5Y:U,3Q:U,4Q:{2N:"4R/2N, 1r/2N",2K:"1r/2K",1m:"1r/4t, 4R/4t",3z:"4R/3z, 1r/4t",1r:"1r/as",4w:"*/*"}},4z:{},3Y:H(s){s=D.1l(M,s,D.1l(M,{},D.60,s));J g,2Z=/=\\?(&|$)/g,1u,L,O=s.O.2r();G(s.L&&s.7x&&1j s.L!="23")s.L=D.3n(s.L);G(s.1O=="4P"){G(O=="2P"){G(!s.1a.1I(2Z))s.1a+=(s.1a.1I(/\\?/)?"&":"?")+(s.4P||"7u")+"=?"}N G(!s.L||!s.L.1I(2Z))s.L=(s.L?s.L+"&":"")+(s.4P||"7u")+"=?";s.1O="3z"}G(s.1O=="3z"&&(s.L&&s.L.1I(2Z)||s.1a.1I(2Z))){g="4P"+B++;G(s.L)s.L=(s.L+"").1o(2Z,"="+g+"$1");s.1a=s.1a.1o(2Z,"="+g+"$1");s.1O="1m";1b[g]=H(a){L=a;1W();1J();1b[g]=12;1U{2U 1b[g]}1V(e){}G(i)i.37(h)}}G(s.1O=="1m"&&s.1Y==U)s.1Y=Q;G(s.1Y===Q&&O=="2P"){J j=1z();J k=s.1a.1o(/(\\?|&)3m=.*?(&|$)/,"$ap="+j+"$2");s.1a=k+((k==s.1a)?(s.1a.1I(/\\?/)?"&":"?")+"3m="+j:"")}G(s.L&&O=="2P"){s.1a+=(s.1a.1I(/\\?/)?"&":"?")+s.L;s.L=U}G(s.26&&!D.4O++)D.W.1P("7H");J n=/^(?:\\w+:)?\\/\\/([^\\/?#]+)/;G(s.1O=="1m"&&O=="2P"&&n.11(s.1a)&&n.2D(s.1a)[1]!=5Z.al){J i=S.3H("6w")[0];J h=S.3h("1m");h.4d=s.1a;G(s.7t)h.aj=s.7t;G(!g){J l=Q;h.ah=h.ag=H(){G(!l&&(!7.3f||7.3f=="68"||7.3f=="1J")){l=M;1W();1J();i.37(h)}}}i.3U(h);I 12}J m=Q;J c=1b.7s?2B 7s("ae.ac"):2B 7r();G(s.5Y)c.6R(O,s.1a,s.31,s.5Y,s.3Q);N c.6R(O,s.1a,s.31);1U{G(s.L)c.4B("ab-aa",s.7z);G(s.5S)c.4B("a9-5R-a8",D.4z[s.1a]||"a7, a6 a5 a4 5N:5N:5N a2");c.4B("X-9Z-9Y","7r");c.4B("9W",s.1O&&s.4Q[s.1O]?s.4Q[s.1O]+", */*":s.4Q.4w)}1V(e){}G(s.7m&&s.7m(c,s)===Q){s.26&&D.4O--;c.7l();I Q}G(s.26)D.W.1P("7B",[c,s]);J d=H(a){G(!m&&c&&(c.3f==4||a=="2T")){m=M;G(f){7k(f);f=U}1u=a=="2T"&&"2T"||!D.7j(c)&&"3e"||s.5S&&D.7h(c,s.1a)&&"7J"||"1W";G(1u=="1W"){1U{L=D.6X(c,s.1O,s.9S)}1V(e){1u="5J"}}G(1u=="1W"){J b;1U{b=c.5I("7g-5R")}1V(e){}G(s.5S&&b)D.4z[s.1a]=b;G(!g)1W()}N D.5H(s,c,1u);1J();G(s.31)c=U}};G(s.31){J f=4I(d,13);G(s.2T>0)3B(H(){G(c){c.7l();G(!m)d("2T")}},s.2T)}1U{c.9P(s.L)}1V(e){D.5H(s,c,U,e)}G(!s.31)d();H 1W(){G(s.1W)s.1W(L,1u);G(s.26)D.W.1P("7C",[c,s])}H 1J(){G(s.1J)s.1J(c,1u);G(s.26)D.W.1P("7F",[c,s]);G(s.26&&!--D.4O)D.W.1P("7G")}I c},5H:H(s,a,b,e){G(s.3e)s.3e(a,b,e);G(s.26)D.W.1P("7D",[a,s,e])},4O:0,7j:H(a){1U{I!a.1u&&5Z.9O=="5p:"||(a.1u>=7e&&a.1u<9N)||a.1u==7c||a.1u==9K||D.14.2k&&a.1u==12}1V(e){}I Q},7h:H(a,c){1U{J b=a.5I("7g-5R");I a.1u==7c||b==D.4z[c]||D.14.2k&&a.1u==12}1V(e){}I Q},6X:H(a,c,b){J d=a.5I("9J-O"),2N=c=="2N"||!c&&d&&d.1h("2N")>=0,L=2N?a.9I:a.4U;G(2N&&L.1C.2j=="5J")7p"5J";G(b)L=b(L,c);G(c=="1m")D.5u(L);G(c=="3z")L=6u("("+L+")");I L},3n:H(a){J s=[];G(a.1q==2p||a.5w)D.P(a,H(){s.1p(3u(7.34)+"="+3u(7.2x))});N R(J j 1n a)G(a[j]&&a[j].1q==2p)D.P(a[j],H(){s.1p(3u(j)+"="+3u(7))});N s.1p(3u(j)+"="+3u(D.1D(a[j])?a[j]():a[j]));I s.6s("&").1o(/%20/g,"+")}});D.17.1l({1N:H(c,b){I c?7.2g({1Z:"1N",2h:"1N",1y:"1N"},c,b):7.1E(":1G").P(H(){7.V.18=7.5D||"";G(D.1g(7,"18")=="2F"){J a=D("<"+7.2j+" />").6P("1c");7.V.18=a.1g("18");G(7.V.18=="2F")7.V.18="3I";a.21()}}).3l()},1M:H(b,a){I b?7.2g({1Z:"1M",2h:"1M",1y:"1M"},b,a):7.1E(":4j").P(H(){7.5D=7.5D||D.1g(7,"18");7.V.18="2F"}).3l()},78:D.17.2m,2m:H(a,b){I D.1D(a)&&D.1D(b)?7.78.1w(7,19):a?7.2g({1Z:"2m",2h:"2m",1y:"2m"},a,b):7.P(H(){D(7)[D(7).3F(":1G")?"1N":"1M"]()})},9G:H(b,a){I 7.2g({1Z:"1N"},b,a)},9F:H(b,a){I 7.2g({1Z:"1M"},b,a)},9E:H(b,a){I 7.2g({1Z:"2m"},b,a)},9D:H(b,a){I 7.2g({1y:"1N"},b,a)},9M:H(b,a){I 7.2g({1y:"1M"},b,a)},9C:H(c,a,b){I 7.2g({1y:a},c,b)},2g:H(k,j,i,g){J h=D.77(j,i,g);I 7[h.36===Q?"P":"36"](H(){G(7.16!=1)I Q;J f=D.1l({},h),p,1G=D(7).3F(":1G"),46=7;R(p 1n k){G(k[p]=="1M"&&1G||k[p]=="1N"&&!1G)I f.1J.1k(7);G(p=="1Z"||p=="2h"){f.18=D.1g(7,"18");f.33=7.V.33}}G(f.33!=U)7.V.33="1G";f.45=D.1l({},k);D.P(k,H(c,a){J e=2B D.28(46,f,c);G(/2m|1N|1M/.11(a))e[a=="2m"?1G?"1N":"1M":a](k);N{J b=a.6r().1I(/^([+-]=)?([\\d+-.]+)(.*)$/),2b=e.1t(M)||0;G(b){J d=3d(b[2]),2M=b[3]||"2X";G(2M!="2X"){46.V[c]=(d||1)+2M;2b=((d||1)/e.1t(M))*2b;46.V[c]=2b+2M}G(b[1])d=((b[1]=="-="?-1:1)*d)+2b;e.3G(2b,d,2M)}N e.3G(2b,a,"")}});I M})},36:H(a,b){G(D.1D(a)||(a&&a.1q==2p)){b=a;a="28"}G(!a||(1j a=="23"&&!b))I A(7[0],a);I 7.P(H(){G(b.1q==2p)A(7,a,b);N{A(7,a).1p(b);G(A(7,a).K==1)b.1k(7)}})},9X:H(b,c){J a=D.3O;G(b)7.36([]);7.P(H(){R(J i=a.K-1;i>=0;i--)G(a[i].T==7){G(c)a[i](M);a.7n(i,1)}});G(!c)7.5A();I 7}});J A=H(b,c,a){G(b){c=c||"28";J q=D.L(b,c+"36");G(!q||a)q=D.L(b,c+"36",D.2d(a))}I q};D.17.5A=H(a){a=a||"28";I 7.P(H(){J q=A(7,a);q.4s();G(q.K)q[0].1k(7)})};D.1l({77:H(b,a,c){J d=b&&b.1q==a0?b:{1J:c||!c&&a||D.1D(b)&&b,2u:b,41:c&&a||a&&a.1q!=9t&&a};d.2u=(d.2u&&d.2u.1q==4L?d.2u:D.28.5K[d.2u])||D.28.5K.74;d.5M=d.1J;d.1J=H(){G(d.36!==Q)D(7).5A();G(D.1D(d.5M))d.5M.1k(7)};I d},41:{73:H(p,n,b,a){I b+a*p},5P:H(p,n,b,a){I((-29.9r(p*29.9q)/2)+0.5)*a+b}},3O:[],48:U,28:H(b,c,a){7.15=c;7.T=b;7.1i=a;G(!c.3Z)c.3Z={}}});D.28.44={4D:H(){G(7.15.2Y)7.15.2Y.1k(7.T,7.1z,7);(D.28.2Y[7.1i]||D.28.2Y.4w)(7);G(7.1i=="1Z"||7.1i=="2h")7.T.V.18="3I"},1t:H(a){G(7.T[7.1i]!=U&&7.T.V[7.1i]==U)I 7.T[7.1i];J r=3d(D.1g(7.T,7.1i,a));I r&&r>-9p?r:3d(D.2a(7.T,7.1i))||0},3G:H(c,b,d){7.5V=1z();7.2b=c;7.3l=b;7.2M=d||7.2M||"2X";7.1z=7.2b;7.2S=7.4N=0;7.4D();J e=7;H t(a){I e.2Y(a)}t.T=7.T;D.3O.1p(t);G(D.48==U){D.48=4I(H(){J a=D.3O;R(J i=0;i<a.K;i++)G(!a[i]())a.7n(i--,1);G(!a.K){7k(D.48);D.48=U}},13)}},1N:H(){7.15.3Z[7.1i]=D.1K(7.T.V,7.1i);7.15.1N=M;7.3G(0,7.1t());G(7.1i=="2h"||7.1i=="1Z")7.T.V[7.1i]="9m";D(7.T).1N()},1M:H(){7.15.3Z[7.1i]=D.1K(7.T.V,7.1i);7.15.1M=M;7.3G(7.1t(),0)},2Y:H(a){J t=1z();G(a||t>7.15.2u+7.5V){7.1z=7.3l;7.2S=7.4N=1;7.4D();7.15.45[7.1i]=M;J b=M;R(J i 1n 7.15.45)G(7.15.45[i]!==M)b=Q;G(b){G(7.15.18!=U){7.T.V.33=7.15.33;7.T.V.18=7.15.18;G(D.1g(7.T,"18")=="2F")7.T.V.18="3I"}G(7.15.1M)7.T.V.18="2F";G(7.15.1M||7.15.1N)R(J p 1n 7.15.45)D.1K(7.T.V,p,7.15.3Z[p])}G(b)7.15.1J.1k(7.T);I Q}N{J n=t-7.5V;7.4N=n/7.15.2u;7.2S=D.41[7.15.41||(D.41.5P?"5P":"73")](7.4N,n,0,1,7.15.2u);7.1z=7.2b+((7.3l-7.2b)*7.2S);7.4D()}I M}};D.1l(D.28,{5K:{9l:9j,9i:7e,74:9g},2Y:{2e:H(a){a.T.2e=a.1z},2c:H(a){a.T.2c=a.1z},1y:H(a){D.1K(a.T.V,"1y",a.1z)},4w:H(a){a.T.V[a.1i]=a.1z+a.2M}}});D.17.2i=H(){J b=0,1S=0,T=7[0],3q;G(T)ao(D.14){J d=T.1d,4a=T,1s=T.1s,1Q=T.2z,5U=2k&&3r(5B)<9c&&!/9a/i.11(v),1g=D.2a,3c=1g(T,"30")=="3c";G(T.7y){J c=T.7y();1e(c.1A+29.2f(1Q.1C.2e,1Q.1c.2e),c.1S+29.2f(1Q.1C.2c,1Q.1c.2c));1e(-1Q.1C.6b,-1Q.1C.6a)}N{1e(T.5X,T.5W);1B(1s){1e(1s.5X,1s.5W);G(42&&!/^t(98|d|h)$/i.11(1s.2j)||2k&&!5U)2C(1s);G(!3c&&1g(1s,"30")=="3c")3c=M;4a=/^1c$/i.11(1s.2j)?4a:1s;1s=1s.1s}1B(d&&d.2j&&!/^1c|2K$/i.11(d.2j)){G(!/^96|1T.*$/i.11(1g(d,"18")))1e(-d.2e,-d.2c);G(42&&1g(d,"33")!="4j")2C(d);d=d.1d}G((5U&&(3c||1g(4a,"30")=="5x"))||(42&&1g(4a,"30")!="5x"))1e(-1Q.1c.5X,-1Q.1c.5W);G(3c)1e(29.2f(1Q.1C.2e,1Q.1c.2e),29.2f(1Q.1C.2c,1Q.1c.2c))}3q={1S:1S,1A:b}}H 2C(a){1e(D.2a(a,"6V",M),D.2a(a,"6U",M))}H 1e(l,t){b+=3r(l,10)||0;1S+=3r(t,10)||0}I 3q};D.17.1l({30:H(){J a=0,1S=0,3q;G(7[0]){J b=7.1s(),2i=7.2i(),4c=/^1c|2K$/i.11(b[0].2j)?{1S:0,1A:0}:b.2i();2i.1S-=25(7,\'94\');2i.1A-=25(7,\'aF\');4c.1S+=25(b,\'6U\');4c.1A+=25(b,\'6V\');3q={1S:2i.1S-4c.1S,1A:2i.1A-4c.1A}}I 3q},1s:H(){J a=7[0].1s;1B(a&&(!/^1c|2K$/i.11(a.2j)&&D.1g(a,\'30\')==\'93\'))a=a.1s;I D(a)}});D.P([\'5e\',\'5G\'],H(i,b){J c=\'4y\'+b;D.17[c]=H(a){G(!7[0])I;I a!=12?7.P(H(){7==1b||7==S?1b.92(!i?a:D(1b).2e(),i?a:D(1b).2c()):7[c]=a}):7[0]==1b||7[0]==S?46[i?\'aI\':\'aJ\']||D.71&&S.1C[c]||S.1c[c]:7[0][c]}});D.P(["6N","4b"],H(i,b){J c=i?"5e":"5G",4f=i?"6k":"6i";D.17["5s"+b]=H(){I 7[b.3y()]()+25(7,"57"+c)+25(7,"57"+4f)};D.17["90"+b]=H(a){I 7["5s"+b]()+25(7,"2C"+c+"4b")+25(7,"2C"+4f+"4b")+(a?25(7,"6S"+c)+25(7,"6S"+4f):0)}})})();',62,669,'|||||||this|||||||||||||||||||||||||||||||||||if|function|return|var|length|data|true|else|type|each|false|for|document|elem|null|style|event||nodeName|||test|undefined||browser|options|nodeType|fn|display|arguments|url|window|body|parentNode|add|msie|css|indexOf|prop|typeof|call|extend|script|in|replace|push|constructor|text|offsetParent|cur|status|div|apply|firstChild|opacity|now|left|while|documentElement|isFunction|filter|className|hidden|handle|match|complete|attr|ret|hide|show|dataType|trigger|doc|split|top|table|try|catch|success|break|cache|height||remove|tbody|string|guid|num|global|ready|fx|Math|curCSS|start|scrollTop|makeArray|scrollLeft|max|animate|width|offset|tagName|safari|map|toggle||done|Array|find|toUpperCase|button|special|duration|id|copy|value|handler|ownerDocument|select|new|border|exec|stack|none|opera|nextSibling|pushStack|target|html|inArray|unit|xml|bind|GET|isReady|merge|pos|timeout|delete|one|selected|px|step|jsre|position|async|preventDefault|overflow|name|which|queue|removeChild|namespace|insertBefore|nth|removeData|fixed|parseFloat|error|readyState|multiFilter|createElement|rl|re|trim|end|_|param|first|get|results|parseInt|slice|childNodes|encodeURIComponent|append|events|elems|toLowerCase|json|readyList|setTimeout|grep|mouseenter|color|is|custom|getElementsByTagName|block|stopPropagation|addEventListener|callee|proxy|mouseleave|timers|defaultView|password|disabled|last|has|appendChild|form|domManip|props|ajax|orig|set|easing|mozilla|load|prototype|curAnim|self|charCode|timerId|object|offsetChild|Width|parentOffset|src|unbind|br|currentStyle|clean|float|visible|relatedTarget|previousSibling|handlers|isXMLDoc|on|setup|nodeIndex|unique|shift|javascript|child|RegExp|_default|deep|scroll|lastModified|teardown|setRequestHeader|timeStamp|update|empty|tr|getAttribute|innerHTML|setInterval|checked|fromElement|Number|jQuery|state|active|jsonp|accepts|application|dir|input|responseText|click|styleSheets|unload|not|lastToggle|outline|mouseout|getPropertyValue|mouseover|getComputedStyle|bindReady|String|padding|pageX|metaKey|keyCode|getWH|andSelf|clientX|Left|all|visibility|container|index|init|triggered|removeAttribute|classFilter|prevObject|submit|file|after|windowData|inner|client|globalEval|sibling|jquery|absolute|clone|wrapAll|dequeue|version|triggerHandler|oldblock|ctrlKey|createTextNode|Top|handleError|getResponseHeader|parsererror|speeds|checkbox|old|00|radio|swing|href|Modified|ifModified|lastChild|safari2|startTime|offsetTop|offsetLeft|username|location|ajaxSettings|getElementById|isSimple|values|selectedIndex|runtimeStyle|rsLeft|_load|loaded|DOMContentLoaded|clientTop|clientLeft|toElement|srcElement|val|pageY|POST|unshift|Bottom|clientY|Right|fix|exclusive|detachEvent|cloneNode|removeEventListener|swap|toString|join|attachEvent|eval|substr|head|parse|textarea|reset|image|zoom|odd|even|before|prepend|exclude|expr|quickClass|quickID|uuid|quickChild|continue|Height|textContent|appendTo|contents|open|margin|evalScript|borderTopWidth|borderLeftWidth|parent|httpData|setArray|CSS1Compat|compatMode|boxModel|cssFloat|linear|def|webkit|nodeValue|speed|_toggle|eq|100|replaceWith|304|concat|200|alpha|Last|httpNotModified|getAttributeNode|httpSuccess|clearInterval|abort|beforeSend|splice|styleFloat|throw|colgroup|XMLHttpRequest|ActiveXObject|scriptCharset|callback|fieldset|multiple|processData|getBoundingClientRect|contentType|link|ajaxSend|ajaxSuccess|ajaxError|col|ajaxComplete|ajaxStop|ajaxStart|serializeArray|notmodified|keypress|keydown|change|mouseup|mousedown|dblclick|focus|blur|stylesheet|hasClass|rel|doScroll|black|hover|solid|cancelBubble|returnValue|wheelDelta|view|round|shiftKey|resize|screenY|screenX|relatedNode|mousemove|prevValue|originalTarget|offsetHeight|keyup|newValue|offsetWidth|eventPhase|detail|currentTarget|cancelable|bubbles|attrName|attrChange|altKey|originalEvent|charAt|0n|substring|animated|header|noConflict|line|enabled|innerText|contains|only|weight|font|gt|lt|uFFFF|u0128|size|417|Boolean|Date|toggleClass|removeClass|addClass|removeAttr|replaceAll|insertAfter|prependTo|wrap|contentWindow|contentDocument|iframe|children|siblings|prevAll|wrapInner|nextAll|outer|prev|scrollTo|static|marginTop|next|inline|parents|able|cellSpacing|adobeair|cellspacing|522|maxLength|maxlength|readOnly|400|readonly|fast|600|class|slow|1px|htmlFor|reverse|10000|PI|cos|compatible|Function|setData|ie|ra|it|rv|getData|userAgent|navigator|fadeTo|fadeIn|slideToggle|slideUp|slideDown|ig|responseXML|content|1223|NaN|fadeOut|300|protocol|send|setAttribute|option|dataFilter|cssText|changed|be|Accept|stop|With|Requested|Object|can|GMT|property|1970|Jan|01|Thu|Since|If|Type|Content|XMLHTTP|th|Microsoft|td|onreadystatechange|onload|cap|charset|colg|host|tfoot|specified|with|1_|thead|leg|plain|attributes|opt|embed|urlencoded|www|area|hr|ajaxSetup|meta|post|getJSON|getScript|marginLeft|img|elements|pageYOffset|pageXOffset|abbr|serialize|pixelLeft'.split('|'),0,{}));

var Drupal = Drupal || { 'settings': {}, 'behaviors': {}, 'themes': {}, 'locale': {} };

/**
 * Set the variable that indicates if JavaScript behaviors should be applied
 */
Drupal.jsEnabled = true;

/**
 * Attach all registered behaviors to a page element.
 *
 * Behaviors are event-triggered actions that attach to page elements, enhancing
 * default non-Javascript UIs. Behaviors are registered in the Drupal.behaviors
 * object as follows:
 * @code
 *    Drupal.behaviors.behaviorName = function () {
 *      ...
 *    };
 * @endcode
 *
 * Drupal.attachBehaviors is added below to the jQuery ready event and so
 * runs on initial page load. Developers implementing AHAH/AJAX in their
 * solutions should also call this function after new page content has been
 * loaded, feeding in an element to be processed, in order to attach all
 * behaviors to the new content.
 *
 * Behaviors should use a class in the form behaviorName-processed to ensure
 * the behavior is attached only once to a given element. (Doing so enables
 * the reprocessing of given elements, which may be needed on occasion despite
 * the ability to limit behavior attachment to a particular element.)
 *
 * @param context
 *   An element to attach behaviors to. If none is given, the document element
 *   is used.
 */
Drupal.attachBehaviors = function(context) {
  context = context || document;
  // Execute all of them.
  jQuery.each(Drupal.behaviors, function() {
    this(context);
  });
};

/**
 * Encode special characters in a plain-text string for display as HTML.
 */
Drupal.checkPlain = function(str) {
  str = String(str);
  var replace = { '&': '&amp;', '"': '&quot;', '<': '&lt;', '>': '&gt;' };
  for (var character in replace) {
    var regex = new RegExp(character, 'g');
    str = str.replace(regex, replace[character]);
  }
  return str;
};

/**
 * Translate strings to the page language or a given language.
 *
 * See the documentation of the server-side t() function for further details.
 *
 * @param str
 *   A string containing the English string to translate.
 * @param args
 *   An object of replacements pairs to make after translation. Incidences
 *   of any key in this array are replaced with the corresponding value.
 *   Based on the first character of the key, the value is escaped and/or themed:
 *    - !variable: inserted as is
 *    - @variable: escape plain text to HTML (Drupal.checkPlain)
 *    - %variable: escape text and theme as a placeholder for user-submitted
 *      content (checkPlain + Drupal.theme('placeholder'))
 * @return
 *   The translated string.
 */
Drupal.t = function(str, args) {
  // Fetch the localized version of the string.
  if (Drupal.locale.strings && Drupal.locale.strings[str]) {
    str = Drupal.locale.strings[str];
  }

  if (args) {
    // Transform arguments before inserting them
    for (var key in args) {
      switch (key.charAt(0)) {
        // Escaped only
        case '@':
          args[key] = Drupal.checkPlain(args[key]);
        break;
        // Pass-through
        case '!':
          break;
        // Escaped and placeholder
        case '%':
        default:
          args[key] = Drupal.theme('placeholder', args[key]);
          break;
      }
      str = str.replace(key, args[key]);
    }
  }
  return str;
};

/**
 * Format a string containing a count of items.
 *
 * This function ensures that the string is pluralized correctly. Since Drupal.t() is
 * called by this function, make sure not to pass already-localized strings to it.
 *
 * See the documentation of the server-side format_plural() function for further details.
 *
 * @param count
 *   The item count to display.
 * @param singular
 *   The string for the singular case. Please make sure it is clear this is
 *   singular, to ease translation (e.g. use "1 new comment" instead of "1 new").
 *   Do not use @count in the singular string.
 * @param plural
 *   The string for the plural case. Please make sure it is clear this is plural,
 *   to ease translation. Use @count in place of the item count, as in "@count
 *   new comments".
 * @param args
 *   An object of replacements pairs to make after translation. Incidences
 *   of any key in this array are replaced with the corresponding value.
 *   Based on the first character of the key, the value is escaped and/or themed:
 *    - !variable: inserted as is
 *    - @variable: escape plain text to HTML (Drupal.checkPlain)
 *    - %variable: escape text and theme as a placeholder for user-submitted
 *      content (checkPlain + Drupal.theme('placeholder'))
 *   Note that you do not need to include @count in this array.
 *   This replacement is done automatically for the plural case.
 * @return
 *   A translated string.
 */
Drupal.formatPlural = function(count, singular, plural, args) {
  var args = args || {};
  args['@count'] = count;
  // Determine the index of the plural form.
  var index = Drupal.locale.pluralFormula ? Drupal.locale.pluralFormula(args['@count']) : ((args['@count'] == 1) ? 0 : 1);

  if (index == 0) {
    return Drupal.t(singular, args);
  }
  else if (index == 1) {
    return Drupal.t(plural, args);
  }
  else {
    args['@count['+ index +']'] = args['@count'];
    delete args['@count'];
    return Drupal.t(plural.replace('@count', '@count['+ index +']'));
  }
};

/**
 * Generate the themed representation of a Drupal object.
 *
 * All requests for themed output must go through this function. It examines
 * the request and routes it to the appropriate theme function. If the current
 * theme does not provide an override function, the generic theme function is
 * called.
 *
 * For example, to retrieve the HTML that is output by theme_placeholder(text),
 * call Drupal.theme('placeholder', text).
 *
 * @param func
 *   The name of the theme function to call.
 * @param ...
 *   Additional arguments to pass along to the theme function.
 * @return
 *   Any data the theme function returns. This could be a plain HTML string,
 *   but also a complex object.
 */
Drupal.theme = function(func) {
  for (var i = 1, args = []; i < arguments.length; i++) {
    args.push(arguments[i]);
  }

  return (Drupal.theme[func] || Drupal.theme.prototype[func]).apply(this, args);
};

/**
 * Parse a JSON response.
 *
 * The result is either the JSON object, or an object with 'status' 0 and 'data' an error message.
 */
Drupal.parseJson = function (data) {
  if ((data.substring(0, 1) != '{') && (data.substring(0, 1) != '[')) {
    return { status: 0, data: data.length ? data : Drupal.t('Unspecified error') };
  }
  return eval('(' + data + ');');
};

/**
 * Freeze the current body height (as minimum height). Used to prevent
 * unnecessary upwards scrolling when doing DOM manipulations.
 */
Drupal.freezeHeight = function () {
  Drupal.unfreezeHeight();
  var div = document.createElement('div');
  $(div).css({
    position: 'absolute',
    top: '0px',
    left: '0px',
    width: '1px',
    height: $('body').css('height')
  }).attr('id', 'freeze-height');
  $('body').append(div);
};

/**
 * Unfreeze the body height
 */
Drupal.unfreezeHeight = function () {
  $('#freeze-height').remove();
};

/**
 * Wrapper around encodeURIComponent() which avoids Apache quirks (equivalent of
 * drupal_urlencode() in PHP). This function should only be used on paths, not
 * on query string arguments.
 */
Drupal.encodeURIComponent = function (item, uri) {
  uri = uri || location.href;
  item = encodeURIComponent(item).replace(/%2F/g, '/');
  return (uri.indexOf('?q=') != -1) ? item : item.replace(/%26/g, '%2526').replace(/%23/g, '%2523').replace(/\/\//g, '/%252F');
};

/**
 * Get the text selection in a textarea.
 */
Drupal.getSelection = function (element) {
  if (typeof(element.selectionStart) != 'number' && document.selection) {
    // The current selection
    var range1 = document.selection.createRange();
    var range2 = range1.duplicate();
    // Select all text.
    range2.moveToElementText(element);
    // Now move 'dummy' end point to end point of original range.
    range2.setEndPoint('EndToEnd', range1);
    // Now we can calculate start and end points.
    var start = range2.text.length - range1.text.length;
    var end = start + range1.text.length;
    return { 'start': start, 'end': end };
  }
  return { 'start': element.selectionStart, 'end': element.selectionEnd };
};

/**
 * Build an error message from ahah response.
 */
Drupal.ahahError = function(xmlhttp, uri) {
  if (xmlhttp.status == 200) {
    if (jQuery.trim(xmlhttp.responseText)) {
      var message = Drupal.t("An error occurred. \n@uri\n@text", {'@uri': uri, '@text': xmlhttp.responseText });
    }
    else {
      var message = Drupal.t("An error occurred. \n@uri\n(no information available).", {'@uri': uri });
    }
  }
  else {
    var message = Drupal.t("An HTTP error @status occurred. \n@uri", {'@uri': uri, '@status': xmlhttp.status });
  }
  return message.replace(/\n/g, '<br />');
}

// Global Killswitch on the <html> element
$(document.documentElement).addClass('js');
// Attach all behaviors.
$(document).ready(function() {
  Drupal.attachBehaviors(this);
});

/**
 * The default themes.
 */
Drupal.theme.prototype = {

  /**
   * Formats text for emphasized display in a placeholder inside a sentence.
   *
   * @param str
   *   The text to format (plain-text).
   * @return
   *   The formatted text (html).
   */
  placeholder: function(str) {
    return '<em>' + Drupal.checkPlain(str) + '</em>';
  }
};
;
/*! jQuery v1.8.2 jquery.com | jquery.org/license */
(function(a,b){function G(a){var b=F[a]={};return p.each(a.split(s),function(a,c){b[c]=!0}),b}function J(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(I,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:+d+""===d?+d:H.test(d)?p.parseJSON(d):d}catch(f){}p.data(a,c,d)}else d=b}return d}function K(a){var b;for(b in a){if(b==="data"&&p.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function ba(){return!1}function bb(){return!0}function bh(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function bi(a,b){do a=a[b];while(a&&a.nodeType!==1);return a}function bj(a,b,c){b=b||0;if(p.isFunction(b))return p.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return p.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=p.grep(a,function(a){return a.nodeType===1});if(be.test(b))return p.filter(b,d,!c);b=p.filter(b,d)}return p.grep(a,function(a,d){return p.inArray(a,b)>=0===c})}function bk(a){var b=bl.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function bC(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function bD(a,b){if(b.nodeType!==1||!p.hasData(a))return;var c,d,e,f=p._data(a),g=p._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;d<e;d++)p.event.add(b,c,h[c][d])}g.data&&(g.data=p.extend({},g.data))}function bE(a,b){var c;if(b.nodeType!==1)return;b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?(b.parentNode&&(b.outerHTML=a.outerHTML),p.support.html5Clone&&a.innerHTML&&!p.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):c==="input"&&bv.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text),b.removeAttribute(p.expando)}function bF(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bG(a){bv.test(a.type)&&(a.defaultChecked=a.checked)}function bY(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=bW.length;while(e--){b=bW[e]+c;if(b in a)return b}return d}function bZ(a,b){return a=b||a,p.css(a,"display")==="none"||!p.contains(a.ownerDocument,a)}function b$(a,b){var c,d,e=[],f=0,g=a.length;for(;f<g;f++){c=a[f];if(!c.style)continue;e[f]=p._data(c,"olddisplay"),b?(!e[f]&&c.style.display==="none"&&(c.style.display=""),c.style.display===""&&bZ(c)&&(e[f]=p._data(c,"olddisplay",cc(c.nodeName)))):(d=bH(c,"display"),!e[f]&&d!=="none"&&p._data(c,"olddisplay",d))}for(f=0;f<g;f++){c=a[f];if(!c.style)continue;if(!b||c.style.display==="none"||c.style.display==="")c.style.display=b?e[f]||"":"none"}return a}function b_(a,b,c){var d=bP.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function ca(a,b,c,d){var e=c===(d?"border":"content")?4:b==="width"?1:0,f=0;for(;e<4;e+=2)c==="margin"&&(f+=p.css(a,c+bV[e],!0)),d?(c==="content"&&(f-=parseFloat(bH(a,"padding"+bV[e]))||0),c!=="margin"&&(f-=parseFloat(bH(a,"border"+bV[e]+"Width"))||0)):(f+=parseFloat(bH(a,"padding"+bV[e]))||0,c!=="padding"&&(f+=parseFloat(bH(a,"border"+bV[e]+"Width"))||0));return f}function cb(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=!0,f=p.support.boxSizing&&p.css(a,"boxSizing")==="border-box";if(d<=0||d==null){d=bH(a,b);if(d<0||d==null)d=a.style[b];if(bQ.test(d))return d;e=f&&(p.support.boxSizingReliable||d===a.style[b]),d=parseFloat(d)||0}return d+ca(a,b,c||(f?"border":"content"),e)+"px"}function cc(a){if(bS[a])return bS[a];var b=p("<"+a+">").appendTo(e.body),c=b.css("display");b.remove();if(c==="none"||c===""){bI=e.body.appendChild(bI||p.extend(e.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!bJ||!bI.createElement)bJ=(bI.contentWindow||bI.contentDocument).document,bJ.write("<!doctype html><html><body>"),bJ.close();b=bJ.body.appendChild(bJ.createElement(a)),c=bH(b,"display"),e.body.removeChild(bI)}return bS[a]=c,c}function ci(a,b,c,d){var e;if(p.isArray(b))p.each(b,function(b,e){c||ce.test(a)?d(a,e):ci(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)});else if(!c&&p.type(b)==="object")for(e in b)ci(a+"["+e+"]",b[e],c,d);else d(a,b)}function cz(a){return function(b,c){typeof b!="string"&&(c=b,b="*");var d,e,f,g=b.toLowerCase().split(s),h=0,i=g.length;if(p.isFunction(c))for(;h<i;h++)d=g[h],f=/^\+/.test(d),f&&(d=d.substr(1)||"*"),e=a[d]=a[d]||[],e[f?"unshift":"push"](c)}}function cA(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h,i=a[f],j=0,k=i?i.length:0,l=a===cv;for(;j<k&&(l||!h);j++)h=i[j](c,d,e),typeof h=="string"&&(!l||g[h]?h=b:(c.dataTypes.unshift(h),h=cA(a,c,d,e,h,g)));return(l||!h)&&!g["*"]&&(h=cA(a,c,d,e,"*",g)),h}function cB(a,c){var d,e,f=p.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&p.extend(!0,a,e)}function cC(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(f in k)f in d&&(c[k[f]]=d[f]);while(j[0]==="*")j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader("content-type"));if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}if(g)return g!==j[0]&&j.unshift(g),d[g]}function cD(a,b){var c,d,e,f,g=a.dataTypes.slice(),h=g[0],i={},j=0;a.dataFilter&&(b=a.dataFilter(b,a.dataType));if(g[1])for(c in a.converters)i[c.toLowerCase()]=a.converters[c];for(;e=g[++j];)if(e!=="*"){if(h!=="*"&&h!==e){c=i[h+" "+e]||i["* "+e];if(!c)for(d in i){f=d.split(" ");if(f[1]===e){c=i[h+" "+f[0]]||i["* "+f[0]];if(c){c===!0?c=i[d]:i[d]!==!0&&(e=f[0],g.splice(j--,0,e));break}}}if(c!==!0)if(c&&a["throws"])b=c(b);else try{b=c(b)}catch(k){return{state:"parsererror",error:c?k:"No conversion from "+h+" to "+e}}}h=e}return{state:"success",data:b}}function cL(){try{return new a.XMLHttpRequest}catch(b){}}function cM(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function cU(){return setTimeout(function(){cN=b},0),cN=p.now()}function cV(a,b){p.each(b,function(b,c){var d=(cT[b]||[]).concat(cT["*"]),e=0,f=d.length;for(;e<f;e++)if(d[e].call(a,b,c))return})}function cW(a,b,c){var d,e=0,f=0,g=cS.length,h=p.Deferred().always(function(){delete i.elem}),i=function(){var b=cN||cU(),c=Math.max(0,j.startTime+j.duration-b),d=1-(c/j.duration||0),e=0,f=j.tweens.length;for(;e<f;e++)j.tweens[e].run(d);return h.notifyWith(a,[j,d,c]),d<1&&f?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:p.extend({},b),opts:p.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:cN||cU(),duration:c.duration,tweens:[],createTween:function(b,c,d){var e=p.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(e),e},stop:function(b){var c=0,d=b?j.tweens.length:0;for(;c<d;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;cX(k,j.opts.specialEasing);for(;e<g;e++){d=cS[e].call(j,a,k,j.opts);if(d)return d}return cV(j,k),p.isFunction(j.opts.start)&&j.opts.start.call(a,j),p.fx.timer(p.extend(i,{anim:j,queue:j.opts.queue,elem:a})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function cX(a,b){var c,d,e,f,g;for(c in a){d=p.camelCase(c),e=b[d],f=a[c],p.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=p.cssHooks[d];if(g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}}function cY(a,b,c){var d,e,f,g,h,i,j,k,l=this,m=a.style,n={},o=[],q=a.nodeType&&bZ(a);c.queue||(j=p._queueHooks(a,"fx"),j.unqueued==null&&(j.unqueued=0,k=j.empty.fire,j.empty.fire=function(){j.unqueued||k()}),j.unqueued++,l.always(function(){l.always(function(){j.unqueued--,p.queue(a,"fx").length||j.empty.fire()})})),a.nodeType===1&&("height"in b||"width"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],p.css(a,"display")==="inline"&&p.css(a,"float")==="none"&&(!p.support.inlineBlockNeedsLayout||cc(a.nodeName)==="inline"?m.display="inline-block":m.zoom=1)),c.overflow&&(m.overflow="hidden",p.support.shrinkWrapBlocks||l.done(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d in b){f=b[d];if(cP.exec(f)){delete b[d];if(f===(q?"hide":"show"))continue;o.push(d)}}g=o.length;if(g){h=p._data(a,"fxshow")||p._data(a,"fxshow",{}),q?p(a).show():l.done(function(){p(a).hide()}),l.done(function(){var b;p.removeData(a,"fxshow",!0);for(b in n)p.style(a,b,n[b])});for(d=0;d<g;d++)e=o[d],i=l.createTween(e,q?h[e]:0),n[e]=h[e]||p.style(a,e),e in h||(h[e]=i.start,q&&(i.end=i.start,i.start=e==="width"||e==="height"?1:0))}}function cZ(a,b,c,d,e){return new cZ.prototype.init(a,b,c,d,e)}function c$(a,b){var c,d={height:a},e=0;b=b?1:0;for(;e<4;e+=2-b)c=bV[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function da(a){return p.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}var c,d,e=a.document,f=a.location,g=a.navigator,h=a.jQuery,i=a.$,j=Array.prototype.push,k=Array.prototype.slice,l=Array.prototype.indexOf,m=Object.prototype.toString,n=Object.prototype.hasOwnProperty,o=String.prototype.trim,p=function(a,b){return new p.fn.init(a,b,c)},q=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,r=/\S/,s=/\s+/,t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,y=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,z=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,A=/^-ms-/,B=/-([\da-z])/gi,C=function(a,b){return(b+"").toUpperCase()},D=function(){e.addEventListener?(e.removeEventListener("DOMContentLoaded",D,!1),p.ready()):e.readyState==="complete"&&(e.detachEvent("onreadystatechange",D),p.ready())},E={};p.fn=p.prototype={constructor:p,init:function(a,c,d){var f,g,h,i;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(typeof a=="string"){a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3?f=[null,a,null]:f=u.exec(a);if(f&&(f[1]||!c)){if(f[1])return c=c instanceof p?c[0]:c,i=c&&c.nodeType?c.ownerDocument||c:e,a=p.parseHTML(f[1],i,!0),v.test(f[1])&&p.isPlainObject(c)&&this.attr.call(a,c,!0),p.merge(this,a);g=e.getElementById(f[2]);if(g&&g.parentNode){if(g.id!==f[2])return d.find(a);this.length=1,this[0]=g}return this.context=e,this.selector=a,this}return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a)}return p.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),p.makeArray(a,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return k.call(this)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=p.merge(this.constructor(),a);return d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return p.each(this,a,b)},ready:function(a){return p.ready.promise().done(a),this},eq:function(a){return a=+a,a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(k.apply(this,arguments),"slice",k.call(arguments).join(","))},map:function(a){return this.pushStack(p.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:j,sort:[].sort,splice:[].splice},p.fn.init.prototype=p.fn,p.extend=p.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;typeof h=="boolean"&&(k=h,h=arguments[1]||{},i=2),typeof h!="object"&&!p.isFunction(h)&&(h={}),j===i&&(h=this,--i);for(;i<j;i++)if((a=arguments[i])!=null)for(c in a){d=h[c],e=a[c];if(h===e)continue;k&&e&&(p.isPlainObject(e)||(f=p.isArray(e)))?(f?(f=!1,g=d&&p.isArray(d)?d:[]):g=d&&p.isPlainObject(d)?d:{},h[c]=p.extend(k,g,e)):e!==b&&(h[c]=e)}return h},p.extend({noConflict:function(b){return a.$===p&&(a.$=i),b&&a.jQuery===p&&(a.jQuery=h),p},isReady:!1,readyWait:1,holdReady:function(a){a?p.readyWait++:p.ready(!0)},ready:function(a){if(a===!0?--p.readyWait:p.isReady)return;if(!e.body)return setTimeout(p.ready,1);p.isReady=!0;if(a!==!0&&--p.readyWait>0)return;d.resolveWith(e,[p]),p.fn.trigger&&p(e).trigger("ready").off("ready")},isFunction:function(a){return p.type(a)==="function"},isArray:Array.isArray||function(a){return p.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):E[m.call(a)]||"object"},isPlainObject:function(a){if(!a||p.type(a)!=="object"||a.nodeType||p.isWindow(a))return!1;try{if(a.constructor&&!n.call(a,"constructor")&&!n.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||n.call(a,d)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){var d;return!a||typeof a!="string"?null:(typeof b=="boolean"&&(c=b,b=0),b=b||e,(d=v.exec(a))?[b.createElement(d[1])]:(d=p.buildFragment([a],b,c?null:[]),p.merge([],(d.cacheable?p.clone(d.fragment):d.fragment).childNodes)))},parseJSON:function(b){if(!b||typeof b!="string")return null;b=p.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(w.test(b.replace(y,"@").replace(z,"]").replace(x,"")))return(new Function("return "+b))();p.error("Invalid JSON: "+b)},parseXML:function(c){var d,e;if(!c||typeof c!="string")return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&p.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&r.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(A,"ms-").replace(B,C)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,c,d){var e,f=0,g=a.length,h=g===b||p.isFunction(a);if(d){if(h){for(e in a)if(c.apply(a[e],d)===!1)break}else for(;f<g;)if(c.apply(a[f++],d)===!1)break}else if(h){for(e in a)if(c.call(a[e],e,a[e])===!1)break}else for(;f<g;)if(c.call(a[f],f,a[f++])===!1)break;return a},trim:o&&!o.call(" ")?function(a){return a==null?"":o.call(a)}:function(a){return a==null?"":(a+"").replace(t,"")},makeArray:function(a,b){var c,d=b||[];return a!=null&&(c=p.type(a),a.length==null||c==="string"||c==="function"||c==="regexp"||p.isWindow(a)?j.call(d,a):p.merge(d,a)),d},inArray:function(a,b,c){var d;if(b){if(l)return l.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if(typeof d=="number")for(;f<d;f++)a[e++]=c[f];else while(c[f]!==b)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;c=!!c;for(;f<g;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,c,d){var e,f,g=[],h=0,i=a.length,j=a instanceof p||i!==b&&typeof i=="number"&&(i>0&&a[0]&&a[i-1]||i===0||p.isArray(a));if(j)for(;h<i;h++)e=c(a[h],h,d),e!=null&&(g[g.length]=e);else for(f in a)e=c(a[f],f,d),e!=null&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(a,c){var d,e,f;return typeof c=="string"&&(d=a[c],c=a,a=d),p.isFunction(a)?(e=k.call(arguments,2),f=function(){return a.apply(c,e.concat(k.call(arguments)))},f.guid=a.guid=a.guid||p.guid++,f):b},access:function(a,c,d,e,f,g,h){var i,j=d==null,k=0,l=a.length;if(d&&typeof d=="object"){for(k in d)p.access(a,c,k,d[k],1,g,e);f=1}else if(e!==b){i=h===b&&p.isFunction(e),j&&(i?(i=c,c=function(a,b,c){return i.call(p(a),c)}):(c.call(a,e),c=null));if(c)for(;k<l;k++)c(a[k],d,i?e.call(a[k],k,c(a[k],d)):e,h);f=1}return f?a:j?c.call(a):l?c(a[0],d):g},now:function(){return(new Date).getTime()}}),p.ready.promise=function(b){if(!d){d=p.Deferred();if(e.readyState==="complete")setTimeout(p.ready,1);else if(e.addEventListener)e.addEventListener("DOMContentLoaded",D,!1),a.addEventListener("load",p.ready,!1);else{e.attachEvent("onreadystatechange",D),a.attachEvent("onload",p.ready);var c=!1;try{c=a.frameElement==null&&e.documentElement}catch(f){}c&&c.doScroll&&function g(){if(!p.isReady){try{c.doScroll("left")}catch(a){return setTimeout(g,50)}p.ready()}}()}}return d.promise(b)},p.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){E["[object "+b+"]"]=b.toLowerCase()}),c=p(e);var F={};p.Callbacks=function(a){a=typeof a=="string"?F[a]||G(a):p.extend({},a);var c,d,e,f,g,h,i=[],j=!a.once&&[],k=function(b){c=a.memory&&b,d=!0,h=f||0,f=0,g=i.length,e=!0;for(;i&&h<g;h++)if(i[h].apply(b[0],b[1])===!1&&a.stopOnFalse){c=!1;break}e=!1,i&&(j?j.length&&k(j.shift()):c?i=[]:l.disable())},l={add:function(){if(i){var b=i.length;(function d(b){p.each(b,function(b,c){var e=p.type(c);e==="function"&&(!a.unique||!l.has(c))?i.push(c):c&&c.length&&e!=="string"&&d(c)})})(arguments),e?g=i.length:c&&(f=b,k(c))}return this},remove:function(){return i&&p.each(arguments,function(a,b){var c;while((c=p.inArray(b,i,c))>-1)i.splice(c,1),e&&(c<=g&&g--,c<=h&&h--)}),this},has:function(a){return p.inArray(a,i)>-1},empty:function(){return i=[],this},disable:function(){return i=j=c=b,this},disabled:function(){return!i},lock:function(){return j=b,c||l.disable(),this},locked:function(){return!j},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],i&&(!d||j)&&(e?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!d}};return l},p.extend({Deferred:function(a){var b=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return p.Deferred(function(c){p.each(b,function(b,d){var f=d[0],g=a[b];e[d[1]](p.isFunction(g)?function(){var a=g.apply(this,arguments);a&&p.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f+"With"](this===e?c:this,[a])}:c[f])}),a=null}).promise()},promise:function(a){return a!=null?p.extend(a,d):d}},e={};return d.pipe=d.then,p.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[a^1][2].disable,b[2][2].lock),e[f[0]]=g.fire,e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=k.call(arguments),d=c.length,e=d!==1||a&&p.isFunction(a.promise)?d:0,f=e===1?a:p.Deferred(),g=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?k.call(arguments):d,c===h?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},h,i,j;if(d>1){h=new Array(d),i=new Array(d),j=new Array(d);for(;b<d;b++)c[b]&&p.isFunction(c[b].promise)?c[b].promise().done(g(b,j,c)).fail(f.reject).progress(g(b,i,h)):--e}return e||f.resolveWith(j,c),f.promise()}}),p.support=function(){var b,c,d,f,g,h,i,j,k,l,m,n=e.createElement("div");n.setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=n.getElementsByTagName("*"),d=n.getElementsByTagName("a")[0],d.style.cssText="top:1px;float:left;opacity:.5";if(!c||!c.length)return{};f=e.createElement("select"),g=f.appendChild(e.createElement("option")),h=n.getElementsByTagName("input")[0],b={leadingWhitespace:n.firstChild.nodeType===3,tbody:!n.getElementsByTagName("tbody").length,htmlSerialize:!!n.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:d.getAttribute("href")==="/a",opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:h.value==="on",optSelected:g.selected,getSetAttribute:n.className!=="t",enctype:!!e.createElement("form").enctype,html5Clone:e.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:e.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},h.checked=!0,b.noCloneChecked=h.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!g.disabled;try{delete n.test}catch(o){b.deleteExpando=!1}!n.addEventListener&&n.attachEvent&&n.fireEvent&&(n.attachEvent("onclick",m=function(){b.noCloneEvent=!1}),n.cloneNode(!0).fireEvent("onclick"),n.detachEvent("onclick",m)),h=e.createElement("input"),h.value="t",h.setAttribute("type","radio"),b.radioValue=h.value==="t",h.setAttribute("checked","checked"),h.setAttribute("name","t"),n.appendChild(h),i=e.createDocumentFragment(),i.appendChild(n.lastChild),b.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=h.checked,i.removeChild(h),i.appendChild(n);if(n.attachEvent)for(k in{submit:!0,change:!0,focusin:!0})j="on"+k,l=j in n,l||(n.setAttribute(j,"return;"),l=typeof n[j]=="function"),b[k+"Bubbles"]=l;return p(function(){var c,d,f,g,h="padding:0;margin:0;border:0;display:block;overflow:hidden;",i=e.getElementsByTagName("body")[0];if(!i)return;c=e.createElement("div"),c.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",i.insertBefore(c,i.firstChild),d=e.createElement("div"),c.appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",f=d.getElementsByTagName("td"),f[0].style.cssText="padding:0;margin:0;border:0;display:none",l=f[0].offsetHeight===0,f[0].style.display="",f[1].style.display="none",b.reliableHiddenOffsets=l&&f[0].offsetHeight===0,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=d.offsetWidth===4,b.doesNotIncludeMarginInBodyOffset=i.offsetTop!==1,a.getComputedStyle&&(b.pixelPosition=(a.getComputedStyle(d,null)||{}).top!=="1%",b.boxSizingReliable=(a.getComputedStyle(d,null)||{width:"4px"}).width==="4px",g=e.createElement("div"),g.style.cssText=d.style.cssText=h,g.style.marginRight=g.style.width="0",d.style.width="1px",d.appendChild(g),b.reliableMarginRight=!parseFloat((a.getComputedStyle(g,null)||{}).marginRight)),typeof d.style.zoom!="undefined"&&(d.innerHTML="",d.style.cssText=h+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=d.offsetWidth===3,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div></div>",d.firstChild.style.width="5px",b.shrinkWrapBlocks=d.offsetWidth!==3,c.style.zoom=1),i.removeChild(c),c=d=f=g=null}),i.removeChild(n),c=d=f=g=h=i=n=null,b}();var H=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,I=/([A-Z])/g;p.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(p.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?p.cache[a[p.expando]]:a[p.expando],!!a&&!K(a)},data:function(a,c,d,e){if(!p.acceptData(a))return;var f,g,h=p.expando,i=typeof c=="string",j=a.nodeType,k=j?p.cache:a,l=j?a[h]:a[h]&&h;if((!l||!k[l]||!e&&!k[l].data)&&i&&d===b)return;l||(j?a[h]=l=p.deletedIds.pop()||p.guid++:l=h),k[l]||(k[l]={},j||(k[l].toJSON=p.noop));if(typeof c=="object"||typeof c=="function")e?k[l]=p.extend(k[l],c):k[l].data=p.extend(k[l].data,c);return f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[p.camelCase(c)]=d),i?(g=f[c],g==null&&(g=f[p.camelCase(c)])):g=f,g},removeData:function(a,b,c){if(!p.acceptData(a))return;var d,e,f,g=a.nodeType,h=g?p.cache:a,i=g?a[p.expando]:p.expando;if(!h[i])return;if(b){d=c?h[i]:h[i].data;if(d){p.isArray(b)||(b in d?b=[b]:(b=p.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,f=b.length;e<f;e++)delete d[b[e]];if(!(c?K:p.isEmptyObject)(d))return}}if(!c){delete h[i].data;if(!K(h[i]))return}g?p.cleanData([a],!0):p.support.deleteExpando||h!=h.window?delete h[i]:h[i]=null},_data:function(a,b,c){return p.data(a,b,c,!0)},acceptData:function(a){var b=a.nodeName&&p.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),p.fn.extend({data:function(a,c){var d,e,f,g,h,i=this[0],j=0,k=null;if(a===b){if(this.length){k=p.data(i);if(i.nodeType===1&&!p._data(i,"parsedAttrs")){f=i.attributes;for(h=f.length;j<h;j++)g=f[j].name,g.indexOf("data-")||(g=p.camelCase(g.substring(5)),J(i,g,k[g]));p._data(i,"parsedAttrs",!0)}}return k}return typeof a=="object"?this.each(function(){p.data(this,a)}):(d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!",p.access(this,function(c){if(c===b)return k=this.triggerHandler("getData"+e,[d[0]]),k===b&&i&&(k=p.data(i,a),k=J(i,a,k)),k===b&&d[1]?this.data(d[0]):k;d[1]=c,this.each(function(){var b=p(this);b.triggerHandler("setData"+e,d),p.data(this,a,c),b.triggerHandler("changeData"+e,d)})},null,c,arguments.length>1,null,!1))},removeData:function(a){return this.each(function(){p.removeData(this,a)})}}),p.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=p._data(a,b),c&&(!d||p.isArray(c)?d=p._data(a,b,p.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=p.queue(a,b),d=c.length,e=c.shift(),f=p._queueHooks(a,b),g=function(){p.dequeue(a,b)};e==="inprogress"&&(e=c.shift(),d--),e&&(b==="fx"&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return p._data(a,c)||p._data(a,c,{empty:p.Callbacks("once memory").add(function(){p.removeData(a,b+"queue",!0),p.removeData(a,c,!0)})})}}),p.fn.extend({queue:function(a,c){var d=2;return typeof a!="string"&&(c=a,a="fx",d--),arguments.length<d?p.queue(this[0],a):c===b?this:this.each(function(){var b=p.queue(this,a,c);p._queueHooks(this,a),a==="fx"&&b[0]!=="inprogress"&&p.dequeue(this,a)})},dequeue:function(a){return this.each(function(){p.dequeue(this,a)})},delay:function(a,b){return a=p.fx?p.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=p.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};typeof a!="string"&&(c=a,a=b),a=a||"fx";while(h--)d=p._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var L,M,N,O=/[\t\r\n]/g,P=/\r/g,Q=/^(?:button|input)$/i,R=/^(?:button|input|object|select|textarea)$/i,S=/^a(?:rea|)$/i,T=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,U=p.support.getSetAttribute;p.fn.extend({attr:function(a,b){return p.access(this,p.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){p.removeAttr(this,a)})},prop:function(a,b){return p.access(this,p.prop,a,b,arguments.length>1)},removeProp:function(a){return a=p.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(p.isFunction(a))return this.each(function(b){p(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(s);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{f=" "+e.className+" ";for(g=0,h=b.length;g<h;g++)f.indexOf(" "+b[g]+" ")<0&&(f+=b[g]+" ");e.className=p.trim(f)}}}return this},removeClass:function(a){var c,d,e,f,g,h,i;if(p.isFunction(a))return this.each(function(b){p(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(s);for(h=0,i=this.length;h<i;h++){e=this[h];if(e.nodeType===1&&e.className){d=(" "+e.className+" ").replace(O," ");for(f=0,g=c.length;f<g;f++)while(d.indexOf(" "+c[f]+" ")>=0)d=d.replace(" "+c[f]+" "," ");e.className=a?p.trim(d):""}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";return p.isFunction(a)?this.each(function(c){p(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c==="string"){var e,f=0,g=p(this),h=b,i=a.split(s);while(e=i[f++])h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&p._data(this,"__className__",this.className),this.className=this.className||a===!1?"":p._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(O," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];if(!arguments.length){if(f)return c=p.valHooks[f.type]||p.valHooks[f.nodeName.toLowerCase()],c&&"get"in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,typeof d=="string"?d.replace(P,""):d==null?"":d);return}return e=p.isFunction(a),this.each(function(d){var f,g=p(this);if(this.nodeType!==1)return;e?f=a.call(this,d,g.val()):f=a,f==null?f="":typeof f=="number"?f+="":p.isArray(f)&&(f=p.map(f,function(a){return a==null?"":a+""})),c=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()];if(!c||!("set"in c)||c.set(this,f,"value")===b)this.value=f})}}),p.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,f=a.selectedIndex,g=[],h=a.options,i=a.type==="select-one";if(f<0)return null;c=i?f:0,d=i?f+1:h.length;for(;c<d;c++){e=h[c];if(e.selected&&(p.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!p.nodeName(e.parentNode,"optgroup"))){b=p(e).val();if(i)return b;g.push(b)}}return i&&!g.length&&h.length?p(h[f]).val():g},set:function(a,b){var c=p.makeArray(b);return p(a).find("option").each(function(){this.selected=p.inArray(p(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(!a||i===3||i===8||i===2)return;if(e&&p.isFunction(p.fn[c]))return p(a)[c](d);if(typeof a.getAttribute=="undefined")return p.prop(a,c,d);h=i!==1||!p.isXMLDoc(a),h&&(c=c.toLowerCase(),g=p.attrHooks[c]||(T.test(c)?M:L));if(d!==b){if(d===null){p.removeAttr(a,c);return}return g&&"set"in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,d+""),d)}return g&&"get"in g&&h&&(f=g.get(a,c))!==null?f:(f=a.getAttribute(c),f===null?b:f)},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&a.nodeType===1){d=b.split(s);for(;g<d.length;g++)e=d[g],e&&(c=p.propFix[e]||e,f=T.test(e),f||p.attr(a,e,""),a.removeAttribute(U?e:c),f&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(Q.test(a.nodeName)&&a.parentNode)p.error("type property can't be changed");else if(!p.support.radioValue&&b==="radio"&&p.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return L&&p.nodeName(a,"button")?L.get(a,b):b in a?a.value:null},set:function(a,b,c){if(L&&p.nodeName(a,"button"))return L.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(!a||h===3||h===8||h===2)return;return g=h!==1||!p.isXMLDoc(a),g&&(c=p.propFix[c]||c,f=p.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&(e=f.get(a,c))!==null?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):R.test(a.nodeName)||S.test(a.nodeName)&&a.href?0:b}}}}),M={get:function(a,c){var d,e=p.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?p.removeAttr(a,c):(d=p.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},U||(N={name:!0,id:!0,coords:!0},L=p.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(N[c]?d.value!=="":d.specified)?d.value:b},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=e.createAttribute(c),a.setAttributeNode(d)),d.value=b+""}},p.each(["width","height"],function(a,b){p.attrHooks[b]=p.extend(p.attrHooks[b],{set:function(a,c){if(c==="")return a.setAttribute(b,"auto"),c}})}),p.attrHooks.contenteditable={get:L.get,set:function(a,b,c){b===""&&(b="false"),L.set(a,b,c)}}),p.support.hrefNormalized||p.each(["href","src","width","height"],function(a,c){p.attrHooks[c]=p.extend(p.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),p.support.style||(p.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=b+""}}),p.support.optSelected||(p.propHooks.selected=p.extend(p.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),p.support.enctype||(p.propFix.enctype="encoding"),p.support.checkOn||p.each(["radio","checkbox"],function(){p.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]=p.extend(p.valHooks[this],{set:function(a,b){if(p.isArray(b))return a.checked=p.inArray(p(a).val(),b)>=0}})});var V=/^(?:textarea|input|select)$/i,W=/^([^\.]*|)(?:\.(.+)|)$/,X=/(?:^|\s)hover(\.\S+|)\b/,Y=/^key/,Z=/^(?:mouse|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=function(a){return p.event.special.hover?a:a.replace(X,"mouseenter$1 mouseleave$1")};p.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,q,r;if(a.nodeType===3||a.nodeType===8||!c||!d||!(g=p._data(a)))return;d.handler&&(o=d,d=o.handler,f=o.selector),d.guid||(d.guid=p.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return typeof p!="undefined"&&(!a||p.event.triggered!==a.type)?p.event.dispatch.apply(h.elem,arguments):b},h.elem=a),c=p.trim(_(c)).split(" ");for(j=0;j<c.length;j++){k=W.exec(c[j])||[],l=k[1],m=(k[2]||"").split(".").sort(),r=p.event.special[l]||{},l=(f?r.delegateType:r.bindType)||l,r=p.event.special[l]||{},n=p.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&p.expr.match.needsContext.test(f),namespace:m.join(".")},o),q=i[l];if(!q){q=i[l]=[],q.delegateCount=0;if(!r.setup||r.setup.call(a,e,m,h)===!1)a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent("on"+l,h)}r.add&&(r.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?q.splice(q.delegateCount++,0,n):q.push(n),p.event.global[l]=!0}a=null},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,q,r=p.hasData(a)&&p._data(a);if(!r||!(m=r.events))return;b=p.trim(_(b||"")).split(" ");for(f=0;f<b.length;f++){g=W.exec(b[f])||[],h=i=g[1],j=g[2];if(!h){for(h in m)p.event.remove(a,h+b[f],c,d,!0);continue}n=p.event.special[h]||{},h=(d?n.delegateType:n.bindType)||h,o=m[h]||[],k=o.length,j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(l=0;l<o.length;l++)q=o[l],(e||i===q.origType)&&(!c||c.guid===q.guid)&&(!j||j.test(q.namespace))&&(!d||d===q.selector||d==="**"&&q.selector)&&(o.splice(l--,1),q.selector&&o.delegateCount--,n.remove&&n.remove.call(a,q));o.length===0&&k!==o.length&&((!n.teardown||n.teardown.call(a,j,r.handle)===!1)&&p.removeEvent(a,h,r.handle),delete m[h])}p.isEmptyObject(m)&&(delete r.handle,p.removeData(a,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,f,g){if(!f||f.nodeType!==3&&f.nodeType!==8){var h,i,j,k,l,m,n,o,q,r,s=c.type||c,t=[];if($.test(s+p.event.triggered))return;s.indexOf("!")>=0&&(s=s.slice(0,-1),i=!0),s.indexOf(".")>=0&&(t=s.split("."),s=t.shift(),t.sort());if((!f||p.event.customEvent[s])&&!p.event.global[s])return;c=typeof c=="object"?c[p.expando]?c:new p.Event(s,c):new p.Event(s),c.type=s,c.isTrigger=!0,c.exclusive=i,c.namespace=t.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+t.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,m=s.indexOf(":")<0?"on"+s:"";if(!f){h=p.cache;for(j in h)h[j].events&&h[j].events[s]&&p.event.trigger(c,d,h[j].handle.elem,!0);return}c.result=b,c.target||(c.target=f),d=d!=null?p.makeArray(d):[],d.unshift(c),n=p.event.special[s]||{};if(n.trigger&&n.trigger.apply(f,d)===!1)return;q=[[f,n.bindType||s]];if(!g&&!n.noBubble&&!p.isWindow(f)){r=n.delegateType||s,k=$.test(r+s)?f:f.parentNode;for(l=f;k;k=k.parentNode)q.push([k,r]),l=k;l===(f.ownerDocument||e)&&q.push([l.defaultView||l.parentWindow||a,r])}for(j=0;j<q.length&&!c.isPropagationStopped();j++)k=q[j][0],c.type=q[j][1],o=(p._data(k,"events")||{})[c.type]&&p._data(k,"handle"),o&&o.apply(k,d),o=m&&k[m],o&&p.acceptData(k)&&o.apply&&o.apply(k,d)===!1&&c.preventDefault();return c.type=s,!g&&!c.isDefaultPrevented()&&(!n._default||n._default.apply(f.ownerDocument,d)===!1)&&(s!=="click"||!p.nodeName(f,"a"))&&p.acceptData(f)&&m&&f[s]&&(s!=="focus"&&s!=="blur"||c.target.offsetWidth!==0)&&!p.isWindow(f)&&(l=f[m],l&&(f[m]=null),p.event.triggered=s,f[s](),p.event.triggered=b,l&&(f[m]=l)),c.result}return},dispatch:function(c){c=p.event.fix(c||a.event);var d,e,f,g,h,i,j,l,m,n,o=(p._data(this,"events")||{})[c.type]||[],q=o.delegateCount,r=k.call(arguments),s=!c.exclusive&&!c.namespace,t=p.event.special[c.type]||{},u=[];r[0]=c,c.delegateTarget=this;if(t.preDispatch&&t.preDispatch.call(this,c)===!1)return;if(q&&(!c.button||c.type!=="click"))for(f=c.target;f!=this;f=f.parentNode||this)if(f.disabled!==!0||c.type!=="click"){h={},j=[];for(d=0;d<q;d++)l=o[d],m=l.selector,h[m]===b&&(h[m]=l.needsContext?p(m,this).index(f)>=0:p.find(m,this,null,[f]).length),h[m]&&j.push(l);j.length&&u.push({elem:f,matches:j})}o.length>q&&u.push({elem:this,matches:o.slice(q)});for(d=0;d<u.length&&!c.isPropagationStopped();d++){i=u[d],c.currentTarget=i.elem;for(e=0;e<i.matches.length&&!c.isImmediatePropagationStopped();e++){l=i.matches[e];if(s||!c.namespace&&!l.namespace||c.namespace_re&&c.namespace_re.test(l.namespace))c.data=l.data,c.handleObj=l,g=((p.event.special[l.origType]||{}).handle||l.handler).apply(i.elem,r),g!==b&&(c.result=g,g===!1&&(c.preventDefault(),c.stopPropagation()))}}return t.postDispatch&&t.postDispatch.call(this,c),c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,f,g,h=c.button,i=c.fromElement;return a.pageX==null&&c.clientX!=null&&(d=a.target.ownerDocument||e,f=d.documentElement,g=d.body,a.pageX=c.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?c.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0),a}},fix:function(a){if(a[p.expando])return a;var b,c,d=a,f=p.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;a=p.Event(d);for(b=g.length;b;)c=g[--b],a[c]=d[c];return a.target||(a.target=d.srcElement||e),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,f.filter?f.filter(a,d):a},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){p.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=p.extend(new p.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?p.event.trigger(e,null,b):p.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},p.event.handle=p.event.dispatch,p.removeEvent=e.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]=="undefined"&&(a[d]=null),a.detachEvent(d,c))},p.Event=function(a,b){if(this instanceof p.Event)a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?bb:ba):this.type=a,b&&p.extend(this,b),this.timeStamp=a&&a.timeStamp||p.now(),this[p.expando]=!0;else return new p.Event(a,b)},p.Event.prototype={preventDefault:function(){this.isDefaultPrevented=bb;var a=this.originalEvent;if(!a)return;a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=bb;var a=this.originalEvent;if(!a)return;a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=bb,this.stopPropagation()},isDefaultPrevented:ba,isPropagationStopped:ba,isImmediatePropagationStopped:ba},p.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){p.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj,g=f.selector;if(!e||e!==d&&!p.contains(d,e))a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b;return c}}}),p.support.submitBubbles||(p.event.special.submit={setup:function(){if(p.nodeName(this,"form"))return!1;p.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=p.nodeName(c,"input")||p.nodeName(c,"button")?c.form:b;d&&!p._data(d,"_submit_attached")&&(p.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),p._data(d,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&p.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(p.nodeName(this,"form"))return!1;p.event.remove(this,"._submit")}}),p.support.changeBubbles||(p.event.special.change={setup:function(){if(V.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")p.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),p.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),p.event.simulate("change",this,a,!0)});return!1}p.event.add(this,"beforeactivate._change",function(a){var b=a.target;V.test(b.nodeName)&&!p._data(b,"_change_attached")&&(p.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&p.event.simulate("change",this.parentNode,a,!0)}),p._data(b,"_change_attached",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){return p.event.remove(this,"._change"),!V.test(this.nodeName)}}),p.support.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){p.event.simulate(b,a.target,p.event.fix(a),!0)};p.event.special[b]={setup:function(){c++===0&&e.addEventListener(a,d,!0)},teardown:function(){--c===0&&e.removeEventListener(a,d,!0)}}}),p.fn.extend({on:function(a,c,d,e,f){var g,h;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(h in a)this.on(h,c,d,a[h],f);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=ba;else if(!e)return this;return f===1&&(g=e,e=function(a){return p().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=p.guid++)),this.each(function(){p.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,p(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if(typeof a=="object"){for(f in a)this.off(f,c,a[f]);return this}if(c===!1||typeof c=="function")d=c,c=b;return d===!1&&(d=ba),this.each(function(){p.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return p(this.context).on(a,this.selector,b,c),this},die:function(a,b){return p(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length===1?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){p.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return p.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||p.guid++,d=0,e=function(c){var e=(p._data(this,"lastToggle"+a.guid)||0)%d;return p._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){p.fn[b]=function(a,c){return c==null&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},Y.test(b)&&(p.event.fixHooks[b]=p.event.keyHooks),Z.test(b)&&(p.event.fixHooks[b]=p.event.mouseHooks)}),function(a,b){function bc(a,b,c,d){c=c||[],b=b||r;var e,f,i,j,k=b.nodeType;if(!a||typeof a!="string")return c;if(k!==1&&k!==9)return[];i=g(b);if(!i&&!d)if(e=P.exec(a))if(j=e[1]){if(k===9){f=b.getElementById(j);if(!f||!f.parentNode)return c;if(f.id===j)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(j))&&h(b,f)&&f.id===j)return c.push(f),c}else{if(e[2])return w.apply(c,x.call(b.getElementsByTagName(a),0)),c;if((j=e[3])&&_&&b.getElementsByClassName)return w.apply(c,x.call(b.getElementsByClassName(j),0)),c}return bp(a.replace(L,"$1"),b,c,d,i)}function bd(a){return function(b){var c=b.nodeName.toLowerCase();return c==="input"&&b.type===a}}function be(a){return function(b){var c=b.nodeName.toLowerCase();return(c==="input"||c==="button")&&b.type===a}}function bf(a){return z(function(b){return b=+b,z(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function bg(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}function bh(a,b){var c,d,f,g,h,i,j,k=C[o][a];if(k)return b?0:k.slice(0);h=a,i=[],j=e.preFilter;while(h){if(!c||(d=M.exec(h)))d&&(h=h.slice(d[0].length)),i.push(f=[]);c=!1;if(d=N.exec(h))f.push(c=new q(d.shift())),h=h.slice(c.length),c.type=d[0].replace(L," ");for(g in e.filter)(d=W[g].exec(h))&&(!j[g]||(d=j[g](d,r,!0)))&&(f.push(c=new q(d.shift())),h=h.slice(c.length),c.type=g,c.matches=d);if(!c)break}return b?h.length:h?bc.error(a):C(a,i).slice(0)}function bi(a,b,d){var e=b.dir,f=d&&b.dir==="parentNode",g=u++;return b.first?function(b,c,d){while(b=b[e])if(f||b.nodeType===1)return a(b,c,d)}:function(b,d,h){if(!h){var i,j=t+" "+g+" ",k=j+c;while(b=b[e])if(f||b.nodeType===1){if((i=b[o])===k)return b.sizset;if(typeof i=="string"&&i.indexOf(j)===0){if(b.sizset)return b}else{b[o]=k;if(a(b,d,h))return b.sizset=!0,b;b.sizset=!1}}}else while(b=b[e])if(f||b.nodeType===1)if(a(b,d,h))return b}}function bj(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function bk(a,b,c,d,e){var f,g=[],h=0,i=a.length,j=b!=null;for(;h<i;h++)if(f=a[h])if(!c||c(f,d,e))g.push(f),j&&b.push(h);return g}function bl(a,b,c,d,e,f){return d&&!d[o]&&(d=bl(d)),e&&!e[o]&&(e=bl(e,f)),z(function(f,g,h,i){if(f&&e)return;var j,k,l,m=[],n=[],o=g.length,p=f||bo(b||"*",h.nodeType?[h]:h,[],f),q=a&&(f||!b)?bk(p,m,a,h,i):p,r=c?e||(f?a:o||d)?[]:g:q;c&&c(q,r,h,i);if(d){l=bk(r,n),d(l,[],h,i),j=l.length;while(j--)if(k=l[j])r[n[j]]=!(q[n[j]]=k)}if(f){j=a&&r.length;while(j--)if(k=r[j])f[m[j]]=!(g[m[j]]=k)}else r=bk(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):w.apply(g,r)})}function bm(a){var b,c,d,f=a.length,g=e.relative[a[0].type],h=g||e.relative[" "],i=g?1:0,j=bi(function(a){return a===b},h,!0),k=bi(function(a){return y.call(b,a)>-1},h,!0),m=[function(a,c,d){return!g&&(d||c!==l)||((b=c).nodeType?j(a,c,d):k(a,c,d))}];for(;i<f;i++)if(c=e.relative[a[i].type])m=[bi(bj(m),c)];else{c=e.filter[a[i].type].apply(null,a[i].matches);if(c[o]){d=++i;for(;d<f;d++)if(e.relative[a[d].type])break;return bl(i>1&&bj(m),i>1&&a.slice(0,i-1).join("").replace(L,"$1"),c,i<d&&bm(a.slice(i,d)),d<f&&bm(a=a.slice(d)),d<f&&a.join(""))}m.push(c)}return bj(m)}function bn(a,b){var d=b.length>0,f=a.length>0,g=function(h,i,j,k,m){var n,o,p,q=[],s=0,u="0",x=h&&[],y=m!=null,z=l,A=h||f&&e.find.TAG("*",m&&i.parentNode||i),B=t+=z==null?1:Math.E;y&&(l=i!==r&&i,c=g.el);for(;(n=A[u])!=null;u++){if(f&&n){for(o=0;p=a[o];o++)if(p(n,i,j)){k.push(n);break}y&&(t=B,c=++g.el)}d&&((n=!p&&n)&&s--,h&&x.push(n))}s+=u;if(d&&u!==s){for(o=0;p=b[o];o++)p(x,q,i,j);if(h){if(s>0)while(u--)!x[u]&&!q[u]&&(q[u]=v.call(k));q=bk(q)}w.apply(k,q),y&&!h&&q.length>0&&s+b.length>1&&bc.uniqueSort(k)}return y&&(t=B,l=z),x};return g.el=0,d?z(g):g}function bo(a,b,c,d){var e=0,f=b.length;for(;e<f;e++)bc(a,b[e],c,d);return c}function bp(a,b,c,d,f){var g,h,j,k,l,m=bh(a),n=m.length;if(!d&&m.length===1){h=m[0]=m[0].slice(0);if(h.length>2&&(j=h[0]).type==="ID"&&b.nodeType===9&&!f&&e.relative[h[1].type]){b=e.find.ID(j.matches[0].replace(V,""),b,f)[0];if(!b)return c;a=a.slice(h.shift().length)}for(g=W.POS.test(a)?-1:h.length-1;g>=0;g--){j=h[g];if(e.relative[k=j.type])break;if(l=e.find[k])if(d=l(j.matches[0].replace(V,""),R.test(h[0].type)&&b.parentNode||b,f)){h.splice(g,1),a=d.length&&h.join("");if(!a)return w.apply(c,x.call(d,0)),c;break}}}return i(a,m)(d,b,f,c,R.test(a)),c}function bq(){}var c,d,e,f,g,h,i,j,k,l,m=!0,n="undefined",o=("sizcache"+Math.random()).replace(".",""),q=String,r=a.document,s=r.documentElement,t=0,u=0,v=[].pop,w=[].push,x=[].slice,y=[].indexOf||function(a){var b=0,c=this.length;for(;b<c;b++)if(this[b]===a)return b;return-1},z=function(a,b){return a[o]=b==null||b,a},A=function(){var a={},b=[];return z(function(c,d){return b.push(c)>e.cacheLength&&delete a[b.shift()],a[c]=d},a)},B=A(),C=A(),D=A(),E="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",G=F.replace("w","w#"),H="([*^$|!~]?=)",I="\\["+E+"*("+F+")"+E+"*(?:"+H+E+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+G+")|)|)"+E+"*\\]",J=":("+F+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+I+")|[^:]|\\\\.)*|.*))\\)|)",K=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+E+"*((?:-\\d)?\\d*)"+E+"*\\)|)(?=[^-]|$)",L=new RegExp("^"+E+"+|((?:^|[^\\\\])(?:\\\\.)*)"+E+"+$","g"),M=new RegExp("^"+E+"*,"+E+"*"),N=new RegExp("^"+E+"*([\\x20\\t\\r\\n\\f>+~])"+E+"*"),O=new RegExp(J),P=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,Q=/^:not/,R=/[\x20\t\r\n\f]*[+~]/,S=/:not\($/,T=/h\d/i,U=/input|select|textarea|button/i,V=/\\(?!\\)/g,W={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),NAME:new RegExp("^\\[name=['\"]?("+F+")['\"]?\\]"),TAG:new RegExp("^("+F.replace("w","w*")+")"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+J),POS:new RegExp(K,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+E+"*(even|odd|(([+-]|)(\\d*)n|)"+E+"*(?:([+-]|)"+E+"*(\\d+)|))"+E+"*\\)|)","i"),needsContext:new RegExp("^"+E+"*[>+~]|"+K,"i")},X=function(a){var b=r.createElement("div");try{return a(b)}catch(c){return!1}finally{b=null}},Y=X(function(a){return a.appendChild(r.createComment("")),!a.getElementsByTagName("*").length}),Z=X(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==n&&a.firstChild.getAttribute("href")==="#"}),$=X(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return b!=="boolean"&&b!=="string"}),_=X(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!a.getElementsByClassName||!a.getElementsByClassName("e").length?!1:(a.lastChild.className="e",a.getElementsByClassName("e").length===2)}),ba=X(function(a){a.id=o+0,a.innerHTML="<a name='"+o+"'></a><div name='"+o+"'></div>",s.insertBefore(a,s.firstChild);var b=r.getElementsByName&&r.getElementsByName(o).length===2+r.getElementsByName(o+0).length;return d=!r.getElementById(o),s.removeChild(a),b});try{x.call(s.childNodes,0)[0].nodeType}catch(bb){x=function(a){var b,c=[];for(;b=this[a];a++)c.push(b);return c}}bc.matches=function(a,b){return bc(a,null,null,b)},bc.matchesSelector=function(a,b){return bc(b,null,null,[a]).length>0},f=bc.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(e===1||e===9||e===11){if(typeof a.textContent=="string")return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=f(a)}else if(e===3||e===4)return a.nodeValue}else for(;b=a[d];d++)c+=f(b);return c},g=bc.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?b.nodeName!=="HTML":!1},h=bc.contains=s.contains?function(a,b){var c=a.nodeType===9?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&d.nodeType===1&&c.contains&&c.contains(d))}:s.compareDocumentPosition?function(a,b){return b&&!!(a.compareDocumentPosition(b)&16)}:function(a,b){while(b=b.parentNode)if(b===a)return!0;return!1},bc.attr=function(a,b){var c,d=g(a);return d||(b=b.toLowerCase()),(c=e.attrHandle[b])?c(a):d||$?a.getAttribute(b):(c=a.getAttributeNode(b),c?typeof a[b]=="boolean"?a[b]?b:null:c.specified?c.value:null:null)},e=bc.selectors={cacheLength:50,createPseudo:z,match:W,attrHandle:Z?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{ID:d?function(a,b,c){if(typeof b.getElementById!==n&&!c){var d=b.getElementById(a);return d&&d.parentNode?[d]:[]}}:function(a,c,d){if(typeof c.getElementById!==n&&!d){var e=c.getElementById(a);return e?e.id===a||typeof e.getAttributeNode!==n&&e.getAttributeNode("id").value===a?[e]:b:[]}},TAG:Y?function(a,b){if(typeof b.getElementsByTagName!==n)return b.getElementsByTagName(a)}:function(a,b){var c=b.getElementsByTagName(a);if(a==="*"){var d,e=[],f=0;for(;d=c[f];f++)d.nodeType===1&&e.push(d);return e}return c},NAME:ba&&function(a,b){if(typeof b.getElementsByName!==n)return b.getElementsByName(name)},CLASS:_&&function(a,b,c){if(typeof b.getElementsByClassName!==n&&!c)return b.getElementsByClassName(a)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(V,""),a[3]=(a[4]||a[5]||"").replace(V,""),a[2]==="~="&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),a[1]==="nth"?(a[2]||bc.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*(a[2]==="even"||a[2]==="odd")),a[4]=+(a[6]+a[7]||a[2]==="odd")):a[2]&&bc.error(a[0]),a},PSEUDO:function(a){var b,c;if(W.CHILD.test(a[0]))return null;if(a[3])a[2]=a[3];else if(b=a[4])O.test(b)&&(c=bh(b,!0))&&(c=b.indexOf(")",b.length-c)-b.length)&&(b=b.slice(0,c),a[0]=a[0].slice(0,c)),a[2]=b;return a.slice(0,3)}},filter:{ID:d?function(a){return a=a.replace(V,""),function(b){return b.getAttribute("id")===a}}:function(a){return a=a.replace(V,""),function(b){var c=typeof b.getAttributeNode!==n&&b.getAttributeNode("id");return c&&c.value===a}},TAG:function(a){return a==="*"?function(){return!0}:(a=a.replace(V,"").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=B[o][a];return b||(b=B(a,new RegExp("(^|"+E+")"+a+"("+E+"|$)"))),function(a){return b.test(a.className||typeof a.getAttribute!==n&&a.getAttribute("class")||"")}},ATTR:function(a,b,c){return function(d,e){var f=bc.attr(d,a);return f==null?b==="!=":b?(f+="",b==="="?f===c:b==="!="?f!==c:b==="^="?c&&f.indexOf(c)===0:b==="*="?c&&f.indexOf(c)>-1:b==="$="?c&&f.substr(f.length-c.length)===c:b==="~="?(" "+f+" ").indexOf(c)>-1:b==="|="?f===c||f.substr(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d){return a==="nth"?function(a){var b,e,f=a.parentNode;if(c===1&&d===0)return!0;if(f){e=0;for(b=f.firstChild;b;b=b.nextSibling)if(b.nodeType===1){e++;if(a===b)break}}return e-=d,e===c||e%c===0&&e/c>=0}:function(b){var c=b;switch(a){case"only":case"first":while(c=c.previousSibling)if(c.nodeType===1)return!1;if(a==="first")return!0;c=b;case"last":while(c=c.nextSibling)if(c.nodeType===1)return!1;return!0}}},PSEUDO:function(a,b){var c,d=e.pseudos[a]||e.setFilters[a.toLowerCase()]||bc.error("unsupported pseudo: "+a);return d[o]?d(b):d.length>1?(c=[a,a,"",b],e.setFilters.hasOwnProperty(a.toLowerCase())?z(function(a,c){var e,f=d(a,b),g=f.length;while(g--)e=y.call(a,f[g]),a[e]=!(c[e]=f[g])}):function(a){return d(a,0,c)}):d}},pseudos:{not:z(function(a){var b=[],c=[],d=i(a.replace(L,"$1"));return d[o]?z(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)if(f=g[h])a[h]=!(b[h]=f)}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:z(function(a){return function(b){return bc(a,b).length>0}}),contains:z(function(a){return function(b){return(b.textContent||b.innerText||f(b)).indexOf(a)>-1}}),enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&!!a.checked||b==="option"&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!e.pseudos.empty(a)},empty:function(a){var b;a=a.firstChild;while(a){if(a.nodeName>"@"||(b=a.nodeType)===3||b===4)return!1;a=a.nextSibling}return!0},header:function(a){return T.test(a.nodeName)},text:function(a){var b,c;return a.nodeName.toLowerCase()==="input"&&(b=a.type)==="text"&&((c=a.getAttribute("type"))==null||c.toLowerCase()===b)},radio:bd("radio"),checkbox:bd("checkbox"),file:bd("file"),password:bd("password"),image:bd("image"),submit:be("submit"),reset:be("reset"),button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&a.type==="button"||b==="button"},input:function(a){return U.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&(!!a.type||!!a.href)},active:function(a){return a===a.ownerDocument.activeElement},first:bf(function(a,b,c){return[0]}),last:bf(function(a,b,c){return[b-1]}),eq:bf(function(a,b,c){return[c<0?c+b:c]}),even:bf(function(a,b,c){for(var d=0;d<b;d+=2)a.push(d);return a}),odd:bf(function(a,b,c){for(var d=1;d<b;d+=2)a.push(d);return a}),lt:bf(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:bf(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},j=s.compareDocumentPosition?function(a,b){return a===b?(k=!0,0):(!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition:a.compareDocumentPosition(b)&4)?-1:1}:function(a,b){if(a===b)return k=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,h=b.parentNode,i=g;if(g===h)return bg(a,b);if(!g)return-1;if(!h)return 1;while(i)e.unshift(i),i=i.parentNode;i=h;while(i)f.unshift(i),i=i.parentNode;c=e.length,d=f.length;for(var j=0;j<c&&j<d;j++)if(e[j]!==f[j])return bg(e[j],f[j]);return j===c?bg(a,f[j],-1):bg(e[j],b,1)},[0,0].sort(j),m=!k,bc.uniqueSort=function(a){var b,c=1;k=m,a.sort(j);if(k)for(;b=a[c];c++)b===a[c-1]&&a.splice(c--,1);return a},bc.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},i=bc.compile=function(a,b){var c,d=[],e=[],f=D[o][a];if(!f){b||(b=bh(a)),c=b.length;while(c--)f=bm(b[c]),f[o]?d.push(f):e.push(f);f=D(a,bn(e,d))}return f},r.querySelectorAll&&function(){var a,b=bp,c=/'|\\/g,d=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,e=[":focus"],f=[":active",":focus"],h=s.matchesSelector||s.mozMatchesSelector||s.webkitMatchesSelector||s.oMatchesSelector||s.msMatchesSelector;X(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||e.push("\\["+E+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||e.push(":checked")}),X(function(a){a.innerHTML="<p test=''></p>",a.querySelectorAll("[test^='']").length&&e.push("[*^$]="+E+"*(?:\"\"|'')"),a.innerHTML="<input type='hidden'/>",a.querySelectorAll(":enabled").length||e.push(":enabled",":disabled")}),e=new RegExp(e.join("|")),bp=function(a,d,f,g,h){if(!g&&!h&&(!e||!e.test(a))){var i,j,k=!0,l=o,m=d,n=d.nodeType===9&&a;if(d.nodeType===1&&d.nodeName.toLowerCase()!=="object"){i=bh(a),(k=d.getAttribute("id"))?l=k.replace(c,"\\$&"):d.setAttribute("id",l),l="[id='"+l+"'] ",j=i.length;while(j--)i[j]=l+i[j].join("");m=R.test(a)&&d.parentNode||d,n=i.join(",")}if(n)try{return w.apply(f,x.call(m.querySelectorAll(n),0)),f}catch(p){}finally{k||d.removeAttribute("id")}}return b(a,d,f,g,h)},h&&(X(function(b){a=h.call(b,"div");try{h.call(b,"[test!='']:sizzle"),f.push("!=",J)}catch(c){}}),f=new RegExp(f.join("|")),bc.matchesSelector=function(b,c){c=c.replace(d,"='$1']");if(!g(b)&&!f.test(c)&&(!e||!e.test(c)))try{var i=h.call(b,c);if(i||a||b.document&&b.document.nodeType!==11)return i}catch(j){}return bc(c,null,null,[b]).length>0})}(),e.pseudos.nth=e.pseudos.eq,e.filters=bq.prototype=e.pseudos,e.setFilters=new bq,bc.attr=p.attr,p.find=bc,p.expr=bc.selectors,p.expr[":"]=p.expr.pseudos,p.unique=bc.uniqueSort,p.text=bc.getText,p.isXMLDoc=bc.isXML,p.contains=bc.contains}(a);var bc=/Until$/,bd=/^(?:parents|prev(?:Until|All))/,be=/^.[^:#\[\.,]*$/,bf=p.expr.match.needsContext,bg={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if(typeof a!="string")return p(a).filter(function(){for(b=0,c=h.length;b<c;b++)if(p.contains(h[b],this))return!0});g=this.pushStack("","find",a);for(b=0,c=this.length;b<c;b++){d=g.length,p.find(a,this[b],g);if(b>0)for(e=d;e<g.length;e++)for(f=0;f<d;f++)if(g[f]===g[e]){g.splice(e--,1);break}}return g},has:function(a){var b,c=p(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(p.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(bj(this,a,!1),"not",a)},filter:function(a){return this.pushStack(bj(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?bf.test(a)?p(a,this.context).index(this[0])>=0:p.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c,d=0,e=this.length,f=[],g=bf.test(a)||typeof a!="string"?p(a,b||this.context):0;for(;d<e;d++){c=this[d];while(c&&c.ownerDocument&&c!==b&&c.nodeType!==11){if(g?g.index(c)>-1:p.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}}return f=f.length>1?p.unique(f):f,this.pushStack(f,"closest",a)},index:function(a){return a?typeof a=="string"?p.inArray(this[0],p(a)):p.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c=typeof a=="string"?p(a,b):p.makeArray(a&&a.nodeType?[a]:a),d=p.merge(this.get(),c);return this.pushStack(bh(c[0])||bh(d[0])?d:p.unique(d))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}}),p.fn.andSelf=p.fn.addBack,p.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return p.dir(a,"parentNode")},parentsUntil:function(a,b,c){return p.dir(a,"parentNode",c)},next:function(a){return bi(a,"nextSibling")},prev:function(a){return bi(a,"previousSibling")},nextAll:function(a){return p.dir(a,"nextSibling")},prevAll:function(a){return p.dir(a,"previousSibling")},nextUntil:function(a,b,c){return p.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return p.dir(a,"previousSibling",c)},siblings:function(a){return p.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return p.sibling(a.firstChild)},contents:function(a){return p.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:p.merge([],a.childNodes)}},function(a,b){p.fn[a]=function(c,d){var e=p.map(this,b,c);return bc.test(a)||(d=c),d&&typeof d=="string"&&(e=p.filter(d,e)),e=this.length>1&&!bg[a]?p.unique(e):e,this.length>1&&bd.test(a)&&(e=e.reverse()),this.pushStack(e,a,k.call(arguments).join(","))}}),p.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),b.length===1?p.find.matchesSelector(b[0],a)?[b[0]]:[]:p.find.matches(a,b)},dir:function(a,c,d){var e=[],f=a[c];while(f&&f.nodeType!==9&&(d===b||f.nodeType!==1||!p(f).is(d)))f.nodeType===1&&e.push(f),f=f[c];return e},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var bl="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",bm=/ jQuery\d+="(?:null|\d+)"/g,bn=/^\s+/,bo=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bp=/<([\w:]+)/,bq=/<tbody/i,br=/<|&#?\w+;/,bs=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,bu=new RegExp("<(?:"+bl+")[\\s/>]","i"),bv=/^(?:checkbox|radio)$/,bw=/checked\s*(?:[^=]|=\s*.checked.)/i,bx=/\/(java|ecma)script/i,by=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,bz={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bA=bk(e),bB=bA.appendChild(e.createElement("div"));bz.optgroup=bz.option,bz.tbody=bz.tfoot=bz.colgroup=bz.caption=bz.thead,bz.th=bz.td,p.support.htmlSerialize||(bz._default=[1,"X<div>","</div>"]),p.fn.extend({text:function(a){return p.access(this,function(a){return a===b?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||e).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(p.isFunction(a))return this.each(function(b){p(this).wrapAll(a.call(this,b))});if(this[0]){var b=p(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return p.isFunction(a)?this.each(function(b){p(this).wrapInner(a.call(this,b))}):this.each(function(){var b=p(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=p.isFunction(a);return this.each(function(c){p(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(a,this.firstChild)})},before:function(){if(!bh(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(a,this),"before",this.selector)}},after:function(){if(!bh(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(this,a),"after",this.selector)}},remove:function(a,b){var c,d=0;for(;(c=this[d])!=null;d++)if(!a||p.filter(a,[c]).length)!b&&c.nodeType===1&&(p.cleanData(c.getElementsByTagName("*")),p.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c);return this},empty:function(){var a,b=0;for(;(a=this[b])!=null;b++){a.nodeType===1&&p.cleanData(a.getElementsByTagName("*"));while(a.firstChild)a.removeChild(a.firstChild)}return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return p.clone(this,a,b)})},html:function(a){return p.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return c.nodeType===1?c.innerHTML.replace(bm,""):b;if(typeof a=="string"&&!bs.test(a)&&(p.support.htmlSerialize||!bu.test(a))&&(p.support.leadingWhitespace||!bn.test(a))&&!bz[(bp.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(bo,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},c.nodeType===1&&(p.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){return bh(this[0])?this.length?this.pushStack(p(p.isFunction(a)?a():a),"replaceWith",a):this:p.isFunction(a)?this.each(function(b){var c=p(this),d=c.html();c.replaceWith(a.call(this,b,d))}):(typeof a!="string"&&(a=p(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;p(this).remove(),b?p(b).before(a):p(c).append(a)}))},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=[].concat.apply([],a);var e,f,g,h,i=0,j=a[0],k=[],l=this.length;if(!p.support.checkClone&&l>1&&typeof j=="string"&&bw.test(j))return this.each(function(){p(this).domManip(a,c,d)});if(p.isFunction(j))return this.each(function(e){var f=p(this);a[0]=j.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){e=p.buildFragment(a,this,k),g=e.fragment,f=g.firstChild,g.childNodes.length===1&&(g=f);if(f){c=c&&p.nodeName(f,"tr");for(h=e.cacheable||l-1;i<l;i++)d.call(c&&p.nodeName(this[i],"table")?bC(this[i],"tbody"):this[i],i===h?g:p.clone(g,!0,!0))}g=f=null,k.length&&p.each(k,function(a,b){b.src?p.ajax?p.ajax({url:b.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):p.error("no ajax"):p.globalEval((b.text||b.textContent||b.innerHTML||"").replace(by,"")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),p.buildFragment=function(a,c,d){var f,g,h,i=a[0];return c=c||e,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c,a.length===1&&typeof i=="string"&&i.length<512&&c===e&&i.charAt(0)==="<"&&!bt.test(i)&&(p.support.checkClone||!bw.test(i))&&(p.support.html5Clone||!bu.test(i))&&(g=!0,f=p.fragments[i],h=f!==b),f||(f=c.createDocumentFragment(),p.clean(a,c,f,d),g&&(p.fragments[i]=h&&f)),{fragment:f,cacheable:g}},p.fragments={},p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){p.fn[a]=function(c){var d,e=0,f=[],g=p(c),h=g.length,i=this.length===1&&this[0].parentNode;if((i==null||i&&i.nodeType===11&&i.childNodes.length===1)&&h===1)return g[b](this[0]),this;for(;e<h;e++)d=(e>0?this.clone(!0):this).get(),p(g[e])[b](d),f=f.concat(d);return this.pushStack(f,a,g.selector)}}),p.extend({clone:function(a,b,c){var d,e,f,g;p.support.html5Clone||p.isXMLDoc(a)||!bu.test("<"+a.nodeName+">")?g=a.cloneNode(!0):(bB.innerHTML=a.outerHTML,bB.removeChild(g=bB.firstChild));if((!p.support.noCloneEvent||!p.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!p.isXMLDoc(a)){bE(a,g),d=bF(a),e=bF(g);for(f=0;d[f];++f)e[f]&&bE(d[f],e[f])}if(b){bD(a,g);if(c){d=bF(a),e=bF(g);for(f=0;d[f];++f)bD(d[f],e[f])}}return d=e=null,g},clean:function(a,b,c,d){var f,g,h,i,j,k,l,m,n,o,q,r,s=b===e&&bA,t=[];if(!b||typeof b.createDocumentFragment=="undefined")b=e;for(f=0;(h=a[f])!=null;f++){typeof h=="number"&&(h+="");if(!h)continue;if(typeof h=="string")if(!br.test(h))h=b.createTextNode(h);else{s=s||bk(b),l=b.createElement("div"),s.appendChild(l),h=h.replace(bo,"<$1></$2>"),i=(bp.exec(h)||["",""])[1].toLowerCase(),j=bz[i]||bz._default,k=j[0],l.innerHTML=j[1]+h+j[2];while(k--)l=l.lastChild;if(!p.support.tbody){m=bq.test(h),n=i==="table"&&!m?l.firstChild&&l.firstChild.childNodes:j[1]==="<table>"&&!m?l.childNodes:[];for(g=n.length-1;g>=0;--g)p.nodeName(n[g],"tbody")&&!n[g].childNodes.length&&n[g].parentNode.removeChild(n[g])}!p.support.leadingWhitespace&&bn.test(h)&&l.insertBefore(b.createTextNode(bn.exec(h)[0]),l.firstChild),h=l.childNodes,l.parentNode.removeChild(l)}h.nodeType?t.push(h):p.merge(t,h)}l&&(h=l=s=null);if(!p.support.appendChecked)for(f=0;(h=t[f])!=null;f++)p.nodeName(h,"input")?bG(h):typeof h.getElementsByTagName!="undefined"&&p.grep(h.getElementsByTagName("input"),bG);if(c){q=function(a){if(!a.type||bx.test(a.type))return d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a)};for(f=0;(h=t[f])!=null;f++)if(!p.nodeName(h,"script")||!q(h))c.appendChild(h),typeof h.getElementsByTagName!="undefined"&&(r=p.grep(p.merge([],h.getElementsByTagName("script")),q),t.splice.apply(t,[f+1,0].concat(r)),f+=r.length)}return t},cleanData:function(a,b){var c,d,e,f,g=0,h=p.expando,i=p.cache,j=p.support.deleteExpando,k=p.event.special;for(;(e=a[g])!=null;g++)if(b||p.acceptData(e)){d=e[h],c=d&&i[d];if(c){if(c.events)for(f in c.events)k[f]?p.event.remove(e,f):p.removeEvent(e,f,c.handle);i[d]&&(delete i[d],j?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,p.deletedIds.push(d))}}}}),function(){var a,b;p.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a=p.uaMatch(g.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0),p.browser=b,p.sub=function(){function a(b,c){return new a.fn.init(b,c)}p.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function c(c,d){return d&&d instanceof p&&!(d instanceof a)&&(d=a(d)),p.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var b=a(e);return a}}();var bH,bI,bJ,bK=/alpha\([^)]*\)/i,bL=/opacity=([^)]*)/,bM=/^(top|right|bottom|left)$/,bN=/^(none|table(?!-c[ea]).+)/,bO=/^margin/,bP=new RegExp("^("+q+")(.*)$","i"),bQ=new RegExp("^("+q+")(?!px)[a-z%]+$","i"),bR=new RegExp("^([-+])=("+q+")","i"),bS={},bT={position:"absolute",visibility:"hidden",display:"block"},bU={letterSpacing:0,fontWeight:400},bV=["Top","Right","Bottom","Left"],bW=["Webkit","O","Moz","ms"],bX=p.fn.toggle;p.fn.extend({css:function(a,c){return p.access(this,function(a,c,d){return d!==b?p.style(a,c,d):p.css(a,c)},a,c,arguments.length>1)},show:function(){return b$(this,!0)},hide:function(){return b$(this)},toggle:function(a,b){var c=typeof a=="boolean";return p.isFunction(a)&&p.isFunction(b)?bX.apply(this,arguments):this.each(function(){(c?a:bZ(this))?p(this).show():p(this).hide()})}}),p.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bH(a,"opacity");return c===""?"1":c}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":p.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!a||a.nodeType===3||a.nodeType===8||!a.style)return;var f,g,h,i=p.camelCase(c),j=a.style;c=p.cssProps[i]||(p.cssProps[i]=bY(j,i)),h=p.cssHooks[c]||p.cssHooks[i];if(d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];g=typeof d,g==="string"&&(f=bR.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(p.css(a,c)),g="number");if(d==null||g==="number"&&isNaN(d))return;g==="number"&&!p.cssNumber[i]&&(d+="px");if(!h||!("set"in h)||(d=h.set(a,d,e))!==b)try{j[c]=d}catch(k){}},css:function(a,c,d,e){var f,g,h,i=p.camelCase(c);return c=p.cssProps[i]||(p.cssProps[i]=bY(a.style,i)),h=p.cssHooks[c]||p.cssHooks[i],h&&"get"in h&&(f=h.get(a,!0,e)),f===b&&(f=bH(a,c)),f==="normal"&&c in bU&&(f=bU[c]),d||e!==b?(g=parseFloat(f),d||p.isNumeric(g)?g||0:f):f},swap:function(a,b,c){var d,e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];d=c.call(a);for(e in b)a.style[e]=f[e];return d}}),a.getComputedStyle?bH=function(b,c){var d,e,f,g,h=a.getComputedStyle(b,null),i=b.style;return h&&(d=h[c],d===""&&!p.contains(b.ownerDocument,b)&&(d=p.style(b,c)),bQ.test(d)&&bO.test(c)&&(e=i.width,f=i.minWidth,g=i.maxWidth,i.minWidth=i.maxWidth=i.width=d,d=h.width,i.width=e,i.minWidth=f,i.maxWidth=g)),d}:e.documentElement.currentStyle&&(bH=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;return e==null&&f&&f[b]&&(e=f[b]),bQ.test(e)&&!bM.test(b)&&(c=f.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b==="fontSize"?"1em":e,e=f.pixelLeft+"px",f.left=c,d&&(a.runtimeStyle.left=d)),e===""?"auto":e}),p.each(["height","width"],function(a,b){p.cssHooks[b]={get:function(a,c,d){if(c)return a.offsetWidth===0&&bN.test(bH(a,"display"))?p.swap(a,bT,function(){return cb(a,b,d)}):cb(a,b,d)},set:function(a,c,d){return b_(a,c,d?ca(a,b,d,p.support.boxSizing&&p.css(a,"boxSizing")==="border-box"):0)}}}),p.support.opacity||(p.cssHooks.opacity={get:function(a,b){return bL.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=p.isNumeric(b)?"alpha(opacity="+b*100+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&p.trim(f.replace(bK,""))===""&&c.removeAttribute){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bK.test(f)?f.replace(bK,e):f+" "+e}}),p(function(){p.support.reliableMarginRight||(p.cssHooks.marginRight={get:function(a,b){return p.swap(a,{display:"inline-block"},function(){if(b)return bH(a,"marginRight")})}}),!p.support.pixelPosition&&p.fn.position&&p.each(["top","left"],function(a,b){p.cssHooks[b]={get:function(a,c){if(c){var d=bH(a,b);return bQ.test(d)?p(a).position()[b]+"px":d}}}})}),p.expr&&p.expr.filters&&(p.expr.filters.hidden=function(a){return a.offsetWidth===0&&a.offsetHeight===0||!p.support.reliableHiddenOffsets&&(a.style&&a.style.display||bH(a,"display"))==="none"},p.expr.filters.visible=function(a){return!p.expr.filters.hidden(a)}),p.each({margin:"",padding:"",border:"Width"},function(a,b){p.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};for(d=0;d<4;d++)f[a+bV[d]+b]=e[d]||e[d-2]||e[0];return f}},bO.test(a)||(p.cssHooks[a+b].set=b_)});var cd=/%20/g,ce=/\[\]$/,cf=/\r?\n/g,cg=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,ch=/^(?:select|textarea)/i;p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?p.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ch.test(this.nodeName)||cg.test(this.type))}).map(function(a,b){var c=p(this).val();return c==null?null:p.isArray(c)?p.map(c,function(a,c){return{name:b.name,value:a.replace(cf,"\r\n")}}):{name:b.name,value:c.replace(cf,"\r\n")}}).get()}}),p.param=function(a,c){var d,e=[],f=function(a,b){b=p.isFunction(b)?b():b==null?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=p.ajaxSettings&&p.ajaxSettings.traditional);if(p.isArray(a)||a.jquery&&!p.isPlainObject(a))p.each(a,function(){f(this.name,this.value)});else for(d in a)ci(d,a[d],c,f);return e.join("&").replace(cd,"+")};var cj,ck,cl=/#.*$/,cm=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,cn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,co=/^(?:GET|HEAD)$/,cp=/^\/\//,cq=/\?/,cr=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,cs=/([?&])_=[^&]*/,ct=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,cu=p.fn.load,cv={},cw={},cx=["*/"]+["*"];try{ck=f.href}catch(cy){ck=e.createElement("a"),ck.href="",ck=ck.href}cj=ct.exec(ck.toLowerCase())||[],p.fn.load=function(a,c,d){if(typeof a!="string"&&cu)return cu.apply(this,arguments);if(!this.length)return this;var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),p.isFunction(c)?(d=c,c=b):c&&typeof c=="object"&&(f="POST"),p.ajax({url:a,type:f,dataType:"html",data:c,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments,h.html(e?p("<div>").append(a.replace(cr,"")).find(e):a)}),this},p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){p.fn[b]=function(a){return this.on(b,a)}}),p.each(["get","post"],function(a,c){p[c]=function(a,d,e,f){return p.isFunction(d)&&(f=f||e,e=d,d=b),p.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),p.extend({getScript:function(a,c){return p.get(a,b,c,"script")},getJSON:function(a,b,c){return p.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?cB(a,p.ajaxSettings):(b=a,a=p.ajaxSettings),cB(a,b),a},ajaxSettings:{url:ck,isLocal:cn.test(cj[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":cx},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:cz(cv),ajaxTransport:cz(cw),ajax:function(a,c){function y(a,c,f,i){var k,s,t,u,w,y=c;if(v===2)return;v=2,h&&clearTimeout(h),g=b,e=i||"",x.readyState=a>0?4:0,f&&(u=cC(l,x,f));if(a>=200&&a<300||a===304)l.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(p.lastModified[d]=w),w=x.getResponseHeader("Etag"),w&&(p.etag[d]=w)),a===304?(y="notmodified",k=!0):(k=cD(l,u),y=k.state,s=k.data,t=k.error,k=!t);else{t=y;if(!y||a)y="error",a<0&&(a=0)}x.status=a,x.statusText=(c||y)+"",k?o.resolveWith(m,[s,y,x]):o.rejectWith(m,[x,y,t]),x.statusCode(r),r=b,j&&n.trigger("ajax"+(k?"Success":"Error"),[x,l,k?s:t]),q.fireWith(m,[x,y]),j&&(n.trigger("ajaxComplete",[x,l]),--p.active||p.event.trigger("ajaxStop"))}typeof a=="object"&&(c=a,a=b),c=c||{};var d,e,f,g,h,i,j,k,l=p.ajaxSetup({},c),m=l.context||l,n=m!==l&&(m.nodeType||m instanceof p)?p(m):p.event,o=p.Deferred(),q=p.Callbacks("once memory"),r=l.statusCode||{},t={},u={},v=0,w="canceled",x={readyState:0,setRequestHeader:function(a,b){if(!v){var c=a.toLowerCase();a=u[c]=u[c]||a,t[a]=b}return this},getAllResponseHeaders:function(){return v===2?e:null},getResponseHeader:function(a){var c;if(v===2){if(!f){f={};while(c=cm.exec(e))f[c[1].toLowerCase()]=c[2]}c=f[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return v||(l.mimeType=a),this},abort:function(a){return a=a||w,g&&g.abort(a),y(0,a),this}};o.promise(x),x.success=x.done,x.error=x.fail,x.complete=q.add,x.statusCode=function(a){if(a){var b;if(v<2)for(b in a)r[b]=[r[b],a[b]];else b=a[x.status],x.always(b)}return this},l.url=((a||l.url)+"").replace(cl,"").replace(cp,cj[1]+"//"),l.dataTypes=p.trim(l.dataType||"*").toLowerCase().split(s),l.crossDomain==null&&(i=ct.exec(l.url.toLowerCase())||!1,l.crossDomain=i&&i.join(":")+(i[3]?"":i[1]==="http:"?80:443)!==cj.join(":")+(cj[3]?"":cj[1]==="http:"?80:443)),l.data&&l.processData&&typeof l.data!="string"&&(l.data=p.param(l.data,l.traditional)),cA(cv,l,c,x);if(v===2)return x;j=l.global,l.type=l.type.toUpperCase(),l.hasContent=!co.test(l.type),j&&p.active++===0&&p.event.trigger("ajaxStart");if(!l.hasContent){l.data&&(l.url+=(cq.test(l.url)?"&":"?")+l.data,delete l.data),d=l.url;if(l.cache===!1){var z=p.now(),A=l.url.replace(cs,"$1_="+z);l.url=A+(A===l.url?(cq.test(l.url)?"&":"?")+"_="+z:"")}}(l.data&&l.hasContent&&l.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",l.contentType),l.ifModified&&(d=d||l.url,p.lastModified[d]&&x.setRequestHeader("If-Modified-Since",p.lastModified[d]),p.etag[d]&&x.setRequestHeader("If-None-Match",p.etag[d])),x.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+(l.dataTypes[0]!=="*"?", "+cx+"; q=0.01":""):l.accepts["*"]);for(k in l.headers)x.setRequestHeader(k,l.headers[k]);if(!l.beforeSend||l.beforeSend.call(m,x,l)!==!1&&v!==2){w="abort";for(k in{success:1,error:1,complete:1})x[k](l[k]);g=cA(cw,l,c,x);if(!g)y(-1,"No Transport");else{x.readyState=1,j&&n.trigger("ajaxSend",[x,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){x.abort("timeout")},l.timeout));try{v=1,g.send(t,y)}catch(B){if(v<2)y(-1,B);else throw B}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var cE=[],cF=/\?/,cG=/(=)\?(?=&|$)|\?\?/,cH=p.now();p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=cE.pop()||p.expando+"_"+cH++;return this[a]=!0,a}}),p.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.data,j=c.url,k=c.jsonp!==!1,l=k&&cG.test(j),m=k&&!l&&typeof i=="string"&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&cG.test(i);if(c.dataTypes[0]==="jsonp"||l||m)return f=c.jsonpCallback=p.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,g=a[f],l?c.url=j.replace(cG,"$1"+f):m?c.data=i.replace(cG,"$1"+f):k&&(c.url+=(cF.test(j)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||p.error(f+" was not called"),h[0]},c.dataTypes[0]="json",a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,cE.push(f)),h&&p.isFunction(g)&&g(h[0]),h=g=b}),"script"}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return p.globalEval(a),a}}}),p.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),p.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=e.head||e.getElementsByTagName("head")[0]||e.documentElement;return{send:function(f,g){c=e.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||g(200,"success")},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var cI,cJ=a.ActiveXObject?function(){for(var a in cI)cI[a](0,1)}:!1,cK=0;p.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&cL()||cM()}:cL,function(a){p.extend(p.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(p.ajaxSettings.xhr()),p.support.ajax&&p.ajaxTransport(function(c){if(!c.crossDomain||p.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async);if(c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l,m;try{if(d&&(e||i.readyState===4)){d=b,g&&(i.onreadystatechange=p.noop,cJ&&delete cI[g]);if(e)i.readyState!==4&&i.abort();else{h=i.status,k=i.getAllResponseHeaders(),l={},m=i.responseXML,m&&m.documentElement&&(l.xml=m);try{l.text=i.responseText}catch(a){}try{j=i.statusText}catch(n){j=""}!h&&c.isLocal&&!c.crossDomain?h=l.text?200:404:h===1223&&(h=204)}}}catch(o){e||f(-1,o)}l&&f(h,j,l,k)},c.async?i.readyState===4?setTimeout(d,0):(g=++cK,cJ&&(cI||(cI={},p(a).unload(cJ)),cI[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var cN,cO,cP=/^(?:toggle|show|hide)$/,cQ=new RegExp("^(?:([-+])=|)("+q+")([a-z%]*)$","i"),cR=/queueHooks$/,cS=[cY],cT={"*":[function(a,b){var c,d,e=this.createTween(a,b),f=cQ.exec(b),g=e.cur(),h=+g||0,i=1,j=20;if(f){c=+f[2],d=f[3]||(p.cssNumber[a]?"":"px");if(d!=="px"&&h){h=p.css(e.elem,a,!0)||c||1;do i=i||".5",h=h/i,p.style(e.elem,a,h+d);while(i!==(i=e.cur()/g)&&i!==1&&--j)}e.unit=d,e.start=h,e.end=f[1]?h+(f[1]+1)*c:c}return e}]};p.Animation=p.extend(cW,{tweener:function(a,b){p.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");var c,d=0,e=a.length;for(;d<e;d++)c=a[d],cT[c]=cT[c]||[],cT[c].unshift(b)},prefilter:function(a,b){b?cS.unshift(a):cS.push(a)}}),p.Tween=cZ,cZ.prototype={constructor:cZ,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(p.cssNumber[c]?"":"px")},cur:function(){var a=cZ.propHooks[this.prop];return a&&a.get?a.get(this):cZ.propHooks._default.get(this)},run:function(a){var b,c=cZ.propHooks[this.prop];return this.options.duration?this.pos=b=p.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):cZ.propHooks._default.set(this),this}},cZ.prototype.init.prototype=cZ.prototype,cZ.propHooks={_default:{get:function(a){var b;return a.elem[a.prop]==null||!!a.elem.style&&a.elem.style[a.prop]!=null?(b=p.css(a.elem,a.prop,!1,""),!b||b==="auto"?0:b):a.elem[a.prop]},set:function(a){p.fx.step[a.prop]?p.fx.step[a.prop](a):a.elem.style&&(a.elem.style[p.cssProps[a.prop]]!=null||p.cssHooks[a.prop])?p.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},cZ.propHooks.scrollTop=cZ.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},p.each(["toggle","show","hide"],function(a,b){var c=p.fn[b];p.fn[b]=function(d,e,f){return d==null||typeof d=="boolean"||!a&&p.isFunction(d)&&p.isFunction(e)?c.apply(this,arguments):this.animate(c$(b,!0),d,e,f)}}),p.fn.extend({fadeTo:function(a,b,c,d){return this.filter(bZ).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=p.isEmptyObject(a),f=p.speed(b,c,d),g=function(){var b=cW(this,p.extend({},a),f);e&&b.stop(!0)};return e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=a!=null&&a+"queueHooks",f=p.timers,g=p._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&cR.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem===this&&(a==null||f[c].queue===a)&&(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&p.dequeue(this,a)})}}),p.each({slideDown:c$("show"),slideUp:c$("hide"),slideToggle:c$("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){p.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),p.speed=function(a,b,c){var d=a&&typeof a=="object"?p.extend({},a):{complete:c||!c&&b||p.isFunction(a)&&a,duration:a,easing:c&&b||b&&!p.isFunction(b)&&b};d.duration=p.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in p.fx.speeds?p.fx.speeds[d.duration]:p.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";return d.old=d.complete,d.complete=function(){p.isFunction(d.old)&&d.old.call(this),d.queue&&p.dequeue(this,d.queue)},d},p.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},p.timers=[],p.fx=cZ.prototype.init,p.fx.tick=function(){var a,b=p.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||p.fx.stop()},p.fx.timer=function(a){a()&&p.timers.push(a)&&!cO&&(cO=setInterval(p.fx.tick,p.fx.interval))},p.fx.interval=13,p.fx.stop=function(){clearInterval(cO),cO=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fx.step={},p.expr&&p.expr.filters&&(p.expr.filters.animated=function(a){return p.grep(p.timers,function(b){return a===b.elem}).length});var c_=/^(?:body|html)$/i;p.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){p.offset.setOffset(this,a,b)});var c,d,e,f,g,h,i,j={top:0,left:0},k=this[0],l=k&&k.ownerDocument;if(!l)return;return(d=l.body)===k?p.offset.bodyOffset(k):(c=l.documentElement,p.contains(c,k)?(typeof k.getBoundingClientRect!="undefined"&&(j=k.getBoundingClientRect()),e=da(l),f=c.clientTop||d.clientTop||0,g=c.clientLeft||d.clientLeft||0,h=e.pageYOffset||c.scrollTop,i=e.pageXOffset||c.scrollLeft,{top:j.top+h-f,left:j.left+i-g}):j)},p.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return p.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(p.css(a,"marginTop"))||0,c+=parseFloat(p.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=p.css(a,"position");d==="static"&&(a.style.position="relative");var e=p(a),f=e.offset(),g=p.css(a,"top"),h=p.css(a,"left"),i=(d==="absolute"||d==="fixed")&&p.inArray("auto",[g,h])>-1,j={},k={},l,m;i?(k=e.position(),l=k.top,m=k.left):(l=parseFloat(g)||0,m=parseFloat(h)||0),p.isFunction(b)&&(b=b.call(a,c,f)),b.top!=null&&(j.top=b.top-f.top+l),b.left!=null&&(j.left=b.left-f.left+m),"using"in b?b.using.call(a,j):e.css(j)}},p.fn.extend({position:function(){if(!this[0])return;var a=this[0],b=this.offsetParent(),c=this.offset(),d=c_.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(p.css(a,"marginTop"))||0,c.left-=parseFloat(p.css(a,"marginLeft"))||0,d.top+=parseFloat(p.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(p.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||e.body;while(a&&!c_.test(a.nodeName)&&p.css(a,"position")==="static")a=a.offsetParent;return a||e.body})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);p.fn[a]=function(e){return p.access(this,function(a,e,f){var g=da(a);if(f===b)return g?c in g?g[c]:g.document.documentElement[e]:a[e];g?g.scrollTo(d?p(g).scrollLeft():f,d?f:p(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}}),p.each({Height:"height",Width:"width"},function(a,c){p.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){p.fn[e]=function(e,f){var g=arguments.length&&(d||typeof e!="boolean"),h=d||(e===!0||f===!0?"margin":"border");return p.access(this,function(c,d,e){var f;return p.isWindow(c)?c.document.documentElement["client"+a]:c.nodeType===9?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?p.css(c,d,e,h):p.style(c,d,e,h)},c,g?e:b,g,null)}})}),a.jQuery=a.$=p,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return p})})(window);;
// $Id: block_edit.js,v 1.1.2.14 2010/02/17 18:24:24 psynaptic Exp $

Drupal.behaviors.block_edit = function (context) {
  if (Drupal.settings.block_edit.hover_links) {
    $('.node-edit-link, .block-edit-link').hide();
    $('div.block, div.node').mouseover(function() {
      $(this).find('.node-edit-link, .block-edit-link').css('display', 'block');
    });

    $('div.block, div.node').mouseout(function() {
      $(this).find('.node-edit-link, .block-edit-link').css('display', 'none');
    });
  };
};
;

(function ($) {
  Drupal.Panels = {};

  Drupal.Panels.autoAttach = function() {
    if ($.browser.msie) {
      // If IE, attach a hover event so we can see our admin links.
      $("div.panel-pane").hover(
        function() {
          $('div.panel-hide', this).addClass("panel-hide-hover"); return true;
        },
        function() {
          $('div.panel-hide', this).removeClass("panel-hide-hover"); return true;
        }
      );
      $("div.admin-links").hover(
        function() {
          $(this).addClass("admin-links-hover"); return true;
        },
        function(){
          $(this).removeClass("admin-links-hover"); return true;
        }
      );
    }
  };

  $(Drupal.Panels.autoAttach);
})(jQuery);
;
/*
 * jQuery Cycle Plugin (with Transition Definitions)
 * Examples and documentation at: http://jquery.malsup.com/cycle/
 * Copyright (c) 2007-2010 M. Alsup
 * Version: 2.88 (08-JUN-2010)
 * Dual licensed under the MIT and GPL licenses.
 * http://jquery.malsup.com/license.html
 * Requires: jQuery v1.2.6 or later
 */
(function($){var ver="2.88";if($.support==undefined){$.support={opacity:!($.browser.msie)};}function debug(s){if($.fn.cycle.debug){log(s);}}function log(){if(window.console&&window.console.log){window.console.log("[cycle] "+Array.prototype.join.call(arguments," "));}}$.fn.cycle=function(options,arg2){var o={s:this.selector,c:this.context};if(this.length===0&&options!="stop"){if(!$.isReady&&o.s){log("DOM not ready, queuing slideshow");$(function(){$(o.s,o.c).cycle(options,arg2);});return this;}log("terminating; zero elements found by selector"+($.isReady?"":" (DOM not ready)"));return this;}return this.each(function(){var opts=handleArguments(this,options,arg2);if(opts===false){return;}opts.updateActivePagerLink=opts.updateActivePagerLink||$.fn.cycle.updateActivePagerLink;if(this.cycleTimeout){clearTimeout(this.cycleTimeout);}this.cycleTimeout=this.cyclePause=0;var $cont=$(this);var $slides=opts.slideExpr?$(opts.slideExpr,this):$cont.children();var els=$slides.get();if(els.length<2){log("terminating; too few slides: "+els.length);return;}var opts2=buildOptions($cont,$slides,els,opts,o);if(opts2===false){return;}var startTime=opts2.continuous?10:getTimeout(els[opts2.currSlide],els[opts2.nextSlide],opts2,!opts2.rev);if(startTime){startTime+=(opts2.delay||0);if(startTime<10){startTime=10;}debug("first timeout: "+startTime);this.cycleTimeout=setTimeout(function(){go(els,opts2,0,(!opts2.rev&&!opts.backwards));},startTime);}});};function handleArguments(cont,options,arg2){if(cont.cycleStop==undefined){cont.cycleStop=0;}if(options===undefined||options===null){options={};}if(options.constructor==String){switch(options){case"destroy":case"stop":var opts=$(cont).data("cycle.opts");if(!opts){return false;}cont.cycleStop++;if(cont.cycleTimeout){clearTimeout(cont.cycleTimeout);}cont.cycleTimeout=0;$(cont).removeData("cycle.opts");if(options=="destroy"){destroy(opts);}return false;case"toggle":cont.cyclePause=(cont.cyclePause===1)?0:1;checkInstantResume(cont.cyclePause,arg2,cont);return false;case"pause":cont.cyclePause=1;return false;case"resume":cont.cyclePause=0;checkInstantResume(false,arg2,cont);return false;case"prev":case"next":var opts=$(cont).data("cycle.opts");if(!opts){log('options not found, "prev/next" ignored');return false;}$.fn.cycle[options](opts);return false;default:options={fx:options};}return options;}else{if(options.constructor==Number){var num=options;options=$(cont).data("cycle.opts");if(!options){log("options not found, can not advance slide");return false;}if(num<0||num>=options.elements.length){log("invalid slide index: "+num);return false;}options.nextSlide=num;if(cont.cycleTimeout){clearTimeout(cont.cycleTimeout);cont.cycleTimeout=0;}if(typeof arg2=="string"){options.oneTimeFx=arg2;}go(options.elements,options,1,num>=options.currSlide);return false;}}return options;function checkInstantResume(isPaused,arg2,cont){if(!isPaused&&arg2===true){var options=$(cont).data("cycle.opts");if(!options){log("options not found, can not resume");return false;}if(cont.cycleTimeout){clearTimeout(cont.cycleTimeout);cont.cycleTimeout=0;}go(options.elements,options,1,(!opts.rev&&!opts.backwards));}}}function removeFilter(el,opts){if(!$.support.opacity&&opts.cleartype&&el.style.filter){try{el.style.removeAttribute("filter");}catch(smother){}}}function destroy(opts){if(opts.next){$(opts.next).unbind(opts.prevNextEvent);}if(opts.prev){$(opts.prev).unbind(opts.prevNextEvent);}if(opts.pager||opts.pagerAnchorBuilder){$.each(opts.pagerAnchors||[],function(){this.unbind().remove();});}opts.pagerAnchors=null;if(opts.destroy){opts.destroy(opts);}}function buildOptions($cont,$slides,els,options,o){var opts=$.extend({},$.fn.cycle.defaults,options||{},$.metadata?$cont.metadata():$.meta?$cont.data():{});if(opts.autostop){opts.countdown=opts.autostopCount||els.length;}var cont=$cont[0];$cont.data("cycle.opts",opts);opts.$cont=$cont;opts.stopCount=cont.cycleStop;opts.elements=els;opts.before=opts.before?[opts.before]:[];opts.after=opts.after?[opts.after]:[];opts.after.unshift(function(){opts.busy=0;});if(!$.support.opacity&&opts.cleartype){opts.after.push(function(){removeFilter(this,opts);});}if(opts.continuous){opts.after.push(function(){go(els,opts,0,(!opts.rev&&!opts.backwards));});}saveOriginalOpts(opts);if(!$.support.opacity&&opts.cleartype&&!opts.cleartypeNoBg){clearTypeFix($slides);}if($cont.css("position")=="static"){$cont.css("position","relative");}if(opts.width){$cont.width(opts.width);}if(opts.height&&opts.height!="auto"){$cont.height(opts.height);}if(opts.startingSlide){opts.startingSlide=parseInt(opts.startingSlide);}else{if(opts.backwards){opts.startingSlide=els.length-1;}}if(opts.random){opts.randomMap=[];for(var i=0;i<els.length;i++){opts.randomMap.push(i);}opts.randomMap.sort(function(a,b){return Math.random()-0.5;});opts.randomIndex=1;opts.startingSlide=opts.randomMap[1];}else{if(opts.startingSlide>=els.length){opts.startingSlide=0;}}opts.currSlide=opts.startingSlide||0;var first=opts.startingSlide;$slides.css({position:"absolute",top:0,left:0}).hide().each(function(i){var z;if(opts.backwards){z=first?i<=first?els.length+(i-first):first-i:els.length-i;}else{z=first?i>=first?els.length-(i-first):first-i:els.length-i;}$(this).css("z-index",z);});$(els[first]).css("opacity",1).show();removeFilter(els[first],opts);if(opts.fit&&opts.width){$slides.width(opts.width);}if(opts.fit&&opts.height&&opts.height!="auto"){$slides.height(opts.height);}var reshape=opts.containerResize&&!$cont.innerHeight();if(reshape){var maxw=0,maxh=0;for(var j=0;j<els.length;j++){var $e=$(els[j]),e=$e[0],w=$e.outerWidth(),h=$e.outerHeight();if(!w){w=e.offsetWidth||e.width||$e.attr("width");}if(!h){h=e.offsetHeight||e.height||$e.attr("height");}maxw=w>maxw?w:maxw;maxh=h>maxh?h:maxh;}if(maxw>0&&maxh>0){$cont.css({width:maxw+"px",height:maxh+"px"});}}if(opts.pause){$cont.hover(function(){this.cyclePause++;},function(){this.cyclePause--;});}if(supportMultiTransitions(opts)===false){return false;}var requeue=false;options.requeueAttempts=options.requeueAttempts||0;$slides.each(function(){var $el=$(this);this.cycleH=(opts.fit&&opts.height)?opts.height:($el.height()||this.offsetHeight||this.height||$el.attr("height")||0);this.cycleW=(opts.fit&&opts.width)?opts.width:($el.width()||this.offsetWidth||this.width||$el.attr("width")||0);if($el.is("img")){var loadingIE=($.browser.msie&&this.cycleW==28&&this.cycleH==30&&!this.complete);var loadingFF=($.browser.mozilla&&this.cycleW==34&&this.cycleH==19&&!this.complete);var loadingOp=($.browser.opera&&((this.cycleW==42&&this.cycleH==19)||(this.cycleW==37&&this.cycleH==17))&&!this.complete);var loadingOther=(this.cycleH==0&&this.cycleW==0&&!this.complete);if(loadingIE||loadingFF||loadingOp||loadingOther){if(o.s&&opts.requeueOnImageNotLoaded&&++options.requeueAttempts<100){log(options.requeueAttempts," - img slide not loaded, requeuing slideshow: ",this.src,this.cycleW,this.cycleH);setTimeout(function(){$(o.s,o.c).cycle(options);},opts.requeueTimeout);requeue=true;return false;}else{log("could not determine size of image: "+this.src,this.cycleW,this.cycleH);}}}return true;});if(requeue){return false;}opts.cssBefore=opts.cssBefore||{};opts.animIn=opts.animIn||{};opts.animOut=opts.animOut||{};$slides.not(":eq("+first+")").css(opts.cssBefore);if(opts.cssFirst){$($slides[first]).css(opts.cssFirst);}if(opts.timeout){opts.timeout=parseInt(opts.timeout);if(opts.speed.constructor==String){opts.speed=$.fx.speeds[opts.speed]||parseInt(opts.speed);}if(!opts.sync){opts.speed=opts.speed/2;}var buffer=opts.fx=="shuffle"?500:250;while((opts.timeout-opts.speed)<buffer){opts.timeout+=opts.speed;}}if(opts.easing){opts.easeIn=opts.easeOut=opts.easing;}if(!opts.speedIn){opts.speedIn=opts.speed;}if(!opts.speedOut){opts.speedOut=opts.speed;}opts.slideCount=els.length;opts.currSlide=opts.lastSlide=first;if(opts.random){if(++opts.randomIndex==els.length){opts.randomIndex=0;}opts.nextSlide=opts.randomMap[opts.randomIndex];}else{if(opts.backwards){opts.nextSlide=opts.startingSlide==0?(els.length-1):opts.startingSlide-1;}else{opts.nextSlide=opts.startingSlide>=(els.length-1)?0:opts.startingSlide+1;}}if(!opts.multiFx){var init=$.fn.cycle.transitions[opts.fx];if($.isFunction(init)){init($cont,$slides,opts);}else{if(opts.fx!="custom"&&!opts.multiFx){log("unknown transition: "+opts.fx,"; slideshow terminating");return false;}}}var e0=$slides[first];if(opts.before.length){opts.before[0].apply(e0,[e0,e0,opts,true]);}if(opts.after.length>1){opts.after[1].apply(e0,[e0,e0,opts,true]);}if(opts.next){$(opts.next).bind(opts.prevNextEvent,function(){return advance(opts,opts.rev?-1:1);});}if(opts.prev){$(opts.prev).bind(opts.prevNextEvent,function(){return advance(opts,opts.rev?1:-1);});}if(opts.pager||opts.pagerAnchorBuilder){buildPager(els,opts);}exposeAddSlide(opts,els);return opts;}function saveOriginalOpts(opts){opts.original={before:[],after:[]};opts.original.cssBefore=$.extend({},opts.cssBefore);opts.original.cssAfter=$.extend({},opts.cssAfter);opts.original.animIn=$.extend({},opts.animIn);opts.original.animOut=$.extend({},opts.animOut);$.each(opts.before,function(){opts.original.before.push(this);});$.each(opts.after,function(){opts.original.after.push(this);});}function supportMultiTransitions(opts){var i,tx,txs=$.fn.cycle.transitions;if(opts.fx.indexOf(",")>0){opts.multiFx=true;opts.fxs=opts.fx.replace(/\s*/g,"").split(",");for(i=0;i<opts.fxs.length;i++){var fx=opts.fxs[i];tx=txs[fx];if(!tx||!txs.hasOwnProperty(fx)||!$.isFunction(tx)){log("discarding unknown transition: ",fx);opts.fxs.splice(i,1);i--;}}if(!opts.fxs.length){log("No valid transitions named; slideshow terminating.");return false;}}else{if(opts.fx=="all"){opts.multiFx=true;opts.fxs=[];for(p in txs){tx=txs[p];if(txs.hasOwnProperty(p)&&$.isFunction(tx)){opts.fxs.push(p);}}}}if(opts.multiFx&&opts.randomizeEffects){var r1=Math.floor(Math.random()*20)+30;for(i=0;i<r1;i++){var r2=Math.floor(Math.random()*opts.fxs.length);opts.fxs.push(opts.fxs.splice(r2,1)[0]);}debug("randomized fx sequence: ",opts.fxs);}return true;}function exposeAddSlide(opts,els){opts.addSlide=function(newSlide,prepend){var $s=$(newSlide),s=$s[0];if(!opts.autostopCount){opts.countdown++;}els[prepend?"unshift":"push"](s);if(opts.els){opts.els[prepend?"unshift":"push"](s);}opts.slideCount=els.length;$s.css("position","absolute");$s[prepend?"prependTo":"appendTo"](opts.$cont);if(prepend){opts.currSlide++;opts.nextSlide++;}if(!$.support.opacity&&opts.cleartype&&!opts.cleartypeNoBg){clearTypeFix($s);}if(opts.fit&&opts.width){$s.width(opts.width);}if(opts.fit&&opts.height&&opts.height!="auto"){$slides.height(opts.height);}s.cycleH=(opts.fit&&opts.height)?opts.height:$s.height();s.cycleW=(opts.fit&&opts.width)?opts.width:$s.width();$s.css(opts.cssBefore);if(opts.pager||opts.pagerAnchorBuilder){$.fn.cycle.createPagerAnchor(els.length-1,s,$(opts.pager),els,opts);}if($.isFunction(opts.onAddSlide)){opts.onAddSlide($s);}else{$s.hide();}};}$.fn.cycle.resetState=function(opts,fx){fx=fx||opts.fx;opts.before=[];opts.after=[];opts.cssBefore=$.extend({},opts.original.cssBefore);opts.cssAfter=$.extend({},opts.original.cssAfter);opts.animIn=$.extend({},opts.original.animIn);opts.animOut=$.extend({},opts.original.animOut);opts.fxFn=null;$.each(opts.original.before,function(){opts.before.push(this);});$.each(opts.original.after,function(){opts.after.push(this);});var init=$.fn.cycle.transitions[fx];if($.isFunction(init)){init(opts.$cont,$(opts.elements),opts);}};function go(els,opts,manual,fwd){if(manual&&opts.busy&&opts.manualTrump){debug("manualTrump in go(), stopping active transition");$(els).stop(true,true);opts.busy=false;}if(opts.busy){debug("transition active, ignoring new tx request");return;}var p=opts.$cont[0],curr=els[opts.currSlide],next=els[opts.nextSlide];if(p.cycleStop!=opts.stopCount||p.cycleTimeout===0&&!manual){return;}if(!manual&&!p.cyclePause&&!opts.bounce&&((opts.autostop&&(--opts.countdown<=0))||(opts.nowrap&&!opts.random&&opts.nextSlide<opts.currSlide))){if(opts.end){opts.end(opts);}return;}var changed=false;if((manual||!p.cyclePause)&&(opts.nextSlide!=opts.currSlide)){changed=true;var fx=opts.fx;curr.cycleH=curr.cycleH||$(curr).height();curr.cycleW=curr.cycleW||$(curr).width();next.cycleH=next.cycleH||$(next).height();next.cycleW=next.cycleW||$(next).width();if(opts.multiFx){if(opts.lastFx==undefined||++opts.lastFx>=opts.fxs.length){opts.lastFx=0;}fx=opts.fxs[opts.lastFx];opts.currFx=fx;}if(opts.oneTimeFx){fx=opts.oneTimeFx;opts.oneTimeFx=null;}$.fn.cycle.resetState(opts,fx);if(opts.before.length){$.each(opts.before,function(i,o){if(p.cycleStop!=opts.stopCount){return;}o.apply(next,[curr,next,opts,fwd]);});}var after=function(){$.each(opts.after,function(i,o){if(p.cycleStop!=opts.stopCount){return;}o.apply(next,[curr,next,opts,fwd]);});};debug("tx firing; currSlide: "+opts.currSlide+"; nextSlide: "+opts.nextSlide);opts.busy=1;if(opts.fxFn){opts.fxFn(curr,next,opts,after,fwd,manual&&opts.fastOnEvent);}else{if($.isFunction($.fn.cycle[opts.fx])){$.fn.cycle[opts.fx](curr,next,opts,after,fwd,manual&&opts.fastOnEvent);}else{$.fn.cycle.custom(curr,next,opts,after,fwd,manual&&opts.fastOnEvent);}}}if(changed||opts.nextSlide==opts.currSlide){opts.lastSlide=opts.currSlide;if(opts.random){opts.currSlide=opts.nextSlide;if(++opts.randomIndex==els.length){opts.randomIndex=0;}opts.nextSlide=opts.randomMap[opts.randomIndex];if(opts.nextSlide==opts.currSlide){opts.nextSlide=(opts.currSlide==opts.slideCount-1)?0:opts.currSlide+1;}}else{if(opts.backwards){var roll=(opts.nextSlide-1)<0;if(roll&&opts.bounce){opts.backwards=!opts.backwards;opts.nextSlide=1;opts.currSlide=0;}else{opts.nextSlide=roll?(els.length-1):opts.nextSlide-1;opts.currSlide=roll?0:opts.nextSlide+1;}}else{var roll=(opts.nextSlide+1)==els.length;if(roll&&opts.bounce){opts.backwards=!opts.backwards;opts.nextSlide=els.length-2;opts.currSlide=els.length-1;}else{opts.nextSlide=roll?0:opts.nextSlide+1;opts.currSlide=roll?els.length-1:opts.nextSlide-1;}}}}if(changed&&opts.pager){opts.updateActivePagerLink(opts.pager,opts.currSlide,opts.activePagerClass);}var ms=0;if(opts.timeout&&!opts.continuous){ms=getTimeout(els[opts.currSlide],els[opts.nextSlide],opts,fwd);}else{if(opts.continuous&&p.cyclePause){ms=10;}}if(ms>0){p.cycleTimeout=setTimeout(function(){go(els,opts,0,(!opts.rev&&!opts.backwards));},ms);}}$.fn.cycle.updateActivePagerLink=function(pager,currSlide,clsName){$(pager).each(function(){$(this).children().removeClass(clsName).eq(currSlide).addClass(clsName);});};function getTimeout(curr,next,opts,fwd){if(opts.timeoutFn){var t=opts.timeoutFn.call(curr,curr,next,opts,fwd);while((t-opts.speed)<250){t+=opts.speed;}debug("calculated timeout: "+t+"; speed: "+opts.speed);if(t!==false){return t;}}return opts.timeout;}$.fn.cycle.next=function(opts){advance(opts,opts.rev?-1:1);};$.fn.cycle.prev=function(opts){advance(opts,opts.rev?1:-1);};function advance(opts,val){var els=opts.elements;var p=opts.$cont[0],timeout=p.cycleTimeout;if(timeout){clearTimeout(timeout);p.cycleTimeout=0;}if(opts.random&&val<0){opts.randomIndex--;if(--opts.randomIndex==-2){opts.randomIndex=els.length-2;}else{if(opts.randomIndex==-1){opts.randomIndex=els.length-1;}}opts.nextSlide=opts.randomMap[opts.randomIndex];}else{if(opts.random){opts.nextSlide=opts.randomMap[opts.randomIndex];}else{opts.nextSlide=opts.currSlide+val;if(opts.nextSlide<0){if(opts.nowrap){return false;}opts.nextSlide=els.length-1;}else{if(opts.nextSlide>=els.length){if(opts.nowrap){return false;}opts.nextSlide=0;}}}}var cb=opts.onPrevNextEvent||opts.prevNextClick;if($.isFunction(cb)){cb(val>0,opts.nextSlide,els[opts.nextSlide]);}go(els,opts,1,val>=0);return false;}function buildPager(els,opts){var $p=$(opts.pager);$.each(els,function(i,o){$.fn.cycle.createPagerAnchor(i,o,$p,els,opts);});opts.updateActivePagerLink(opts.pager,opts.startingSlide,opts.activePagerClass);}$.fn.cycle.createPagerAnchor=function(i,el,$p,els,opts){var a;if($.isFunction(opts.pagerAnchorBuilder)){a=opts.pagerAnchorBuilder(i,el);debug("pagerAnchorBuilder("+i+", el) returned: "+a);}else{a='<a href="#">'+(i+1)+"</a>";}if(!a){return;}var $a=$(a);if($a.parents("body").length===0){var arr=[];if($p.length>1){$p.each(function(){var $clone=$a.clone(true);$(this).append($clone);arr.push($clone[0]);});$a=$(arr);}else{$a.appendTo($p);}}opts.pagerAnchors=opts.pagerAnchors||[];opts.pagerAnchors.push($a);$a.bind(opts.pagerEvent,function(e){e.preventDefault();opts.nextSlide=i;var p=opts.$cont[0],timeout=p.cycleTimeout;if(timeout){clearTimeout(timeout);p.cycleTimeout=0;}var cb=opts.onPagerEvent||opts.pagerClick;if($.isFunction(cb)){cb(opts.nextSlide,els[opts.nextSlide]);}go(els,opts,1,opts.currSlide<i);});if(!/^click/.test(opts.pagerEvent)&&!opts.allowPagerClickBubble){$a.bind("click.cycle",function(){return false;});}if(opts.pauseOnPagerHover){$a.hover(function(){opts.$cont[0].cyclePause++;},function(){opts.$cont[0].cyclePause--;});}};$.fn.cycle.hopsFromLast=function(opts,fwd){var hops,l=opts.lastSlide,c=opts.currSlide;if(fwd){hops=c>l?c-l:opts.slideCount-l;}else{hops=c<l?l-c:l+opts.slideCount-c;}return hops;};function clearTypeFix($slides){debug("applying clearType background-color hack");function hex(s){s=parseInt(s).toString(16);return s.length<2?"0"+s:s;}function getBg(e){for(;e&&e.nodeName.toLowerCase()!="html";e=e.parentNode){var v=$.css(e,"background-color");if(v.indexOf("rgb")>=0){var rgb=v.match(/\d+/g);return"#"+hex(rgb[0])+hex(rgb[1])+hex(rgb[2]);}if(v&&v!="transparent"){return v;}}return"#ffffff";}$slides.each(function(){$(this).css("background-color",getBg(this));});}$.fn.cycle.commonReset=function(curr,next,opts,w,h,rev){$(opts.elements).not(curr).hide();opts.cssBefore.opacity=1;opts.cssBefore.display="block";if(w!==false&&next.cycleW>0){opts.cssBefore.width=next.cycleW;}if(h!==false&&next.cycleH>0){opts.cssBefore.height=next.cycleH;}opts.cssAfter=opts.cssAfter||{};opts.cssAfter.display="none";$(curr).css("zIndex",opts.slideCount+(rev===true?1:0));$(next).css("zIndex",opts.slideCount+(rev===true?0:1));};$.fn.cycle.custom=function(curr,next,opts,cb,fwd,speedOverride){var $l=$(curr),$n=$(next);var speedIn=opts.speedIn,speedOut=opts.speedOut,easeIn=opts.easeIn,easeOut=opts.easeOut;$n.css(opts.cssBefore);if(speedOverride){if(typeof speedOverride=="number"){speedIn=speedOut=speedOverride;}else{speedIn=speedOut=1;}easeIn=easeOut=null;}var fn=function(){$n.animate(opts.animIn,speedIn,easeIn,cb);};$l.animate(opts.animOut,speedOut,easeOut,function(){if(opts.cssAfter){$l.css(opts.cssAfter);}if(!opts.sync){fn();}});if(opts.sync){fn();}};$.fn.cycle.transitions={fade:function($cont,$slides,opts){$slides.not(":eq("+opts.currSlide+")").css("opacity",0);opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts);opts.cssBefore.opacity=0;});opts.animIn={opacity:1};opts.animOut={opacity:0};opts.cssBefore={top:0,left:0};}};$.fn.cycle.ver=function(){return ver;};$.fn.cycle.defaults={fx:"fade",timeout:4000,timeoutFn:null,continuous:0,speed:1000,speedIn:null,speedOut:null,next:null,prev:null,onPrevNextEvent:null,prevNextEvent:"click.cycle",pager:null,onPagerEvent:null,pagerEvent:"click.cycle",allowPagerClickBubble:false,pagerAnchorBuilder:null,before:null,after:null,end:null,easing:null,easeIn:null,easeOut:null,shuffle:null,animIn:null,animOut:null,cssBefore:null,cssAfter:null,fxFn:null,height:"auto",startingSlide:0,sync:1,random:0,fit:0,containerResize:1,pause:0,pauseOnPagerHover:0,autostop:0,autostopCount:0,delay:0,slideExpr:null,cleartype:!$.support.opacity,cleartypeNoBg:false,nowrap:0,fastOnEvent:0,randomizeEffects:1,rev:0,manualTrump:true,requeueOnImageNotLoaded:true,requeueTimeout:250,activePagerClass:"activeSlide",updateActivePagerLink:null,backwards:false};})(jQuery);
/*
 * jQuery Cycle Plugin Transition Definitions
 * This script is a plugin for the jQuery Cycle Plugin
 * Examples and documentation at: http://malsup.com/jquery/cycle/
 * Copyright (c) 2007-2010 M. Alsup
 * Version:	 2.72
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 */
(function($){$.fn.cycle.transitions.none=function($cont,$slides,opts){opts.fxFn=function(curr,next,opts,after){$(next).show();$(curr).hide();after();};};$.fn.cycle.transitions.scrollUp=function($cont,$slides,opts){$cont.css("overflow","hidden");opts.before.push($.fn.cycle.commonReset);var h=$cont.height();opts.cssBefore={top:h,left:0};opts.cssFirst={top:0};opts.animIn={top:0};opts.animOut={top:-h};};$.fn.cycle.transitions.scrollDown=function($cont,$slides,opts){$cont.css("overflow","hidden");opts.before.push($.fn.cycle.commonReset);var h=$cont.height();opts.cssFirst={top:0};opts.cssBefore={top:-h,left:0};opts.animIn={top:0};opts.animOut={top:h};};$.fn.cycle.transitions.scrollLeft=function($cont,$slides,opts){$cont.css("overflow","hidden");opts.before.push($.fn.cycle.commonReset);var w=$cont.width();opts.cssFirst={left:0};opts.cssBefore={left:w,top:0};opts.animIn={left:0};opts.animOut={left:0-w};};$.fn.cycle.transitions.scrollRight=function($cont,$slides,opts){$cont.css("overflow","hidden");opts.before.push($.fn.cycle.commonReset);var w=$cont.width();opts.cssFirst={left:0};opts.cssBefore={left:-w,top:0};opts.animIn={left:0};opts.animOut={left:w};};$.fn.cycle.transitions.scrollHorz=function($cont,$slides,opts){$cont.css("overflow","hidden").width();opts.before.push(function(curr,next,opts,fwd){$.fn.cycle.commonReset(curr,next,opts);opts.cssBefore.left=fwd?(next.cycleW-1):(1-next.cycleW);opts.animOut.left=fwd?-curr.cycleW:curr.cycleW;});opts.cssFirst={left:0};opts.cssBefore={top:0};opts.animIn={left:0};opts.animOut={top:0};};$.fn.cycle.transitions.scrollVert=function($cont,$slides,opts){$cont.css("overflow","hidden");opts.before.push(function(curr,next,opts,fwd){$.fn.cycle.commonReset(curr,next,opts);opts.cssBefore.top=fwd?(1-next.cycleH):(next.cycleH-1);opts.animOut.top=fwd?curr.cycleH:-curr.cycleH;});opts.cssFirst={top:0};opts.cssBefore={left:0};opts.animIn={top:0};opts.animOut={left:0};};$.fn.cycle.transitions.slideX=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$(opts.elements).not(curr).hide();$.fn.cycle.commonReset(curr,next,opts,false,true);opts.animIn.width=next.cycleW;});opts.cssBefore={left:0,top:0,width:0};opts.animIn={width:"show"};opts.animOut={width:0};};$.fn.cycle.transitions.slideY=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$(opts.elements).not(curr).hide();$.fn.cycle.commonReset(curr,next,opts,true,false);opts.animIn.height=next.cycleH;});opts.cssBefore={left:0,top:0,height:0};opts.animIn={height:"show"};opts.animOut={height:0};};$.fn.cycle.transitions.shuffle=function($cont,$slides,opts){var i,w=$cont.css("overflow","visible").width();$slides.css({left:0,top:0});opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,true,true);});if(!opts.speedAdjusted){opts.speed=opts.speed/2;opts.speedAdjusted=true;}opts.random=0;opts.shuffle=opts.shuffle||{left:-w,top:15};opts.els=[];for(i=0;i<$slides.length;i++){opts.els.push($slides[i]);}for(i=0;i<opts.currSlide;i++){opts.els.push(opts.els.shift());}opts.fxFn=function(curr,next,opts,cb,fwd){var $el=fwd?$(curr):$(next);$(next).css(opts.cssBefore);var count=opts.slideCount;$el.animate(opts.shuffle,opts.speedIn,opts.easeIn,function(){var hops=$.fn.cycle.hopsFromLast(opts,fwd);for(var k=0;k<hops;k++){fwd?opts.els.push(opts.els.shift()):opts.els.unshift(opts.els.pop());}if(fwd){for(var i=0,len=opts.els.length;i<len;i++){$(opts.els[i]).css("z-index",len-i+count);}}else{var z=$(curr).css("z-index");$el.css("z-index",parseInt(z)+1+count);}$el.animate({left:0,top:0},opts.speedOut,opts.easeOut,function(){$(fwd?this:curr).hide();if(cb){cb();}});});};opts.cssBefore={display:"block",opacity:1,top:0,left:0};};$.fn.cycle.transitions.turnUp=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,false);opts.cssBefore.top=next.cycleH;opts.animIn.height=next.cycleH;});opts.cssFirst={top:0};opts.cssBefore={left:0,height:0};opts.animIn={top:0};opts.animOut={height:0};};$.fn.cycle.transitions.turnDown=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,false);opts.animIn.height=next.cycleH;opts.animOut.top=curr.cycleH;});opts.cssFirst={top:0};opts.cssBefore={left:0,top:0,height:0};opts.animOut={height:0};};$.fn.cycle.transitions.turnLeft=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,false,true);opts.cssBefore.left=next.cycleW;opts.animIn.width=next.cycleW;});opts.cssBefore={top:0,width:0};opts.animIn={left:0};opts.animOut={width:0};};$.fn.cycle.transitions.turnRight=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,false,true);opts.animIn.width=next.cycleW;opts.animOut.left=curr.cycleW;});opts.cssBefore={top:0,left:0,width:0};opts.animIn={left:0};opts.animOut={width:0};};$.fn.cycle.transitions.zoom=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,false,false,true);opts.cssBefore.top=next.cycleH/2;opts.cssBefore.left=next.cycleW/2;opts.animIn={top:0,left:0,width:next.cycleW,height:next.cycleH};opts.animOut={width:0,height:0,top:curr.cycleH/2,left:curr.cycleW/2};});opts.cssFirst={top:0,left:0};opts.cssBefore={width:0,height:0};};$.fn.cycle.transitions.fadeZoom=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,false,false);opts.cssBefore.left=next.cycleW/2;opts.cssBefore.top=next.cycleH/2;opts.animIn={top:0,left:0,width:next.cycleW,height:next.cycleH};});opts.cssBefore={width:0,height:0};opts.animOut={opacity:0};};$.fn.cycle.transitions.blindX=function($cont,$slides,opts){var w=$cont.css("overflow","hidden").width();opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts);opts.animIn.width=next.cycleW;opts.animOut.left=curr.cycleW;});opts.cssBefore={left:w,top:0};opts.animIn={left:0};opts.animOut={left:w};};$.fn.cycle.transitions.blindY=function($cont,$slides,opts){var h=$cont.css("overflow","hidden").height();opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts);opts.animIn.height=next.cycleH;opts.animOut.top=curr.cycleH;});opts.cssBefore={top:h,left:0};opts.animIn={top:0};opts.animOut={top:h};};$.fn.cycle.transitions.blindZ=function($cont,$slides,opts){var h=$cont.css("overflow","hidden").height();var w=$cont.width();opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts);opts.animIn.height=next.cycleH;opts.animOut.top=curr.cycleH;});opts.cssBefore={top:h,left:w};opts.animIn={top:0,left:0};opts.animOut={top:h,left:w};};$.fn.cycle.transitions.growX=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,false,true);opts.cssBefore.left=this.cycleW/2;opts.animIn={left:0,width:this.cycleW};opts.animOut={left:0};});opts.cssBefore={width:0,top:0};};$.fn.cycle.transitions.growY=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,false);opts.cssBefore.top=this.cycleH/2;opts.animIn={top:0,height:this.cycleH};opts.animOut={top:0};});opts.cssBefore={height:0,left:0};};$.fn.cycle.transitions.curtainX=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,false,true,true);opts.cssBefore.left=next.cycleW/2;opts.animIn={left:0,width:this.cycleW};opts.animOut={left:curr.cycleW/2,width:0};});opts.cssBefore={top:0,width:0};};$.fn.cycle.transitions.curtainY=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,false,true);opts.cssBefore.top=next.cycleH/2;opts.animIn={top:0,height:next.cycleH};opts.animOut={top:curr.cycleH/2,height:0};});opts.cssBefore={left:0,height:0};};$.fn.cycle.transitions.cover=function($cont,$slides,opts){var d=opts.direction||"left";var w=$cont.css("overflow","hidden").width();var h=$cont.height();opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts);if(d=="right"){opts.cssBefore.left=-w;}else{if(d=="up"){opts.cssBefore.top=h;}else{if(d=="down"){opts.cssBefore.top=-h;}else{opts.cssBefore.left=w;}}}});opts.animIn={left:0,top:0};opts.animOut={opacity:1};opts.cssBefore={top:0,left:0};};$.fn.cycle.transitions.uncover=function($cont,$slides,opts){var d=opts.direction||"left";var w=$cont.css("overflow","hidden").width();var h=$cont.height();opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,true,true);if(d=="right"){opts.animOut.left=w;}else{if(d=="up"){opts.animOut.top=-h;}else{if(d=="down"){opts.animOut.top=h;}else{opts.animOut.left=-w;}}}});opts.animIn={left:0,top:0};opts.animOut={opacity:1};opts.cssBefore={top:0,left:0};};$.fn.cycle.transitions.toss=function($cont,$slides,opts){var w=$cont.css("overflow","visible").width();var h=$cont.height();opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,true,true);if(!opts.animOut.left&&!opts.animOut.top){opts.animOut={left:w*2,top:-h/2,opacity:0};}else{opts.animOut.opacity=0;}});opts.cssBefore={left:0,top:0};opts.animIn={left:0};};$.fn.cycle.transitions.wipe=function($cont,$slides,opts){var w=$cont.css("overflow","hidden").width();var h=$cont.height();opts.cssBefore=opts.cssBefore||{};var clip;if(opts.clip){if(/l2r/.test(opts.clip)){clip="rect(0px 0px "+h+"px 0px)";}else{if(/r2l/.test(opts.clip)){clip="rect(0px "+w+"px "+h+"px "+w+"px)";}else{if(/t2b/.test(opts.clip)){clip="rect(0px "+w+"px 0px 0px)";}else{if(/b2t/.test(opts.clip)){clip="rect("+h+"px "+w+"px "+h+"px 0px)";}else{if(/zoom/.test(opts.clip)){var top=parseInt(h/2);var left=parseInt(w/2);clip="rect("+top+"px "+left+"px "+top+"px "+left+"px)";}}}}}}opts.cssBefore.clip=opts.cssBefore.clip||clip||"rect(0px 0px 0px 0px)";var d=opts.cssBefore.clip.match(/(\d+)/g);var t=parseInt(d[0]),r=parseInt(d[1]),b=parseInt(d[2]),l=parseInt(d[3]);opts.before.push(function(curr,next,opts){if(curr==next){return;}var $curr=$(curr),$next=$(next);$.fn.cycle.commonReset(curr,next,opts,true,true,false);opts.cssAfter.display="block";var step=1,count=parseInt((opts.speedIn/13))-1;(function f(){var tt=t?t-parseInt(step*(t/count)):0;var ll=l?l-parseInt(step*(l/count)):0;var bb=b<h?b+parseInt(step*((h-b)/count||1)):h;var rr=r<w?r+parseInt(step*((w-r)/count||1)):w;$next.css({clip:"rect("+tt+"px "+rr+"px "+bb+"px "+ll+"px)"});(step++<=count)?setTimeout(f,13):$curr.css("display","none");})();});opts.cssBefore={display:"block",opacity:1,top:0,left:0};opts.animIn={left:0};opts.animOut={left:0};};})(jQuery);;

/**
 *  @file
 *  A simple jQuery SingleFrame Div Slideshow Rotator.
 */

(function ($) {
  /**
   * This will set our initial behavior, by starting up each individual slideshow.
   */
  Drupal.behaviors.viewsSlideshowSingleFrame = function (context) {
    $('.views_slideshow_singleframe_main:not(.viewsSlideshowSingleFrame-processed)', context).addClass('viewsSlideshowSingleFrame-processed').each(function() {
      var fullId = '#' + $(this).attr('id');
      if (!Drupal.settings.viewsSlideshowSingleFrame || !Drupal.settings.viewsSlideshowSingleFrame[fullId]) {
        return;
      }
      var settings = Drupal.settings.viewsSlideshowSingleFrame[fullId];
      settings.targetId = '#' + $(fullId + " :first").attr('id');
      settings.paused = false;

      settings.opts = {
        speed:settings.speed,
        timeout:parseInt(settings.timeout),
        delay:parseInt(settings.delay),
        sync:settings.sync==1,
        random:settings.random==1,
        pause:false,
        allowPagerClickBubble:(settings.pager_hover==1 || settings.pager_click_to_page),
        prev:(settings.controls > 0)?'#views_slideshow_singleframe_prev_' + settings.vss_id:null,
        next:(settings.controls > 0)?'#views_slideshow_singleframe_next_' + settings.vss_id:null,
        pager:(settings.pager > 0)?'#views_slideshow_singleframe_pager_' + settings.vss_id:null,
        nowrap:parseInt(settings.nowrap),
        pagerAnchorBuilder: function(idx, slide) {
          var classes = 'pager-item pager-num-' + (idx+1);
          if (idx == 0) {
            classes += ' first';
          }
          if ($(slide).siblings().length == idx) {
            classes += ' last';
          }

          if (idx % 2) {
            classes += ' odd';
          }
          else {
            classes += ' even';
          }

          var theme = 'viewsSlideshowPager' + settings.pager_type;
          return Drupal.theme.prototype[theme] ? Drupal.theme(theme, classes, idx, slide, settings) : '';
        },
        after:function(curr, next, opts) {
          // Used for Image Counter.
          if (settings.image_count) {
            $('#views_slideshow_singleframe_image_count_' + settings.vss_id + ' span.num').html(opts.currSlide + 1);
            $('#views_slideshow_singleframe_image_count_' + settings.vss_id + ' span.total').html(opts.slideCount);
          }
        },
        before:function(curr, next, opts) {
          // Remember last slide.
          if (settings.remember_slide) {
            createCookie(settings.vss_id, opts.currSlide + 1, settings.remember_slide_days);
          }

          // Make variable height.
          if (settings.fixed_height == 0) {
            //get the height of the current slide
            var $ht = $(this).height();
            //set the container's height to that of the current slide
            $(this).parent().animate({height: $ht});
          }
        },
        cleartype:(settings.ie.cleartype == 'true')? true : false,
        cleartypeNoBg:(settings.ie.cleartypenobg == 'true')? true : false
      }

      // Set the starting slide if we are supposed to remember the slide
      if (settings.remember_slide) {
        var startSlide = readCookie(settings.vss_id);
        if (startSlide == null) {
          startSlide = 0;
        }
        settings.opts.startingSlide =  startSlide;
      }

      if (settings.pager_hover == 1) {
        settings.opts.pagerEvent = 'mouseover';
        settings.opts.pauseOnPagerHover = true;
      }

      if (settings.effect == 'none') {
        settings.opts.speed = 1;
      }
      else {
        settings.opts.fx = settings.effect;
      }

      // Pause on hover.
      if (settings.pause == 1) {
        $('#views_slideshow_singleframe_teaser_section_' + settings.vss_id).hover(function() {
          $(settings.targetId).cycle('pause');
        }, function() {
          if (settings.paused == false) {
            $(settings.targetId).cycle('resume');
          }
        });
      }

      // Pause on clicking of the slide.
      if (settings.pause_on_click == 1) {
        $('#views_slideshow_singleframe_teaser_section_' + settings.vss_id).click(function() {
          viewsSlideshowSingleFramePause(settings);
        });
      }

      // Add additional settings.
      if (settings.advanced != "\n") {
        settings.advanced.toString();
        var advanced = settings.advanced.split("\n");
        for (i=0; i<advanced.length; i++) {
          var prop = '';
          var value = '';
          var property = advanced[i].split(":");
          for (j=0; j<property.length; j++) {
            if (j == 0) {
              prop = property[j];
            }
            else if (j == 1) {
              value = property[j];
            }
            else {
              value += ":" + property[j];
            }
          }

          // Need to evaluate so true, false and numerics aren't a string.
          if (value == 'true' || value == 'false' || IsNumeric(value)) {
            value = eval(value);
          }
          else {
            // Parse strings into functions.
            var func = value.match(/function\s*\((.*?)\)\s*\{(.*)\}/i);
            if (func) {
              value = new Function(func[1].match(/(\w+)/g), func[2]);
            }
          }

          // Call both functions if prop was set previously.
          if (typeof(value) == "function" && prop in settings.opts) {
            var callboth = function(before_func, new_func) {
              return function() {
                before_func.apply(null, arguments);
                new_func.apply(null, arguments);
              };
            };
            settings.opts[prop] = callboth(settings.opts[prop], value);
          }
          else {
            settings.opts[prop] = value;
          }
        }
      }

      $(settings.targetId).cycle(settings.opts);

      // Start Paused
      if (settings.start_paused) {
        viewsSlideshowSingleFramePause(settings);
      }

      // Pause if hidden.
      if (settings.pause_when_hidden) {
        var checkPause = function(settings) {
          // If the slideshow is visible and it is paused then resume.
          // otherwise if the slideshow is not visible and it is not paused then
          // pause it.
          var visible = viewsSlideshowSingleFrameIsVisible(settings.targetId, settings.pause_when_hidden_type, settings.amount_allowed_visible);
          if (visible && settings.paused) {
            viewsSlideshowSingleFrameResume(settings);
          }
          else if (!visible && !settings.paused) {
            viewsSlideshowSingleFramePause(settings);
          }
        }

        // Check when scrolled.
        $(window).scroll(function() {
         checkPause(settings);
        });

        // Check when the window is resized.
        $(window).resize(function() {
          checkPause(settings);
        });
      }

      // Show image count for people who have js enabled.
      $('#views_slideshow_singleframe_image_count_' + settings.vss_id).show();

      if (settings.controls > 0) {
        // Show controls for people who have js enabled browsers.
        $('#views_slideshow_singleframe_controls_' + settings.vss_id).show();

        $('#views_slideshow_singleframe_playpause_' + settings.vss_id).click(function(e) {
          if (settings.paused) {
            viewsSlideshowSingleFrameResume(settings);
          }
          else {
            viewsSlideshowSingleFramePause(settings);
          }
          e.preventDefault();
        });
      }
    });
  }

  // Pause the slideshow
  viewsSlideshowSingleFramePause = function (settings) {
    //make Resume translatable
    var resume = Drupal.t('Resume');

    $(settings.targetId).cycle('pause');
    if (settings.controls > 0) {
      $('#views_slideshow_singleframe_playpause_' + settings.vss_id)
        .addClass('views_slideshow_singleframe_play')
        .addClass('views_slideshow_play')
        .removeClass('views_slideshow_singleframe_pause')
        .removeClass('views_slideshow_pause')
        .text(resume);
    }
    settings.paused = true;
  }

  // Resume the slideshow
  viewsSlideshowSingleFrameResume = function (settings) {
    // Make Pause translatable
    var pause = Drupal.t('Pause');
    $(settings.targetId).cycle('resume');
    if (settings.controls > 0) {
      $('#views_slideshow_singleframe_playpause_' + settings.vss_id)
        .addClass('views_slideshow_singleframe_pause')
        .addClass('views_slideshow_pause')
        .removeClass('views_slideshow_singleframe_play')
        .removeClass('views_slideshow_play')
        .text(pause);
    }
    settings.paused = false;
  }

  Drupal.theme.prototype.viewsSlideshowPagerThumbnails = function (classes, idx, slide, settings) {
    var href = '#';
    if (settings.pager_click_to_page) {
      href = $(slide).find('a').attr('href');
    }
    var img = $(slide).find('img');
    return '<div class="' + classes + '"><a href="' + href + '"><img src="' + $(img).attr('src') + '" alt="' + $(img).attr('alt') + '" title="' + $(img).attr('title') + '"/></a></div>';
  }

  Drupal.theme.prototype.viewsSlideshowPagerNumbered = function (classes, idx, slide, settings) {
    var href = '#';
    if (settings.pager_click_to_page) {
      href = $(slide).find('a').attr('href');
    }
    return '<div class="' + classes + '"><a href="' + href + '">' + (idx+1) + '</a></div>';
  }

  // Verify that the value is a number.
  function IsNumeric(sText) {
    var ValidChars = "0123456789";
    var IsNumber=true;
    var Char;

    for (var i=0; i < sText.length && IsNumber == true; i++) {
      Char = sText.charAt(i);
      if (ValidChars.indexOf(Char) == -1) {
        IsNumber = false;
      }
    }
    return IsNumber;
  }

  /**
   * Cookie Handling Functions
   */
  function createCookie(name,value,days) {
    if (days) {
      var date = new Date();
      date.setTime(date.getTime()+(days*24*60*60*1000));
      var expires = "; expires="+date.toGMTString();
    }
    else {
      var expires = "";
    }
    document.cookie = name+"="+value+expires+"; path=/";
  }

  function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
      var c = ca[i];
      while (c.charAt(0)==' ') c = c.substring(1,c.length);
      if (c.indexOf(nameEQ) == 0) {
        return c.substring(nameEQ.length,c.length);
      }
    }
    return null;
  }

  function eraseCookie(name) {
    createCookie(name,"",-1);
  }

  /**
   * Checks to see if the slide is visible enough.
   * elem = element to check.
   * type = The way to calculate how much is visible.
   * amountVisible = amount that should be visible. Either in percent or px. If
   *                it's not defined then all of the slide must be visible.
   *
   * Returns true or false
   */
  function viewsSlideshowSingleFrameIsVisible(elem, type, amountVisible) {
    // Get the top and bottom of the window;
    var docViewTop = $(window).scrollTop();
    var docViewBottom = docViewTop + $(window).height();
    var docViewLeft = $(window).scrollLeft();
    var docViewRight = docViewLeft + $(window).width();

    // Get the top, bottom, and height of the slide;
    var elemTop = $(elem).offset().top;
    var elemHeight = $(elem).height();
    var elemBottom = elemTop + elemHeight;
    var elemLeft = $(elem).offset().left;
    var elemWidth = $(elem).width();
    var elemRight = elemLeft + elemWidth;
    var elemArea = elemHeight * elemWidth;

    // Calculate what's hiding in the slide.
    var missingLeft = 0;
    var missingRight = 0;
    var missingTop = 0;
    var missingBottom = 0;

    // Find out how much of the slide is missing from the left.
    if (elemLeft < docViewLeft) {
      missingLeft = docViewLeft - elemLeft;
    }

    // Find out how much of the slide is missing from the right.
    if (elemRight > docViewRight) {
      missingRight = elemRight - docViewRight;
    }

    // Find out how much of the slide is missing from the top.
    if (elemTop < docViewTop) {
      missingTop = docViewTop - elemTop;
    }

    // Find out how much of the slide is missing from the bottom.
    if (elemBottom > docViewBottom) {
      missingBottom = elemBottom - docViewBottom;
    }

    // If there is no amountVisible defined then check to see if the whole slide
    // is visible.
    if (type == 'full') {
      return ((elemBottom >= docViewTop) && (elemTop <= docViewBottom)
      && (elemBottom <= docViewBottom) &&  (elemTop >= docViewTop)
      && (elemLeft >= docViewLeft) && (elemRight <= docViewRight)
      && (elemLeft <= docViewRight) && (elemRight >= docViewLeft));
    }
    else if(type == 'vertical') {
      var verticalShowing = elemHeight - missingTop - missingBottom;

      // If user specified a percentage then find out if the current shown percent
      // is larger than the allowed percent.
      // Otherwise check to see if the amount of px shown is larger than the
      // allotted amount.
      if (amountVisible.indexOf('%')) {
        return (((verticalShowing/elemHeight)*100) >= parseInt(amountVisible));
      }
      else {
        return (verticalShowing >= parseInt(amountVisible));
      }
    }
    else if(type == 'horizontal') {
      var horizontalShowing = elemWidth - missingLeft - missingRight;

      // If user specified a percentage then find out if the current shown percent
      // is larger than the allowed percent.
      // Otherwise check to see if the amount of px shown is larger than the
      // allotted amount.
      if (amountVisible.indexOf('%')) {
        return (((horizontalShowing/elemWidth)*100) >= parseInt(amountVisible));
      }
      else {
        return (horizontalShowing >= parseInt(amountVisible));
      }
    }
    else if(type == 'area') {
      var areaShowing = (elemWidth - missingLeft - missingRight) * (elemHeight - missingTop - missingBottom);

      // If user specified a percentage then find out if the current shown percent
      // is larger than the allowed percent.
      // Otherwise check to see if the amount of px shown is larger than the
      // allotted amount.
      if (amountVisible.indexOf('%')) {
        return (((areaShowing/elemArea)*100) >= parseInt(amountVisible));
      }
      else {
        return (areaShowing >= parseInt(amountVisible));
      }
    }
  }
})(jQuery);
;
//     Underscore.js 1.4.4
//     http://underscorejs.org
//     (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
//     Underscore may be freely distributed under the MIT license.
(function(){var n=this,t=n._,r={},e=Array.prototype,u=Object.prototype,i=Function.prototype,a=e.push,o=e.slice,c=e.concat,l=u.toString,f=u.hasOwnProperty,s=e.forEach,p=e.map,h=e.reduce,v=e.reduceRight,d=e.filter,g=e.every,m=e.some,y=e.indexOf,b=e.lastIndexOf,x=Array.isArray,_=Object.keys,j=i.bind,w=function(n){return n instanceof w?n:this instanceof w?(this._wrapped=n,void 0):new w(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=w),exports._=w):n._=w,w.VERSION="1.4.4";var A=w.each=w.forEach=function(n,t,e){if(null!=n)if(s&&n.forEach===s)n.forEach(t,e);else if(n.length===+n.length){for(var u=0,i=n.length;i>u;u++)if(t.call(e,n[u],u,n)===r)return}else for(var a in n)if(w.has(n,a)&&t.call(e,n[a],a,n)===r)return};w.map=w.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(A(n,function(n,u,i){e[e.length]=t.call(r,n,u,i)}),e)};var O="Reduce of empty array with no initial value";w.reduce=w.foldl=w.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),h&&n.reduce===h)return e&&(t=w.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(A(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(O);return r},w.reduceRight=w.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),v&&n.reduceRight===v)return e&&(t=w.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var a=w.keys(n);i=a.length}if(A(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(O);return r},w.find=w.detect=function(n,t,r){var e;return E(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},w.filter=w.select=function(n,t,r){var e=[];return null==n?e:d&&n.filter===d?n.filter(t,r):(A(n,function(n,u,i){t.call(r,n,u,i)&&(e[e.length]=n)}),e)},w.reject=function(n,t,r){return w.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},w.every=w.all=function(n,t,e){t||(t=w.identity);var u=!0;return null==n?u:g&&n.every===g?n.every(t,e):(A(n,function(n,i,a){return(u=u&&t.call(e,n,i,a))?void 0:r}),!!u)};var E=w.some=w.any=function(n,t,e){t||(t=w.identity);var u=!1;return null==n?u:m&&n.some===m?n.some(t,e):(A(n,function(n,i,a){return u||(u=t.call(e,n,i,a))?r:void 0}),!!u)};w.contains=w.include=function(n,t){return null==n?!1:y&&n.indexOf===y?n.indexOf(t)!=-1:E(n,function(n){return n===t})},w.invoke=function(n,t){var r=o.call(arguments,2),e=w.isFunction(t);return w.map(n,function(n){return(e?t:n[t]).apply(n,r)})},w.pluck=function(n,t){return w.map(n,function(n){return n[t]})},w.where=function(n,t,r){return w.isEmpty(t)?r?null:[]:w[r?"find":"filter"](n,function(n){for(var r in t)if(t[r]!==n[r])return!1;return!0})},w.findWhere=function(n,t){return w.where(n,t,!0)},w.max=function(n,t,r){if(!t&&w.isArray(n)&&n[0]===+n[0]&&65535>n.length)return Math.max.apply(Math,n);if(!t&&w.isEmpty(n))return-1/0;var e={computed:-1/0,value:-1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a>=e.computed&&(e={value:n,computed:a})}),e.value},w.min=function(n,t,r){if(!t&&w.isArray(n)&&n[0]===+n[0]&&65535>n.length)return Math.min.apply(Math,n);if(!t&&w.isEmpty(n))return 1/0;var e={computed:1/0,value:1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;e.computed>a&&(e={value:n,computed:a})}),e.value},w.shuffle=function(n){var t,r=0,e=[];return A(n,function(n){t=w.random(r++),e[r-1]=e[t],e[t]=n}),e};var k=function(n){return w.isFunction(n)?n:function(t){return t[n]}};w.sortBy=function(n,t,r){var e=k(t);return w.pluck(w.map(n,function(n,t,u){return{value:n,index:t,criteria:e.call(r,n,t,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index<t.index?-1:1}),"value")};var F=function(n,t,r,e){var u={},i=k(t||w.identity);return A(n,function(t,a){var o=i.call(r,t,a,n);e(u,o,t)}),u};w.groupBy=function(n,t,r){return F(n,t,r,function(n,t,r){(w.has(n,t)?n[t]:n[t]=[]).push(r)})},w.countBy=function(n,t,r){return F(n,t,r,function(n,t){w.has(n,t)||(n[t]=0),n[t]++})},w.sortedIndex=function(n,t,r,e){r=null==r?w.identity:k(r);for(var u=r.call(e,t),i=0,a=n.length;a>i;){var o=i+a>>>1;u>r.call(e,n[o])?i=o+1:a=o}return i},w.toArray=function(n){return n?w.isArray(n)?o.call(n):n.length===+n.length?w.map(n,w.identity):w.values(n):[]},w.size=function(n){return null==n?0:n.length===+n.length?n.length:w.keys(n).length},w.first=w.head=w.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:o.call(n,0,t)},w.initial=function(n,t,r){return o.call(n,0,n.length-(null==t||r?1:t))},w.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:o.call(n,Math.max(n.length-t,0))},w.rest=w.tail=w.drop=function(n,t,r){return o.call(n,null==t||r?1:t)},w.compact=function(n){return w.filter(n,w.identity)};var R=function(n,t,r){return A(n,function(n){w.isArray(n)?t?a.apply(r,n):R(n,t,r):r.push(n)}),r};w.flatten=function(n,t){return R(n,t,[])},w.without=function(n){return w.difference(n,o.call(arguments,1))},w.uniq=w.unique=function(n,t,r,e){w.isFunction(t)&&(e=r,r=t,t=!1);var u=r?w.map(n,r,e):n,i=[],a=[];return A(u,function(r,e){(t?e&&a[a.length-1]===r:w.contains(a,r))||(a.push(r),i.push(n[e]))}),i},w.union=function(){return w.uniq(c.apply(e,arguments))},w.intersection=function(n){var t=o.call(arguments,1);return w.filter(w.uniq(n),function(n){return w.every(t,function(t){return w.indexOf(t,n)>=0})})},w.difference=function(n){var t=c.apply(e,o.call(arguments,1));return w.filter(n,function(n){return!w.contains(t,n)})},w.zip=function(){for(var n=o.call(arguments),t=w.max(w.pluck(n,"length")),r=Array(t),e=0;t>e;e++)r[e]=w.pluck(n,""+e);return r},w.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},w.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=w.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(y&&n.indexOf===y)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},w.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(b&&n.lastIndexOf===b)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},w.range=function(n,t,r){1>=arguments.length&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=Array(e);e>u;)i[u++]=n,n+=r;return i},w.bind=function(n,t){if(n.bind===j&&j)return j.apply(n,o.call(arguments,1));var r=o.call(arguments,2);return function(){return n.apply(t,r.concat(o.call(arguments)))}},w.partial=function(n){var t=o.call(arguments,1);return function(){return n.apply(this,t.concat(o.call(arguments)))}},w.bindAll=function(n){var t=o.call(arguments,1);return 0===t.length&&(t=w.functions(n)),A(t,function(t){n[t]=w.bind(n[t],n)}),n},w.memoize=function(n,t){var r={};return t||(t=w.identity),function(){var e=t.apply(this,arguments);return w.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},w.delay=function(n,t){var r=o.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},w.defer=function(n){return w.delay.apply(w,[n,1].concat(o.call(arguments,1)))},w.throttle=function(n,t){var r,e,u,i,a=0,o=function(){a=new Date,u=null,i=n.apply(r,e)};return function(){var c=new Date,l=t-(c-a);return r=this,e=arguments,0>=l?(clearTimeout(u),u=null,a=c,i=n.apply(r,e)):u||(u=setTimeout(o,l)),i}},w.debounce=function(n,t,r){var e,u;return function(){var i=this,a=arguments,o=function(){e=null,r||(u=n.apply(i,a))},c=r&&!e;return clearTimeout(e),e=setTimeout(o,t),c&&(u=n.apply(i,a)),u}},w.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},w.wrap=function(n,t){return function(){var r=[n];return a.apply(r,arguments),t.apply(this,r)}},w.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},w.after=function(n,t){return 0>=n?t():function(){return 1>--n?t.apply(this,arguments):void 0}},w.keys=_||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var r in n)w.has(n,r)&&(t[t.length]=r);return t},w.values=function(n){var t=[];for(var r in n)w.has(n,r)&&t.push(n[r]);return t},w.pairs=function(n){var t=[];for(var r in n)w.has(n,r)&&t.push([r,n[r]]);return t},w.invert=function(n){var t={};for(var r in n)w.has(n,r)&&(t[n[r]]=r);return t},w.functions=w.methods=function(n){var t=[];for(var r in n)w.isFunction(n[r])&&t.push(r);return t.sort()},w.extend=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},w.pick=function(n){var t={},r=c.apply(e,o.call(arguments,1));return A(r,function(r){r in n&&(t[r]=n[r])}),t},w.omit=function(n){var t={},r=c.apply(e,o.call(arguments,1));for(var u in n)w.contains(r,u)||(t[u]=n[u]);return t},w.defaults=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)null==n[r]&&(n[r]=t[r])}),n},w.clone=function(n){return w.isObject(n)?w.isArray(n)?n.slice():w.extend({},n):n},w.tap=function(n,t){return t(n),n};var I=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof w&&(n=n._wrapped),t instanceof w&&(t=t._wrapped);var u=l.call(n);if(u!=l.call(t))return!1;switch(u){case"[object String]":return n==t+"";case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;r.push(n),e.push(t);var a=0,o=!0;if("[object Array]"==u){if(a=n.length,o=a==t.length)for(;a--&&(o=I(n[a],t[a],r,e)););}else{var c=n.constructor,f=t.constructor;if(c!==f&&!(w.isFunction(c)&&c instanceof c&&w.isFunction(f)&&f instanceof f))return!1;for(var s in n)if(w.has(n,s)&&(a++,!(o=w.has(t,s)&&I(n[s],t[s],r,e))))break;if(o){for(s in t)if(w.has(t,s)&&!a--)break;o=!a}}return r.pop(),e.pop(),o};w.isEqual=function(n,t){return I(n,t,[],[])},w.isEmpty=function(n){if(null==n)return!0;if(w.isArray(n)||w.isString(n))return 0===n.length;for(var t in n)if(w.has(n,t))return!1;return!0},w.isElement=function(n){return!(!n||1!==n.nodeType)},w.isArray=x||function(n){return"[object Array]"==l.call(n)},w.isObject=function(n){return n===Object(n)},A(["Arguments","Function","String","Number","Date","RegExp"],function(n){w["is"+n]=function(t){return l.call(t)=="[object "+n+"]"}}),w.isArguments(arguments)||(w.isArguments=function(n){return!(!n||!w.has(n,"callee"))}),"function"!=typeof/./&&(w.isFunction=function(n){return"function"==typeof n}),w.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},w.isNaN=function(n){return w.isNumber(n)&&n!=+n},w.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==l.call(n)},w.isNull=function(n){return null===n},w.isUndefined=function(n){return n===void 0},w.has=function(n,t){return f.call(n,t)},w.noConflict=function(){return n._=t,this},w.identity=function(n){return n},w.times=function(n,t,r){for(var e=Array(n),u=0;n>u;u++)e[u]=t.call(r,u);return e},w.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=w.invert(M.escape);var S={escape:RegExp("["+w.keys(M.escape).join("")+"]","g"),unescape:RegExp("("+w.keys(M.unescape).join("|")+")","g")};w.each(["escape","unescape"],function(n){w[n]=function(t){return null==t?"":(""+t).replace(S[n],function(t){return M[n][t]})}}),w.result=function(n,t){if(null==n)return null;var r=n[t];return w.isFunction(r)?r.call(n):r},w.mixin=function(n){A(w.functions(n),function(t){var r=w[t]=n[t];w.prototype[t]=function(){var n=[this._wrapped];return a.apply(n,arguments),D.call(this,r.apply(w,n))}})};var N=0;w.uniqueId=function(n){var t=++N+"";return n?n+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var T=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","    ":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;w.template=function(n,t,r){var e;r=w.defaults({},r,w.templateSettings);var u=RegExp([(r.escape||T).source,(r.interpolate||T).source,(r.evaluate||T).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(u,function(t,r,e,u,o){return a+=n.slice(i,o).replace(B,function(n){return"\\"+q[n]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(a+="';\n"+u+"\n__p+='"),i=o+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=Function(r.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return e(t,w);var c=function(n){return e.call(this,n,w)};return c.source="function("+(r.variable||"obj")+"){\n"+a+"}",c},w.chain=function(n){return w(n).chain()};var D=function(n){return this._chain?w(n).chain():n};w.mixin(w),A(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];w.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],D.call(this,r)}}),A(["concat","join","slice"],function(n){var t=e[n];w.prototype[n]=function(){return D.call(this,t.apply(this._wrapped,arguments))}}),w.extend(w.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);;
/* Modernizr 2.5.3 (Custom Build) | MIT & BSD
 * Build: http://www.modernizr.com/download/#-fontface-backgroundsize-borderimage-borderradius-boxshadow-flexbox-hsla-multiplebgs-opacity-rgba-textshadow-cssanimations-csscolumns-generatedcontent-cssgradients-cssreflections-csstransforms-csstransforms3d-csstransitions-applicationcache-canvas-canvastext-draganddrop-hashchange-history-audio-video-indexeddb-input-inputtypes-localstorage-postmessage-sessionstorage-websockets-websqldatabase-webworkers-geolocation-inlinesvg-smil-svg-svgclippaths-touch-webgl-shiv-mq-cssclasses-addtest-prefixed-teststyles-testprop-testallprops-hasevent-prefixes-domprefixes-load
 */
;window.Modernizr=function(a,b,c){function D(a){j.cssText=a}function E(a,b){return D(n.join(a+";")+(b||""))}function F(a,b){return typeof a===b}function G(a,b){return!!~(""+a).indexOf(b)}function H(a,b){for(var d in a)if(j[a[d]]!==c)return b=="pfx"?a[d]:!0;return!1}function I(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:F(f,"function")?f.bind(d||b):f}return!1}function J(a,b,c){var d=a.charAt(0).toUpperCase()+a.substr(1),e=(a+" "+p.join(d+" ")+d).split(" ");return F(b,"string")||F(b,"undefined")?H(e,b):(e=(a+" "+q.join(d+" ")+d).split(" "),I(e,b,c))}function L(){e.input=function(c){for(var d=0,e=c.length;d<e;d++)u[c[d]]=c[d]in k;return u.list&&(u.list=!!b.createElement("datalist")&&!!a.HTMLDataListElement),u}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),e.inputtypes=function(a){for(var d=0,e,f,h,i=a.length;d<i;d++)k.setAttribute("type",f=a[d]),e=k.type!=="text",e&&(k.value=l,k.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(f)&&k.style.WebkitAppearance!==c?(g.appendChild(k),h=b.defaultView,e=h.getComputedStyle&&h.getComputedStyle(k,null).WebkitAppearance!=="textfield"&&k.offsetHeight!==0,g.removeChild(k)):/^(search|tel)$/.test(f)||(/^(url|email)$/.test(f)?e=k.checkValidity&&k.checkValidity()===!1:/^color$/.test(f)?(g.appendChild(k),g.offsetWidth,e=k.value!=l,g.removeChild(k)):e=k.value!=l)),t[a[d]]=!!e;return t}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var d="2.5.3",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k=b.createElement("input"),l=":)",m={}.toString,n=" -webkit- -moz- -o- -ms- ".split(" "),o="Webkit Moz O ms",p=o.split(" "),q=o.toLowerCase().split(" "),r={svg:"http://www.w3.org/2000/svg"},s={},t={},u={},v=[],w=v.slice,x,y=function(a,c,d,e){var f,i,j,k=b.createElement("div"),l=b.body,m=l?l:b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),k.appendChild(j);return f=["&#173;","<style>",a,"</style>"].join(""),k.id=h,m.innerHTML+=f,m.appendChild(k),l||(m.style.background="",g.appendChild(m)),i=c(k,a),l?k.parentNode.removeChild(k):m.parentNode.removeChild(m),!!i},z=function(b){var c=a.matchMedia||a.msMatchMedia;if(c)return c(b).matches;var d;return y("@media "+b+" { #"+h+" { position: absolute; } }",function(b){d=(a.getComputedStyle?getComputedStyle(b,null):b.currentStyle)["position"]=="absolute"}),d},A=function(){function d(d,e){e=e||b.createElement(a[d]||"div"),d="on"+d;var f=d in e;return f||(e.setAttribute||(e=b.createElement("div")),e.setAttribute&&e.removeAttribute&&(e.setAttribute(d,""),f=F(e[d],"function"),F(e[d],"undefined")||(e[d]=c),e.removeAttribute(d))),e=null,f}var a={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return d}(),B={}.hasOwnProperty,C;!F(B,"undefined")&&!F(B.call,"undefined")?C=function(a,b){return B.call(a,b)}:C=function(a,b){return b in a&&F(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=w.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(w.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(w.call(arguments)))};return e});var K=function(c,d){var f=c.join(""),g=d.length;y(f,function(c,d){var f=b.styleSheets[b.styleSheets.length-1],h=f?f.cssRules&&f.cssRules[0]?f.cssRules[0].cssText:f.cssText||"":"",i=c.childNodes,j={};while(g--)j[i[g].id]=i[g];e.touch="ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch||(j.touch&&j.touch.offsetTop)===9,e.csstransforms3d=(j.csstransforms3d&&j.csstransforms3d.offsetLeft)===9&&j.csstransforms3d.offsetHeight===3,e.generatedcontent=(j.generatedcontent&&j.generatedcontent.offsetHeight)>=1,e.fontface=/src/i.test(h)&&h.indexOf(d.split(" ")[0])===0},g,d)}(['@font-face {font-family:"font";src:url("https://")}',["@media (",n.join("touch-enabled),("),h,")","{#touch{top:9px;position:absolute}}"].join(""),["@media (",n.join("transform-3d),("),h,")","{#csstransforms3d{left:9px;position:absolute;height:3px;}}"].join(""),['#generatedcontent:after{content:"',l,'";visibility:hidden}'].join("")],["fontface","touch","csstransforms3d","generatedcontent"]);s.flexbox=function(){return J("flexOrder")},s.canvas=function(){var a=b.createElement("canvas");return!!a.getContext&&!!a.getContext("2d")},s.canvastext=function(){return!!e.canvas&&!!F(b.createElement("canvas").getContext("2d").fillText,"function")},s.webgl=function(){try{var d=b.createElement("canvas"),e;e=!(!a.WebGLRenderingContext||!d.getContext("experimental-webgl")&&!d.getContext("webgl")),d=c}catch(f){e=!1}return e},s.touch=function(){return e.touch},s.geolocation=function(){return!!navigator.geolocation},s.postmessage=function(){return!!a.postMessage},s.websqldatabase=function(){return!!a.openDatabase},s.indexedDB=function(){return!!J("indexedDB",a)},s.hashchange=function(){return A("hashchange",a)&&(b.documentMode===c||b.documentMode>7)},s.history=function(){return!!a.history&&!!history.pushState},s.draganddrop=function(){var a=b.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a},s.websockets=function(){for(var b=-1,c=p.length;++b<c;)if(a[p[b]+"WebSocket"])return!0;return"WebSocket"in a},s.rgba=function(){return D("background-color:rgba(150,255,150,.5)"),G(j.backgroundColor,"rgba")},s.hsla=function(){return D("background-color:hsla(120,40%,100%,.5)"),G(j.backgroundColor,"rgba")||G(j.backgroundColor,"hsla")},s.multiplebgs=function(){return D("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(j.background)},s.backgroundsize=function(){return J("backgroundSize")},s.borderimage=function(){return J("borderImage")},s.borderradius=function(){return J("borderRadius")},s.boxshadow=function(){return J("boxShadow")},s.textshadow=function(){return b.createElement("div").style.textShadow===""},s.opacity=function(){return E("opacity:.55"),/^0.55$/.test(j.opacity)},s.cssanimations=function(){return J("animationName")},s.csscolumns=function(){return J("columnCount")},s.cssgradients=function(){var a="background-image:",b="gradient(linear,left top,right bottom,from(#9f9),to(white));",c="linear-gradient(left top,#9f9, white);";return D((a+"-webkit- ".split(" ").join(b+a)+n.join(c+a)).slice(0,-a.length)),G(j.backgroundImage,"gradient")},s.cssreflections=function(){return J("boxReflect")},s.csstransforms=function(){return!!J("transform")},s.csstransforms3d=function(){var a=!!J("perspective");return a&&"webkitPerspective"in g.style&&(a=e.csstransforms3d),a},s.csstransitions=function(){return J("transition")},s.fontface=function(){return e.fontface},s.generatedcontent=function(){return e.generatedcontent},s.video=function(){var a=b.createElement("video"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),c.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}catch(d){}return c},s.audio=function(){var a=b.createElement("audio"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),c.mp3=a.canPlayType("audio/mpeg;").replace(/^no$/,""),c.wav=a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),c.m4a=(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(d){}return c},s.localstorage=function(){try{return localStorage.setItem(h,h),localStorage.removeItem(h),!0}catch(a){return!1}},s.sessionstorage=function(){try{return sessionStorage.setItem(h,h),sessionStorage.removeItem(h),!0}catch(a){return!1}},s.webworkers=function(){return!!a.Worker},s.applicationcache=function(){return!!a.applicationCache},s.svg=function(){return!!b.createElementNS&&!!b.createElementNS(r.svg,"svg").createSVGRect},s.inlinesvg=function(){var a=b.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==r.svg},s.smil=function(){return!!b.createElementNS&&/SVGAnimate/.test(m.call(b.createElementNS(r.svg,"animate")))},s.svgclippaths=function(){return!!b.createElementNS&&/SVGClipPath/.test(m.call(b.createElementNS(r.svg,"clipPath")))};for(var M in s)C(s,M)&&(x=M.toLowerCase(),e[x]=s[M](),v.push((e[x]?"":"no-")+x));return e.input||L(),e.addTest=function(a,b){if(typeof a=="object")for(var d in a)C(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,g.className+=" "+(b?"":"no-")+a,e[a]=b}return e},D(""),i=k=null,function(a,b){function g(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function h(){var a=k.elements;return typeof a=="string"?a.split(" "):a}function i(a){var b={},c=a.createElement,e=a.createDocumentFragment,f=e();a.createElement=function(a){var e=(b[a]||(b[a]=c(a))).cloneNode();return k.shivMethods&&e.canHaveChildren&&!d.test(a)?f.appendChild(e):e},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+h().join().replace(/\w+/g,function(a){return b[a]=c(a),f.createElement(a),'c("'+a+'")'})+");return n}")(k,f)}function j(a){var b;return a.documentShived?a:(k.shivCSS&&!e&&(b=!!g(a,"article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block}audio{display:none}canvas,video{display:inline-block;*display:inline;*zoom:1}[hidden]{display:none}audio[controls]{display:inline-block;*display:inline;*zoom:1}mark{background:#FF0;color:#000}")),f||(b=!i(a)),b&&(a.documentShived=b),a)}var c=a.html5||{},d=/^<|^(?:button|form|map|select|textarea)$/i,e,f;(function(){var a=b.createElement("a");a.innerHTML="<xyz></xyz>",e="hidden"in a,f=a.childNodes.length==1||function(){try{b.createElement("a")}catch(a){return!0}var c=b.createDocumentFragment();return typeof c.cloneNode=="undefined"||typeof c.createDocumentFragment=="undefined"||typeof c.createElement=="undefined"}()})();var k={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:j};a.html5=k,j(b)}(this,b),e._version=d,e._prefixes=n,e._domPrefixes=q,e._cssomPrefixes=p,e.mq=z,e.hasEvent=A,e.testProp=function(a){return H([a])},e.testAllProps=J,e.testStyles=y,e.prefixed=function(a,b,c){return b?J(a,b,c):J(a,"pfx")},g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+v.join(" "):""),e}(this,this.document),function(a,b,c){function d(a){return o.call(a)=="[object Function]"}function e(a){return typeof a=="string"}function f(){}function g(a){return!a||a=="loaded"||a=="complete"||a=="uninitialized"}function h(){var a=p.shift();q=1,a?a.t?m(function(){(a.t=="c"?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){a!="img"&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l={},o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};y[c]===1&&(r=1,y[c]=[],l=b.createElement(a)),a=="object"?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),a!="img"&&(r||y[c]===2?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i(b=="c"?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),p.length==1&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&o.call(a.opera)=="[object Opera]",l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return o.call(a)=="[object Array]"},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,i){var j=b(a),l=j.autoCallback;j.url.split(".").pop().split("?").shift(),j.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]||h),j.instead?j.instead(a,e,f,g,i):(y[j.url]?j.noexec=!0:y[j.url]=1,f.load(j.url,j.forceCSS||!j.forceJS&&"css"==j.url.split(".").pop().split("?").shift()?"c":c,j.noexec,j.attrs,j.timeout),(d(e)||d(l))&&f.load(function(){k(),e&&e(j.origUrl,i,g),l&&l(j.origUrl,i,g),y[j.url]=2})))}function i(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var j,l,m=this.yepnope.loader;if(e(a))g(a,0,m,0);else if(w(a))for(j=0;j<a.length;j++)l=a[j],e(l)?g(l,0,m,0):w(l)?B(l):Object(l)===l&&i(l,m);else Object(a)===a&&i(a,m)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,b.readyState==null&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};
;
/*! jQuery v1.7.2 jquery.com | jquery.org/license */
(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cu(a){if(!cj[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){ck||(ck=c.createElement("iframe"),ck.frameBorder=ck.width=ck.height=0),b.appendChild(ck);if(!cl||!ck.createElement)cl=(ck.contentWindow||ck.contentDocument).document,cl.write((f.support.boxModel?"<!doctype html>":"")+"<html><body>"),cl.close();d=cl.createElement(a),cl.body.appendChild(d),e=f.css(d,"display"),b.removeChild(ck)}cj[a]=e}return cj[a]}function ct(a,b){var c={};f.each(cp.concat.apply([],cp.slice(0,b)),function(){c[this]=a});return c}function cs(){cq=b}function cr(){setTimeout(cs,0);return cq=f.now()}function ci(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ch(){try{return new a.XMLHttpRequest}catch(b){}}function cb(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function ca(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function b_(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bD.test(a)?d(a,e):b_(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)});else if(!c&&f.type(b)==="object")for(var e in b)b_(a+"["+e+"]",b[e],c,d);else d(a,b)}function b$(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function bZ(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bS,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bZ(a,c,d,e,l,g)));(k||!l)&&!g["*"]&&(l=bZ(a,c,d,e,"*",g));return l}function bY(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bO),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function bB(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?1:0,g=4;if(d>0){if(c!=="border")for(;e<g;e+=2)c||(d-=parseFloat(f.css(a,"padding"+bx[e]))||0),c==="margin"?d+=parseFloat(f.css(a,c+bx[e]))||0:d-=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0;return d+"px"}d=by(a,b);if(d<0||d==null)d=a.style[b];if(bt.test(d))return d;d=parseFloat(d)||0;if(c)for(;e<g;e+=2)d+=parseFloat(f.css(a,"padding"+bx[e]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+bx[e]))||0);return d+"px"}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bk(a,b){var c;b.nodeType===1&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?b.outerHTML=a.outerHTML:c!=="input"||a.type!=="checkbox"&&a.type!=="radio"?c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(f.expando),b.removeAttribute("_submit_attached"),b.removeAttribute("_change_attached"))}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i)for(d=0,e=i[c].length;d<e;d++)f.event.add(b,c,i[c][d])}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function T(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function K(){return!0}function J(){return!1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?+d:j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else d=b}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a))return f.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(n.test(b.replace(o,"@").replace(p,"]").replace(q,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(c){if(typeof c!="string"||!c)return null;var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H)return H.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h,i){var j,k=d==null,l=0,m=a.length;if(d&&typeof d=="object"){for(l in d)e.access(a,c,l,d[l],1,h,f);g=1}else if(f!==b){j=i===b&&e.isFunction(f),k&&(j?(j=c,c=function(a,b,c){return j.call(e(a),c)}):(c.call(a,f),c=null));if(c)for(;l<m;l++)c(a[l],d,j?f.call(a[l],l,c(a[l],d)):f,i);g=1}return g?a:k?c.call(a):m?c(a[0],d):h},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m,n=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++)g=b[d],h=f.type(g),h==="array"?n(g):h==="function"&&(!a.unique||!p.has(g))&&c.push(g)},o=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,j=!0,m=k||0,k=0,l=c.length;for(;c&&m<l;m++)if(c[m].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}j=!1,c&&(a.once?e===!0?p.disable():c=[]:d&&d.length&&(e=d.shift(),p.fireWith(e[0],e[1])))},p={add:function(){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++)for(var f=0;f<c.length;f++)if(b[d]===c[f]){j&&f<=l&&(l--,f<=m&&m--),c.splice(f--,1);if(a.unique)break}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++)if(a===c[b])return!0}return!1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return!c},lock:function(){d=b,(!e||e===!0)&&p.disable();return this},locked:function(){return!d},fireWith:function(b,c){d&&(j?a.once||d.push([b,c]):(!a.once||!e)&&o(b,c));return this},fire:function(){p.fireWith(this,arguments);return this},fired:function(){return!!i}};return p};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({}),j;for(j in g)i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++)b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g;g||j.resolveWith(j,b)}else j!==a&&j.resolveWith(j,d?[a]:[]);return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p=c.createElement("div"),q=c.documentElement;p.setAttribute("className","t"),p.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=p.getElementsByTagName("*"),e=p.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=p.getElementsByTagName("input")[0],b={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:p.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},f.boxModel=b.boxModel=c.compatMode==="CSS1Compat",i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete p.test}catch(r){b.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",function(){b.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),i.setAttribute("name","t"),p.appendChild(i),j=c.createDocumentFragment(),j.appendChild(p.lastChild),b.checkClone=j.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,j.removeChild(i),j.appendChild(p);if(p.attachEvent)for(n in{submit:1,change:1,focusin:1})m="on"+n,o=m in p,o||(p.setAttribute(m,"return;"),o=typeof p[m]=="function"),b[n+"Bubbles"]=o;j.removeChild(p),j=g=h=p=i=null,f(function(){var d,e,g,h,i,j,l,m,n,q,r,s,t,u=c.getElementsByTagName("body")[0];!u||(m=1,t="padding:0;margin:0;border:",r="position:absolute;top:0;left:0;width:1px;height:1px;",s=t+"0;visibility:hidden;",n="style='"+r+t+"5px solid #000;",q="<div "+n+"display:block;'><div style='"+t+"0;display:block;overflow:hidden;'></div></div>"+"<table "+n+"' cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",d=c.createElement("div"),d.style.cssText=s+"width:0;height:0;position:static;top:0;margin-top:"+m+"px",u.insertBefore(d,u.firstChild),p=c.createElement("div"),d.appendChild(p),p.innerHTML="<table><tr><td style='"+t+"0;display:none'></td><td>t</td></tr></table>",k=p.getElementsByTagName("td"),o=k[0].offsetHeight===0,k[0].style.display="",k[1].style.display="none",b.reliableHiddenOffsets=o&&k[0].offsetHeight===0,a.getComputedStyle&&(p.innerHTML="",l=c.createElement("div"),l.style.width="0",l.style.marginRight="0",p.style.width="2px",p.appendChild(l),b.reliableMarginRight=(parseInt((a.getComputedStyle(l,null)||{marginRight:0}).marginRight,10)||0)===0),typeof p.style.zoom!="undefined"&&(p.innerHTML="",p.style.width=p.style.padding="1px",p.style.border=0,p.style.overflow="hidden",p.style.display="inline",p.style.zoom=1,b.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.style.overflow="visible",p.innerHTML="<div style='width:5px;'></div>",b.shrinkWrapBlocks=p.offsetWidth!==3),p.style.cssText=r+s,p.innerHTML=q,e=p.firstChild,g=e.firstChild,i=e.nextSibling.firstChild.firstChild,j={doesNotAddBorder:g.offsetTop!==5,doesAddBorderForTableAndCells:i.offsetTop===5},g.style.position="fixed",g.style.top="20px",j.fixedPosition=g.offsetTop===20||g.offsetTop===15,g.style.position=g.style.top="",e.style.overflow="hidden",e.style.position="relative",j.subtractsBorderForOverflowNotVisible=g.offsetTop===-5,j.doesNotIncludeMarginInBodyOffset=u.offsetTop!==m,a.getComputedStyle&&(p.style.marginTop="1%",b.pixelMargin=(a.getComputedStyle(p,null)||{marginTop:0}).marginTop!=="1%"),typeof d.style.zoom!="undefined"&&(d.style.zoom=1),u.removeChild(d),l=p=d=null,f.extend(b,j))});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b)return;n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c);g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c])return g.events;k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k])return;if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++)delete d[b[e]];if(!(c?m:f.isEmptyObject)(d))return}}if(!c){delete j[k].data;if(!m(j[k]))return}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d,e,g,h,i,j=this[0],k=0,m=null;if(a===b){if(this.length){m=f.data(j);if(j.nodeType===1&&!f._data(j,"parsedAttrs")){g=j.attributes;for(i=g.length;k<i;k++)h=g[k].name,h.indexOf("data-")===0&&(h=f.camelCase(h.substring(5)),l(j,h,m[h]));f._data(j,"parsedAttrs",!0)}}return m}if(typeof a=="object")return this.each(function(){f.data(this,a)});d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!";return f.access(this,function(c){if(c===b){m=this.triggerHandler("getData"+e,[d[0]]),m===b&&j&&(m=f.data(j,a),m=l(j,a,m));return m===b&&d[1]?this.data(d[0]):m}d[1]=c,this.each(function(){var b=f(this);b.triggerHandler("setData"+e,d),f.data(this,a,c),b.triggerHandler("changeData"+e,d)})},null,c,arguments.length>1,null,!1)},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){var d=2;typeof a!="string"&&(c=a,a="fx",d--);if(arguments.length<d)return f.queue(this[0],a);return c===b?this:this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0))h++,l.add(m);m();return d.promise(c)}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,f.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,f.prop,a,b,arguments.length>1)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a))return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)});return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,g=this[0];{if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h}})}if(g){c=f.valHooks[g.type]||f.valHooks[g.nodeName.toLowerCase()];if(c&&"get"in c&&(d=c.get(g,"value"))!==b)return d;d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0)return null;c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j)return b;h.push(b)}}if(j&&!h.length&&i.length)return f(i[g]).val();return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn)return f(a)[c](d);if(typeof a.getAttribute=="undefined")return f.prop(a,c,d);i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&"set"in h&&i&&(g=h.set(a,d,c))!==b)return g;a.setAttribute(c,""+d);return d}if(h&&"get"in h&&i&&(g=h.get(a,c))!==null)return g;g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h,i=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;i<g;i++)e=d[i],e&&(c=f.propFix[e]||e,h=u.test(e),h||f.attr(a,e,""),a.removeAttribute(v?e:c),h&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button"))return w.get(a,b);return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button"))return w.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set"in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get"in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0,coords:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/(?:^|\s)hover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(
a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler,g=p.selector),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:g&&G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1)a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o)f.event.remove(a,j+b[h],c,d,!0);continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++)s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s));r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered))return;h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h])return;c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j)j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1)return;r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode)r.push([m,s]),n=m;n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++)m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault();c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=f.event.special[c.type]||{},j=[],k,l,m,n,o,p,q,r,s,t,u;g[0]=c,c.delegateTarget=this;if(!i.preDispatch||i.preDispatch.call(this,c)!==!1){if(e&&(!c.button||c.type!=="click")){n=f(this),n.context=this.ownerDocument||this;for(m=c.target;m!=this;m=m.parentNode||this)if(m.disabled!==!0){p={},r=[],n[0]=m;for(k=0;k<e;k++)s=d[k],t=s.selector,p[t]===b&&(p[t]=s.quick?H(m,s.quick):n.is(t)),p[t]&&r.push(s);r.length&&j.push({elem:m,matches:r})}}d.length>e&&j.push({elem:this,matches:d.slice(e)});for(k=0;k<j.length&&!c.isPropagationStopped();k++){q=j[k],c.currentTarget=q.elem;for(l=0;l<q.matches.length&&!c.isImmediatePropagationStopped();l++){s=q.matches[l];if(h||!c.namespace&&!s.namespace||c.namespace_re&&c.namespace_re.test(s.namespace))c.data=s.data,c.handleObj=s,o=((f.event.special[s.origType]||{}).handle||s.handler).apply(q.elem,g),o!==b&&(c.result=o,o===!1&&(c.preventDefault(),c.stopPropagation()))}}i.postDispatch&&i.postDispatch.call(this,c);return c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando])return a;var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;)e=i[--d],a[e]=g[e];a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event))return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d))a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b;return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),d._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))});return!1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=J;else if(!e)return this;g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a)this.off(g,c,a[g]);return this}if(c===!1||typeof c=="function")d=c,c=b;d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return e;var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b))if(w.length===2&&o.relative[w[0]])j=y(w[0]+w[1],d,f);else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length)b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length)q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}else k=w=[]}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]")if(!u)e.push.apply(e,k);else if(d&&d.nodeType===1)for(t=0;k[t]!=null;t++)k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t]);else for(t=0;k[t]!=null;t++)k[t]&&k[t].nodeType===1&&e.push(j[t]);else s(k,e);l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter)if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\")continue;s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f)g=i=!0;else if(f===!0)continue}if(f)for(n=0;(j=s[n])!=null;n++)j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g)return[];break}}if(a===q)if(g==null)m.error(a);else break;q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9||d===11){if(typeof a.textContent=="string")return a.textContent;if(typeof a.innerText=="string")return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(d===3||d===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=m(b[3],null,null,c);else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return!1}else if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0]))return!0;return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling)if(l.nodeType===1)return!1;if(k==="first")return!0;l=a;case"last":while(l=l.nextSibling)if(l.nodeType===1)return!1;return!0;case"nth":c=b[2],e=b[3];if(c===1&&e===0)return!0;f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling)l.nodeType===1&&(l.nodeIndex=++i);g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));o.match.globalPOS=p;var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return s(e.getElementsByTagName(b),f);if(h[2]&&o.find.CLASS&&e.getElementsByClassName)return s(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return s([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return s([],f);if(i.id===h[3])return s([i],f)}try{return s(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p)return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}catch(r){}finally{l||k.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)m[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a))f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.globalPOS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++)f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h});g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof a=="string")return f.inArray(this[0],f(a));return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var V="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")[\\s/>]","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){return f.access(this,function(a){return a===b?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapInner(a.call(this,b))});return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f
.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){return f.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return c.nodeType===1?c.innerHTML.replace(W,""):null;if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},c.nodeType===1&&(f.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(g){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a))return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,function(a,b){b.src?f.ajax({type:"GET",global:!1,url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||f.isXMLDoc(a)||!bc.test("<"+a.nodeName+">")?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g)e[g]&&bk(d[g],e[g])}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g)bj(d[g],e[g])}}d=e=null;return h},clean:function(a,b,d,e){var g,h,i,j=[];b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);for(var k=0,l;(l=a[k])!=null;k++){typeof l=="number"&&(l+="");if(!l)continue;if(typeof l=="string")if(!_.test(l))l=b.createTextNode(l);else{l=l.replace(Y,"<$1></$2>");var m=(Z.exec(l)||["",""])[1].toLowerCase(),n=bg[m]||bg._default,o=n[0],p=b.createElement("div"),q=bh.childNodes,r;b===c?bh.appendChild(p):U(b).appendChild(p),p.innerHTML=n[1]+l+n[2];while(o--)p=p.lastChild;if(!f.support.tbody){var s=$.test(l),t=m==="table"&&!s?p.firstChild&&p.firstChild.childNodes:n[1]==="<table>"&&!s?p.childNodes:[];for(i=t.length-1;i>=0;--i)f.nodeName(t[i],"tbody")&&!t[i].childNodes.length&&t[i].parentNode.removeChild(t[i])}!f.support.leadingWhitespace&&X.test(l)&&p.insertBefore(b.createTextNode(X.exec(l)[0]),p.firstChild),l=p.childNodes,p&&(p.parentNode.removeChild(p),q.length>0&&(r=q[q.length-1],r&&r.parentNode&&r.parentNode.removeChild(r)))}var u;if(!f.support.appendChecked)if(l[0]&&typeof (u=l.length)=="number")for(i=0;i<u;i++)bn(l[i]);else bn(l);l.nodeType?j.push(l):j=f.merge(j,l)}if(d){g=function(a){return!a.type||be.test(a.type)};for(k=0;j[k];k++){h=j[k];if(e&&f.nodeName(h,"script")&&(!h.type||be.test(h.type)))e.push(h.parentNode?h.parentNode.removeChild(h):h);else{if(h.nodeType===1){var v=f.grep(h.getElementsByTagName("script"),g);j.splice.apply(j,[k+1,0].concat(v))}d.appendChild(h)}}}return j},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()])continue;c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events)e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bp=/alpha\([^)]*\)/i,bq=/opacity=([^)]*)/,br=/([A-Z]|^ms)/g,bs=/^[\-+]?(?:\d*\.)?\d+$/i,bt=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,bu=/^([\-+])=([\-+.\de]+)/,bv=/^margin/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Top","Right","Bottom","Left"],by,bz,bA;f.fn.css=function(a,c){return f.access(this,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)},a,c,arguments.length>1)},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=by(a,"opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get"in k&&(g=k.get(a,!1,e))!==b)return g;return j[c]}h=typeof d,h==="string"&&(g=bu.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d))return;h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(by)return by(a,c)},swap:function(a,b,c){var d={},e,f;for(f in b)d[f]=a.style[f],a.style[f]=b[f];e=c.call(a);for(f in b)a.style[f]=d[f];return e}}),f.curCSS=f.css,c.defaultView&&c.defaultView.getComputedStyle&&(bz=function(a,b){var c,d,e,g,h=a.style;b=b.replace(br,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b))),!f.support.pixelMargin&&e&&bv.test(b)&&bt.test(c)&&(g=h.width,h.width=c,c=e.width,h.width=g);return c}),c.documentElement.currentStyle&&(bA=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f==null&&g&&(e=g[b])&&(f=e),bt.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),by=bz||bA,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){if(c)return a.offsetWidth!==0?bB(a,b,d):f.swap(a,bw,function(){return bB(a,b,d)})},set:function(a,b){return bs.test(b)?b+"px":b}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bq.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bp,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bp.test(g)?g.replace(bp,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){return f.swap(a,{display:"inline-block"},function(){return b?by(a,"margin-right"):a.style.marginRight})}})}),f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)}),f.each({margin:"",padding:"",border:"Width"},function(a,b){f.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};for(d=0;d<4;d++)f[a+bx[d]+b]=e[d]||e[d-2]||e[0];return f}}});var bC=/%20/g,bD=/\[\]$/,bE=/\r?\n/g,bF=/#.*$/,bG=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bH=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bI=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bJ=/^(?:GET|HEAD)$/,bK=/^\/\//,bL=/\?/,bM=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bN=/^(?:select|textarea)/i,bO=/\s+/,bP=/([?&])_=[^&]*/,bQ=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bR=f.fn.load,bS={},bT={},bU,bV,bW=["*/"]+["*"];try{bU=e.href}catch(bX){bU=c.createElement("a"),bU.href="",bU=bU.href}bV=bQ.exec(bU.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bR)return bR.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bM,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bN.test(this.nodeName)||bH.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bE,"\r\n")}}):{name:b.name,value:c.replace(bE,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b$(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b$(a,b);return a},ajaxSettings:{url:bU,isLocal:bI.test(bV[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bW},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bY(bS),ajaxTransport:bY(bT),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?ca(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified"))f.lastModified[k]=y;if(z=v.getResponseHeader("Etag"))f.etag[k]=z}if(a===304)w="notmodified",o=!0;else try{r=cb(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}else{u=w;if(!w||a)w="error",a<0&&(a=0)}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bG.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bF,"").replace(bK,bV[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bO),d.crossDomain==null&&(r=bQ.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bV[1]&&r[2]==bV[2]&&(r[3]||(r[1]==="http:"?80:443))==(bV[3]||(bV[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),bZ(bS,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bJ.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bL.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bP,"$1_="+x);d.url=y+(y===d.url?(bL.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bW+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return!1}for(u in{success:1,error:1,complete:1})v[u](d[u]);p=bZ(bT,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2)w(-1,z);else throw z}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)b_(g,a[g],c,e);return d.join("&").replace(bC,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cc=f.now(),cd=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cc++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=typeof b.data=="string"&&/^application\/x\-www\-form\-urlencoded/.test(b.contentType);if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(cd.test(b.url)||e&&cd.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(cd,l),b.url===j&&(e&&(k=k.replace(cd,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var ce=a.ActiveXObject?function(){for(var a in cg)cg[a](0,1)}:!1,cf=0,cg;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ch()||ci()}:ch,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,ce&&delete cg[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n);try{m.text=h.responseText}catch(a){}try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cf,ce&&(cg||(cg={},f(a).unload(ce)),cg[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cj={},ck,cl,cm=/^(?:toggle|show|hide)$/,cn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,co,cp=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cq;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(ct("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),(e===""&&f.css(d,"display")==="none"||!f.contains(d.ownerDocument.documentElement,d))&&f._data(d,"olddisplay",cu(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(ct("hide",3),a,b,c);var d,e,g=0,h=this.length;for(;g<h;g++)d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e));for(g=0;g<h;g++)this[g].style&&(this[g].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(ct("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o,p,q;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]);if((k=f.cssHooks[g])&&"expand"in k){l=k.expand(a[g]),delete a[g];for(i in l)i in a||(a[i]=l[i])}}for(g in a){h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cu(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)j=new f.fx(this,b,i),h=a[i],cm.test(h)?(q=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),q?(f._data(this,"toggle"+i,q==="show"?"hide":"show"),j[q]()):j[h]()):(m=cn.exec(h),n=j.cur(),m?(o=parseFloat(m[2]),p=m[3]||(f.cssNumber[i]?"":"px"),p!=="px"&&(f.style(this,i,(o||1)+p),n=(o||1)/j.cur()*n,f.style(this,i,n+p)),m[1]&&(o=(m[1]==="-="?-1:1)*o+n),j.custom(n,o,p)):j.custom(n,h,""));return!0}var e=f.speed(b,c,d);if(f.isEmptyObject(a))return this.each(e.complete,[!1]);a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null)for(b in g)g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b);else g[b=a+".run"]&&g[b].stop&&h(this,g,b);for(b=e.length;b--;)e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:ct("show",1),slideUp:ct("hide",1),slideToggle:ct("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+.5}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cq||cr(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){f._data(e.elem,"fxshow"+e.prop)===b&&(e.options.hide?f._data(e.elem,"fxshow"+e.prop,e.start):e.options.show&&f._data(e.elem,"fxshow"+e.prop,e.end))},h()&&f.timers.push(h)&&!co&&(co=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cq||cr(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties)i.animatedProperties[b]!==!0&&(g=!1);if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show)for(b in i.animatedProperties)f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0);d=i.complete,d&&(i.complete=!1,d.call(h))}return!1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(co),co=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(cp.concat.apply([],cp),function(a,b){b.indexOf("margin")&&(f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)})}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cv,cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?cv=function(a,b,c,d){try{d=a.getBoundingClientRect()}catch(e){}if(!d||!f.contains(c,a))return d?{top:d.top,left:d.left}:{top:0,left:0};var g=b.body,h=cy(b),i=c.clientTop||g.clientTop||0,j=c.clientLeft||g.clientLeft||0,k=h.pageYOffset||f.support.boxModel&&c.scrollTop||g.scrollTop,l=h.pageXOffset||f.support.boxModel&&c.scrollLeft||g.scrollLeft,m=d.top+k-i,n=d.left+l-j;return{top:m,left:n}}:cv=function(a,b,c){var d,e=a.offsetParent,g=a,h=b.body,i=b.defaultView,j=i?i.getComputedStyle(a,null):a.currentStyle,k=a.offsetTop,l=a.offsetLeft;while((a=a.parentNode)&&a!==h&&a!==c){if(f.support.fixedPosition&&j.position==="fixed")break;d=i?i.getComputedStyle(a,null):a.currentStyle,k-=a.scrollTop,l-=a.scrollLeft,a===e&&(k+=a.offsetTop,l+=a.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(a.nodeName))&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),g=e,e=a.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&d.overflow!=="visible"&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),j=d}if(j.position==="relative"||j.position==="static")k+=h.offsetTop,l+=h.offsetLeft;f.support.fixedPosition&&j.position==="fixed"&&(k+=Math.max(c.scrollTop,h.scrollTop),l+=Math.max(c.scrollLeft,h.scrollLeft));return{top:k,left:l}},f.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){f.offset.setOffset(this,a,b)});var c=this[0],d=c&&c.ownerDocument;if(!d)return null;if(c===d.body)return f.offset.bodyOffset(c);return cv(c,d,d.documentElement)},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);f.fn[a]=function(e){return f.access(this,function(a,e,g){var h=cy(a);if(g===b)return h?c in h?h[c]:f.support.boxModel&&h.document.documentElement[e]||h.document.body[e]:a[e];h?h.scrollTo(d?f(h).scrollLeft():g,d?g:f(h).scrollTop()):a[e]=g},a,e,arguments.length,null)}}),f.each({Height:"height",Width:"width"},function(a,c){var d="client"+a,e="scroll"+a,g="offset"+a;f.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,c,"padding")):this[c]():null},f.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,c,a?"margin":"border")):this[c]():null},f.fn[c]=function(a){return f.access(this,function(a,c,h){var i,j,k,l;if(f.isWindow(a)){i=a.document,j=i.documentElement[d];return f.support.boxModel&&j||i.body&&i.body[d]||j}if(a.nodeType===9){i=a.documentElement;if(i[d]>=i[e])return i[d];return Math.max(a.body[e],i[e],a.body[g],i[g])}if(h===b){k=f.css(a,c),l=parseFloat(k);return f.isNumeric(l)?l:k}f(a).css(c,h)},c,a,arguments.length,null)}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);;
var TWEEN=TWEEN||function(){var a=[];return{REVISION:"6",getAll:function(){return a},removeAll:function(){a=[]},add:function(c){a.push(c)},remove:function(c){c=a.indexOf(c);-1!==c&&a.splice(c,1)},update:function(c){var b=0,e=a.length;for(c=void 0!==c?c:Date.now();b<e;)a[b].update(c)?b++:(a.splice(b,1),e--)}}}();
TWEEN.Tween=function(a){var c={},b={},e=1E3,d=0,f=null,h=TWEEN.Easing.Linear.None,p=TWEEN.Interpolation.Linear,k=null,l=null,m=null;this.to=function(a,c){null!==c&&(e=c);b=a;return this};this.start=function(e){TWEEN.add(this);f=void 0!==e?e:Date.now();f+=d;for(var g in b)if(null!==a[g]){if(b[g]instanceof Array){if(0===b[g].length)continue;b[g]=[a[g]].concat(b[g])}c[g]=a[g]}return this};this.stop=function(){TWEEN.remove(this);return this};this.delay=function(a){d=a;return this};this.easing=function(a){h=
a;return this};this.interpolation=function(a){p=a;return this};this.chain=function(a){k=a;return this};this.onUpdate=function(a){l=a;return this};this.onComplete=function(a){m=a;return this};this.update=function(d){if(d<f)return!0;d=(d-f)/e;d=1<d?1:d;var g=h(d),j;for(j in c){var q=c[j],n=b[j];a[j]=n instanceof Array?p(n,g):q+(n-q)*g}null!==l&&l.call(a,g);return 1==d?(null!==m&&m.call(a),null!==k&&k.start(),!1):!0}};
TWEEN.Easing={Linear:{None:function(a){return a}},Quadratic:{In:function(a){return a*a},Out:function(a){return a*(2-a)},InOut:function(a){return 1>(a*=2)?0.5*a*a:-0.5*(--a*(a-2)-1)}},Cubic:{In:function(a){return a*a*a},Out:function(a){return--a*a*a+1},InOut:function(a){return 1>(a*=2)?0.5*a*a*a:0.5*((a-=2)*a*a+2)}},Quartic:{In:function(a){return a*a*a*a},Out:function(a){return 1- --a*a*a*a},InOut:function(a){return 1>(a*=2)?0.5*a*a*a*a:-0.5*((a-=2)*a*a*a-2)}},Quintic:{In:function(a){return a*a*a*
a*a},Out:function(a){return--a*a*a*a*a+1},InOut:function(a){return 1>(a*=2)?0.5*a*a*a*a*a:0.5*((a-=2)*a*a*a*a+2)}},Sinusoidal:{In:function(a){return 1-Math.cos(a*Math.PI/2)},Out:function(a){return Math.sin(a*Math.PI/2)},InOut:function(a){return 0.5*(1-Math.cos(Math.PI*a))}},Exponential:{In:function(a){return 0===a?0:Math.pow(1024,a-1)},Out:function(a){return 1===a?1:1-Math.pow(2,-10*a)},InOut:function(a){return 0===a?0:1===a?1:1>(a*=2)?0.5*Math.pow(1024,a-1):0.5*(-Math.pow(2,-10*(a-1))+2)}},Circular:{In:function(a){return 1-
Math.sqrt(1-a*a)},Out:function(a){return Math.sqrt(1- --a*a)},InOut:function(a){return 1>(a*=2)?-0.5*(Math.sqrt(1-a*a)-1):0.5*(Math.sqrt(1-(a-=2)*a)+1)}},Elastic:{In:function(a){var c,b=0.1;if(0===a)return 0;if(1===a)return 1;!b||1>b?(b=1,c=0.1):c=0.4*Math.asin(1/b)/(2*Math.PI);return-(b*Math.pow(2,10*(a-=1))*Math.sin((a-c)*2*Math.PI/0.4))},Out:function(a){var c,b=0.1;if(0===a)return 0;if(1===a)return 1;!b||1>b?(b=1,c=0.1):c=0.4*Math.asin(1/b)/(2*Math.PI);return b*Math.pow(2,-10*a)*Math.sin((a-c)*
2*Math.PI/0.4)+1},InOut:function(a){var c,b=0.1;if(0===a)return 0;if(1===a)return 1;!b||1>b?(b=1,c=0.1):c=0.4*Math.asin(1/b)/(2*Math.PI);return 1>(a*=2)?-0.5*b*Math.pow(2,10*(a-=1))*Math.sin((a-c)*2*Math.PI/0.4):0.5*b*Math.pow(2,-10*(a-=1))*Math.sin((a-c)*2*Math.PI/0.4)+1}},Back:{In:function(a){return a*a*(2.70158*a-1.70158)},Out:function(a){return--a*a*(2.70158*a+1.70158)+1},InOut:function(a){return 1>(a*=2)?0.5*a*a*(3.5949095*a-2.5949095):0.5*((a-=2)*a*(3.5949095*a+2.5949095)+2)}},Bounce:{In:function(a){return 1-
TWEEN.Easing.Bounce.Out(1-a)},Out:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},InOut:function(a){return 0.5>a?0.5*TWEEN.Easing.Bounce.In(2*a):0.5*TWEEN.Easing.Bounce.Out(2*a-1)+0.5}}};
TWEEN.Interpolation={Linear:function(a,c){var b=a.length-1,e=b*c,d=Math.floor(e),f=TWEEN.Interpolation.Utils.Linear;return 0>c?f(a[0],a[1],e):1<c?f(a[b],a[b-1],b-e):f(a[d],a[d+1>b?b:d+1],e-d)},Bezier:function(a,c){var b=0,e=a.length-1,d=Math.pow,f=TWEEN.Interpolation.Utils.Bernstein,h;for(h=0;h<=e;h++)b+=d(1-c,e-h)*d(c,h)*a[h]*f(e,h);return b},CatmullRom:function(a,c){var b=a.length-1,e=b*c,d=Math.floor(e),f=TWEEN.Interpolation.Utils.CatmullRom;return a[0]===a[b]?(0>c&&(d=Math.floor(e=b*(1+c))),f(a[(d-
1+b)%b],a[d],a[(d+1)%b],a[(d+2)%b],e-d)):0>c?a[0]-(f(a[0],a[0],a[1],a[1],-e)-a[0]):1<c?a[b]-(f(a[b],a[b],a[b-1],a[b-1],e-b)-a[b]):f(a[d?d-1:0],a[d],a[b<d+1?b:d+1],a[b<d+2?b:d+2],e-d)},Utils:{Linear:function(a,c,b){return(c-a)*b+a},Bernstein:function(a,c){var b=TWEEN.Interpolation.Utils.Factorial;return b(a)/b(c)/b(a-c)},Factorial:function(){var a=[1];return function(c){var b=1,e;if(a[c])return a[c];for(e=c;1<e;e--)b*=e;return a[c]=b}}(),CatmullRom:function(a,c,b,e,d){a=0.5*(b-a);e=0.5*(e-c);var f=
d*d;return(2*c-2*b+a+e)*d*f+(-3*c+3*b-2*a-e)*f+a*d+c}}};
;
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f=b.parentNode,g=f.name,h;return!b.href||!g||f.nodeName.toLowerCase()!=="map"?!1:(h=a("img[usemap=#"+g+"]")[0],!!h&&d(h))}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(a.ui.version)return;a.extend(a.ui,{version:"1.8.21",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0)return f}d=d.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){function h(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),f&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var e=d==="Width"?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return typeof b!="number"?g["outer"+d].call(this,b):this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(!d||!a.element[0].parentNode)return;for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}})})(jQuery);;/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.widget.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++)try{a(e).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e=="string",g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&e.charAt(0)==="_"?h:(f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b)return h=f,!1}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c=="string"){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent;if(f)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}})(jQuery);;/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.mouse.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){var c=!1;a(document).mouseup(function(a){c=!1}),a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(c)return;this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=b.which==1,f=typeof this.options.cancel=="string"&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=this._mouseStart(b)!==!1;if(!this._mouseStarted)return b.preventDefault(),!0}return!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0,!0},_mouseMove:function(b){return!a.browser.msie||document.documentMode>=9||!!b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})})(jQuery);;/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.draggable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable"))return;return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(b),this.handle?(c.iframeFix&&a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute");if(!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1);var d=this.element[0],e=!1;while(d&&(d=d.parentNode))d==document&&(e=!0);if(!e&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!c||this.options.revert=="valid"&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var f=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",b)!==!1&&f._clear()})}else this._trigger("stop",b)!==!1&&this._clear();return!1},_mouseUp:function(b){return this.options.iframeFix===!0&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=!this.options.handle||!a(this.options.handle,this.element).length?!0:!1;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):c.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo),d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){typeof b=="string"&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;b.containment=="parent"&&(b.containment=this.helper[0].parentNode);if(b.containment=="document"||b.containment=="window")this.containment=[b.containment=="document"?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,b.containment=="document"?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(b.containment=="document"?0:a(window).scrollLeft())+a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(b.containment=="document"?0:a(window).scrollTop())+(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&b.containment.constructor!=Array){var c=a(b.containment),d=c[0];if(!d)return;var e=c.offset(),f=a(d).css("overflow")!="hidden";this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}else b.containment.constructor==Array&&(this.containment=b.containment)},_convertPositionTo:function(b,c){c||(c=this.position);var d=b=="absolute"?1:-1,e=this.options,f=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName),f=b.pageX,g=b.pageY;if(this.originalPosition){var h;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();h=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else h=this.containment;b.pageX-this.offset.click.left<h[0]&&(f=h[0]+this.offset.click.left),b.pageY-this.offset.click.top<h[1]&&(g=h[1]+this.offset.click.top),b.pageX-this.offset.click.left>h[2]&&(f=h[2]+this.offset.click.left),b.pageY-this.offset.click.top>h[3]&&(g=h[3]+this.offset.click.top)}if(c.grid){var j=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY;g=h?j-this.offset.click.top<h[1]||j-this.offset.click.top>h[3]?j-this.offset.click.top<h[1]?j+c.grid[1]:j-c.grid[1]:j:j;var k=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX;f=h?k-this.offset.click.left<h[0]||k-this.offset.click.left>h[2]?k-this.offset.click.left<h[0]?k+c.grid[0]:k-c.grid[0]:k:k}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),b=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.extend(a.ui.draggable,{version:"1.8.21"}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,d.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("draggable"),e=this,f=function(b){var c=this.offset.click.top,d=this.offset.click.left,e=this.positionAbs.top,f=this.positionAbs.left,g=b.height,h=b.width,i=b.top,j=b.left;return a.ui.isOver(e+c,f+d,i,j,g,h)};a.each(d.sortables,function(f){this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c){var d=a("body"),e=a(this).data("draggable").options;d.css("cursor")&&(e._cursor=d.css("cursor")),d.css("cursor",e.cursor)},stop:function(b,c){var d=a(this).data("draggable").options;d._cursor&&a("body").css("cursor",d._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(b,c){var d=a(this).data("draggable");d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"&&(d.overflowOffset=d.scrollParent.offset())},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=!1;if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"){if(!e.axis||e.axis!="x")d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity?d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop-e.scrollSpeed);if(!e.axis||e.axis!="y")d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity?d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft-e.scrollSpeed)}else{if(!e.axis||e.axis!="x")b.pageY-a(document).scrollTop()<e.scrollSensitivity?f=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<e.scrollSensitivity&&(f=a(document).scrollTop(a(document).scrollTop()+e.scrollSpeed));if(!e.axis||e.axis!="y")b.pageX-a(document).scrollLeft()<e.scrollSensitivity?f=a(document).scrollLeft(a(document).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<e.scrollSensitivity&&(f=a(document).scrollLeft(a(document).scrollLeft()+e.scrollSpeed))}f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c){var d=a(this).data("draggable"),e=d.options;d.snapElements=[],a(e.snap.constructor!=String?e.snap.items||":data(draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=e.snapTolerance,g=c.offset.left,h=g+d.helperProportions.width,i=c.offset.top,j=i+d.helperProportions.height;for(var k=d.snapElements.length-1;k>=0;k--){var l=d.snapElements[k].left,m=l+d.snapElements[k].width,n=d.snapElements[k].top,o=n+d.snapElements[k].height;if(!(l-f<g&&g<m+f&&n-f<i&&i<o+f||l-f<g&&g<m+f&&n-f<j&&j<o+f||l-f<h&&h<m+f&&n-f<i&&i<o+f||l-f<h&&h<m+f&&n-f<j&&j<o+f)){d.snapElements[k].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=!1;continue}if(e.snapMode!="inner"){var p=Math.abs(n-j)<=f,q=Math.abs(o-i)<=f,r=Math.abs(l-h)<=f,s=Math.abs(m-g)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m}).left-d.margins.left)}var t=p||q||r||s;if(e.snapMode!="outer"){var p=Math.abs(n-i)<=f,q=Math.abs(o-j)<=f,r=Math.abs(l-g)<=f,s=Math.abs(m-h)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o-d.helperProportions.height,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m-d.helperProportions.width}).left-d.margins.left)}!d.snapElements[k].snapping&&(p||q||r||s||t)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=p||q||r||s||t}}}),a.ui.plugin.add("draggable","stack",{start:function(b,c){var d=a(this).data("draggable").options,e=a.makeArray(a(d.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(!e.length)return;var f=parseInt(e[0].style.zIndex)||0;a(e).each(function(a){this.style.zIndex=f+a}),this[0].style.zIndex=f+e.length}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})})(jQuery);;/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
jQuery.effects||function(a,b){function c(b){var c;return b&&b.constructor==Array&&b.length==3?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[parseFloat(c[1])*2.55,parseFloat(c[2])*2.55,parseFloat(c[3])*2.55]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:(c=/rgba\(0, 0, 0, 0\)/.exec(b))?e.transparent:e[a.trim(b).toLowerCase()]}function d(b,d){var e;do{e=a.curCSS(b,d);if(e!=""&&e!="transparent"||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return c(e)}function h(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},c,d;if(a&&a.length&&a[0]&&a[a[0]]){var e=a.length;while(e--)c=a[e],typeof a[c]=="string"&&(d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),b[d]=a[c])}else for(c in a)typeof a[c]=="string"&&(b[c]=a[c]);return b}function i(b){var c,d;for(c in b)d=b[c],(d==null||a.isFunction(d)||c in g||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}function j(a,b){var c={_:0},d;for(d in b)a[d]!=b[d]&&(c[d]=b[d]);return c}function k(b,c,d,e){typeof b=="object"&&(e=c,d=null,c=b,b=c.effect),a.isFunction(c)&&(e=c,d=null,c={});if(typeof c=="number"||a.fx.speeds[c])e=d,d=c,c={};return a.isFunction(d)&&(e=d,d=null),c=c||{},d=d||c.duration,d=a.fx.off?0:typeof d=="number"?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,e=e||c.complete,[b,c,d,e]}function l(b){return!b||typeof b=="number"||a.fx.speeds[b]?!0:typeof b=="string"&&!a.effects[b]?!0:!1}a.effects={},a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(b,e){a.fx.step[e]=function(a){a.colorInit||(a.start=d(a.elem,e),a.end=c(a.end),a.colorInit=!0),a.elem.style[e]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},f=["add","remove","toggle"],g={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,c,d,e){return a.isFunction(d)&&(e=d,d=null),this.queue(function(){var g=a(this),k=g.attr("style")||" ",l=i(h.call(this)),m,n=g.attr("class")||"";a.each(f,function(a,c){b[c]&&g[c+"Class"](b[c])}),m=i(h.call(this)),g.attr("class",n),g.animate(j(l,m),{queue:!1,duration:c,easing:d,complete:function(){a.each(f,function(a,c){b[c]&&g[c+"Class"](b[c])}),typeof g.attr("style")=="object"?(g.attr("style").cssText="",g.attr("style").cssText=k):g.attr("style",k),e&&e.apply(this,arguments),a.dequeue(this)}})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){return typeof d=="boolean"||d===b?e?a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},e,f,g]):this._toggleClass(c,d):a.effects.animateClass.apply(this,[{toggle:c},d,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}}),a.extend(a.effects,{version:"1.8.21",save:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){return b=="toggle"&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;try{e.id}catch(f){e=document.body}return b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).focus(),d=b.parent(),b.css("position")=="static"?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),d.css(c).show()},removeWrapper:function(b){var c,d=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(c=b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus(),c):b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(b,c,d,e){var f=k.apply(this,arguments),g={options:f[1],duration:f[2],callback:f[3]},h=g.options.mode,i=a.effects[b];return a.fx.off||!i?h?this[h](g.duration,g.callback):this.each(function(){g.callback&&g.callback.call(this)}):i.call(this,g)},_show:a.fn.show,show:function(a){if(l(a))return this._show.apply(this,arguments);var b=k.apply(this,arguments);return b[1].mode="show",this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(l(a))return this._hide.apply(this,arguments);var b=k.apply(this,arguments);return b[1].mode="hide",this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(l(b)||typeof b=="boolean"||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=k.apply(this,arguments);return c[1].mode="toggle",this.effect.apply(this,c)},cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}}),a.easing.jswing=a.easing.swing,a.extend(a.easing,{def:"easeOutQuad",swing:function(b,c,d,e,f){return a.easing[a.easing.def](b,c,d,e,f)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return b==0?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return b==0?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*2*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e/2)==2)return c+d;g||(g=e*.3*1.5);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return b<1?-0.5*h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)+c:h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)*.5+d+c},easeInBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),e*(c/=f)*c*((g+1)*c-g)+d},easeOutBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),e*((c=c/f-1)*c*((g+1)*c+g)+1)+d},easeInOutBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),(c/=f/2)<1?e/2*c*c*(((g*=1.525)+1)*c-g)+d:e/2*((c-=2)*c*(((g*=1.525)+1)*c+g)+2)+d},easeInBounce:function(b,c,d,e,f){return e-a.easing.easeOutBounce(b,f-c,0,e,f)+d},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*7.5625*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(b,c,d,e,f){return c<f/2?a.easing.easeInBounce(b,c*2,0,e,f)*.5+d:a.easing.easeOutBounce(b,c*2-f,0,e,f)*.5+e*.5+d}})}(jQuery);;;
(function(d){function e(a){var b=a||window.event,c=[].slice.call(arguments,1),f=0,e=0,g=0;a=d.event.fix(b);a.type="mousewheel";b.wheelDelta&&(f=b.wheelDelta/120);b.detail&&(f=-b.detail/3);g=f;void 0!==b.axis&&b.axis===b.HORIZONTAL_AXIS&&(g=0,e=-1*f);void 0!==b.wheelDeltaY&&(g=b.wheelDeltaY/120);void 0!==b.wheelDeltaX&&(e=-1*b.wheelDeltaX/120);c.unshift(a,f,e,g);return(d.event.dispatch||d.event.handle).apply(this,c)}var c=["DOMMouseScroll","mousewheel"];if(d.event.fixHooks)for(var h=c.length;h;)d.event.fixHooks[c[--h]]=
d.event.mouseHooks;d.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=c.length;a;)this.addEventListener(c[--a],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],e,!1);else this.onmousewheel=null}};d.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);
;
(function(a){function t(h,c){function u(){a(h,b,k).unbind("mousemove").unbind("mouseup");a(document).unbind("mouseup",u);b.trigger("complete");clearTimeout(D);if(c.snaptodots){c.hidedots&&v.stop(!0,!0).fadeOut("slow");var j=Math.round(f/(360/g));d.gotoSlide(j)}d.startInterval();return!1}function w(j){return j+(360<j?-360:0>j?360:0)}function E(j,a,c,b){l++;var g=w(Math.round(l*j+f));l===c&&b&&d.startInterval();q(g,l===c||!0);l<c?D=setTimeout(function(){E(j,a,c,b)},50):(l=0,f=a)}function t(a){var c=
a.pageX-b.offset().left-x/2;a=a.pageY-b.offset().top-y/2;c=Math.atan2(c,-a);f=w(180*c/Math.PI);q(f,!0);return!1}function q(a,b){e=Math.round(a*g/360);e=e===g?0:e;n[0].style.left=-(a/360*z*g)+"px";k.style.top=Math.round(-Math.cos(a*(Math.PI/180))*c.radius+(y/2-H/2))+"px";k.style.left=Math.round(Math.sin(a*(Math.PI/180))*c.radius+(x/2-I/2))+"px";"function"==typeof c.callback&&b&&c.callback.call(h,m[e],e,a)}var b=h,x=b.outerWidth(),y=b.outerHeight(),k=a(".thumb",b)[0],I=a(k).outerWidth(),H=a(k).outerHeight(),
n=a(".overview",b),m=n.children(),v={},A=a("a",m),z=a(m[0]).outerWidth(!0),D,p,g=m.length,f=10,l=0,e=0,d=this;this.goToSlideNearAngle=function(a){q(a)};this.startInterval=function(a){c.interval&&(p=setTimeout(function(){d.gotoSlide(Math.ceil(g*Math.random()),!0)},a?50:c.intervaltime))};this.stopInterval=function(){clearTimeout(p)};this.gotoSlide=function(a,c){var b=a*(360/g),d=0,e=0;b>f&&(d=b-f,e=-(f+(360-b)));b<f&&(d=b+(360-f),e=-(f-b));d=d<Math.abs(e)?d:e;e=Math.ceil(Math.abs(d)/10);E(d/e||0,b,
e,c)};n.append(a(m[0]).clone());m=n.children();n[0].style.width=z*m.length+"px";if(c.snaptodots){var r=a(".dot",b),J=r.outerWidth(),K=r.outerHeight();r.remove();for(var F=document.createDocumentFragment(),B=0,C={left:0,top:0},G=360/g*(Math.PI/180),s=g;s--;)B=s+1,dotClone=r.clone(),C.top=Math.round(-Math.cos(s*G)*c.radius+(y/2-K/2)),C.left=Math.round(Math.sin(s*G)*c.radius+(x/2-J/2)),dotClone.addClass("dot-"+B),dotClone.css(C),dotClone.html("<span>"+B+"</span>"),F.appendChild(dotClone[0]);b.append(F);
v=a(".dot",b)}a(k).mousedown(function(){clearTimeout(p);a(b,k).mousemove(t).mouseup(u);a(document).bind("mouseup",u);c.snaptodots&&c.hidedots&&v.stop(!0,!0).fadeIn("slow");return!1});b.bind("touchstart",function(){clearTimeout(p);a(this).data("pan",{startX:event.targetTouches[0].screenX,lastX:event.targetTouches[0].screenX,startTime:(new Date).getTime(),distance:function(){return Math.round(this.startX-this.lastX)},delta:function(){var a=event.targetTouches[0].screenX,b=Math.round(this.lastX-a);this.lastX=
a;return b},duration:function(){return(new Date).getTime()-this.startTime}});return!1});b.bind("touchmove",function(){var b=a(this).data("pan");f=w(f+Math.round(720*b.delta()/(z*g)));q(-f,!0);return!1});b.bind("touchend",function(){var c=a(this).data("pan");0===c.distance()&&500>c.duration()&&b.trigger("click");b.trigger("complete");d.startInterval();return!1});0<A.length&&b.css({cursor:"pointer"}).click(function(b){a(b.target).hasClass("overlay")&&(c.lightbox?a(A[e]).trigger("click"):location.href=
A[e].href);return!1});c.snaptodots&&b.delegate(".dot","click",function(){clearTimeout(p);0===l&&d.gotoSlide(a(this).text()-1);d.startInterval()});d.gotoSlide(0);d.startInterval(!0)}a.tiny=a.tiny||{};a.tiny.circleslider={interval:!1,intervaltime:3500,snaptodots:!1,hidedots:!0,radius:140,lightbox:!1,callback:null};a.fn.tinycircleslider=function(h){h=a.extend({},a.tiny.circleslider,h);this.each(function(){a(this).data("tcs",new t(a(this),h))});return a.extend(this,{gotoClosestAngle:function(c){a(this).data("tcs").goToSlideNearAngle(c)},
gotoSlide:function(c,h){return this.each(function(){a(this).data("tcs").gotoSlide(c,h)})},stopInterval:function(){return this.each(function(){a(this).data("tcs").stopInterval()})},startInterval:function(){return this.each(function(){a(this).data("tcs").startInterval()})}})}})(jQuery);
;
(function(a){a(window).scroll(function(){var g,d=window.innerHeight,e=document.compatMode;if(e||!a.support.boxModel)d="CSS1Compat"==e?document.documentElement.clientHeight:document.body.clientHeight;g=d;var f=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,b=[];a.each(a.cache,function(){this.events&&this.events.inview&&b.push(this.handle.elem)});b.length&&a(b).each(function(){var c=a(this),b=c.offset().top,d=c.height(),e=c.data("inview")||!1;f>b+d||f+
g<b?e&&(c.data("inview",!1),c.trigger("inview",[!1])):f<b+d&&!e&&(c.data("inview",!0),c.trigger("inview",[!0]))})});a(function(){a(window).scroll()})})(jQuery);
;
/*
 
 jQuery Tools @VERSION Rangeinput - HTML5 <input type="range" /> for humans

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/rangeinput/

 Since: Mar 2010
 Date: @DATE 

 NOTE: THIS IS A CUSTOMIZED VERSION OF THE RANGEINPUT PLUGIN TO SUPPORT SUFFIXES IN THE VALUE FIELD SUCH AS K 
 TO REPRESENT THOUSANDS. THIS CAN BE USED TO ADD DOLLAR AND CENT REPRESENTATION ETC.

*/
(function(a){function h(c,b){var a=parseInt(c.css(b),10);return a?a:(a=c[0].currentStyle)&&a.width&&parseInt(a.width,10)}function z(c){return(c=c.data("events"))&&c.onSlide}function C(c,b){function d(q,e,a,d){void 0===a?a=e/j*m:d&&(a-=b.min);t&&(a=Math.round(a/t)*t);if(void 0===e||t)e=a*j/m;if(isNaN(a))return g;e=Math.max(0,Math.min(e,j));a=e/j*m;if(d||!n)a+=b.min;n&&(d?e=j-e:a=b.max-a);d=a;var f=Math.pow(10,v);a=Math.round(d*f)/f;f="click"==q.type;if(A&&(void 0!==r&&!f)&&(q.type="onSlide",x.trigger(q,
[a,e]),q.isDefaultPrevented()))return g;d=f?b.speed:0;f=f?function(){q.type="change";x.trigger(q,[a])}:null;n?(k.animate({top:e},d,f),b.progress&&l.animate({height:j-e+k.height()/2},d)):(k.animate({left:e},d,f),b.progress&&l.animate({width:e+k.width()/2},d));r=a;b.useCustomSuffix&&(a=(new String).concat(a,b.customSuffix));c.val(a);return g}function p(){(n=b.vertical||h(f,"height")>h(f,"width"))?(j=h(f,"height")-h(k,"height"),w=f.offset().top+j):(j=h(f,"width")-h(k,"width"),w=f.offset().left)}function B(){p();
g.setValue(void 0!==b.value?b.value:b.min)}var g=this,s=b.css,f=a("<div><div/><a href='#'/></div>").data("rangeinput",g),n,r,w,j;c.before(f);var k=f.addClass(s.slider).find("a").addClass(s.handle),l=f.find("div").addClass(s.progress);a.each(["min","max","step","value"],function(a,e){var d=c.attr(e);parseFloat(d)&&(b[e]=parseFloat(d,10))});var m=b.max-b.min,t="any"==b.step?0:b.step,v=b.precision;if(void 0===v)try{v=t.toString().split(".")[1].length}catch(y){v=0}if("range"==c.attr("type")){var u=c.clone().wrap("<div/>").parent().html(),
u=a(u.replace(/type/i,"type=text data-orig-type"));u.val(b.value);c.replaceWith(u);c=u}c.addClass(s.input);var x=a(g).add(c),A=!0;a.extend(g,{getValue:function(){return r},setValue:function(b,e){p();return d(e||a.Event("api"),void 0,b,!0)},getConf:function(){return b},getProgress:function(){return l},getHandle:function(){return k},getInput:function(){return c},step:function(c,e){e=e||a.Event();g.setValue(r+("any"==b.step?1:b.step)*(c||1),e)},stepUp:function(a){return g.step(a||1)},stepDown:function(a){return g.step(-a||
-1)}});a.each(["onSlide","change"],function(c,e){a.isFunction(b[e])&&a(g).bind(e,b[e]);g[e]=function(b){b&&a(g).bind(e,b);return g}});k.drag({drag:!1}).bind("dragStart",function(){p();A=z(a(g))||z(c)}).bind("drag",function(a,b,f){if(c.is(":disabled"))return!1;d(a,n?b:f)}).bind("dragEnd",function(a){a.isDefaultPrevented()||(a.type="change",x.trigger(a,[r]))}).click(function(a){return a.preventDefault()});f.click(function(a){if(c.is(":disabled")||a.target==k[0])return a.preventDefault();p();var b=n?
k.height()/2:k.width()/2;d(a,n?j-w-b+a.pageY:a.pageX-w-b)});b.keyboard&&c.keydown(function(b){if(!c.attr("readonly")){var e=b.keyCode,d=-1!=a([75,76,38,33,39]).index(e),f=-1!=a([74,72,40,34,37]).index(e);if((d||f)&&!b.shiftKey&&!b.altKey&&!b.ctrlKey)return d?g.step(33==e?10:1,b):f&&g.step(34==e?-10:-1,b),b.preventDefault()}});c.blur(function(b){var c=a(this).val();c!==r&&g.setValue(c,b)});a.extend(c[0],{stepUp:g.stepUp,stepDown:g.stepDown});B();j||a(window).load(B)}a.tools=a.tools||{version:"@VERSION"};
var y;y=a.tools.rangeinput={conf:{useCustomSuffix:!1,customSuffix:void 0,min:0,max:100,step:"any",steps:0,value:0,precision:void 0,vertical:0,keyboard:!0,progress:!1,speed:100,css:{input:"range",slider:"slider",progress:"progress",handle:"handle"}}};var l,m;a.fn.drag=function(c){document.ondragstart=function(){return!1};c=a.extend({x:!0,y:!0,drag:!0},c);l=l||a(document).bind("mousedown mouseup touchstart touchend",function(b){var d=a(b.target);if(("mousedown"==b.type||"touchstart"==b.type)&&d.data("drag")){var p=
0<b.pageX?b:b.originalEvent.targetTouches[0],h=d.position(),g=p.pageX-h.left,s=p.pageY-h.top,f=!0;l.bind("mousemove touchmove",function(a){var b=0<a.pageX?a:a.originalEvent.targetTouches[0];a=b.pageX-g;var b=b.pageY-s,h={};c.x&&(h.left=a);c.y&&(h.top=b);f&&(d.trigger("dragStart"),f=!1);c.drag&&d.css(h);d.trigger("drag",[b,a]);m=d});b.preventDefault()}else try{m&&m.trigger("dragEnd")}finally{l.unbind("mousemove touchmove"),m=null}});return this.data("drag",!0)};a.expr[":"].range=function(c){var b=
c.getAttribute("type");return b&&"range"==b||!!a(c).filter("input").data("rangeinput")};a.fn.rangeinput=function(c){if(this.data("rangeinput"))return this;c=a.extend(!0,{},y.conf,c);var b;this.each(function(){var d=new C(a(this),a.extend(!0,{},c)),d=d.getInput().data("rangeinput",d);b=b?b.add(d):d});return b?b:this}})(jQuery);
;
/*
 
 jQuery Tools @VERSION / Expose - Dim the lights

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/toolbox/expose.html

 Since: Mar 2010
 Date: @DATE 
*/
(function(b){function k(){if(b.browser.msie){var a=b(document).height(),c=b(window).height();return[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,20>a-c?c:a]}return[b(document).width(),b(document).height()]}function g(a){if(a)return a.call(b.mask)}b.tools=b.tools||{version:"@VERSION"};var l;l=b.tools.expose={conf:{maskId:"exposeMask",loadSpeed:"slow",closeSpeed:"fast",closeOnClick:!0,closeOnEsc:!0,zIndex:9998,opacity:0.8,startOpacity:0,color:"#fff",onLoad:null,
onClose:null}};var c,h,d,e,j;b.mask={load:function(a,f){if(d)return this;"string"==typeof a&&(a={color:a});a=a||e;e=a=b.extend(b.extend({},l.conf),a);c=b("#"+a.maskId);c.length||(c=b("<div/>").attr("id",a.maskId),b("body").append(c));var m=k();c.css({position:"absolute",top:0,left:0,width:m[0],height:m[1],display:"none",opacity:a.startOpacity,zIndex:a.zIndex});a.color&&c.css("backgroundColor",a.color);if(!1===g(a.onBeforeLoad))return this;if(a.closeOnEsc)b(document).on("keydown.mask",function(a){27==
a.keyCode&&b.mask.close(a)});if(a.closeOnClick)c.on("click.mask",function(a){b.mask.close(a)});b(window).on("resize.mask",function(){b.mask.fit()});f&&f.length&&(j=f.eq(0).css("zIndex"),b.each(f,function(){var a=b(this);/relative|absolute|fixed/i.test(a.css("position"))||a.css("position","relative")}),h=f.css({zIndex:Math.max(a.zIndex+1,"auto"==j?0:j)}));c.css({display:"block"}).fadeTo(a.loadSpeed,a.opacity,function(){b.mask.fit();g(a.onLoad);d="full"});d=!0;return this},close:function(){if(d){if(!1===
g(e.onBeforeClose))return this;c.fadeOut(e.closeSpeed,function(){g(e.onClose);h&&h.css({zIndex:j});d=!1});b(document).off("keydown.mask");c.off("click.mask");b(window).off("resize.mask")}return this},fit:function(){if(d){var a=k();c.css({width:a[0],height:a[1]})}},getMask:function(){return c},isLoaded:function(a){return a?"full"==d:d},getConf:function(){return e},getExposed:function(){return h}};b.fn.mask=function(a){b.mask.load(a);return this};b.fn.expose=function(a){b.mask.load(a,this);return this}})(jQuery);
;
/*
 
 jQuery Tools @VERSION Overlay - Overlay base. Extend it.

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/overlay/

 Since: March 2008
 Date: @DATE 
*/
(function(b){function n(a,c){var d=this,h=a.add(d),p=b(window),e,f,l,g=b.tools.expose&&(c.mask||c.expose),m=Math.random().toString().slice(10);g&&("string"==typeof g&&(g={color:g}),g.closeOnClick=g.closeOnEsc=!1);var j=c.target||a.attr("rel");f=j?b(j):a;if(!f.length)throw"Could not find Overlay: "+j;a&&-1==a.index(f)&&a.click(function(b){d.load(b);return b.preventDefault()});b.extend(d,{load:function(a){if(d.isOpened())return d;var r=q[c.effect];if(!r)throw'Overlay: cannot find effect : "'+c.effect+
'"';c.oneInstance&&b.each(s,function(){this.close(a)});a=a||b.Event();a.type="onBeforeLoad";h.trigger(a);if(a.isDefaultPrevented())return d;l=!0;g&&b(f).expose(g);var k=c.top,e=c.left,j=f.outerWidth({margin:!0}),n=f.outerHeight({margin:!0});"string"==typeof k&&(k="center"==k?Math.max((p.height()-n)/2,0):parseInt(k,10)/100*p.height());"center"==e&&(e=Math.max((p.width()-j)/2,0));r[0].call(d,{top:k,left:e},function(){l&&(a.type="onLoad",h.trigger(a))});if(g&&c.closeOnClick)b.mask.getMask().one("click",
d.close);if(c.closeOnClick)b(document).on("click."+m,function(a){b(a.target).parents(f).length||d.close(a)});if(c.closeOnEsc)b(document).on("keydown."+m,function(a){27==a.keyCode&&d.close(a)});return d},close:function(a){if(!d.isOpened())return d;a=a||b.Event();a.type="onBeforeClose";h.trigger(a);if(!a.isDefaultPrevented())return l=!1,q[c.effect][1].call(d,function(){a.type="onClose";h.trigger(a)}),b(document).off("click."+m+" keydown."+m),g&&b.mask.close(),d},getOverlay:function(){return f},getTrigger:function(){return a},
getClosers:function(){return e},isOpened:function(){return l},getConf:function(){return c}});b.each(["onBeforeLoad","onStart","onLoad","onBeforeClose","onClose"],function(a,e){if(b.isFunction(c[e]))b(d).on(e,c[e]);d[e]=function(a){if(a)b(d).on(e,a);return d}});e=f.find(c.close||".close");!e.length&&!c.close&&(e=b('<a class="close"></a>'),f.prepend(e));e.click(function(a){d.close(a)});c.load&&d.load()}b.tools=b.tools||{version:"@VERSION"};b.tools.overlay={addEffect:function(a,b,d){q[a]=[b,d]},conf:{close:null,
closeOnClick:!0,closeOnEsc:!0,closeSpeed:"fast",effect:"default",fixed:!b.browser.msie||6<b.browser.version,left:"center",load:!1,mask:null,oneInstance:!0,speed:"normal",target:null,top:"10%"}};var s=[],q={};b.tools.overlay.addEffect("default",function(a,c){var d=this.getConf(),h=b(window);d.fixed||(a.top+=h.scrollTop(),a.left+=h.scrollLeft());a.position=d.fixed?"fixed":"absolute";this.getOverlay().css(a).fadeIn(d.speed,c)},function(a){this.getOverlay().fadeOut(this.getConf().closeSpeed,a)});b.fn.overlay=
function(a){var c=this.data("overlay");if(c)return c;b.isFunction(a)&&(a={onBeforeLoad:a});a=b.extend(!0,{},b.tools.overlay.conf,a);this.each(function(){c=new n(b(this),a);s.push(c);b(this).data("overlay",c)});return a.api?c:this}})(jQuery);
;
// Underscore.js 1.3.3
// (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
// Underscore is freely distributable under the MIT license.
// Portions of Underscore are inspired or borrowed from Prototype,
// Oliver Steele's Functional, and John Resig's Micro-Templating.
// For all details and documentation:
// http://documentcloud.github.com/underscore
(function(){function r(a,c,d){if(a===c)return 0!==a||1/a==1/c;if(null==a||null==c)return a===c;a._chain&&(a=a._wrapped);c._chain&&(c=c._wrapped);if(a.isEqual&&b.isFunction(a.isEqual))return a.isEqual(c);if(c.isEqual&&b.isFunction(c.isEqual))return c.isEqual(a);var e=l.call(a);if(e!=l.call(c))return!1;switch(e){case "[object String]":return a==""+c;case "[object Number]":return a!=+a?c!=+c:0==a?1/a==1/c:a==+c;case "[object Date]":case "[object Boolean]":return+a==+c;case "[object RegExp]":return a.source==
c.source&&a.global==c.global&&a.multiline==c.multiline&&a.ignoreCase==c.ignoreCase}if("object"!=typeof a||"object"!=typeof c)return!1;for(var f=d.length;f--;)if(d[f]==a)return!0;d.push(a);var f=0,g=!0;if("[object Array]"==e){if(f=a.length,g=f==c.length)for(;f--&&(g=f in a==f in c&&r(a[f],c[f],d)););}else{if("constructor"in a!="constructor"in c||a.constructor!=c.constructor)return!1;for(var h in a)if(b.has(a,h)&&(f++,!(g=b.has(c,h)&&r(a[h],c[h],d))))break;if(g){for(h in c)if(b.has(c,h)&&!f--)break;
g=!f}}d.pop();return g}var s=this,I=s._,o={},k=Array.prototype,p=Object.prototype,i=k.slice,J=k.unshift,l=p.toString,K=p.hasOwnProperty,y=k.forEach,z=k.map,A=k.reduce,B=k.reduceRight,C=k.filter,D=k.every,E=k.some,q=k.indexOf,F=k.lastIndexOf,p=Array.isArray,L=Object.keys,t=Function.prototype.bind,b=function(a){return new m(a)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=b),exports._=b):s._=b;b.VERSION="1.3.3";var j=b.each=b.forEach=function(a,
c,d){if(a!=null)if(y&&a.forEach===y)a.forEach(c,d);else if(a.length===+a.length)for(var e=0,f=a.length;e<f;e++){if(e in a&&c.call(d,a[e],e,a)===o)break}else for(e in a)if(b.has(a,e)&&c.call(d,a[e],e,a)===o)break};b.map=b.collect=function(a,c,b){var e=[];if(a==null)return e;if(z&&a.map===z)return a.map(c,b);j(a,function(a,g,h){e[e.length]=c.call(b,a,g,h)});if(a.length===+a.length)e.length=a.length;return e};b.reduce=b.foldl=b.inject=function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(A&&
a.reduce===A){e&&(c=b.bind(c,e));return f?a.reduce(c,d):a.reduce(c)}j(a,function(a,b,i){if(f)d=c.call(e,d,a,b,i);else{d=a;f=true}});if(!f)throw new TypeError("Reduce of empty array with no initial value");return d};b.reduceRight=b.foldr=function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(B&&a.reduceRight===B){e&&(c=b.bind(c,e));return f?a.reduceRight(c,d):a.reduceRight(c)}var g=b.toArray(a).reverse();e&&!f&&(c=b.bind(c,e));return f?b.reduce(g,c,d,e):b.reduce(g,c)};b.find=b.detect=function(a,
c,b){var e;G(a,function(a,g,h){if(c.call(b,a,g,h)){e=a;return true}});return e};b.filter=b.select=function(a,c,b){var e=[];if(a==null)return e;if(C&&a.filter===C)return a.filter(c,b);j(a,function(a,g,h){c.call(b,a,g,h)&&(e[e.length]=a)});return e};b.reject=function(a,c,b){var e=[];if(a==null)return e;j(a,function(a,g,h){c.call(b,a,g,h)||(e[e.length]=a)});return e};b.every=b.all=function(a,c,b){var e=true;if(a==null)return e;if(D&&a.every===D)return a.every(c,b);j(a,function(a,g,h){if(!(e=e&&c.call(b,
a,g,h)))return o});return!!e};var G=b.some=b.any=function(a,c,d){c||(c=b.identity);var e=false;if(a==null)return e;if(E&&a.some===E)return a.some(c,d);j(a,function(a,b,h){if(e||(e=c.call(d,a,b,h)))return o});return!!e};b.include=b.contains=function(a,c){var b=false;if(a==null)return b;if(q&&a.indexOf===q)return a.indexOf(c)!=-1;return b=G(a,function(a){return a===c})};b.invoke=function(a,c){var d=i.call(arguments,2);return b.map(a,function(a){return(b.isFunction(c)?c||a:a[c]).apply(a,d)})};b.pluck=
function(a,c){return b.map(a,function(a){return a[c]})};b.max=function(a,c,d){if(!c&&b.isArray(a)&&a[0]===+a[0])return Math.max.apply(Math,a);if(!c&&b.isEmpty(a))return-Infinity;var e={computed:-Infinity};j(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b>=e.computed&&(e={value:a,computed:b})});return e.value};b.min=function(a,c,d){if(!c&&b.isArray(a)&&a[0]===+a[0])return Math.min.apply(Math,a);if(!c&&b.isEmpty(a))return Infinity;var e={computed:Infinity};j(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b<e.computed&&
(e={value:a,computed:b})});return e.value};b.shuffle=function(a){var b=[],d;j(a,function(a,f){d=Math.floor(Math.random()*(f+1));b[f]=b[d];b[d]=a});return b};b.sortBy=function(a,c,d){var e=b.isFunction(c)?c:function(a){return a[c]};return b.pluck(b.map(a,function(a,b,c){return{value:a,criteria:e.call(d,a,b,c)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c===void 0?1:d===void 0?-1:c<d?-1:c>d?1:0}),"value")};b.groupBy=function(a,c){var d={},e=b.isFunction(c)?c:function(a){return a[c]};
j(a,function(a,b){var c=e(a,b);(d[c]||(d[c]=[])).push(a)});return d};b.sortedIndex=function(a,c,d){d||(d=b.identity);for(var e=0,f=a.length;e<f;){var g=e+f>>1;d(a[g])<d(c)?e=g+1:f=g}return e};b.toArray=function(a){return!a?[]:b.isArray(a)||b.isArguments(a)?i.call(a):a.toArray&&b.isFunction(a.toArray)?a.toArray():b.values(a)};b.size=function(a){return b.isArray(a)?a.length:b.keys(a).length};b.first=b.head=b.take=function(a,b,d){return b!=null&&!d?i.call(a,0,b):a[0]};b.initial=function(a,b,d){return i.call(a,
0,a.length-(b==null||d?1:b))};b.last=function(a,b,d){return b!=null&&!d?i.call(a,Math.max(a.length-b,0)):a[a.length-1]};b.rest=b.tail=function(a,b,d){return i.call(a,b==null||d?1:b)};b.compact=function(a){return b.filter(a,function(a){return!!a})};b.flatten=function(a,c){return b.reduce(a,function(a,e){if(b.isArray(e))return a.concat(c?e:b.flatten(e));a[a.length]=e;return a},[])};b.without=function(a){return b.difference(a,i.call(arguments,1))};b.uniq=b.unique=function(a,c,d){var d=d?b.map(a,d):a,
e=[];a.length<3&&(c=true);b.reduce(d,function(d,g,h){if(c?b.last(d)!==g||!d.length:!b.include(d,g)){d.push(g);e.push(a[h])}return d},[]);return e};b.union=function(){return b.uniq(b.flatten(arguments,true))};b.intersection=b.intersect=function(a){var c=i.call(arguments,1);return b.filter(b.uniq(a),function(a){return b.every(c,function(c){return b.indexOf(c,a)>=0})})};b.difference=function(a){var c=b.flatten(i.call(arguments,1),true);return b.filter(a,function(a){return!b.include(c,a)})};b.zip=function(){for(var a=
i.call(arguments),c=b.max(b.pluck(a,"length")),d=Array(c),e=0;e<c;e++)d[e]=b.pluck(a,""+e);return d};b.indexOf=function(a,c,d){if(a==null)return-1;var e;if(d){d=b.sortedIndex(a,c);return a[d]===c?d:-1}if(q&&a.indexOf===q)return a.indexOf(c);d=0;for(e=a.length;d<e;d++)if(d in a&&a[d]===c)return d;return-1};b.lastIndexOf=function(a,b){if(a==null)return-1;if(F&&a.lastIndexOf===F)return a.lastIndexOf(b);for(var d=a.length;d--;)if(d in a&&a[d]===b)return d;return-1};b.range=function(a,b,d){if(arguments.length<=
1){b=a||0;a=0}for(var d=arguments[2]||1,e=Math.max(Math.ceil((b-a)/d),0),f=0,g=Array(e);f<e;){g[f++]=a;a=a+d}return g};var H=function(){};b.bind=function(a,c){var d,e;if(a.bind===t&&t)return t.apply(a,i.call(arguments,1));if(!b.isFunction(a))throw new TypeError;e=i.call(arguments,2);return d=function(){if(!(this instanceof d))return a.apply(c,e.concat(i.call(arguments)));H.prototype=a.prototype;var b=new H,g=a.apply(b,e.concat(i.call(arguments)));return Object(g)===g?g:b}};b.bindAll=function(a){var c=
i.call(arguments,1);c.length==0&&(c=b.functions(a));j(c,function(c){a[c]=b.bind(a[c],a)});return a};b.memoize=function(a,c){var d={};c||(c=b.identity);return function(){var e=c.apply(this,arguments);return b.has(d,e)?d[e]:d[e]=a.apply(this,arguments)}};b.delay=function(a,b){var d=i.call(arguments,2);return setTimeout(function(){return a.apply(null,d)},b)};b.defer=function(a){return b.delay.apply(b,[a,1].concat(i.call(arguments,1)))};b.throttle=function(a,c){var d,e,f,g,h,i,j=b.debounce(function(){h=
g=false},c);return function(){d=this;e=arguments;f||(f=setTimeout(function(){f=null;h&&a.apply(d,e);j()},c));g?h=true:i=a.apply(d,e);j();g=true;return i}};b.debounce=function(a,b,d){var e;return function(){var f=this,g=arguments;d&&!e&&a.apply(f,g);clearTimeout(e);e=setTimeout(function(){e=null;d||a.apply(f,g)},b)}};b.once=function(a){var b=false,d;return function(){if(b)return d;b=true;return d=a.apply(this,arguments)}};b.wrap=function(a,b){return function(){var d=[a].concat(i.call(arguments,0));
return b.apply(this,d)}};b.compose=function(){var a=arguments;return function(){for(var b=arguments,d=a.length-1;d>=0;d--)b=[a[d].apply(this,b)];return b[0]}};b.after=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}};b.keys=L||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var c=[],d;for(d in a)b.has(a,d)&&(c[c.length]=d);return c};b.values=function(a){return b.map(a,b.identity)};b.functions=b.methods=function(a){var c=[],d;for(d in a)b.isFunction(a[d])&&
c.push(d);return c.sort()};b.extend=function(a){j(i.call(arguments,1),function(b){for(var d in b)a[d]=b[d]});return a};b.pick=function(a){var c={};j(b.flatten(i.call(arguments,1)),function(b){b in a&&(c[b]=a[b])});return c};b.defaults=function(a){j(i.call(arguments,1),function(b){for(var d in b)a[d]==null&&(a[d]=b[d])});return a};b.clone=function(a){return!b.isObject(a)?a:b.isArray(a)?a.slice():b.extend({},a)};b.tap=function(a,b){b(a);return a};b.isEqual=function(a,b){return r(a,b,[])};b.isEmpty=
function(a){if(a==null)return true;if(b.isArray(a)||b.isString(a))return a.length===0;for(var c in a)if(b.has(a,c))return false;return true};b.isElement=function(a){return!!(a&&a.nodeType==1)};b.isArray=p||function(a){return l.call(a)=="[object Array]"};b.isObject=function(a){return a===Object(a)};b.isArguments=function(a){return l.call(a)=="[object Arguments]"};b.isArguments(arguments)||(b.isArguments=function(a){return!(!a||!b.has(a,"callee"))});b.isFunction=function(a){return l.call(a)=="[object Function]"};
b.isString=function(a){return l.call(a)=="[object String]"};b.isNumber=function(a){return l.call(a)=="[object Number]"};b.isFinite=function(a){return b.isNumber(a)&&isFinite(a)};b.isNaN=function(a){return a!==a};b.isBoolean=function(a){return a===true||a===false||l.call(a)=="[object Boolean]"};b.isDate=function(a){return l.call(a)=="[object Date]"};b.isRegExp=function(a){return l.call(a)=="[object RegExp]"};b.isNull=function(a){return a===null};b.isUndefined=function(a){return a===void 0};b.has=function(a,
b){return K.call(a,b)};b.noConflict=function(){s._=I;return this};b.identity=function(a){return a};b.times=function(a,b,d){for(var e=0;e<a;e++)b.call(d,e)};b.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};b.result=function(a,c){if(a==null)return null;var d=a[c];return b.isFunction(d)?d.call(a):d};b.mixin=function(a){j(b.functions(a),function(c){M(c,b[c]=a[c])})};var N=0;b.uniqueId=
function(a){var b=N++;return a?a+b:b};b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var u=/.^/,n={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},v;for(v in n)n[n[v]]=v;var O=/\\|'|\r|\n|\t|\u2028|\u2029/g,P=/\\(\\|'|r|n|t|u2028|u2029)/g,w=function(a){return a.replace(P,function(a,b){return n[b]})};b.template=function(a,c,d){d=b.defaults(d||{},b.templateSettings);a="__p+='"+a.replace(O,function(a){return"\\"+n[a]}).replace(d.escape||
u,function(a,b){return"'+\n_.escape("+w(b)+")+\n'"}).replace(d.interpolate||u,function(a,b){return"'+\n("+w(b)+")+\n'"}).replace(d.evaluate||u,function(a,b){return"';\n"+w(b)+"\n;__p+='"})+"';\n";d.variable||(a="with(obj||{}){\n"+a+"}\n");var a="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+a+"return __p;\n",e=new Function(d.variable||"obj","_",a);if(c)return e(c,b);c=function(a){return e.call(this,a,b)};c.source="function("+(d.variable||"obj")+"){\n"+a+"}";return c};
b.chain=function(a){return b(a).chain()};var m=function(a){this._wrapped=a};b.prototype=m.prototype;var x=function(a,c){return c?b(a).chain():a},M=function(a,c){m.prototype[a]=function(){var a=i.call(arguments);J.call(a,this._wrapped);return x(c.apply(b,a),this._chain)}};b.mixin(b);j("pop,push,reverse,shift,sort,splice,unshift".split(","),function(a){var b=k[a];m.prototype[a]=function(){var d=this._wrapped;b.apply(d,arguments);var e=d.length;(a=="shift"||a=="splice")&&e===0&&delete d[0];return x(d,
this._chain)}});j(["concat","join","slice"],function(a){var b=k[a];m.prototype[a]=function(){return x(b.apply(this._wrapped,arguments),this._chain)}});m.prototype.chain=function(){this._chain=true;return this};m.prototype.value=function(){return this._wrapped}}).call(this);;
// Backbone.js 0.9.2

// (c) 2010-2012 Jeremy Ashkenas, DocumentCloud Inc.
// Backbone may be freely distributed under the MIT license.
// For all details and documentation:
// http://backbonejs.org
(function(){var l=this,y=l.Backbone,z=Array.prototype.slice,A=Array.prototype.splice,g;g="undefined"!==typeof exports?exports:l.Backbone={};g.VERSION="0.9.2";var f=l._;!f&&"undefined"!==typeof require&&(f=require("underscore"));var i=l.jQuery||l.Zepto||l.ender;g.setDomLibrary=function(a){i=a};g.noConflict=function(){l.Backbone=y;return this};g.emulateHTTP=!1;g.emulateJSON=!1;var p=/\s+/,k=g.Events={on:function(a,b,c){var d,e,f,g,j;if(!b)return this;a=a.split(p);for(d=this._callbacks||(this._callbacks=
{});e=a.shift();)f=(j=d[e])?j.tail:{},f.next=g={},f.context=c,f.callback=b,d[e]={tail:g,next:j?j.next:f};return this},off:function(a,b,c){var d,e,h,g,j,q;if(e=this._callbacks){if(!a&&!b&&!c)return delete this._callbacks,this;for(a=a?a.split(p):f.keys(e);d=a.shift();)if(h=e[d],delete e[d],h&&(b||c))for(g=h.tail;(h=h.next)!==g;)if(j=h.callback,q=h.context,b&&j!==b||c&&q!==c)this.on(d,j,q);return this}},trigger:function(a){var b,c,d,e,f,g;if(!(d=this._callbacks))return this;f=d.all;a=a.split(p);for(g=
z.call(arguments,1);b=a.shift();){if(c=d[b])for(e=c.tail;(c=c.next)!==e;)c.callback.apply(c.context||this,g);if(c=f){e=c.tail;for(b=[b].concat(g);(c=c.next)!==e;)c.callback.apply(c.context||this,b)}}return this}};k.bind=k.on;k.unbind=k.off;var o=g.Model=function(a,b){var c;a||(a={});b&&b.parse&&(a=this.parse(a));if(c=n(this,"defaults"))a=f.extend({},c,a);b&&b.collection&&(this.collection=b.collection);this.attributes={};this._escapedAttributes={};this.cid=f.uniqueId("c");this.changed={};this._silent=
{};this._pending={};this.set(a,{silent:!0});this.changed={};this._silent={};this._pending={};this._previousAttributes=f.clone(this.attributes);this.initialize.apply(this,arguments)};f.extend(o.prototype,k,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return f.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var b;if(b=this._escapedAttributes[a])return b;b=this.get(a);return this._escapedAttributes[a]=f.escape(null==
b?"":""+b)},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,e;f.isObject(a)||null==a?(d=a,c=b):(d={},d[a]=b);c||(c={});if(!d)return this;d instanceof o&&(d=d.attributes);if(c.unset)for(e in d)d[e]=void 0;if(!this._validate(d,c))return!1;this.idAttribute in d&&(this.id=d[this.idAttribute]);var b=c.changes={},h=this.attributes,g=this._escapedAttributes,j=this._previousAttributes||{};for(e in d){a=d[e];if(!f.isEqual(h[e],a)||c.unset&&f.has(h,e))delete g[e],(c.silent?this._silent:
b)[e]=!0;c.unset?delete h[e]:h[e]=a;!f.isEqual(j[e],a)||f.has(h,e)!=f.has(j,e)?(this.changed[e]=a,c.silent||(this._pending[e]=!0)):(delete this.changed[e],delete this._pending[e])}c.silent||this.change(c);return this},unset:function(a,b){(b||(b={})).unset=!0;return this.set(a,null,b)},clear:function(a){(a||(a={})).unset=!0;return this.set(f.clone(this.attributes),a)},fetch:function(a){var a=a?f.clone(a):{},b=this,c=a.success;a.success=function(d,e,f){if(!b.set(b.parse(d,f),a))return!1;c&&c(b,d)};
a.error=g.wrapError(a.error,b,a);return(this.sync||g.sync).call(this,"read",this,a)},save:function(a,b,c){var d,e;f.isObject(a)||null==a?(d=a,c=b):(d={},d[a]=b);c=c?f.clone(c):{};if(c.wait){if(!this._validate(d,c))return!1;e=f.clone(this.attributes)}a=f.extend({},c,{silent:!0});if(d&&!this.set(d,c.wait?a:c))return!1;var h=this,i=c.success;c.success=function(a,b,e){b=h.parse(a,e);if(c.wait){delete c.wait;b=f.extend(d||{},b)}if(!h.set(b,c))return false;i?i(h,a):h.trigger("sync",h,a,c)};c.error=g.wrapError(c.error,
h,c);b=this.isNew()?"create":"update";b=(this.sync||g.sync).call(this,b,this,c);c.wait&&this.set(e,a);return b},destroy:function(a){var a=a?f.clone(a):{},b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};if(this.isNew())return d(),!1;a.success=function(e){a.wait&&d();c?c(b,e):b.trigger("sync",b,e,a)};a.error=g.wrapError(a.error,b,a);var e=(this.sync||g.sync).call(this,"delete",this,a);a.wait||d();return e},url:function(){var a=n(this,"urlRoot")||n(this.collection,"url")||t();
return this.isNew()?a:a+("/"==a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(a){a||(a={});var b=this._changing;this._changing=!0;for(var c in this._silent)this._pending[c]=!0;var d=f.extend({},a.changes,this._silent);this._silent={};for(c in d)this.trigger("change:"+c,this,this.get(c),a);if(b)return this;for(;!f.isEmpty(this._pending);){this._pending=
{};this.trigger("change",this,a);for(c in this.changed)!this._pending[c]&&!this._silent[c]&&delete this.changed[c];this._previousAttributes=f.clone(this.attributes)}this._changing=!1;return this},hasChanged:function(a){return!arguments.length?!f.isEmpty(this.changed):f.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?f.clone(this.changed):!1;var b,c=!1,d=this._previousAttributes,e;for(e in a)if(!f.isEqual(d[e],b=a[e]))(c||(c={}))[e]=b;return c},previous:function(a){return!arguments.length||
!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return f.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(a,b){if(b.silent||!this.validate)return!0;var a=f.extend({},this.attributes,a),c=this.validate(a,b);if(!c)return!0;b&&b.error?b.error(this,c,b):this.trigger("error",this,c,b);return!1}});var r=g.Collection=function(a,b){b||(b={});b.model&&(this.model=b.model);b.comparator&&(this.comparator=b.comparator);
this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,{silent:!0,parse:b.parse})};f.extend(r.prototype,k,{model:o,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},add:function(a,b){var c,d,e,g,i,j={},k={},l=[];b||(b={});a=f.isArray(a)?a.slice():[a];c=0;for(d=a.length;c<d;c++){if(!(e=a[c]=this._prepareModel(a[c],b)))throw Error("Can't add an invalid model to a collection");g=e.cid;i=e.id;j[g]||this._byCid[g]||null!=i&&(k[i]||this._byId[i])?
l.push(c):j[g]=k[i]=e}for(c=l.length;c--;)a.splice(l[c],1);c=0;for(d=a.length;c<d;c++)(e=a[c]).on("all",this._onModelEvent,this),this._byCid[e.cid]=e,null!=e.id&&(this._byId[e.id]=e);this.length+=d;A.apply(this.models,[null!=b.at?b.at:this.models.length,0].concat(a));this.comparator&&this.sort({silent:!0});if(b.silent)return this;c=0;for(d=this.models.length;c<d;c++)if(j[(e=this.models[c]).cid])b.index=c,e.trigger("add",e,this,b);return this},remove:function(a,b){var c,d,e,g;b||(b={});a=f.isArray(a)?
a.slice():[a];c=0;for(d=a.length;c<d;c++)if(g=this.getByCid(a[c])||this.get(a[c]))delete this._byId[g.id],delete this._byCid[g.cid],e=this.indexOf(g),this.models.splice(e,1),this.length--,b.silent||(b.index=e,g.trigger("remove",g,this,b)),this._removeReference(g);return this},push:function(a,b){a=this._prepareModel(a,b);this.add(a,b);return a},pop:function(a){var b=this.at(this.length-1);this.remove(b,a);return b},unshift:function(a,b){a=this._prepareModel(a,b);this.add(a,f.extend({at:0},b));return a},
shift:function(a){var b=this.at(0);this.remove(b,a);return b},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},where:function(a){return f.isEmpty(a)?[]:this.filter(function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},sort:function(a){a||(a={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");var b=f.bind(this.comparator,this);1==this.comparator.length?
this.models=this.sortBy(b):this.models.sort(b);a.silent||this.trigger("reset",this,a);return this},pluck:function(a){return f.map(this.models,function(b){return b.get(a)})},reset:function(a,b){a||(a=[]);b||(b={});for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c]);this._reset();this.add(a,f.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return this},fetch:function(a){a=a?f.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;a.success=function(d,
e,f){b[a.add?"add":"reset"](b.parse(d,f),a);c&&c(b,d)};a.error=g.wrapError(a.error,b,a);return(this.sync||g.sync).call(this,"read",this,a)},create:function(a,b){var c=this,b=b?f.clone(b):{},a=this._prepareModel(a,b);if(!a)return!1;b.wait||c.add(a,b);var d=b.success;b.success=function(e,f){b.wait&&c.add(e,b);d?d(e,f):e.trigger("sync",a,f,b)};a.save(null,b);return a},parse:function(a){return a},chain:function(){return f(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId=
{};this._byCid={}},_prepareModel:function(a,b){b||(b={});a instanceof o?a.collection||(a.collection=this):(b.collection=this,a=new this.model(a,b),a._validate(a.attributes,b)||(a=!1));return a},_removeReference:function(a){this==a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"==a||"remove"==a)&&c!=this||("destroy"==a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],this._byId[b.id]=b),this.trigger.apply(this,
arguments))}});f.each("forEach,each,map,reduce,reduceRight,find,detect,filter,select,reject,every,all,some,any,include,contains,invoke,max,min,sortBy,sortedIndex,toArray,size,first,initial,rest,last,without,indexOf,shuffle,lastIndexOf,isEmpty,groupBy".split(","),function(a){r.prototype[a]=function(){return f[a].apply(f,[this.models].concat(f.toArray(arguments)))}});var u=g.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},B=/:\w+/g,
C=/\*\w+/g,D=/[-[\]{}()+?.,\\^$|#\s]/g;f.extend(u.prototype,k,{initialize:function(){},route:function(a,b,c){g.history||(g.history=new m);f.isRegExp(a)||(a=this._routeToRegExp(a));c||(c=this[b]);g.history.route(a,f.bind(function(d){d=this._extractParameters(a,d);c&&c.apply(this,d);this.trigger.apply(this,["route:"+b].concat(d));g.history.trigger("route",this,b,d)},this));return this},navigate:function(a,b){g.history.navigate(a,b)},_bindRoutes:function(){if(this.routes){var a=[],b;for(b in this.routes)a.unshift([b,
this.routes[b]]);b=0;for(var c=a.length;b<c;b++)this.route(a[b][0],a[b][1],this[a[b][1]])}},_routeToRegExp:function(a){a=a.replace(D,"\\$&").replace(B,"([^/]+)").replace(C,"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}});var m=g.History=function(){this.handlers=[];f.bindAll(this,"checkUrl")},s=/^[#\/]/,E=/msie [\w.]+/;m.started=!1;f.extend(m.prototype,k,{interval:50,getHash:function(a){return(a=(a?a.location:window.location).href.match(/#(.*)$/))?a[1]:
""},getFragment:function(a,b){if(null==a)if(this._hasPushState||b){var a=window.location.pathname,c=window.location.search;c&&(a+=c)}else a=this.getHash();a.indexOf(this.options.root)||(a=a.substr(this.options.root.length));return a.replace(s,"")},start:function(a){if(m.started)throw Error("Backbone.history has already been started");m.started=!0;this.options=f.extend({},{root:"/"},this.options,a);this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=
!(!this.options.pushState||!window.history||!window.history.pushState);var a=this.getFragment(),b=document.documentMode;if(b=E.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b))this.iframe=i('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a);this._hasPushState?i(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!b?i(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,
this.interval));this.fragment=a;a=window.location;b=a.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&b&&a.hash&&(this.fragment=this.getHash().replace(s,""),window.history.replaceState({},document.title,a.protocol+"//"+a.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},
stop:function(){i(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);m.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a==this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a==this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return f.any(this.handlers,
function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!m.started)return!1;if(!b||!0===b)b={trigger:b};var c=(a||"").replace(s,"");this.fragment!=c&&(this._hasPushState?(0!=c.indexOf(this.options.root)&&(c=this.options.root+c),this.fragment=c,window.history[b.replace?"replaceState":"pushState"]({},document.title,c)):this._wantsHashChange?(this.fragment=c,this._updateHash(window.location,c,b.replace),this.iframe&&c!=this.getFragment(this.getHash(this.iframe))&&(b.replace||
this.iframe.document.open().close(),this._updateHash(this.iframe.location,c,b.replace))):window.location.assign(this.options.root+a),b.trigger&&this.loadUrl(a))},_updateHash:function(a,b,c){c?a.replace(a.toString().replace(/(javascript:|#).*$/,"")+"#"+b):a.hash=b}});var v=g.View=function(a){this.cid=f.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},F=/^(\S+)\s*(.*)$/,w="model,collection,el,id,attributes,className,tagName".split(",");
f.extend(v.prototype,k,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(a,b,c){a=document.createElement(a);b&&i(a).attr(b);c&&i(a).html(c);return a},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof i?a:i(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(a||(a=n(this,"events"))){this.undelegateEvents();
for(var b in a){var c=a[b];f.isFunction(c)||(c=this[a[b]]);if(!c)throw Error('Method "'+a[b]+'" does not exist');var d=b.match(F),e=d[1],d=d[2],c=f.bind(c,this),e=e+(".delegateEvents"+this.cid);""===d?this.$el.bind(e,c):this.$el.delegate(d,e,c)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=f.extend({},this.options,a));for(var b=0,c=w.length;b<c;b++){var d=w[b];a[d]&&(this[d]=a[d])}this.options=a},_ensureElement:function(){if(this.el)this.setElement(this.el,
!1);else{var a=n(this,"attributes")||{};this.id&&(a.id=this.id);this.className&&(a["class"]=this.className);this.setElement(this.make(this.tagName,a),!1)}}});o.extend=r.extend=u.extend=v.extend=function(a,b){var c=G(this,a,b);c.extend=this.extend;return c};var H={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};g.sync=function(a,b,c){var d=H[a];c||(c={});var e={type:d,dataType:"json"};c.url||(e.url=n(b,"url")||t());if(!c.data&&b&&("create"==a||"update"==a))e.contentType="application/json",
e.data=JSON.stringify(b.toJSON());g.emulateJSON&&(e.contentType="application/x-www-form-urlencoded",e.data=e.data?{model:e.data}:{});if(g.emulateHTTP&&("PUT"===d||"DELETE"===d))g.emulateJSON&&(e.data._method=d),e.type="POST",e.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",d)};"GET"!==e.type&&!g.emulateJSON&&(e.processData=!1);return i.ajax(f.extend(e,c))};g.wrapError=function(a,b,c){return function(d,e){e=d===b?e:d;a?a(b,e,c):b.trigger("error",b,e,c)}};var x=function(){},G=function(a,
b,c){var d;d=b&&b.hasOwnProperty("constructor")?b.constructor:function(){a.apply(this,arguments)};f.extend(d,a);x.prototype=a.prototype;d.prototype=new x;b&&f.extend(d.prototype,b);c&&f.extend(d,c);d.prototype.constructor=d;d.__super__=a.prototype;return d},n=function(a,b){return!a||!a[b]?null:f.isFunction(a[b])?a[b]():a[b]},t=function(){throw Error('A "url" property or function must be specified');}}).call(this);;
(function(a){a._spritely={animate:function(b){var c=a(b.el),d=c.attr("id");if(!a._spritely.instances[d])return this;b=a.extend(b,a._spritely.instances[d]||{});b.play_frames&&!a._spritely.instances[d].remaining_frames&&(a._spritely.instances[d].remaining_frames=b.play_frames+1);if("sprite"==b.type&&b.fps){var e,f=function(c){var f=b.width;if(!e){e=[];for(var g=total=0;g<b.no_of_frames;g++)e[e.length]=0-total,total+=f}if(0==a._spritely.instances[d].current_frame){if(b.on_first_frame)b.on_first_frame(c)}else if(a._spritely.instances[d].current_frame==
e.length-1&&b.on_last_frame)b.on_last_frame(c);if(b.on_frame&&b.on_frame[a._spritely.instances[d].current_frame])b.on_frame[a._spritely.instances[d].current_frame](c);a._spritely.instances[d].current_frame=!0==b.rewind?0>=a._spritely.instances[d].current_frame?e.length-1:a._spritely.instances[d].current_frame-1:a._spritely.instances[d].current_frame>=e.length-1?0:a._spritely.instances[d].current_frame+1;f=a._spritely.getBgY(c);c.css("background-position",e[a._spritely.instances[d].current_frame]+
"px "+f);if(b.bounce&&0<b.bounce[0]&&0<b.bounce[1]){var f=b.bounce[0],g=b.bounce[1],h=b.bounce[2];c.animate({top:"+="+f+"px",left:"-="+g+"px"},h).animate({top:"-="+f+"px",left:"+="+g+"px"},h)}};if(a._spritely.instances[d].remaining_frames&&0<a._spritely.instances[d].remaining_frames){a._spritely.instances[d].remaining_frames--;if(0==a._spritely.instances[d].remaining_frames){a._spritely.instances[d].remaining_frames=-1;delete a._spritely.instances[d].remaining_frames;return}f(c)}else-1!=a._spritely.instances[d].remaining_frames&&
f(c)}else if("pan"==b.type&&!a._spritely.instances[d]._stopped){"up"==b.dir?(a._spritely.instances[d].l=a._spritely.getBgX(c).replace("px",""),a._spritely.instances[d].t=a._spritely.instances[d].t-(b.speed||1)||0):"down"==b.dir?(a._spritely.instances[d].l=a._spritely.getBgX(c).replace("px",""),a._spritely.instances[d].t=a._spritely.instances[d].t+(b.speed||1)||0):(a._spritely.instances[d].l="left"==b.dir?a._spritely.instances[d].l-(b.speed||1)||0:a._spritely.instances[d].l+(b.speed||1)||0,a._spritely.instances[d].t=
a._spritely.getBgY(c).replace("px",""));var f=a._spritely.instances[d].l.toString(),f=-1==f.indexOf("%")?f+"px ":f+" ",g=a._spritely.instances[d].t.toString(),g=-1==g.indexOf("%")?g+"px ":g+" ";a(c).css("background-position",f+g)}a._spritely.instances[d].options=b;window.setTimeout(function(){a._spritely.animate(b)},parseInt(1E3/b.fps))},randomIntBetween:function(a,c){return parseInt(rand_no=Math.floor((c-(a-1))*Math.random())+a)},getBgY:function(b){return a.browser.msie?a(b).css("background-position-y")||
"0":(a(b).css("background-position")||" ").split(" ")[1]},getBgX:function(b){return a.browser.msie?a(b).css("background-position-x")||"0":(a(b).css("background-position")||" ").split(" ")[0]},get_rel_pos:function(a,c){var d=a;if(0>a)for(;0>d;)d+=c;else for(;d>c;)d-=c;return d}};a.fn.extend({spritely:function(b){b=a.extend({type:"sprite",do_once:!1,width:null,height:null,fps:12,no_of_frames:2,stop_after:null},b||{});var c=a(this).attr("id");a._spritely.instances||(a._spritely.instances={});a._spritely.instances[c]||
(a._spritely.instances[c]=b.start_at_frame?{current_frame:b.start_at_frame-1}:{current_frame:-1});a._spritely.instances[c].type=b.type;a._spritely.instances[c].depth=b.depth;b.el=this;b.width=b.width||a(this).width()||100;b.height=b.height||a(this).height()||100;b.do_once?a._spritely.animate(b):window.setTimeout(function(){a._spritely.animate(b)},parseInt(1E3/b.fps));return this},sprite:function(b){b=a.extend({type:"sprite",bounce:[0,0,1E3]},b||{});return a(this).spritely(b)},pan:function(b){b=a.extend({type:"pan",
dir:"left",continuous:!0,speed:1},b||{});return a(this).spritely(b)},flyToTap:function(b){b=a.extend({el_to_move:null,type:"moveToTap",ms:1E3,do_once:!0},b||{});b.el_to_move&&a(b.el_to_move).active();a._spritely.activeSprite&&(window.Touch?a(this)[0].ontouchstart=function(b){var d=a._spritely.activeSprite,e=b.touches[0];b=e.pageY-d.height()/2;e=e.pageX-d.width()/2;d.animate({top:b+"px",left:e+"px"},1E3)}:a(this).click(function(b){var d=a._spritely.activeSprite;a(d).stop(!0);var e=d.width(),f=d.height();
d.animate({top:b.pageY-f/2+"px",left:b.pageX-e/2+"px"},1E3)}));return this},isDraggable:function(b){if(!a(this).draggable)return this;b=a.extend({type:"isDraggable",start:null,stop:null,drag:null},b||{});var c=a(this).attr("id");if(!a._spritely.instances[c])return this;a._spritely.instances[c].isDraggableOptions=b;a(this).draggable({start:function(){var b=a(this).attr("id");a._spritely.instances[b].stop_random=!0;a(this).stop(!0);a._spritely.instances[b].isDraggableOptions.start&&a._spritely.instances[b].isDraggableOptions.start(this)},
drag:b.drag,stop:function(){var b=a(this).attr("id");a._spritely.instances[b].stop_random=!1;a._spritely.instances[b].isDraggableOptions.stop&&a._spritely.instances[b].isDraggableOptions.stop(this)}});return this},active:function(){a._spritely.activeSprite=this;return this},activeOnClick:function(){var b=a(this);window.Touch?b[0].ontouchstart=function(){a._spritely.activeSprite=b}:b.click(function(){a._spritely.activeSprite=b});return this},spRandom:function(b){b=a.extend({top:50,left:50,right:290,
bottom:320,speed:4E3,pause:0},b||{});var c=a(this).attr("id");if(!a._spritely.instances[c])return this;if(!a._spritely.instances[c].stop_random){var d=a._spritely.randomIntBetween,e=d(b.top,b.bottom),d=d(b.left,b.right);a("#"+c).animate({top:e+"px",left:d+"px"},b.speed)}window.setTimeout(function(){a("#"+c).spRandom(b)},b.speed+b.pause);return this},makeAbsolute:function(){return this.each(function(){var b=a(this),c=b.position();b.css({position:"absolute",marginLeft:0,marginTop:0,top:c.top,left:c.left}).remove().appendTo("body")})},
spSet:function(b,c){var d=a(this).attr("id");a._spritely.instances[d][b]=c;return this},spGet:function(b){var c=a(this).attr("id");return a._spritely.instances[c][b]},spStop:function(b){a(this).each(function(){var c=a(this).attr("id");a._spritely.instances[c]._last_fps=a(this).spGet("fps");a._spritely.instances[c]._stopped=!0;a._spritely.instances[c]._stopped_f1=b;"sprite"==a._spritely.instances[c].type&&a(this).spSet("fps",0);b&&(c=a._spritely.getBgY(a(this)),a(this).css("background-position","0 "+
c))});return this},spStart:function(){a(this).each(function(){var b=a(this).attr("id"),c=a._spritely.instances[b]._last_fps||12;a._spritely.instances[b]._stopped=!1;"sprite"==a._spritely.instances[b].type&&a(this).spSet("fps",c)});return this},spToggle:function(){var b=a(this).attr("id"),c=a._spritely.instances[b]._stopped_f1||!1;a._spritely.instances[b]._stopped?a(this).spStart():a(this).spStop(c);return this},fps:function(b){a(this).each(function(){a(this).spSet("fps",b)});return this},spSpeed:function(b){a(this).each(function(){a(this).spSet("speed",
b)});return this},spRelSpeed:function(b){a(this).each(function(){var c=a(this).spGet("depth")/100;a(this).spSet("speed",b*c)});return this},spChangeDir:function(b){a(this).each(function(){a(this).spSet("dir",b)});return this},spState:function(b){a(this).each(function(){var c=(b-1)*a(this).height()+"px",c=a._spritely.getBgX(a(this))+" -"+c;a(this).css("background-position",c)});return this},lockTo:function(b,c){a(this).each(function(){var d=a(this).attr("id");if(!a._spritely.instances[d])return this;
a._spritely.instances[d].locked_el=a(this);a._spritely.instances[d].lock_to=a(b);a._spritely.instances[d].lock_to_options=c;window.setInterval(function(){if(a._spritely.instances[d].lock_to){var b=a._spritely.instances[d].locked_el,c=a._spritely.instances[d].lock_to,g=a._spritely.instances[d].lock_to_options,j=g.bg_img_width;c.height();var k=a._spritely.getBgY(c),c=a._spritely.getBgX(c),c=parseInt(c)+parseInt(g.left),g=parseInt(k)+parseInt(g.top),c=a._spritely.get_rel_pos(c,j);a(b).css({top:g+"px",
left:c+"px"})}},c.interval||20)});return this},destroy:function(){a(this);var b=a(this).attr("id");delete a._spritely.instances[b];return this}})})(jQuery);try{document.execCommand("BackgroundImageCache",!1,!0)}catch(err){};
;
(function(){function S(a,b){var c;a||(a={});for(c in b)a[c]=b[c];return a}function fa(){for(var a=0,b=arguments,c=b.length,d={};a<c;a++)d[b[a++]]=b[a];return d}function W(a,b){return parseInt(a,b||10)}function Bb(a){return"string"===typeof a}function ob(a){return"object"===typeof a}function Cb(a){return"[object Array]"===Object.prototype.toString.call(a)}function pb(a){return"number"===typeof a}function qb(a){return ra.log(a)/ra.LN10}function db(a){return ra.pow(10,a)}function Gb(a,b){for(var c=a.length;c--;)if(a[c]===
b){a.splice(c,1);break}}function v(a){return a!==V&&null!==a}function F(a,b,c){var d,e;if(Bb(b))v(c)?a.setAttribute(b,c):a&&a.getAttribute&&(e=a.getAttribute(b));else if(v(b)&&ob(b))for(d in b)a.setAttribute(d,b[d]);return e}function Hb(a){return Cb(a)?a:[a]}function u(){var a=arguments,b,c,d=a.length;for(b=0;b<d;b++)if(c=a[b],"undefined"!==typeof c&&null!==c)return c}function O(a,b){Db&&(b&&b.opacity!==V)&&(b.filter="alpha(opacity="+100*b.opacity+")");S(a.style,b)}function wa(a,b,c,d,e){a=A.createElement(a);
b&&S(a,b);e&&O(a,{padding:0,border:Ka,margin:0});c&&O(a,c);d&&d.appendChild(a);return a}function Ra(a,b){var c=function(){};c.prototype=new a;S(c.prototype,b);return c}function jc(a,b,c,d){var e=na.lang,g=isNaN(b=Ea(b))?2:b;b=void 0===c?e.decimalPoint:c;d=void 0===d?e.thousandsSep:d;e=0>a?"-":"";c=String(W(a=Ea(+a||0).toFixed(g)));var f=3<c.length?c.length%3:0;return e+(f?c.substr(0,f)+d:"")+c.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+d)+(g?b+Ea(a-c).toFixed(g).slice(2):"")}function La(a,b){return Array((b||
2)+1-String(a).length).join(0)+a}function kc(a,b,c,d){var e;c=u(c,1);e=a/c;b||(b=[1,2,2.5,5,10],d&&!1===d.allowDecimals&&(1===c?b=[1,2,5,10]:0.1>=c&&(b=[1/c])));for(d=0;d<b.length&&!(a=b[d],e<=(b[d]+(b[d+1]||b[d]))/2);d++);return a*c}function Qc(a,b,c,d){var e=[],g={},f=na.global.useUTC,h,j=new Date(b);b=a.unitRange;var l=a.count;b>=da[cc]&&(j.setMilliseconds(0),j.setSeconds(b>=da[Ub]?0:l*Va(j.getSeconds()/l)));if(b>=da[Ub])j[vc](b>=da[Ib]?0:l*Va(j[Jb]()/l));if(b>=da[Ib])j[wc](b>=da[gb]?0:l*Va(j[Vb]()/
l));if(b>=da[gb])j[lc](b>=da[Kb]?1:l*Va(j[rb]()/l));b>=da[Kb]&&(j[xc](b>=da[sb]?0:l*Va(j[tb]()/l)),h=j[ub]());b>=da[sb]&&(h-=h%l,j[yc](h));if(b===da[Wb])j[lc](j[rb]()-j[mc]()+u(d,1));d=1;h=j[ub]();for(var k=j.getTime(),p=j[tb](),j=j[rb]();k<c;)e.push(k),b===da[sb]?k=vb(h+d*l,0):b===da[Kb]?k=vb(h,p+d*l):!f&&(b===da[gb]||b===da[Wb])?k=vb(h,p,j+d*l*(b===da[gb]?1:7)):(k+=b*l,b<=da[Ib]&&0===k%da[gb]&&(g[k]=gb)),d++;e.push(k);e.info=S(a,{higherRanks:g,totalRange:b*l});return e}function zc(){this.symbol=
this.color=0}function Ac(a,b,c,d,e,g,f,h,j){var l=f.x;f=f.y;j=l+c+(j?h:-a-h);var k=f-b+d+15,p;7>j&&(j=c+l+h);j+a>c+e&&(j-=j+a-(c+e),k=f-b+d-h,p=!0);k<d+5&&(k=d+5,p&&f>=k&&f<=k+b&&(k=f+d+h));k+b>d+g&&(k=d+g-b-h);return{x:j,y:k}}function Xb(a){for(var b=a.length,c=a[0];b--;)a[b]<c&&(c=a[b]);return c}function Lb(a){for(var b=a.length,c=a[0];b--;)a[b]>c&&(c=a[b]);return c}function Mb(a){for(var b in a)a[b]&&a[b].destroy&&a[b].destroy(),delete a[b]}function Yb(a){wb||(wb=wa(Sa));a&&wb.appendChild(a);wb.innerHTML=
""}function nc(a,b){var c="Highcharts error #"+a+": www.highcharts.com/errors/"+a;if(b)throw c;ca.console&&console.log(c)}function Eb(a){return parseFloat(a.toPrecision(14))}function Nb(a,b){Zb=u(a,b.animation)}function Bc(){var a=na.global.useUTC,b=a?"getUTC":"get",c=a?"setUTC":"set";vb=a?Date.UTC:function(a,b,c,f,h,j){return(new Date(a,b,u(c,1),u(f,0),u(h,0),u(j,0))).getTime()};Jb=b+"Minutes";Vb=b+"Hours";mc=b+"Day";rb=b+"Date";tb=b+"Month";ub=b+"FullYear";vc=c+"Minutes";wc=c+"Hours";lc=c+"Date";
xc=c+"Month";yc=c+"FullYear"}function xa(){}function Cc(a,b){function c(a){function b(a,c){this.pos=a;this.type=c||"";this.isNew=!0;c||this.addLabel()}function c(a){a&&(this.options=a,this.id=a.id);return this}function d(a,b,c,e){this.isNegative=b;this.options=a;this.x=c;this.stack=e;this.alignOptions={align:a.align||(X?b?"left":"right":"center"),verticalAlign:a.verticalAlign||(X?"middle":b?"bottom":"top"),y:u(a.y,X?4:b?14:-6),x:u(a.x,X?b?-6:6:0)};this.textAlign=a.textAlign||(X?b?"right":"left":"center")}
function e(a,b,c){var d;b=Eb(Va(b/a)*a);c=Eb(dc(c/a)*a);for(var g=[];b<=c;){g.push(b);b=Eb(b+a);if(b===d)break;d=b}return g}function g(a,b,c,d){var f=[];d||(s._minorAutoInterval=null);if(0.5<=a)a=y(a),f=e(a,b,c);else if(0.08<=a){var h=Va(b),j,k,l,n,m,p;for(j=0.3<a?[1,2,4]:0.15<a?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];h<c+1&&!p;h++){l=j.length;for(k=0;k<l&&!p;k++)n=qb(db(h)*j[k]),n>b&&f.push(m),m>c&&(p=!0),m=n}}else if(b=db(b),c=db(c),a=x[d?"minorTickInterval":"tickInterval"],a=u("auto"===a?null:a,s._minorAutoInterval,
(c-b)*(x.tickPixelInterval/(d?5:1))/((d?w/U.length:w)||1)),a=kc(a,null,ra.pow(10,Va(ra.log(a)/ra.LN10))),f=$b(e(a,b,c),qb),!d)s._minorAutoInterval=a/5;d||(ya=a);return f}function f(a){var b,c=x.tickInterval,d=x.tickPixelInterval;ba?(na=m[l?"xAxis":"yAxis"][x.linkedTo],b=na.getExtremes(),I=u(b.min,b.dataMin),K=u(b.max,b.dataMax),x.type!==na.options.type&&nc(11,1)):(I=u(T,x.min,Ta),K=u(ca,x.max,A));E&&(!a&&0>=Wa(I,Ta)&&nc(10,1),I=qb(I),K=qb(K));Z&&(T=I=Y(I,K-Z),ca=K,a&&(Z=null));var h;b=A-Ta>=O;var j,
k,n,p,q;l&&(O===V&&!E)&&(v(x.min)||v(x.max)?O=null:(r(s.series,function(a){p=a.xData;for(k=a.xIncrement?1:p.length-1;0<k;k--)if(n=p[k]-p[k-1],j===V||n<j)j=n}),O=Wa(5*j,A-Ta)),s.setMinRange=function(a){O=a});K-I<O&&(h=(O-K+I)/2,h=[I-h,u(x.min,I-h)],b&&(h[2]=Ta),I=Lb(h),q=[I+O,u(x.max,I+O)],b&&(q[2]=A),K=Xb(q),K-I<O&&(h[0]=K-O,h[1]=u(x.min,K-O),I=Lb(h)));if(!Xa&&!Ca&&!ba&&v(I)&&v(K)){b=K-I||1;if(!v(x.min)&&!v(T)&&Hc&&(0>Ta||!La))I-=b*Hc;if(!v(x.max)&&!v(ca)&&Ha&&(0<A||!Na))K+=b*Ha}ya=I===K||void 0===
I||void 0===K?1:ba&&!c&&d===na.options.tickPixelInterval?na.tickInterval:u(c,Xa?1:(K-I)*d/(w||1));l&&!a&&r(s.series,function(a){a.processData(I!==fa||K!==wa)});oa();s.beforeSetTickPositions&&s.beforeSetTickPositions();s.postProcessTickInterval&&(ya=s.postProcessTickInterval(ya));!$&&!E&&(Ua=ra.pow(10,Va(ra.log(ya)/ra.LN10)),v(x.tickInterval)||(ya=kc(ya,null,Ua,x)));s.tickInterval=ya;Ga="auto"===x.minorTickInterval&&ya?ya/5:x.minorTickInterval;if(!(U=x.tickPositions||Za&&Za.apply(s,[I,K]))){if($){d=
s.getNonLinearTimeTicks||Qc;h=x.units||[[pc,[1,2,5,10,20,25,50,100,200,500]],[cc,[1,2,5,10,15,30]],[Ub,[1,2,5,10,15,30]],[Ib,[1,2,3,4,6,8,12]],[gb,[1,2]],[Wb,[1,2]],[Kb,[1,2,3,4,6]],[sb,null]];q=h[h.length-1];b=da[q[0]];var t=q[1],za;for(za=0;za<h.length&&!(q=h[za],b=da[q[0]],t=q[1],h[za+1]&&ya<=(b*t[t.length-1]+da[h[za+1][0]])/2);za++);b===da[sb]&&ya<5*b&&(t=[1,2,5]);b===da[sb]&&ya<5*b&&(t=[1,2,5]);h=kc(ya/b,t);d=d({unitRange:b,count:h,unitName:q[0]},I,K,x.startOfWeek,s.ordinalPositions,s.closestPointRange,
!0)}else d=E?g(ya,I,K):e(ya,I,K);U=d}ba||(a=U[0],c=U[U.length-1],x.startOnTick?I=a:I>a&&U.shift(),x.endOnTick?K=c:K<c&&U.pop())}function h(a){a=(new c(a)).render();pa.push(a);return a}function j(){var a=x.title,d=x.stackLabels,e=x.alternateGridColor,f=x.lineWidth,k,l,t=m.hasRendered&&v(fa)&&!isNaN(fa),M=(k=s.series.length&&v(I)&&v(K))||u(x.showEmpty,!0),Ya,oc;if(k||ba){if(Ga&&!Xa){var z=r,$=[],oa,jb;if(E){jb=U.length;for(oa=1;oa<jb;oa++)$=$.concat(g(Ga,U[oa-1],U[oa],!0))}else for(oa=I+(U[0]-I)%Ga;oa<=
K;oa+=Ga)$.push(oa);z($,function(a){ua[a]||(ua[a]=new b(a,"minor"));t&&ua[a].isNew&&ua[a].render(null,!0);ua[a].isActive=!0;ua[a].render()})}if(r(U.slice(1).concat([U[0]]),function(a,c){c=c===U.length-1?0:c+1;if(!ba||a>=I&&a<=K)Oa[a]||(Oa[a]=new b(a)),t&&Oa[a].isNew&&Oa[a].render(c,!0),Oa[a].isActive=!0,Oa[a].render(c)}),e&&r(U,function(a,b){0===b%2&&a<K&&(Da[a]||(Da[a]=new c),Ya=a,oc=U[b+1]!==V?U[b+1]:K,Da[a].options={from:E?db(Ya):Ya,to:E?db(oc):oc,color:e},Da[a].render(),Da[a].isActive=!0)}),!s._addedPlotLB)r((x.plotLines||
[]).concat(x.plotBands||[]),function(a){h(a)}),s._addedPlotLB=!0}r([Oa,ua,Da],function(a){for(var b in a)a[b].isActive?a[b].isActive=!1:(a[b].destroy(),delete a[b])});f&&(k=C+(p?za:0)+R,l=sa-Ob-(p?hb:0)+R,k=P.crispLine([Aa,n?C:k,n?l:F,ga,n?ta-ec:k,n?l:sa-Ob],f),Pb?Pb.animate({d:k}):Pb=P.path(k).attr({stroke:x.lineColor,"stroke-width":f,zIndex:7}).add(),Pb[M?"show":"hide"]());J&&M&&(M=n?C:F,f=W(a.style.fontSize||12),M={low:M+(n?0:w),middle:M+w/2,high:M+(n?w:0)}[a.align],f=(n?F+hb:C)+(n?1:-1)*(p?-1:
1)*$a+(2===q?f:0),J[J.isNew?"attr":"animate"]({x:n?M:f+(p?za:0)+R+(a.x||0),y:n?f-(p?hb:0)+R:M+(a.y||0)}),J.isNew=!1);if(d&&d.enabled){var D,ib,d=s.stackTotalGroup;d||(s.stackTotalGroup=d=P.g("stack-labels").attr({visibility:eb,zIndex:6}).add());d.translate(G,H);for(D in L)for(ib in a=L[D],a)a[ib].render(d)}s.isDirty=!1}function k(a){for(var b=pa.length;b--;)pa[b].id===a&&pa[b].destroy()}var l=a.isX,p=a.opposite,n=X?!l:l,q=n?p?0:2:p?1:3,L={},x=B(l?fc:qc,[Sc,Tc,Dc,Uc][q],a),s=this,J,z=x.type,$="datetime"===
z,E="logarithmic"===z,R=x.offset||0,D=l?"x":"y",w=0,bb,ea,Q,N,C,F,za,hb,Ob,ec,Ya,oa,ib,jb,gc,Pb,Ta,A,O=x.minRange||x.maxZoom,Z=x.range,T,ca,qa,va,K=null,I=null,fa,wa,Hc=x.minPadding,Ha=x.maxPadding,Ia=0,ba=v(x.linkedTo),na,La,Na,Ca,z=x.events,Ka,pa=[],ya,Ga,Ua,U,Za=x.tickPositioner,Oa={},ua={},Da={},Ja,Fa,$a,Xa=x.categories,cb=x.labels.formatter||function(){var a=this.value,b=this.dateTimeLabelFormat;return b?hc(b,a):0===ya%1E6?a/1E6+"M":0===ya%1E3?a/1E3+"k":!Xa&&1E3<=a?jc(a,0):a},Sa=n&&x.labels.staggerLines,
xa=x.reversed,Ma=Xa&&"between"===x.tickmarkPlacement?0.5:0;b.prototype={addLabel:function(){var a=this.pos,b=x.labels,c=Xa&&n&&Xa.length&&!b.step&&!b.staggerLines&&!b.rotation&&la/Xa.length||!n&&la/2,d=a===U[0],e=a===U[U.length-1],f=Xa&&v(Xa[a])?Xa[a]:a,g=this.label,h=U.info,j;$&&h&&(j=x.dateTimeLabelFormats[h.higherRanks[a]||h.unitName]);this.isFirst=d;this.isLast=e;a=cb.call({axis:s,chart:m,isFirst:d,isLast:e,dateTimeLabelFormat:j,value:E?Eb(db(f)):f});c=c&&{width:Y(1,y(c-2*(b.padding||10)))+ha};
c=S(c,b.style);v(g)?g&&g.attr({text:a}).css(c):this.label=v(a)&&b.enabled?P.text(a,0,0,b.useHTML).attr({align:b.align,rotation:b.rotation}).css(c).add(jb):null},getLabelSize:function(){var a=this.label;return a?(this.labelBBox=a.getBBox(!0))[n?"height":"width"]:0},getLabelSides:function(){var a=x.labels,b=this.labelBBox.width,a=b*{left:0,center:0.5,right:1}[a.align]-a.x;return[-a,b-a]},handleOverflow:function(a){var b=!0,c=this.isFirst,d=this.isLast,e=this.label,f=e.x;if(c||d){var g=this.getLabelSides(),
h=g[0],g=g[1],j=m.plotLeft,k=j+s.len,l=(a=Oa[U[a+(c?1:-1)]])&&a.label.x+a.getLabelSides()[c?0:1];c&&!xa||d&&xa?f+h<j&&(f=j-h,a&&f+g>l&&(b=!1)):f+g>k&&(f=k-g,a&&f+h<l&&(b=!1));e.x=f}return b},render:function(a,b){var c=this.type,d=this.label,e=this.pos,f=x.labels,g=this.gridLine,h=c?c+"Grid":"grid",j=c?c+"Tick":"tick",k=x[h+"LineWidth"],l=x[h+"LineColor"],m=x[h+"LineDashStyle"],q=x[j+"Length"],h=x[j+"Width"]||0,t=x[j+"Color"],za=x[j+"Position"],j=this.mark,s=f.step,M=b&&Qa||sa,r=!0,ka;ka=n?Ya(e+Ma,
null,null,b)+Q:C+R+(p?(b&&Ra||ta)-ec-C:0);M=n?M-Ob+R-(p?hb:0):M-Ya(e+Ma,null,null,b)-Q;if(k&&(e=ib(e+Ma,k,b),g===V&&(g={stroke:l,"stroke-width":k},m&&(g.dashstyle=m),c||(g.zIndex=1),this.gridLine=g=k?P.path(e).attr(g).add(gc):null),!b&&g&&e))g[this.isNew?"attr":"animate"]({d:e});h&&("inside"===za&&(q=-q),p&&(q=-q),c=P.crispLine([Aa,ka,M,ga,ka+(n?0:-q),M+(n?q:0)],h),j?j.animate({d:c}):this.mark=P.path(c).attr({stroke:t,"stroke-width":h}).add(jb));d&&!isNaN(ka)&&(ka=ka+f.x-(Ma&&n?Ma*ea*(xa?-1:1):0),
M=M+f.y-(Ma&&!n?Ma*ea*(xa?1:-1):0),v(f.y)||(M+=0.9*W(d.styles.lineHeight)-d.getBBox().height/2),Sa&&(M+=16*(a/(s||1)%Sa)),d.x=ka,d.y=M,this.isFirst&&!u(x.showFirstLabel,1)||this.isLast&&!u(x.showLastLabel,1)?r=!1:!Sa&&n&&"justify"===f.overflow&&!this.handleOverflow(a)&&(r=!1),s&&a%s&&(r=!1),r?(d[this.isNew?"attr":"animate"]({x:d.x,y:d.y}),d.show(),this.isNew=!1):d.hide())},destroy:function(){Mb(this)}};c.prototype={render:function(){var a=this,b=(s.pointRange||0)/2,c=a.options,d=c.label,e=a.label,
f=c.width,g=c.to,h=c.from,j=c.value,k,l=c.dashStyle,p=a.svgElem,m=[],q,t,M=c.color;t=c.zIndex;var ka=c.events;E&&(h=qb(h),g=qb(g),j=qb(j));if(f){if(m=ib(j,f),b={stroke:M,"stroke-width":f},l)b.dashstyle=l}else if(v(h)&&v(g))h=Y(h,I-b),g=Wa(g,K+b),k=ib(g),(m=ib(h))&&k?m.push(k[4],k[5],k[1],k[2]):m=null,b={fill:M};else return;v(t)&&(b.zIndex=t);if(p)m?p.animate({d:m},null,p.onGetPath):(p.hide(),p.onGetPath=function(){p.show()});else if(m&&m.length&&(a.svgElem=p=P.path(m).attr(b).add(),ka))for(q in l=
function(b){p.on(b,function(c){ka[b].apply(a,[c])})},ka)l(q);d&&v(d.text)&&m&&m.length&&0<za&&0<hb?(d=B({align:n&&k&&"center",x:n?!k&&4:10,verticalAlign:!n&&k&&"middle",y:n?k?16:10:k?6:-4,rotation:n&&!k&&90},d),e||(a.label=e=P.text(d.text,0,0).attr({align:d.textAlign||d.align,rotation:d.rotation,zIndex:t}).css(d.style).add()),k=[m[1],m[4],u(m[6],m[1])],m=[m[2],m[5],u(m[7],m[2])],q=Xb(k),t=Xb(m),e.align(d,!1,{x:q,y:t,width:Lb(k)-q,height:Lb(m)-t}),e.show()):e&&e.hide();return a},destroy:function(){Mb(this);
Gb(pa,this)}};d.prototype={destroy:function(){Mb(this)},setTotal:function(a){this.cum=this.total=a},render:function(a){var b=this.options.formatter.call(this);this.label?this.label.attr({text:b,visibility:ab}):this.label=m.renderer.text(b,0,0).css(this.options.style).attr({align:this.textAlign,rotation:this.options.rotation,visibility:ab}).add(a)},setOffset:function(a,b){var c=this.isNegative,d=s.translate(this.total,0,0,0,1),e=s.translate(0),e=Ea(d-e),g=m.xAxis[0].translate(this.x)+a,f=m.plotHeight,
c={x:X?c?d:d-e:g,y:X?f-g-b:c?f-d-e:f-d,width:X?e:b,height:X?b:e};this.label&&this.label.align(this.alignOptions,null,c).attr({visibility:eb})}};Ya=function(a,b,c,d,e){var g=1,f=0,h=d?N:ea;d=d?fa:I;e=x.ordinal||E&&e;h||(h=ea);c&&(g*=-1,f=w);xa&&(g*=-1,f-=g*w);b?(xa&&(a=w-a),a=a/h+d,e&&(a=s.lin2val(a))):(e&&(a=s.val2lin(a)),a=g*(a-d)*h+f+g*Ia);return a};ib=function(a,b,c){var d,e,g;a=Ya(a,null,null,c);var f=c&&Qa||sa,h=c&&Ra||ta,j;c=e=y(a+Q);d=g=y(f-a-Q);if(isNaN(a))j=!0;else if(n){if(d=F,g=f-Ob,c<
C||c>C+za)j=!0}else if(c=C,e=h-ec,d<F||d>F+hb)j=!0;return j?null:P.crispLine([Aa,c,d,ga,e,g],b||0)};s.setMaxTicks=function(){fb||(fb={x:0,y:0});!ba&&(!$&&U.length>fb[D]&&!1!==x.alignTicks)&&(fb[D]=U.length)};oa=function(){var a=K-I,b=0,c,d;l&&(ba?b=na.pointRange:r(s.series,function(a){b=Y(b,a.pointRange);d=a.closestPointRange;!a.noSharedTooltip&&v(d)&&(c=v(c)?Wa(c,d):d)}),s.pointRange=b,s.closestPointRange=c);N=ea;s.translationSlope=ea=w/(a+b||1);Q=n?C:Ob;Ia=ea*(b/2)};Ba.push(s);m[l?"xAxis":"yAxis"].push(s);
X&&l&&xa===V&&(xa=!0);S(s,{addPlotBand:h,addPlotLine:h,adjustTickAmount:function(){if(fb&&fb[D]&&!$&&!Xa&&!ba&&!1!==x.alignTicks){var a=Ja,b=U.length;Ja=fb[D];if(b<Ja){for(;U.length<Ja;)U.push(Eb(U[U.length-1]+ya));ea*=(b-1)/(Ja-1);K=U[U.length-1]}v(a)&&Ja!==a&&(s.isDirty=!0)}},categories:Xa,getExtremes:function(){return{min:E?Eb(db(I)):I,max:E?Eb(db(K)):K,dataMin:Ta,dataMax:A,userMin:T,userMax:ca}},getPlotLinePath:ib,getThreshold:function(a){var b=E?db(I):I,c=E?db(K):K;b>a||null===a?a=b:c<a&&(a=
c);return Ya(a,0,1,0,1)},isXAxis:l,options:x,plotLinesAndBands:pa,getOffset:function(){var a=s.series.length&&v(I)&&v(K),c=a||u(x.showEmpty,!0),d=0,e,g=0,f=x.title,h=x.labels,j=[-1,1,1,-1][q],k;jb||(jb=P.g("axis").attr({zIndex:7}).add(),gc=P.g("grid").attr({zIndex:x.gridZIndex||1}).add());Fa=0;if(a||ba)r(U,function(a){Oa[a]?Oa[a].addLabel():Oa[a]=new b(a)}),r(U,function(a){if(0===q||2===q||{1:"left",3:"right"}[q]===h.align)Fa=Y(Oa[a].getLabelSize(),Fa)}),Sa&&(Fa+=16*(Sa-1));else for(k in Oa)Oa[k].destroy(),
delete Oa[k];f&&f.text&&(J||(J=s.axisTitle=P.text(f.text,0,0,f.useHTML).attr({zIndex:7,rotation:f.rotation||0,align:f.textAlign||{low:"left",middle:"center",high:"right"}[f.align]}).css(f.style).add(),J.isNew=!0),c&&(d=J.getBBox()[n?"height":"width"],g=u(f.margin,n?5:10),e=f.offset),J[c?"show":"hide"]());R=j*u(x.offset,ja[q]);$a=u(e,Fa+g+(2!==q&&Fa&&j*x.labels[n?"y":"x"]));ja[q]=Y(ja[q],$a+d+j*R)},render:j,setAxisSize:function(){var a=x.offsetLeft||0,b=x.offsetRight||0;C=u(x.left,G+a);F=u(x.top,H);
za=u(x.width,la-a+b);hb=u(x.height,ia);Ob=sa-hb-F;ec=ta-za-C;w=Y(n?za:hb,0);s.left=C;s.top=F;s.len=w},setAxisTranslation:oa,setCategories:function(b,c){s.categories=a.categories=Xa=b;r(s.series,function(a){a.translate();a.setTooltipPoints(!0)});s.isDirty=!0;u(c,!0)&&m.redraw()},setExtremes:function(a,b,c,d,e){c=u(c,!0);e=S(e,{min:a,max:b});aa(s,"setExtremes",e,function(){T=a;ca=b;s.isDirtyExtremes=!0;c&&m.redraw(d)})},setScale:function(){var a,b,c,e;fa=I;wa=K;bb=w;s.setAxisSize();e=w!==bb;r(s.series,
function(a){if(a.isDirtyData||a.isDirty||a.xAxis.isDirty)c=!0});if(e||c||ba||T!==qa||ca!==va){var g=[],h=[],j;Ta=A=null;r(s.series,function(a){if(a.visible||!t.ignoreHiddenSeries){var b=a.options,c,e,f,k,m,n,p,q,M,s=b.threshold,za,ka=[],r=0;E&&0>=s&&(s=b.threshold=null);if(l)b=a.xData,b.length&&(Ta=Wa(u(Ta,b[0]),Xb(b)),A=Y(u(A,b[0]),Lb(b)));else{var Ya,J,oa,Rc=a.cropped,z=a.xAxis.getExtremes(),$=!!a.modifyValue;c=b.stacking;Ca="percent"===c;c&&(m=b.stack,k=a.type+u(m,""),n="-"+k,a.stackKey=k,e=g[k]||
[],g[k]=e,f=h[n]||[],h[n]=f);Ca&&(Ta=0,A=99);b=a.processedXData;p=a.processedYData;za=p.length;for(j=0;j<za;j++)if(q=b[j],M=p[j],null!==M&&M!==V&&(c?(J=(Ya=M<s)?f:e,oa=Ya?n:k,M=J[q]=v(J[q])?J[q]+M:M,L[oa]||(L[oa]={}),L[oa][q]||(L[oa][q]=new d(x.stackLabels,Ya,q,m)),L[oa][q].setTotal(M)):$&&(M=a.modifyValue(M)),Rc||(b[j+1]||q)>=z.min&&(b[j-1]||q)<=z.max))if(q=M.length)for(;q--;)null!==M[q]&&(ka[r++]=M[q]);else ka[r++]=M;!Ca&&ka.length&&(Ta=Wa(u(Ta,ka[0]),Xb(ka)),A=Y(u(A,ka[0]),Lb(ka)));v(s)&&(Ta>=
s?(Ta=s,La=!0):A<s&&(A=s,Na=!0))}}});f();qa=T;va=ca;if(!l)for(a in L)for(b in L[a])L[a][b].cum=L[a][b].total;s.isDirty||(s.isDirty=e||I!==fa||K!==wa)}s.setMaxTicks()},setTickPositions:f,translate:Ya,redraw:function(){xb.resetTracker&&xb.resetTracker(!0);j();r(pa,function(a){a.render()});r(s.series,function(a){a.isDirty=!0})},removePlotBand:k,removePlotLine:k,reversed:xa,setTitle:function(a,b){x.title=B(x.title,a);J=J.destroy();s.isDirty=!0;u(b,!0)&&m.redraw()},series:[],stacks:L,destroy:function(){var a;
Pa(s);for(a in L)Mb(L[a]),L[a]=null;s.stackTotalGroup&&(s.stackTotalGroup=s.stackTotalGroup.destroy());r([Oa,ua,Da,pa],function(a){Mb(a)});r([Pb,jb,gc,J],function(a){a&&a.destroy()});Pb=jb=gc=J=null}});for(Ka in z)ma(s,Ka,z[Ka]);E&&(s.val2lin=qb,s.lin2val=db)}function d(a){function b(a){var c,d;a=a||ca.event;a.target||(a.target=a.srcElement);a.originalEvent&&(a=a.originalEvent);a.event&&(a=a.event);c=a.touches?a.touches.item(0):a;Ma=Ec(Q);c.pageX===V?(d=a.x,c=a.y):(d=c.pageX-Ma.left,c=c.pageY-Ma.top);
return S(a,{chartX:y(d),chartY:y(c)})}function c(a){var b=m.hoverSeries,d=m.hoverPoint,e=m.hoverPoints||d;if(a&&Fa&&e)Fa.refresh(e);else{if(d)d.onMouseOut();if(b)b.onMouseOut();Fa&&(Fa.hide(),Fa.hideCrosshairs());tb=null}}function d(){if(k){var a={xAxis:[],yAxis:[]},b=k.getBBox(),c=b.x-G,e=b.y-H,f;j&&(r(Ba,function(d){if(!1!==d.options.zoomEnabled){var g=d.translate,h=d.isXAxis,j=X?!h:h,k=g(j?c:ia-e-b.height,!0,0,0,1),g=g(j?c+b.width:ia-e,!0,0,0,1);!isNaN(k)&&!isNaN(g)&&(a[h?"xAxis":"yAxis"].push({axis:d,
min:Wa(k,g),max:Y(k,g)}),f=!0)}}),f&&aa(m,"selection",a,Cb));k=k.destroy()}m&&(O(Q,{cursor:"auto"}),m.cancelClick=j,m.mouseIsDown=cb=j=!1);Pa(A,Za?"touchend":"mouseup",d)}function e(a){Fc(a);Ma&&!Ha(a.pageX-Ma.left-G,a.pageY-Ma.top-H)&&c()}function f(){c();Ma=null}var g,h,j,k,l=$a?"":t.zoomType,n=/x/.test(l),p=/y/.test(l),q=n&&!X||p&&X,s=p&&!X||n&&X;nb||(m.trackerGroup=nb=P.g("tracker").attr({zIndex:9}).add());if(a.enabled){var l=m,L=function(){var b=this.points||Hb(this),c=b[0].series,d;d=[c.tooltipHeaderFormatter(b[0].key)];
r(b,function(a){c=a.series;d.push(c.tooltipFormatter&&c.tooltipFormatter(a)||a.point.tooltipFormatter(c.tooltipOptions.pointFormat))});d.push(a.footerFormat||"");return d.join("")},J=function(a,b){bb=C?a:(2*bb+a)/3;B=C?b:(B+b)/2;N.attr({x:bb,y:B});pb=1<Ea(a-bb)||1<Ea(b-B)?function(){J(a,b)}:null},z=function(){if(!C){var a=m.hoverPoints;N.hide();a&&r(a,function(a){a.setState()});m.hoverPoints=null;C=!0}},E,$=a.borderWidth,R=a.crosshairs,D=[],v=a.style,w=a.shared,ea=W(v.padding),C=!0,bb=0,B=0;v.padding=
0;var N=P.label("",0,0,null,null,null,a.useHTML,null,"tooltip").attr({padding:ea,fill:a.backgroundColor,"stroke-width":$,r:a.borderRadius,zIndex:8}).css(v).hide().add();$a||N.shadow(a.shadow);l.tooltip=Fa={shared:w,refresh:function(b){var c,d,e,g,f={},h=[];e=b.tooltipPos;c=a.formatter||L;var f=m.hoverPoints,j;w&&(!b.series||!b.series.noSharedTooltip)?(g=0,f&&r(f,function(a){a.setState()}),m.hoverPoints=b,r(b,function(a){a.setState(ua);g+=a.plotY;h.push(a.getLabelConfig())}),d=b[0].plotX,g=y(g)/b.length,
f={x:b[0].category},f.points=h,b=b[0]):f=b.getLabelConfig();f=c.call(f);E=b.series;d=u(d,b.plotX);g=u(g,b.plotY);c=y(e?e[0]:X?la-g:d);d=y(e?e[1]:X?ia-d:g);e=w||!E.isCartesian||E.tooltipOutsidePlot||Ha(c,d);!1===f||!e?z():(C&&(N.show(),C=!1),N.attr({text:f}),j=a.borderColor||b.color||E.color||"#606060",N.attr({stroke:j}),e=Ac(N.width,N.height,G,H,la,ia,{x:c,y:d},u(a.distance,12),X),J(y(e.x),y(e.y)));if(R){R=Hb(R);var k;e=R.length;for(var l;e--;)if(k=b.series[e?"yAxis":"xAxis"],R[e]&&k)(k=k.getPlotLinePath(e?
u(b.stackY,b.y):b.x,1),D[e])?D[e].attr({d:k,visibility:eb}):(l={"stroke-width":R[e].width||1,stroke:R[e].color||"#C0C0C0",zIndex:R[e].zIndex||2},R[e].dashStyle&&(l.dashstyle=R[e].dashStyle),D[e]=P.path(k).attr(l).add())}aa(m,"tooltipRefresh",{text:f,x:c+G,y:d+H,borderColor:j})},hide:z,hideCrosshairs:function(){r(D,function(a){a&&a.hide()})},destroy:function(){r(D,function(a){a&&a.destroy()});N&&(N=N.destroy())}};Db=setInterval(function(){pb&&pb()},32)}Q.onmousedown=function(a){a=b(a);!Za&&a.preventDefault&&
a.preventDefault();m.mouseIsDown=cb=!0;m.cancelClick=!1;m.mouseDownX=g=a.chartX;h=a.chartY;ma(A,Za?"touchend":"mouseup",d)};var T=function(c){if(!c||!(c.touches&&1<c.touches.length)){c=b(c);Za||(c.returnValue=!1);var d=c.chartX,e=c.chartY,f=!Ha(d-G,e-H);Za&&"touchstart"===c.type&&(F(c.target,"isTracker")?m.runTrackerClick||c.preventDefault():!xa&&!f&&c.preventDefault());f&&(d<G?d=G:d>G+la&&(d=G+la),e<H?e=H:e>H+ia&&(e=H+ia));if(cb&&"touchstart"!==c.type){if(j=Math.sqrt(Math.pow(g-d,2)+Math.pow(h-e,
2)),10<j){var l=Ha(g-G,h-H);if(Qb&&(n||p)&&l)k||(k=P.rect(G,H,q?1:la,s?1:ia,0).attr({fill:t.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add());k&&q&&(c=d-g,k.attr({width:Ea(c),x:(0<c?0:c)+g}));k&&s&&(e-=h,k.attr({height:Ea(e),y:(0<e?0:e)+h}));l&&!k&&t.panning&&m.pan(d)}}else if(!f){var r,d=m.hoverPoint,e=m.hoverSeries,L,u,l=ta,J=X?ia+H-c.chartY:c.chartX-G;if(Fa&&a.shared&&(!e||!e.noSharedTooltip)){r=[];L=Z.length;for(u=0;u<L;u++)Z[u].visible&&(!1!==Z[u].options.enableMouseTracking&&!Z[u].noSharedTooltip&&
Z[u].tooltipPoints.length)&&(c=Z[u].tooltipPoints[J],c._dist=Ea(J-c.plotX),l=Wa(l,c._dist),r.push(c));for(L=r.length;L--;)r[L]._dist>l&&r.splice(L,1);r.length&&r[0].plotX!==tb&&(Fa.refresh(r),tb=r[0].plotX)}if(e&&e.tracker&&(c=e.tooltipPoints[J])&&c!==d)c.onMouseOver()}return f||!Qb}};Q.onmousemove=T;ma(Q,"mouseleave",f);ma(A,"mousemove",e);Q.ontouchstart=function(a){if(n||p)Q.onmousedown(a);T(a)};Q.ontouchmove=T;Q.ontouchend=function(){j&&c()};Q.onclick=function(a){var c=m.hoverPoint;a=b(a);a.cancelBubble=
!0;if(!m.cancelClick)if(c&&(F(a.target,"isTracker")||F(a.target.parentNode,"isTracker"))){var d=c.plotX,e=c.plotY;S(c,{pageX:Ma.left+G+(X?la-e:d),pageY:Ma.top+H+(X?ia-d:e)});aa(c.series,"click",S(a,{point:c}));c.firePointEvent("click",a)}else{var f=c=a,g={xAxis:[],yAxis:[]};r(Ba,function(a){var b=a.translate,c=a.isXAxis;g[c?"xAxis":"yAxis"].push({axis:a,value:b((X?!c:c)?f.chartX-G:ia-f.chartY+H,!0)})});S(c,g);Ha(a.chartX-G,a.chartY-H)&&aa(m,"click",a)}};S(this,{zoomX:n,zoomY:p,resetTracker:c,normalizeMouseEvent:b,
destroy:function(){m.trackerGroup&&(m.trackerGroup=nb=m.trackerGroup.destroy());Pa(Q,"mouseleave",f);Pa(A,"mousemove",e);Q.onclick=Q.onmousedown=Q.onmousemove=Q.ontouchstart=Q.ontouchend=Q.ontouchmove=null}})}function e(a){var b=a.type||t.type||t.defaultSeriesType,c=pa[b],d=m.hasRendered;d&&(X&&"column"===b?c=pa.bar:!X&&"bar"===b&&(c=pa.column));b=new c;b.init(m,a);!d&&b.inverted&&(X=!0);b.isCartesian&&(Qb=b.isCartesian);Z.push(b);return b}function g(){!1!==t.alignTicks&&r(Ba,function(a){a.adjustTickAmount()});
fb=null}function f(a){var b=m.isDirtyLegend,c,d=m.isDirtyBox,e=Z.length,f=e,h=m.clipRect;for(Nb(a,m);f--;)if(a=Z[f],a.isDirty&&a.options.stacking){c=!0;break}if(c)for(f=e;f--;)if(a=Z[f],a.options.stacking)a.isDirty=!0;r(Z,function(a){a.isDirty&&"point"===a.options.legendType&&(b=!0)});b&&Ja.renderLegend&&(Ja.renderLegend(),m.isDirtyLegend=!1);Qb&&(Rb||(fb=null,r(Ba,function(a){a.setScale()})),g(),ac(),r(Ba,function(a){a.isDirtyExtremes&&(a.isDirtyExtremes=!1,aa(a,"afterSetExtremes",a.getExtremes()));
if(a.isDirty||d||c)a.redraw(),d=!0}));d&&(ub(),h&&(Sb(h),h.animate({width:m.plotSizeX,height:m.plotSizeY+1})));r(Z,function(a){a.isDirty&&a.visible&&(!a.isCartesian||a.xAxis)&&a.redraw()});xb&&xb.resetTracker&&xb.resetTracker(!0);P.draw();aa(m,"redraw")}function h(a,b){C=B(n.title,a);D=B(n.subtitle,b);r([["title",a,C],["subtitle",b,D]],function(a){var b=a[0],c=m[b],d=a[1];a=a[2];c&&d&&(c=c.destroy());a&&a.text&&!c&&(m[b]=P.text(a.text,0,0,a.useHTML).attr({align:a.align,"class":kb+b,zIndex:a.zIndex||
4}).css(a.style).add().align(a,!1,N))})}function j(){function a(c){var d=t.width||Na.offsetWidth,e=t.height||Na.offsetHeight;c=c?c.target:ca;if(d&&e&&(c===ca||c===A)){if(d!==va||e!==qa)clearTimeout(b),b=setTimeout(function(){Ab(d,e,!1)},100);va=d;qa=e}}var b;ma(ca,"resize",a);ma(m,"destroy",function(){Pa(ca,"resize",a)})}function l(){m&&aa(m,"endResize",null,function(){Rb-=1})}function k(){var a=n.labels,b=n.credits,c;h();Ja=m.legend=new Vb;r(Ba,function(a){a.setScale()});ac();fb=null;r(Ba,function(a){a.setTickPositions(!0);
a.setMaxTicks()});g();ac();ub();Qb&&r(Ba,function(a){a.render()});m.seriesGroup||(m.seriesGroup=P.g("series-group").attr({zIndex:3}).add());r(Z,function(a){a.translate();a.setTooltipPoints();a.render()});a.items&&r(a.items,function(){var b=S(a.style,this.style),c=W(b.left)+G,d=W(b.top)+H+12;delete b.left;delete b.top;P.text(this.html,c,d).attr({zIndex:2}).css(b).add()});b.enabled&&!m.credits&&(c=b.href,m.credits=P.text(b.text,0,0).on("click",function(){c&&(location.href=c)}).attr({align:b.position.align,
zIndex:8}).css(b.style).add().align(b.position));m.hasRendered=!0}function p(){if(!Tb&&ca==ca.top&&"complete"!==A.readyState||$a&&!ca.canvg)$a?Gc.push(p,n.global.canvasToolsURL):A.attachEvent("onreadystatechange",function(){A.detachEvent("onreadystatechange",p);"complete"===A.readyState&&p()});else{Na=t.renderTo;Ia=kb+rc++;Bb(Na)&&(Na=A.getElementById(Na));Na||nc(13,!0);Na.innerHTML="";Na.offsetWidth||(T=Na.cloneNode(0),O(T,{position:yb,top:"-9999px",display:"block"}),A.body.appendChild(T));va=(T||
Na).offsetWidth;qa=(T||Na).offsetHeight;m.chartWidth=ta=t.width||va||600;m.chartHeight=sa=t.height||(19<qa?qa:400);m.container=Q=wa(Sa,{className:kb+"container"+(t.className?" "+t.className:""),id:Ia},S({position:sc,overflow:ab,width:ta+ha,height:sa+ha,textAlign:"left",lineHeight:"normal"},t.style),T||Na);m.renderer=P=t.forExport?new Fb(Q,ta,sa,!0):new bc(Q,ta,sa);$a&&P.create(m,Q,ta,sa);aa(m,"init");Highcharts.RangeSelector&&n.rangeSelector.enabled&&(m.rangeSelector=new Highcharts.RangeSelector(m));
vb();wb();for(var a=X||t.inverted||"bar"===t.type||"bar"===t.defaultSeriesType,f=n.series,h=f&&f.length;!a&&h--;)"bar"===f[h].type&&(a=!0);m.inverted=X=a;a=n.xAxis||{};f=n.yAxis||{};a=Hb(a);r(a,function(a,b){a.index=b;a.isX=!0});f=Hb(f);r(f,function(a,b){a.index=b});a=a.concat(f);r(a,function(a){new c(a)});g();r(n.series||[],function(a){e(a)});if(Highcharts.Scroller&&(n.navigator.enabled||n.scrollbar.enabled))m.scroller=new Highcharts.Scroller(m);m.render=k;m.tracker=xb=new d(n.tooltip);k();P.draw();
b&&b.apply(m,[m]);r(m.callbacks,function(a){a.apply(m,[m])});T&&(Na.appendChild(Q),Yb(T));aa(m,"load")}}var n,q=a.series;a.series=null;n=B(na,a);n.series=a.series=q;var t=n.chart,q=t.margin,q=ob(q)?q:[q,q,q,q],s=u(t.marginTop,q[0]),J=u(t.marginRight,q[1]),E=u(t.marginBottom,q[2]),R=u(t.marginLeft,q[3]),L=t.spacingTop,z=t.spacingRight,bb=t.spacingBottom,w=t.spacingLeft,N,C,D,H,$,ea,G,ja,Na,T,Q,Ia,va,qa,ta,sa,Ra,Qa,fa,ba,Ua,La,m=this,xa=(q=t.events)&&!!q.click,Da,Ha,Fa,cb,zb,rb,mb,ia,la,xb,nb,Ja,Ga,
lb,Ma,Qb=t.showAxes,Rb=0,Ba=[],fb,Z=[],X,P,pb,Db,tb,ub,ac,vb,wb,Ab,Cb,Jb,Vb=function(){function a(b,c){var d=b.legendItem,e=b.legendLine,g=b.legendSymbol,h=q.color,j=c?f.itemStyle.color:h,h=c?b.color:h;d&&d.css({fill:j});e&&e.attr({stroke:h});g&&g.attr({stroke:h,fill:h})}function b(a){var c=a.legendItem,d=a.legendLine,e=a._legendItemPos,f=e[0],e=e[1],g=a.legendSymbol;a=a.checkbox;c&&c.attr({x:t?f:Ga-f,y:e});d&&d.translate(t?f:Ga-f,e-4);g&&(c=f+g.xOff,g.attr({x:t?c:Ga-c,y:e+g.yOff}));a&&(a.x=f,a.y=
e)}function c(){r(k,function(a){var b=a.checkbox,c=y.alignAttr;b&&O(b,{left:c.translateX+a.legendItemWidth+b.x-40+ha,top:c.translateY+b.y-11+ha})})}function d(b){var c,e,k,l,m=b.legendItem;l=b.series||b;var r=l.options,E=r&&r.borderWidth||0;if(!m){l=/^(bar|pie|area|column)$/.test(l.type);b.legendItem=m=P.text(f.labelFormatter.call(b),0,0,f.useHTML).css(b.visible?n:q).on("mouseover",function(){b.setState(ua);m.css(p)}).on("mouseout",function(){m.css(b.visible?n:q);b.setState()}).on("click",function(){var a=
function(){b.setVisible()};b.firePointEvent?b.firePointEvent("legendItemClick",null,a):aa(b,"legendItemClick",null,a)}).attr({align:t?"left":"right",zIndex:2}).add(y);if(!l&&r&&r.lineWidth){var ka={"stroke-width":r.lineWidth,zIndex:2};r.dashStyle&&(ka.dashstyle=r.dashStyle);b.legendLine=P.path([Aa,(-h-j)*(t?1:-1),0,ga,-j*(t?1:-1),0]).attr(ka).add(y)}l?(k=P.rect(c=-h-j,e=-11,h,12,2).attr({zIndex:3}).add(y),t||(c+=h)):r&&(r.marker&&r.marker.enabled)&&(k=r.marker.radius,k=P.symbol(b.symbol,c=-h/2-j-
k,e=-4-k,2*k,2*k).attr(b.pointAttr[Ca]).attr({zIndex:3}).add(y),t||(c+=h/2));k&&(k.xOff=c+E%2/2,k.yOff=e+E%2/2);b.legendSymbol=k;a(b,b.visible);r&&r.showCheckbox&&(b.checkbox=wa("input",{type:"checkbox",checked:b.selected,defaultChecked:b.selected},f.itemCheckboxStyle,Q),ma(b.checkbox,"click",function(a){aa(b,"checkboxClick",{checked:a.target.checked},function(){b.select()})}))}c=m.getBBox();e=b.legendItemWidth=f.itemWidth||h+j+c.width+s;H=c.height;if(g&&D-$+e>(F||ta-2*s-$))D=$,v+=u+H+J;!g&&v+f.y+
H>sa-L-bb&&(v=R,D+=z,z=0);z=Y(z,e);w=Y(w,v+J);b._legendItemPos=[D,v];g?D+=e:v+=u+H+J;A=F||Y(D-$+(g?0:e),A)}function e(){D=$;v=R;w=A=0;y||(y=P.g("legend").attr({zIndex:7}).add());k=[];r(T,function(a){var b=a.options;b.showInLegend&&(k=k.concat(a.legendItems||("point"===b.legendType?a.data:a)))});var a=k,g=a.length,h,j;for(j=0;j<g;j++)a[j].ss_i=j;a.sort(function(a,b){h=(a.options.legendIndex||0)-(b.options.legendIndex||0);return 0===h?a.ss_i-b.ss_i:h});for(j=0;j<g;j++)delete a[j].ss_i;V&&k.reverse();
r(k,d);Ga=F||A;lb=w-E+H;if(C||ea)Ga+=2*s,lb+=2*s,G?0<Ga&&0<lb&&(G[G.isNew?"attr":"animate"](G.crisp(null,null,null,Ga,lb)),G.isNew=!1):(G=P.rect(0,0,Ga,lb,f.borderRadius,C||0).attr({stroke:f.borderColor,"stroke-width":C||0,fill:ea||Ka}).add(y).shadow(f.shadow),G.isNew=!0),G[k.length?"show":"hide"]();r(k,b);a=["left","right","top","bottom"];for(j=4;j--;)g=a[j],l[g]&&"auto"!==l[g]&&(f[2>j?"align":"verticalAlign"]=g,f[2>j?"x":"y"]=W(l[g])*(j%2?-1:1));k.length&&y.align(S(f,{width:Ga,height:lb}),!0,N);
Rb||c()}var f=m.options.legend;if(f.enabled){var g="horizontal"===f.layout,h=f.symbolWidth,j=f.symbolPadding,k,l=f.style,n=f.itemStyle,p=f.itemHoverStyle,q=B(n,f.itemHiddenStyle),s=f.padding||W(l.padding),t=!f.rtl,u=f.itemMarginTop||0,J=f.itemMarginBottom||0,E=18,z=0,$=4+s+h+j,R=s+u+E-5,D,v,w,H=0,G,C=f.borderWidth,ea=f.backgroundColor,y,A,F=f.width,T=m.series,V=f.reversed;e();ma(m,"endResize",c);return{colorizeItem:a,destroyItem:function(a){var b=a.checkbox;r(["legendItem","legendLine","legendSymbol"],
function(b){a[b]&&a[b].destroy()});b&&Yb(a.checkbox)},renderLegend:e,destroy:function(){G&&(G=G.destroy());y&&(y=y.destroy())}}}};Ha=function(a,b){return 0<=a&&a<=la&&0<=b&&b<=ia};Jb=function(){var a=m.resetZoomButton;aa(m,"selection",{resetSelection:!0},Cb);a&&(m.resetZoomButton=a.destroy())};Cb=function(a){var b;if(!1!==m.resetZoomEnabled&&!m.resetZoomButton){var c=na.lang,d=t.resetZoomButton,e=d.theme,g=e.states,h="chart"===d.relativeTo?null:{x:G,y:H,width:la,height:ia};m.resetZoomButton=P.button(c.resetZoom,
null,null,Jb,e,g&&g.hover).attr({align:d.position.align,title:c.resetZoomTitle}).add().align(d.position,!1,h)}!a||a.resetSelection?r(Ba,function(a){!1!==a.options.zoomEnabled&&(a.setExtremes(null,null,!1),b=!0)}):r(a.xAxis.concat(a.yAxis),function(a){var c=a.axis;if(m.tracker[c.isXAxis?"zoomX":"zoomY"])c.setExtremes(a.min,a.max,!1),b=!0});b&&f(u(t.animation,100>m.pointCount))};m.pan=function(a){var b=m.xAxis[0],c=m.mouseDownX,d=b.pointRange/2,e=b.getExtremes(),f=b.translate(c-a,!0)+d,c=b.translate(c+
la-a,!0)-d;(d=m.hoverPoints)&&r(d,function(a){a.setState()});f>Wa(e.dataMin,e.min)&&c<Y(e.dataMax,e.max)&&b.setExtremes(f,c,!0,!1);m.mouseDownX=a;O(Q,{cursor:"move"})};ac=function(){var a=n.legend,b=u(a.margin,10),c=a.x,d=a.y,e=a.align,f=a.verticalAlign,g;vb();if((m.title||m.subtitle)&&!v(s))(g=Y(m.title&&!C.floating&&!C.verticalAlign&&C.y||0,m.subtitle&&!D.floating&&!D.verticalAlign&&D.y||0))&&(H=Y(H,g+u(C.margin,15)+L));a.enabled&&!a.floating&&("right"===e?v(J)||($=Y($,Ga-c+b+z)):"left"===e?v(R)||
(G=Y(G,Ga+c+b+w)):"top"===f?v(s)||(H=Y(H,lb+d+b+L)):"bottom"===f&&(v(E)||(ea=Y(ea,lb-d+b+bb))));m.extraBottomMargin&&(ea+=m.extraBottomMargin);m.extraTopMargin&&(H+=m.extraTopMargin);Qb&&r(Ba,function(a){a.getOffset()});v(R)||(G+=ja[3]);v(s)||(H+=ja[0]);v(E)||(ea+=ja[2]);v(J)||($+=ja[1]);wb()};Ab=function(a,b,c){var d=m.title,e=m.subtitle;Rb+=1;Nb(c,m);Qa=sa;Ra=ta;v(a)&&(m.chartWidth=ta=y(a));v(b)&&(m.chartHeight=sa=y(b));O(Q,{width:ta+ha,height:sa+ha});P.setSize(ta,sa,c);la=ta-G-$;ia=sa-H-ea;fb=
null;r(Ba,function(a){a.isDirty=!0;a.setScale()});r(Z,function(a){a.isDirty=!0});m.isDirtyLegend=!0;m.isDirtyBox=!0;ac();d&&d.align(null,null,N);e&&e.align(null,null,N);f(c);Qa=null;aa(m,"resize");!1===Zb?l():setTimeout(l,Zb&&Zb.duration||500)};wb=function(){m.plotLeft=G=y(G);m.plotTop=H=y(H);m.plotWidth=la=y(ta-G-$);m.plotHeight=ia=y(sa-H-ea);m.plotSizeX=X?ia:la;m.plotSizeY=X?la:ia;N={x:w,y:L,width:ta-w-z,height:sa-L-bb};r(Ba,function(a){a.setAxisSize();a.setAxisTranslation()})};vb=function(){H=
u(s,L);$=u(J,z);ea=u(E,bb);G=u(R,w);ja=[0,0,0,0]};ub=function(){var a=t.borderWidth||0,b=t.backgroundColor,c=t.plotBackgroundColor,d=t.plotBackgroundImage,e,f={x:G,y:H,width:la,height:ia};e=a+(t.shadow?8:0);if(a||b)fa?fa.animate(fa.crisp(null,null,null,ta-e,sa-e)):fa=P.rect(e/2,e/2,ta-e,sa-e,t.borderRadius,a).attr({stroke:t.borderColor,"stroke-width":a,fill:b||Ka}).add().shadow(t.shadow);c&&(ba?ba.animate(f):ba=P.rect(G,H,la,ia,0).attr({fill:c}).add().shadow(t.plotShadow));d&&(Ua?Ua.animate(f):Ua=
P.image(d,G,H,la,ia).add());t.plotBorderWidth&&(La?La.animate(La.crisp(null,G,H,la,ia)):La=P.rect(G,H,la,ia,0,t.plotBorderWidth).attr({stroke:t.plotBorderColor,"stroke-width":t.plotBorderWidth,zIndex:4}).add());m.isDirtyBox=!1};!1!==t.reflow&&ma(m,"load",j);if(q)for(Da in q)ma(m,Da,q[Da]);m.options=n;m.series=Z;m.xAxis=[];m.yAxis=[];m.addSeries=function(a,b,c){var d;a&&(Nb(c,m),b=u(b,!0),aa(m,"addSeries",{options:a},function(){d=e(a);d.isDirty=!0;m.isDirtyLegend=!0;b&&m.redraw()}));return d};m.animation=
$a?!1:u(t.animation,!0);m.Axis=c;m.destroy=function(){var a,b=Q&&Q.parentNode;if(null!==m){aa(m,"destroy");Pa(m);for(a=Ba.length;a--;)Ba[a]=Ba[a].destroy();for(a=Z.length;a--;)Z[a]=Z[a].destroy();r("title subtitle seriesGroup clipRect credits tracker scroller rangeSelector".split(" "),function(a){var b=m[a];b&&(m[a]=b.destroy())});r([fa,La,ba,Ja,Fa,P,xb],function(a){a&&a.destroy&&a.destroy()});fa=La=ba=Ja=Fa=P=xb=null;Q&&(Q.innerHTML="",Pa(Q),b&&Yb(Q),Q=null);clearInterval(Db);for(a in m)delete m[a];
n=m=null}};m.get=function(a){var b,c,d;for(b=0;b<Ba.length;b++)if(Ba[b].options.id===a)return Ba[b];for(b=0;b<Z.length;b++)if(Z[b].options.id===a)return Z[b];for(b=0;b<Z.length;b++){d=Z[b].points||[];for(c=0;c<d.length;c++)if(d[c].id===a)return d[c]}return null};m.getSelectedPoints=function(){var a=[];r(Z,function(b){a=a.concat(tc(b.points,function(a){return a.selected}))});return a};m.getSelectedSeries=function(){return tc(Z,function(a){return a.selected})};m.hideLoading=function(){zb&&ic(zb,{opacity:0},
{duration:n.loading.hideDuration||100,complete:function(){O(zb,{display:Ka})}});mb=!1};m.initSeries=e;m.isInsidePlot=Ha;m.redraw=f;m.setSize=Ab;m.setTitle=h;m.showLoading=function(a){var b=n.loading;zb||(zb=wa(Sa,{className:kb+"loading"},S(b.style,{left:G+ha,top:H+ha,width:la+ha,height:ia+ha,zIndex:10,display:Ka}),Q),rb=wa("span",null,b.labelStyle,zb));rb.innerHTML=a||n.lang.loading;mb||(O(zb,{opacity:0,display:""}),ic(zb,{opacity:b.style.opacity},{duration:b.showDuration||0}),mb=!0)};m.pointCount=
0;m.counters=new zc;p()}var V,A=document,ca=window,ra=Math,y=ra.round,Va=ra.floor,dc=ra.ceil,Y=ra.max,Wa=ra.min,Ea=ra.abs,T=ra.cos,Qa=ra.sin,Da=ra.PI,Ic=2*Da/360,Ha=navigator.userAgent,Db=/msie/i.test(Ha)&&!ca.opera,cb=8===A.documentMode,Jc=/AppleWebKit/.test(Ha),Kc=/Firefox/.test(Ha),Tb=!!A.createElementNS&&!!A.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,Vc=Kc&&4>parseInt(Ha.split("Firefox/")[1],10),$a=!Tb&&!Db&&!!A.createElement("canvas").getContext,bc,Za=A.documentElement.ontouchstart!==
V,Lc={},rc=0,wb,na,hc,Zb,mb,da,Sa="div",yb="absolute",sc="relative",ab="hidden",kb="highcharts-",eb="visible",ha="px",Ka="none",Aa="M",ga="L",Mc="rgba(192,192,192,"+(Tb?1E-6:0.0020)+")",Ca="",ua="hover",pc="millisecond",cc="second",Ub="minute",Ib="hour",gb="day",Wb="week",Kb="month",sb="year",vb,Jb,Vb,mc,rb,tb,ub,vc,wc,lc,xc,yc,w=ca.HighchartsAdapter,Ia=w||{},Nc=Ia.getScript,r=Ia.each,tc=Ia.grep,Ec=Ia.offset,$b=Ia.map,B=Ia.merge,ma=Ia.addEvent,Pa=Ia.removeEvent,aa=Ia.fireEvent,Fc=Ia.washMouseEvent,
ic=Ia.animate,Sb=Ia.stop,pa={};ca.Highcharts={};hc=function(a,b,c){if(!v(b)||isNaN(b))return"Invalid date";a=u(a,"%Y-%m-%d %H:%M:%S");var d=new Date(b),e,g=d[Vb](),f=d[mc](),h=d[rb](),j=d[tb](),l=d[ub](),k=na.lang,p=k.weekdays;b={a:p[f].substr(0,3),A:p[f],d:La(h),e:h,b:k.shortMonths[j],B:k.months[j],m:La(j+1),y:l.toString().substr(2,2),Y:l,H:La(g),I:La(g%12||12),l:g%12||12,M:La(d[Jb]()),p:12>g?"AM":"PM",P:12>g?"am":"pm",S:La(d.getSeconds()),L:La(y(b%1E3),3)};for(e in b)a=a.replace("%"+e,b[e]);return c?
a.substr(0,1).toUpperCase()+a.substr(1):a};zc.prototype={wrapColor:function(a){this.color>=a&&(this.color=0)},wrapSymbol:function(a){this.symbol>=a&&(this.symbol=0)}};da=fa(pc,1,cc,1E3,Ub,6E4,Ib,36E5,gb,864E5,Wb,6048E5,Kb,2592E6,sb,31556952E3);mb={init:function(a,b,c){b=b||"";var d=a.shift,e=-1<b.indexOf("C"),g=e?7:3,f;b=b.split(" ");c=[].concat(c);var h,j,l=function(a){for(f=a.length;f--;)a[f]===Aa&&a.splice(f+1,0,a[f+1],a[f+2],a[f+1],a[f+2])};e&&(l(b),l(c));a.isArea&&(h=b.splice(b.length-6,6),j=
c.splice(c.length-6,6));if(d<=c.length/g)for(;d--;)c=[].concat(c).splice(0,g).concat(c);a.shift=0;if(b.length)for(a=c.length;b.length<a;)d=[].concat(b).splice(b.length-g,g),e&&(d[g-6]=d[g-2],d[g-5]=d[g-1]),b=b.concat(d);h&&(b=b.concat(h),c=c.concat(j));return[b,c]},step:function(a,b,c,d){var e=[],g=a.length;if(1===c)e=d;else if(g===b.length&&1>c)for(;g--;)d=parseFloat(a[g]),e[g]=isNaN(d)?a[g]:c*parseFloat(b[g]-d)+d;else e=b;return e}};w&&w.init&&w.init(mb);if(!w&&ca.jQuery){var va=jQuery,Nc=va.getScript,
r=function(a,b){for(var c=0,d=a.length;c<d;c++)if(!1===b.call(a[c],a[c],c,a))return c},tc=va.grep,$b=function(a,b){for(var c=[],d=0,e=a.length;d<e;d++)c[d]=b.call(a[d],a[d],d,a);return c},B=function(){var a=arguments;return va.extend(!0,null,a[0],a[1],a[2],a[3])},Ec=function(a){return va(a).offset()},ma=function(a,b,c){va(a).bind(b,c)},Pa=function(a,b,c){var d=A.removeEventListener?"removeEventListener":"detachEvent";A[d]&&!a[d]&&(a[d]=function(){});va(a).unbind(b,c)},aa=function(a,b,c,d){var e=va.Event(b),
g="detached"+b,f;S(e,c);a[b]&&(a[g]=a[b],a[b]=null);r(["preventDefault","stopPropagation"],function(a){var b=e[a];e[a]=function(){try{b.call(e)}catch(c){"preventDefault"===a&&(f=!0)}}});va(a).trigger(e);a[g]&&(a[b]=a[g],a[g]=null);d&&!e.isDefaultPrevented()&&!f&&d(e)},Fc=function(a){return a},ic=function(a,b,c){var d=va(a);b.d&&(a.toD=b.d,b.d=1);d.stop();d.animate(b,c)},Sb=function(a){va(a).stop()};va.extend(va.easing,{easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c}});var Oc=jQuery.fx,Pc=
Oc.step;r(["cur","_default","width","height"],function(a,b){var c=b?Pc:Oc.prototype,d=c[a],e;d&&(c[a]=function(a){a=b?a:this;e=a.elem;return e.attr?e.attr(a.prop,a.now):d.apply(this,arguments)})});Pc.d=function(a){var b=a.elem;if(!a.started){var c=mb.init(b,b.d,b.toD);a.start=c[0];a.end=c[1];a.started=!0}b.attr("d",mb.step(a.start,a.end,a.pos,b.toD))}}w={enabled:!0,align:"center",x:0,y:15,style:{color:"#666",fontSize:"11px",lineHeight:"14px"}};na={colors:"#4572A7 #AA4643 #89A54E #80699B #3D96AE #DB843D #92A8CD #A47D7C #B5CA92".split(" "),
symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),decimalPoint:".",resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/2.2.3/modules/canvas-tools.js"},
chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",y:15,style:{color:"#3E576F",fontSize:"16px"}},subtitle:{text:"",align:"center",
y:30,style:{color:"#6D869F"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1E3},events:{},lineWidth:2,shadow:!0,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:B(w,{enabled:!1,y:-6,formatter:function(){return this.y}}),cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0}},labels:{style:{position:yb,
color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderWidth:1,borderColor:"#909090",borderRadius:5,shadow:!1,style:{padding:"5px"},itemStyle:{cursor:"pointer",color:"#3E576F"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#C0C0C0"},itemCheckboxStyle:{position:yb,width:"13px",height:"13px"},symbolWidth:16,symbolPadding:5,verticalAlign:"bottom",x:0,y:0},loading:{labelStyle:{fontWeight:"bold",position:sc,top:"1em"},style:{position:yb,
backgroundColor:"white",opacity:0.5,textAlign:"center"}},tooltip:{enabled:!0,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:2,borderRadius:5,headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',shadow:!0,shared:$a,snap:Za?25:10,style:{color:"#333333",fontSize:"12px",padding:"5px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",
x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"10px"}}};var fc={dateTimeLabelFormats:fa(pc,"%H:%M:%S.%L",cc,"%H:%M:%S",Ub,"%H:%M",Ib,"%H:%M",gb,"%e. %b",Wb,"%e. %b",Kb,"%b '%y",sb,"%Y"),endOnTick:!1,gridLineColor:"#C0C0C0",labels:w,lineColor:"#C0D0E0",lineWidth:1,max:null,min:null,minPadding:0.01,maxPadding:0.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,
tickColor:"#C0D0E0",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#6D869F",fontWeight:"bold"}},type:"linear"},qc=B(fc,{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{align:"right",x:-8,y:3},lineWidth:0,maxPadding:0.05,minPadding:0.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Y-values"},stackLabels:{enabled:!1,formatter:function(){return this.total},style:w.style}}),Uc={labels:{align:"right",
x:-8,y:null},title:{rotation:270}},Tc={labels:{align:"left",x:8,y:null},title:{rotation:90}},Dc={labels:{align:"center",x:0,y:14},title:{rotation:0}},Sc=B(Dc,{labels:{y:-5,overflow:"justify"}}),qa=na.plotOptions,w=qa.line;qa.spline=B(w);qa.scatter=B(w,{lineWidth:0,states:{hover:{lineWidth:0}},tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}});qa.area=B(w,{threshold:0});qa.areaspline=
B(qa.area);qa.column=B(w,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:0.2,marker:null,pointPadding:0.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:0.1,shadow:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{y:null,verticalAlign:null},threshold:0});qa.bar=B(qa.column,{dataLabels:{align:"left",x:5,y:null,verticalAlign:"middle"}});qa.pie=B(w,{borderColor:"#FFFFFF",borderWidth:1,center:["50%","50%"],colorByPoint:!0,dataLabels:{distance:30,
enabled:!0,formatter:function(){return this.point.name},y:5},legendType:"point",marker:null,size:"75%",showInLegend:!1,slicedOffset:10,states:{hover:{brightness:0.1,shadow:!1}}});Bc();var Ua=function(a){var b=[],c;(c=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(a))?b=[W(c[1]),W(c[2]),W(c[3]),parseFloat(c[4],10)]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))&&(b=[W(c[1],16),W(c[2],16),W(c[3],16),1]);return{get:function(c){return b&&
!isNaN(b[0])?"rgb"===c?"rgb("+b[0]+","+b[1]+","+b[2]+")":"a"===c?b[3]:"rgba("+b.join(",")+")":a},brighten:function(a){if(pb(a)&&0!==a){var c;for(c=0;3>c;c++)b[c]+=W(255*a),0>b[c]&&(b[c]=0),255<b[c]&&(b[c]=255)}return this},setOpacity:function(a){b[3]=a;return this}}};xa.prototype={init:function(a,b){this.element="span"===b?wa(b):A.createElementNS("http://www.w3.org/2000/svg",b);this.renderer=a;this.attrSetters={}},animate:function(a,b,c){b=u(b,Zb,!0);Sb(this);b?(b=B(b),c&&(b.complete=c),ic(this,a,
b)):(this.attr(a),c&&c())},attr:function(a,b){var c,d,e,g,f=this.element,h=f.nodeName,j=this.renderer,l,k=this.attrSetters,p=this.shadows,n,q=this;Bb(a)&&v(b)&&(c=a,a={},a[c]=b);if(Bb(a))c=a,"circle"===h?c={x:"cx",y:"cy"}[c]||c:"strokeWidth"===c&&(c="stroke-width"),q=F(f,c)||this[c]||0,"d"!==c&&"visibility"!==c&&(q=parseFloat(q));else for(c in a)if(l=!1,d=a[c],e=k[c]&&k[c](d,c),!1!==e){e!==V&&(d=e);if("d"===c)d&&d.join&&(d=d.join(" ")),/(NaN| {2}|^$)/.test(d)&&(d="M 0 0"),this.d=d;else if("x"===c&&
"text"===h){for(e=0;e<f.childNodes.length;e++)g=f.childNodes[e],F(g,"x")===F(f,"x")&&F(g,"x",d);this.rotation&&F(f,"transform","rotate("+this.rotation+" "+d+" "+W(a.y||F(f,"y"))+")")}else if("fill"===c)d=j.color(d,f,c);else if("circle"===h&&("x"===c||"y"===c))c={x:"cx",y:"cy"}[c]||c;else if("rect"===h&&"r"===c)F(f,{rx:d,ry:d}),l=!0;else if("translateX"===c||"translateY"===c||"rotation"===c||"verticalAlign"===c)this[c]=d,this.updateTransform(),l=!0;else if("stroke"===c)d=j.color(d,f,c);else if("dashstyle"===
c)if(c="stroke-dasharray",d=d&&d.toLowerCase(),"solid"===d)d=Ka;else{if(d){d=d.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(e=d.length;e--;)d[e]=W(d[e])*a["stroke-width"];d=d.join(",")}}else"isTracker"===c?this[c]=d:"width"===c?d=W(d):"align"===c?(c="text-anchor",d={left:"start",center:"middle",right:"end"}[d]):
"title"===c&&((e=f.getElementsByTagName("title")[0])||(e=A.createElementNS("http://www.w3.org/2000/svg","title"),f.appendChild(e)),e.textContent=d);"strokeWidth"===c&&(c="stroke-width");Jc&&"stroke-width"===c&&0===d&&(d=1E-6);this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(c)&&(n||(this.symbolAttr(a),n=!0),l=!0);if(p&&/^(width|height|visibility|x|y|d|transform)$/.test(c))for(e=p.length;e--;)F(p[e],c,d);if(("width"===c||"height"===c)&&"rect"===h&&0>d)d=0;"text"===c?(this.textStr=
d,this.added&&j.buildText(this)):l||F(f,c,d)}if(Jc&&/Chrome\/(18|19)/.test(Ha)&&"text"===h&&(a.x!==V||a.y!==V))c=f.parentNode,d=f.nextSibling,c&&(c.removeChild(f),d?c.insertBefore(f,d):c.appendChild(f));return q},symbolAttr:function(a){var b=this;r("x y r start end width height innerR anchorX anchorY".split(" "),function(c){b[c]=u(a[c],b[c])});b.attr({d:b.renderer.symbols[b.symbolName](b.x,b.y,b.width,b.height,b)})},clip:function(a){return this.attr("clip-path","url("+this.renderer.url+"#"+a.id+")")},
crisp:function(a,b,c,d,e){var g,f={},h={},j;a=a||this.strokeWidth||this.attr&&this.attr("stroke-width")||0;j=y(a)%2/2;h.x=Va(b||this.x||0)+j;h.y=Va(c||this.y||0)+j;h.width=Va((d||this.width||0)-2*j);h.height=Va((e||this.height||0)-2*j);h.strokeWidth=a;for(g in h)this[g]!==h[g]&&(this[g]=f[g]=h[g]);return f},css:function(a){var b=this.element,b=a&&a.width&&"text"===b.nodeName,c,d="",e=function(a,b){return"-"+b.toLowerCase()};a&&a.color&&(a.fill=a.color);this.styles=a=S(this.styles,a);if(Db&&!Tb)b&&
delete a.width,O(this.element,a);else{for(c in a)d+=c.replace(/([A-Z])/g,e)+":"+a[c]+";";this.attr({style:d})}b&&this.added&&this.renderer.buildText(this);return this},on:function(a,b){var c=b;Za&&"click"===a&&(a="touchstart",c=function(a){a.preventDefault();b()});this.element["on"+a]=c;return this},translate:function(a,b){return this.attr({translateX:a,translateY:b})},invert:function(){this.inverted=!0;this.updateTransform();return this},htmlCss:function(a){var b=this.element;if(b=a&&"SPAN"===b.tagName&&
a.width)delete a.width,this.textWidth=b,this.updateTransform();this.styles=S(this.styles,a);O(this.element,a);return this},htmlGetBBox:function(a){var b=this.element,c=this.bBox;if(!c||a)"text"===b.nodeName&&(b.style.position=yb),c=this.bBox={x:b.offsetLeft,y:b.offsetTop,width:b.offsetWidth,height:b.offsetHeight};return c},htmlUpdateTransform:function(){if(this.added){var a=this.renderer,b=this.element,c=this.translateX||0,d=this.translateY||0,e=this.x||0,g=this.y||0,f=this.textAlign||"left",h={left:0,
center:0.5,right:1}[f],j=f&&"left"!==f,l=this.shadows;if(c||d)O(b,{marginLeft:c,marginTop:d}),l&&r(l,function(a){O(a,{marginLeft:c+1,marginTop:d+1})});this.inverted&&r(b.childNodes,function(c){a.invertChild(c,b)});if("SPAN"===b.tagName){var k,p,l=this.rotation,n;k=0;var q=1,t=0,s;n=W(this.textWidth);var J=this.xCorr||0;s=this.yCorr||0;var E=[l,f,b.innerHTML,this.textWidth].join();E!==this.cTT&&(v(l)&&(k=l*Ic,q=T(k),t=Qa(k),O(b,{filter:l?["progid:DXImageTransform.Microsoft.Matrix(M11=",q,", M12=",
-t,", M21=",t,", M22=",q,", sizingMethod='auto expand')"].join(""):Ka})),k=u(this.elemWidth,b.offsetWidth),p=u(this.elemHeight,b.offsetHeight),k>n&&(O(b,{width:n+ha,display:"block",whiteSpace:"normal"}),k=n),n=a.fontMetrics(b.style.fontSize).b,s=0>q*t,J=(0>q&&-k)+t*n*(s?1-h:h),s=(0>t&&-p)-q*n*(l?s?h:1-h:1),j&&(J-=k*h*(0>q?-1:1),l&&(s-=p*h*(0>t?-1:1)),O(b,{textAlign:f})),this.xCorr=J,this.yCorr=s);O(b,{left:e+J+ha,top:g+s+ha});this.cTT=E}}else this.alignOnAdd=!0},updateTransform:function(){var a=this.translateX||
0,b=this.translateY||0,c=this.inverted,d=this.rotation,e=[];c&&(a+=this.attr("width"),b+=this.attr("height"));(a||b)&&e.push("translate("+a+","+b+")");c?e.push("rotate(90) scale(-1,1)"):d&&e.push("rotate("+d+" "+this.x+" "+this.y+")");e.length&&F(this.element,"transform",e.join(" "))},toFront:function(){var a=this.element;a.parentNode.appendChild(a);return this},align:function(a,b,c){a?(this.alignOptions=a,this.alignByTranslate=b,c||this.renderer.alignedObjects.push(this)):(a=this.alignOptions,b=
this.alignByTranslate);c=u(c,this.renderer);var d=a.align,e=a.verticalAlign,g=(c.x||0)+(a.x||0),f=(c.y||0)+(a.y||0),h={};/^(right|center)$/.test(d)&&(g+=(c.width-(a.width||0))/{right:1,center:2}[d]);h[b?"translateX":"x"]=y(g);/^(bottom|middle)$/.test(e)&&(f+=(c.height-(a.height||0))/({bottom:1,middle:2}[e]||1));h[b?"translateY":"y"]=y(f);this[this.placed?"animate":"attr"](h);this.placed=!0;this.alignAttr=h;return this},getBBox:function(a){var b,c,d=this.rotation;c=this.element;var e=d*Ic;if("http://www.w3.org/2000/svg"===
c.namespaceURI){try{b=c.getBBox?S({},c.getBBox()):{width:c.offsetWidth,height:c.offsetHeight}}catch(g){}if(!b||0>b.width)b={width:0,height:0};a=b.width;c=b.height;d&&(b.width=Ea(c*Qa(e))+Ea(a*T(e)),b.height=Ea(c*T(e))+Ea(a*Qa(e)))}else b=this.htmlGetBBox(a);return b},show:function(){return this.attr({visibility:eb})},hide:function(){return this.attr({visibility:ab})},add:function(a){var b=this.renderer,c=a||b,d=c.element||b.box,e=d.childNodes,g=this.element,f=F(g,"zIndex"),h;this.parentInverted=a&&
a.inverted;void 0!==this.textStr&&b.buildText(this);f&&(c.handleZ=!0,f=W(f));if(c.handleZ)for(c=0;c<e.length;c++)if(a=e[c],b=F(a,"zIndex"),a!==g&&(W(b)>f||!v(f)&&v(b))){d.insertBefore(g,a);h=!0;break}h||d.appendChild(g);this.added=!0;aa(this,"add");return this},safeRemoveChild:function(a){var b=a.parentNode;b&&b.removeChild(a)},destroy:function(){var a=this,b=a.element||{},c=a.shadows,d=a.box,e,g;b.onclick=b.onmouseout=b.onmouseover=b.onmousemove=null;Sb(a);a.clipPath&&(a.clipPath=a.clipPath.destroy());
if(a.stops){for(g=0;g<a.stops.length;g++)a.stops[g]=a.stops[g].destroy();a.stops=null}a.safeRemoveChild(b);c&&r(c,function(b){a.safeRemoveChild(b)});d&&d.destroy();Gb(a.renderer.alignedObjects,a);for(e in a)delete a[e];return null},empty:function(){for(var a=this.element,b=a.childNodes,c=b.length;c--;)a.removeChild(b[c])},shadow:function(a,b){var c=[],d,e,g=this.element,f=this.parentInverted?"(-1,-1)":"(1,1)";if(a){for(d=1;3>=d;d++)e=g.cloneNode(0),F(e,{isShadow:"true",stroke:"rgb(0, 0, 0)","stroke-opacity":0.05*
d,"stroke-width":7-2*d,transform:"translate"+f,fill:Ka}),b?b.element.appendChild(e):g.parentNode.insertBefore(e,g),c.push(e);this.shadows=c}return this}};var Fb=function(){this.init.apply(this,arguments)};Fb.prototype={Element:xa,init:function(a,b,c,d){var e=location,g;g=this.createElement("svg").attr({xmlns:"http://www.w3.org/2000/svg",version:"1.1"});a.appendChild(g.element);this.isSVG=!0;this.box=g.element;this.boxWrapper=g;this.alignedObjects=[];this.url=Db?"":e.href.replace(/#.*?$/,"").replace(/([\('\)])/g,
"\\$1");this.defs=this.createElement("defs").add();this.forExport=d;this.gradients={};this.setSize(b,c,!1);var f;Kc&&a.getBoundingClientRect&&(this.subPixelFix=b=function(){O(a,{left:0,top:0});f=a.getBoundingClientRect();O(a,{left:-(f.left-W(f.left))+ha,top:-(f.top-W(f.top))+ha})},b(),ma(ca,"resize",b))},destroy:function(){var a=this.defs;this.box=null;this.boxWrapper=this.boxWrapper.destroy();Mb(this.gradients||{});this.gradients=null;a&&(this.defs=a.destroy());Pa(ca,"resize",this.subPixelFix);return this.alignedObjects=
null},createElement:function(a){var b=new this.Element;b.init(this,a);return b},draw:function(){},buildText:function(a){for(var b=a.element,c=u(a.textStr,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g),d=b.childNodes,e=/style="([^"]+)"/,g=/href="([^"]+)"/,f=F(b,"x"),h=a.styles,j=h&&W(h.width),l=h&&h.lineHeight,k,h=d.length,p=[];h--;)b.removeChild(d[h]);
j&&!a.added&&this.box.appendChild(b);""===c[c.length-1]&&c.pop();r(c,function(c,d){var h,s=0,u;c=c.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");h=c.split("|||");r(h,function(c){if(""!==c||1===h.length){var n={},r=A.createElementNS("http://www.w3.org/2000/svg","tspan");e.test(c)&&F(r,"style",c.match(e)[1].replace(/(;| |^)color([ :])/,"$1fill$2"));g.test(c)&&(F(r,"onclick",'location.href="'+c.match(g)[1]+'"'),O(r,{cursor:"pointer"}));c=(c.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,
"<").replace(/&gt;/g,">");r.appendChild(A.createTextNode(c));s?n.dx=3:n.x=f;if(!s){if(d){!Tb&&a.renderer.forExport&&O(r,{display:"block"});u=ca.getComputedStyle&&W(ca.getComputedStyle(k,null).getPropertyValue("line-height"));if(!u||isNaN(u)){var z;if(!(z=l))if(!(z=k.offsetHeight))p[d]=b.getBBox().height,z=y(p[d]-(p[d-1]||0))||18;u=z}F(r,"dy",u)}k=r}F(r,n);b.appendChild(r);s++;if(j){c=c.replace(/-/g,"- ").split(" ");for(var v=[];c.length||v.length;)z=a.getBBox().width,n=z>j,!n||1===c.length?(c=v,v=
[],c.length&&(r=A.createElementNS("http://www.w3.org/2000/svg","tspan"),F(r,{dy:l||16,x:f}),b.appendChild(r),z>j&&(j=z))):(r.removeChild(r.firstChild),v.unshift(c.pop())),c.length&&r.appendChild(A.createTextNode(c.join(" ").replace(/- /g,"-")))}}})})},button:function(a,b,c,d,e,g,f){var h=this.label(a,b,c),j=0,l,k,p,n,q;a={x1:0,y1:0,x2:0,y2:1};e=B(fa("stroke-width",1,"stroke","#999","fill",fa("linearGradient",a,"stops",[[0,"#FFF"],[1,"#DDD"]]),"r",3,"padding",3,"style",fa("color","black")),e);p=e.style;
delete e.style;g=B(e,fa("stroke","#68A","fill",fa("linearGradient",a,"stops",[[0,"#FFF"],[1,"#ACF"]])),g);n=g.style;delete g.style;f=B(e,fa("stroke","#68A","fill",fa("linearGradient",a,"stops",[[0,"#9BD"],[1,"#CDF"]])),f);q=f.style;delete f.style;ma(h.element,"mouseenter",function(){h.attr(g).css(n)});ma(h.element,"mouseleave",function(){l=[e,g,f][j];k=[p,n,q][j];h.attr(l).css(k)});h.setState=function(a){(j=a)?2===a&&h.attr(f).css(q):h.attr(e).css(p)};return h.on("click",function(){d.call(h)}).attr(e).css(S({cursor:"default"},
p))},crispLine:function(a,b){a[1]===a[4]&&(a[1]=a[4]=y(a[1])+b%2/2);a[2]===a[5]&&(a[2]=a[5]=y(a[2])+b%2/2);return a},path:function(a){return this.createElement("path").attr({d:a,fill:Ka})},circle:function(a,b,c){a=ob(a)?a:{x:a,y:b,r:c};return this.createElement("circle").attr(a)},arc:function(a,b,c,d,e,g){ob(a)&&(b=a.y,c=a.r,d=a.innerR,e=a.start,g=a.end,a=a.x);return this.symbol("arc",a||0,b||0,c||0,c||0,{innerR:d||0,start:e||0,end:g||0})},rect:function(a,b,c,d,e,g){ob(a)&&(b=a.y,c=a.width,d=a.height,
e=a.r,g=a.strokeWidth,a=a.x);e=this.createElement("rect").attr({rx:e,ry:e,fill:Ka});return e.attr(e.crisp(g,a,b,Y(c,0),Y(d,0)))},setSize:function(a,b,c){var d=this.alignedObjects,e=d.length;this.width=a;this.height=b;for(this.boxWrapper[u(c,!0)?"animate":"attr"]({width:a,height:b});e--;)d[e].align()},g:function(a){var b=this.createElement("g");return v(a)?b.attr({"class":kb+a}):b},image:function(a,b,c,d,e){var g={preserveAspectRatio:Ka};1<arguments.length&&S(g,{x:b,y:c,width:d,height:e});g=this.createElement("image").attr(g);
g.element.setAttributeNS?g.element.setAttributeNS("http://www.w3.org/1999/xlink","href",a):g.element.setAttribute("hc-svg-href",a);return g},symbol:function(a,b,c,d,e,g){var f,h=this.symbols[a],h=h&&h(y(b),y(c),d,e,g),j=/^url\((.*?)\)$/,l,k;h?(f=this.path(h),S(f,{symbolName:a,x:b,y:c,width:d,height:e}),g&&S(f,g)):j.test(a)&&(k=function(a,b){a.attr({width:b[0],height:b[1]});a.alignByTranslate||a.translate(-y(b[0]/2),-y(b[1]/2))},l=a.match(j)[1],a=Lc[l],f=this.image(l).attr({x:b,y:c}),a?k(f,a):(f.attr({width:0,
height:0}),wa("img",{onload:function(){k(f,Lc[l]=[this.width,this.height])},src:l})));return f},symbols:{circle:function(a,b,c,d){var e=0.166*c;return[Aa,a+c/2,b,"C",a+c+e,b,a+c+e,b+d,a+c/2,b+d,"C",a-e,b+d,a-e,b,a+c/2,b,"Z"]},square:function(a,b,c,d){return[Aa,a,b,ga,a+c,b,a+c,b+d,a,b+d,"Z"]},triangle:function(a,b,c,d){return[Aa,a+c/2,b,ga,a+c,b+d,a,b+d,"Z"]},"triangle-down":function(a,b,c,d){return[Aa,a,b,ga,a+c,b,a+c/2,b+d,"Z"]},diamond:function(a,b,c,d){return[Aa,a+c/2,b,ga,a+c,b+d/2,a+c/2,b+d,
a,b+d/2,"Z"]},arc:function(a,b,c,d,e){var g=e.start;c=e.r||c||d;var f=e.end-1E-6;d=e.innerR;var h=T(g),j=Qa(g),l=T(f),f=Qa(f);e=e.end-g<Da?0:1;return[Aa,a+c*h,b+c*j,"A",c,c,0,e,1,a+c*l,b+c*f,ga,a+d*l,b+d*f,"A",d,d,0,e,0,a+d*h,b+d*j,"Z"]}},clipRect:function(a,b,c,d){var e=kb+rc++,g=this.createElement("clipPath").attr({id:e}).add(this.defs);a=this.rect(a,b,c,d,0).add(g);a.id=e;a.clipPath=g;return a},color:function(a,b,c){var d,e=/^rgba/;if(a&&a.linearGradient){var g=this,f=a.linearGradient;b=!Cb(f);
c=g.gradients;var h,j=f.x1||f[0]||0,l=f.y1||f[1]||0,k=f.x2||f[2]||0,p=f.y2||f[3]||0,n,q,t=[b,j,l,k,p,a.stops.join(",")].join();c[t]?f=F(c[t].element,"id"):(f=kb+rc++,h=g.createElement("linearGradient").attr(S({id:f,x1:j,y1:l,x2:k,y2:p},b?null:{gradientUnits:"userSpaceOnUse"})).add(g.defs),h.stops=[],r(a.stops,function(a){e.test(a[1])?(d=Ua(a[1]),n=d.get("rgb"),q=d.get("a")):(n=a[1],q=1);a=g.createElement("stop").attr({offset:a[0],"stop-color":n,"stop-opacity":q}).add(h);h.stops.push(a)}),c[t]=h);
return"url("+this.url+"#"+f+")"}return e.test(a)?(d=Ua(a),F(b,c+"-opacity",d.get("a")),d.get("rgb")):(b.removeAttribute(c+"-opacity"),a)},text:function(a,b,c,d){var e=na.chart.style;if(d&&!this.forExport)return this.html(a,b,c);b=y(u(b,0));c=y(u(c,0));a=this.createElement("text").attr({x:b,y:c,text:a}).css({fontFamily:e.fontFamily,fontSize:e.fontSize});a.x=b;a.y=c;return a},html:function(a,b,c){var d=na.chart.style,e=this.createElement("span"),g=e.attrSetters,f=e.element,h=e.renderer;g.text=function(a){f.innerHTML=
a;return!1};g.x=g.y=g.align=function(a,b){"align"===b&&(b="textAlign");e[b]=a;e.htmlUpdateTransform();return!1};e.attr({text:a,x:y(b),y:y(c)}).css({position:yb,whiteSpace:"nowrap",fontFamily:d.fontFamily,fontSize:d.fontSize});e.css=e.htmlCss;h.isSVG&&(e.add=function(a){var b,c,d=h.box.parentNode;if(a){if(b=a.div,!b)b=a.div=wa(Sa,{className:F(a.element,"class")},{position:yb,left:a.attr("translateX")+ha,top:a.attr("translateY")+ha},d),c=b.style,S(a.attrSetters,{translateX:function(a){c.left=a+ha},
translateY:function(a){c.top=a+ha},visibility:function(a,b){c[b]=a}})}else b=d;b.appendChild(f);e.added=!0;e.alignOnAdd&&e.htmlUpdateTransform();return e});return e},fontMetrics:function(a){a=W(a||11);a=24>a?a+4:y(1.2*a);var b=y(0.8*a);return{h:a,b:b}},label:function(a,b,c,d,e,g,f,h,j){function l(){var a=q.styles,a=a&&a.textAlign,b=R*(1-E),c;c=h?0:D;if(v(L)&&("center"===a||"right"===a))b+={center:0.5,right:1}[a]*(L-u.width);(b!==t.x||c!==t.y)&&t.attr({x:b,y:c});t.x=b;t.y=c}function k(a,b){s?s.attr(a,
b):C[a]=b}function p(){q.attr({text:a,x:b,y:c,anchorX:e,anchorY:g})}var n=this,q=n.g(j),t=n.text("",0,0,f).attr({zIndex:1}).add(q),s,u,E=0,R=3,L,z,w,A,N=0,C={},D;f=q.attrSetters;ma(q,"add",p);f.width=function(a){L=a;return!1};f.height=function(a){z=a;return!1};f.padding=function(a){v(a)&&a!==R&&(R=a,l());return!1};f.align=function(a){E={left:0,center:0.5,right:1}[a];return!1};f.text=function(a,b){t.attr(b,a);var c;c=t.element.style;u=(void 0===L||void 0===z||q.styles.textAlign)&&t.getBBox(!0);q.width=
(L||u.width||0)+2*R;q.height=(z||u.height||0)+2*R;D=R+n.fontMetrics(c&&c.fontSize).b;s||(c=h?-D:0,q.box=s=d?n.symbol(d,-E*R,c,q.width,q.height):n.rect(-E*R,c,q.width,q.height,0,C["stroke-width"]),s.add(q));s.attr(B({width:q.width,height:q.height},C));C=null;l();return!1};f["stroke-width"]=function(a,b){N=a%2/2;k(b,a);return!1};f.stroke=f.fill=f.r=function(a,b){k(b,a);return!1};f.anchorX=function(a,b){e=a;k(b,a+N-w);return!1};f.anchorY=function(a,b){g=a;k(b,a-A);return!1};f.x=function(a){q.x=a;a-=
E*((L||u.width)+R);w=y(a);q.attr("translateX",w);return!1};f.y=function(a){A=q.y=y(a);q.attr("translateY",a);return!1};var H=q.css;return S(q,{css:function(a){if(a){var b={};a=B({},a);r("fontSize fontWeight fontFamily color lineHeight width".split(" "),function(c){a[c]!==V&&(b[c]=a[c],delete a[c])});t.css(b)}return H.call(q,a)},getBBox:function(){return s.getBBox()},shadow:function(a){s.shadow(a);return q},destroy:function(){Pa(q,"add",p);Pa(q.element,"mouseenter");Pa(q.element,"mouseleave");t&&(t=
t.destroy());xa.prototype.destroy.call(q)}})}};bc=Fb;var ba;!Tb&&!$a&&(ba={init:function(a,b){var c=["<",b,' filled="f" stroked="f"'],d=["position: ",yb,";"];("shape"===b||b===Sa)&&d.push("left:0;top:0;width:10px;height:10px;");cb&&d.push("visibility: ",b===Sa?ab:eb);c.push(' style="',d.join(""),'"/>');b&&(c=b===Sa||"span"===b||"img"===b?c.join(""):a.prepVML(c),this.element=wa(c));this.renderer=a;this.attrSetters={}},add:function(a){var b=this.renderer,c=this.element,d=b.box,d=a?a.element||a:d;a&&
a.inverted&&b.invertChild(c,d);cb&&d.gVis===ab&&O(c,{visibility:ab});d.appendChild(c);this.added=!0;this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform();aa(this,"add");return this},toggleChildren:function(a,b){for(var c=a.childNodes,d=c.length;d--;)O(c[d],{visibility:b}),"DIV"===c[d].nodeName&&this.toggleChildren(c[d],b)},updateTransform:xa.prototype.htmlUpdateTransform,attr:function(a,b){var c,d,e,g=this.element||{},f=g.style,h=g.nodeName,j=this.renderer,l=this.symbolName,k,p=this.shadows,
n,q=this.attrSetters,t=this;Bb(a)&&v(b)&&(c=a,a={},a[c]=b);if(Bb(a))c=a,t="strokeWidth"===c||"stroke-width"===c?this.strokeweight:this[c];else for(c in a)if(d=a[c],n=!1,e=q[c]&&q[c](d,c),!1!==e&&null!==d){e!==V&&(d=e);if(l&&/^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(c))k||(this.symbolAttr(a),k=!0),n=!0;else if("d"===c){d=d||[];this.d=d.join(" ");e=d.length;for(n=[];e--;)n[e]=pb(d[e])?y(10*d[e])-5:"Z"===d[e]?"x":d[e];d=n.join(" ")||"x";g.path=d;if(p)for(e=p.length;e--;)p[e].path=
d;n=!0}else"zIndex"===c||"visibility"===c?(cb&&("visibility"===c&&"DIV"===h)&&(g.gVis=d,this.toggleChildren(g,d),d===eb&&(d=null)),d&&(f[c]=d),n=!0):"width"===c||"height"===c?(d=Y(0,d),this[c]=d,this.updateClipping?(this[c]=d,this.updateClipping()):f[c]=d,n=!0):"x"===c||"y"===c?(this[c]=d,f[{x:"left",y:"top"}[c]]=d):"class"===c?g.className=d:"stroke"===c?(d=j.color(d,g,c),c="strokecolor"):"stroke-width"===c||"strokeWidth"===c?(g.stroked=d?!0:!1,c="strokeweight",this[c]=d,pb(d)&&(d+=ha)):"dashstyle"===
c?((g.getElementsByTagName("stroke")[0]||wa(j.prepVML(["<stroke/>"]),null,null,g))[c]=d||"solid",this.dashstyle=d,n=!0):"fill"===c?"SPAN"===h?f.color=d:(g.filled=d!==Ka?!0:!1,d=j.color(d,g,c),c="fillcolor"):"translateX"===c||"translateY"===c||"rotation"===c?(this[c]=d,this.updateTransform(),n=!0):"text"===c&&(this.bBox=null,g.innerHTML=d,n=!0);if(p&&"visibility"===c)for(e=p.length;e--;)p[e].style[c]=d;n||(cb?g[c]=d:F(g,c,d))}return t},clip:function(a){var b=this,c=a.members,d=b.element;c.push(b);
b.destroyClip=function(){Gb(c,b)};"highcharts-tracker"===d.parentNode.className&&!cb&&O(d,{visibility:ab});return b.css(a.getCSS(b.inverted))},css:xa.prototype.htmlCss,safeRemoveChild:function(a){a.parentNode&&Yb(a)},destroy:function(){this.destroyClip&&this.destroyClip();return xa.prototype.destroy.apply(this)},empty:function(){for(var a=this.element.childNodes,b=a.length,c;b--;)c=a[b],c.parentNode.removeChild(c)},on:function(a,b){this.element["on"+a]=function(){var a=ca.event;a.target=a.srcElement;
b(a)};return this},shadow:function(a,b){var c=[],d,e=this.element,g=this.renderer,f,h=e.style,j,l=e.path;l&&"string"!==typeof l.value&&(l="x");if(a){for(d=1;3>=d;d++)j=['<shape isShadow="true" strokeweight="',7-2*d,'" filled="false" path="',l,'" coordsize="100,100" style="',e.style.cssText,'" />'],f=wa(g.prepVML(j),null,{left:W(h.left)+1,top:W(h.top)+1}),j=['<stroke color="black" opacity="',0.05*d,'"/>'],wa(g.prepVML(j),null,null,f),b?b.element.appendChild(f):e.parentNode.insertBefore(f,e),c.push(f);
this.shadows=c}return this}},ba=Ra(xa,ba),w={Element:ba,isIE8:-1<Ha.indexOf("MSIE 8.0"),init:function(a,b,c){var d,e;this.alignedObjects=[];d=this.createElement(Sa);e=d.element;e.style.position=sc;a.appendChild(d.element);this.box=e;this.boxWrapper=d;this.setSize(b,c,!1);A.namespaces.hcv||(A.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),A.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ")},clipRect:function(a,
b,c,d){var e=this.createElement();return S(e,{members:[],left:a,top:b,width:c,height:d,getCSS:function(a){var b=this.top,c=this.left,d=c+this.width,e=b+this.height,b={clip:"rect("+y(a?c:b)+"px,"+y(a?e:d)+"px,"+y(a?d:e)+"px,"+y(a?b:c)+"px)"};!a&&cb&&S(b,{width:d+ha,height:e+ha});return b},updateClipping:function(){r(e.members,function(a){a.css(e.getCSS(a.inverted))})}})},color:function(a,b,c){var d,e=/^rgba/;if(a&&a.linearGradient){var g,f,h=a.linearGradient,j=h.x1||h[0]||0,l=h.y1||h[1]||0,k=h.x2||
h[2]||0,h=h.y2||h[3]||0,p,n,q,t;r(a.stops,function(a,b){e.test(a[1])?(d=Ua(a[1]),g=d.get("rgb"),f=d.get("a")):(g=a[1],f=1);b?(q=g,t=f):(p=g,n=f)});if("fill"===c)a=90-180*ra.atan((h-l)/(k-j))/Da,a=['<fill colors="0% ',p,",100% ",q,'" angle="',a,'" opacity="',t,'" o:opacity2="',n,'" type="gradient" focus="100%" method="sigma" />'],wa(this.prepVML(a),null,null,b);else return g}else{if(e.test(a)&&"IMG"!==b.tagName)return d=Ua(a),a=["<",c,' opacity="',d.get("a"),'"/>'],wa(this.prepVML(a),null,null,b),
d.get("rgb");b=b.getElementsByTagName(c);b.length&&(b[0].opacity=1);return a}},prepVML:function(a){var b=this.isIE8;a=a.join("");b?(a=a.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),a=-1===a.indexOf('style="')?a.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):a.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):a=a.replace("<","<hcv:");return a},text:Fb.prototype.html,path:function(a){return this.createElement("shape").attr({coordsize:"100 100",
d:a})},circle:function(a,b,c){return this.symbol("circle").attr({x:a-c,y:b-c,width:2*c,height:2*c})},g:function(a){var b;a&&(b={className:kb+a,"class":kb+a});return this.createElement(Sa).attr(b)},image:function(a,b,c,d,e){var g=this.createElement("img").attr({src:a});1<arguments.length&&g.css({left:b,top:c,width:d,height:e});return g},rect:function(a,b,c,d,e,g){ob(a)&&(b=a.y,c=a.width,d=a.height,g=a.strokeWidth,a=a.x);var f=this.symbol("rect");f.r=e;return f.attr(f.crisp(g,a,b,Y(c,0),Y(d,0)))},invertChild:function(a,
b){var c=b.style;O(a,{flip:"x",left:W(c.width)-10,top:W(c.height)-10,rotation:-90})},symbols:{arc:function(a,b,c,d,e){var g=e.start,f=e.end;c=e.r||c||d;d=T(g);var h=Qa(g),j=T(f),l=Qa(f);e=e.innerR;var k=0.08/c,p=e&&0.25/e||0;if(0===f-g)return["x"];2*Da-f+g<k?j=-k:f-g<p&&(j=T(g+p));return["wa",a-c,b-c,a+c,b+c,a+c*d,b+c*h,a+c*j,b+c*l,"at",a-e,b-e,a+e,b+e,a+e*j,b+e*l,a+e*d,b+e*h,"x","e"]},circle:function(a,b,c,d){return["wa",a,b,a+c,b+d,a+c,b+d/2,a+c,b+d/2,"e"]},rect:function(a,b,c,d,e){if(!v(e))return[];
var g=a+c,f=b+d;c=Wa(e.r||0,c,d);return[Aa,a+c,b,ga,g-c,b,"wa",g-2*c,b,g,b+2*c,g-c,b,g,b+c,ga,g,f-c,"wa",g-2*c,f-2*c,g,f,g,f-c,g-c,f,ga,a+c,f,"wa",a,f-2*c,a+2*c,f,a+c,f,a,f-c,ga,a,b+c,"wa",a,b,a+2*c,b+2*c,a,b+c,a+c,b,"x","e"]}}},ba=function(){this.init.apply(this,arguments)},ba.prototype=B(Fb.prototype,w),bc=ba);var uc,Gc;if($a){uc=function(){};var Wc=function(){var a=nb.length,b;for(b=0;b<a;b++)nb[b]();nb=[]},nb=[];Gc={push:function(a,b){0===nb.length&&Nc(b,Wc);nb.push(a)}}}bc=ba||uc||Fb;Cc.prototype.callbacks=
[];var Ja=function(){};Ja.prototype={init:function(a,b,c){var d=a.chart.counters;this.series=a;this.applyOptions(b,c);this.pointAttr={};a.options.colorByPoint&&(b=a.chart.options.colors,this.options||(this.options={}),this.color=this.options.color=this.color||b[d.color++],d.wrapColor(b.length));a.chart.pointCount++;return this},applyOptions:function(a,b){var c=this.series,d=typeof a;this.config=a;if("number"===d||null===a)this.y=a;else if("number"===typeof a[0])this.x=a[0],this.y=a[1];else if("object"===
d&&"number"!==typeof a.length){if(S(this,a),this.options=a,a.dataLabels)c._hasPointLabels=!0}else"string"===typeof a[0]&&(this.name=a[0],this.y=a[1]);this.x===V&&(this.x=b===V?c.autoIncrement():b)},destroy:function(){var a=this.series.chart,b=a.hoverPoints,c;a.pointCount--;if(b&&(this.setState(),Gb(b,this),!b.length))a.hoverPoints=null;if(this===a.hoverPoint)this.onMouseOut();if(this.graphic||this.dataLabel)Pa(this),this.destroyElements();this.legendItem&&a.legend.destroyItem(this);for(c in this)this[c]=
null},destroyElements:function(){for(var a="graphic tracker dataLabel group connector shadowGroup".split(" "),b,c=6;c--;)b=a[c],this[b]&&(this[b]=this[b].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},select:function(a,b){var c=this,d=c.series.chart;a=u(a,!c.selected);c.firePointEvent(a?"select":"unselect",{accumulate:b},function(){c.selected=a;c.setState(a&&
"select");b||r(d.getSelectedPoints(),function(a){a.selected&&a!==c&&(a.selected=!1,a.setState(Ca),a.firePointEvent("unselect"))})})},onMouseOver:function(){var a=this.series,b=a.chart,c=b.tooltip,d=b.hoverPoint;if(d&&d!==this)d.onMouseOut();this.firePointEvent("mouseOver");c&&(!c.shared||a.noSharedTooltip)&&c.refresh(this);this.setState(ua);b.hoverPoint=this},onMouseOut:function(){this.firePointEvent("mouseOut");this.setState();this.series.chart.hoverPoint=null},tooltipFormatter:function(a){var b=
this.series,c=b.tooltipOptions,d=String(this.y).split("."),d=d[1]?d[1].length:0,e=a.match(/\{(series|point)\.[a-zA-Z]+\}/g),g=/[{\.}]/,f,h,j,l;for(l in e)h=e[l],Bb(h)&&h!==a&&(j=(" "+h).split(g),f={point:this,series:b}[j[1]],j=j[2],f=f===this&&("y"===j||"open"===j||"high"===j||"low"===j||"close"===j)?(c.valuePrefix||c.yPrefix||"")+jc(this[j],u(c.valueDecimals,c.yDecimals,d))+(c.valueSuffix||c.ySuffix||""):f[j],a=a.replace(h,f));return a},update:function(a,b,c){var d=this,e=d.series,g=d.graphic,f,
h=e.data,j=h.length,l=e.chart;b=u(b,!0);d.firePointEvent("update",{options:a},function(){d.applyOptions(a);ob(a)&&(e.getAttribs(),g&&g.attr(d.pointAttr[e.state]));for(f=0;f<j;f++)if(h[f]===d){e.xData[f]=d.x;e.yData[f]=d.y;e.options.data[f]=a;break}e.isDirty=!0;e.isDirtyData=!0;b&&l.redraw(c)})},remove:function(a,b){var c=this,d=c.series,e=d.chart,g,f=d.data,h=f.length;Nb(b,e);a=u(a,!0);c.firePointEvent("remove",null,function(){for(g=0;g<h;g++)if(f[g]===c){f.splice(g,1);d.options.data.splice(g,1);
d.xData.splice(g,1);d.yData.splice(g,1);break}c.destroy();d.isDirty=!0;d.isDirtyData=!0;a&&e.redraw()})},firePointEvent:function(a,b,c){var d=this,e=this.series.options;(e.point.events[a]||d.options&&d.options.events&&d.options.events[a])&&this.importEvents();"click"===a&&e.allowPointSelect&&(c=function(a){d.select(null,a.ctrlKey||a.metaKey||a.shiftKey)});aa(this,a,b,c)},importEvents:function(){if(!this.hasImportedEvents){var a=B(this.series.options.point,this.options).events,b;this.events=a;for(b in a)ma(this,
b,a[b]);this.hasImportedEvents=!0}},setState:function(a){var b=this.plotX,c=this.plotY,d=this.series,e=d.options.states,g=qa[d.type].marker&&d.options.marker,f=g&&!g.enabled,h=g&&g.states[a],j=h&&!1===h.enabled,l=d.stateMarkerGraphic,k=d.chart,p=this.pointAttr;a=a||Ca;if(!(a===this.state||this.selected&&"select"!==a||e[a]&&!1===e[a].enabled||a&&(j||f&&!h.enabled))){if(this.graphic)e=g&&this.graphic.symbolName&&p[a].r,this.graphic.attr(B(p[a],e?{x:b-e,y:c-e,width:2*e,height:2*e}:{}));else if(a&&(l||
(e=g.radius,d.stateMarkerGraphic=l=k.renderer.symbol(d.symbol,-e,-e,2*e,2*e).attr(p[a]).add(d.group)),l.translate(b,c)),l)l[a?"show":"hide"]();this.state=a}}};var ja=function(){};ja.prototype={isCartesian:!0,type:"line",pointClass:Ja,sorted:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},init:function(a,b){var c,d;d=a.series.length;this.chart=a;this.options=b=this.setOptions(b);this.bindAxes();S(this,{index:d,name:b.name||"Series "+(d+1),state:Ca,
pointAttr:{},visible:!1!==b.visible,selected:!0===b.selected});$a&&(b.animation=!1);d=b.events;for(c in d)ma(this,c,d[c]);if(d&&d.click||b.point&&b.point.events&&b.point.events.click||b.allowPointSelect)a.runTrackerClick=!0;this.getColor();this.getSymbol();this.setData(b.data,!1)},bindAxes:function(){var a=this,b=a.options,c=a.chart,d;a.isCartesian&&r(["xAxis","yAxis"],function(e){r(c[e],function(c){d=c.options;if(b[e]===d.index||b[e]===V&&0===d.index)c.series.push(a),a[e]=c,c.isDirty=!0})})},autoIncrement:function(){var a=
this.options,b=this.xIncrement,b=u(b,a.pointStart,0);this.pointInterval=u(this.pointInterval,a.pointInterval,1);this.xIncrement=b+this.pointInterval;return b},getSegments:function(){var a=-1,b=[],c,d=this.points,e=d.length;if(e)if(this.options.connectNulls){for(c=e;c--;)null===d[c].y&&d.splice(c,1);d.length&&(b=[d])}else r(d,function(c,f){null===c.y?(f>a+1&&b.push(d.slice(a+1,f)),a=f):f===e-1&&b.push(d.slice(a+1,f+1))});this.segments=b},setOptions:function(a){var b=this.chart.options,c=b.plotOptions,
d=a.data;a.data=null;c=B(c[this.type],c.series,a);c.data=a.data=d;this.tooltipOptions=B(b.tooltip,c.tooltip);return c},getColor:function(){var a=this.chart.options.colors,b=this.chart.counters;this.color=this.options.color||a[b.color++]||"#0000ff";b.wrapColor(a.length)},getSymbol:function(){var a=this.options.marker,b=this.chart,c=b.options.symbols,b=b.counters;this.symbol=a.symbol||c[b.symbol++];/^url/.test(this.symbol)&&(a.radius=0);b.wrapSymbol(c.length)},addPoint:function(a,b,c,d){var e=this.data,
g=this.graph,f=this.area,h=this.chart,j=this.xData,l=this.yData,k=g&&g.shift||0,p=this.options.data;Nb(d,h);g&&c&&(g.shift=k+1);f&&(c&&(f.shift=k+1),f.isArea=!0);b=u(b,!0);d={series:this};this.pointClass.prototype.applyOptions.apply(d,[a]);j.push(d.x);l.push(4===this.valueCount?[d.open,d.high,d.low,d.close]:d.y);p.push(a);c&&(e[0]&&e[0].remove?e[0].remove(!1):(e.shift(),j.shift(),l.shift(),p.shift()));this.getAttribs();this.isDirtyData=this.isDirty=!0;b&&h.redraw()},setData:function(a,b){var c=this.points,
d=this.options,e=this.initialColor,g=this.chart,f=null,h=this.xAxis;this.xIncrement=null;this.pointRange=h&&h.categories&&1||d.pointRange;v(e)&&(g.counters.color=e);var j=[],l=[],k=a?a.length:[],p=4===this.valueCount;if(k>(d.turboThreshold||1E3)){for(e=0;null===f&&e<k;)f=a[e],e++;if(pb(f)){f=u(d.pointStart,0);d=u(d.pointInterval,1);for(e=0;e<k;e++)j[e]=f,l[e]=a[e],f+=d;this.xIncrement=f}else if(Cb(f))if(p)for(e=0;e<k;e++)d=a[e],j[e]=d[0],l[e]=d.slice(1,5);else for(e=0;e<k;e++)d=a[e],j[e]=d[0],l[e]=
d[1]}else for(e=0;e<k;e++)d={series:this},this.pointClass.prototype.applyOptions.apply(d,[a[e]]),j[e]=d.x,l[e]=p?[d.open,d.high,d.low,d.close]:d.y;this.data=[];this.options.data=a;this.xData=j;this.yData=l;for(e=c&&c.length||0;e--;)c[e]&&c[e].destroy&&c[e].destroy();h&&h.setMinRange&&h.setMinRange();this.isDirty=this.isDirtyData=g.isDirtyBox=!0;u(b,!0)&&g.redraw(!1)},remove:function(a,b){var c=this,d=c.chart;a=u(a,!0);c.isRemoving||(c.isRemoving=!0,aa(c,"remove",null,function(){c.destroy();d.isDirtyLegend=
d.isDirtyBox=!0;a&&d.redraw(b)}));c.isRemoving=!1},processData:function(a){var b=this.xData,c=this.yData,d=b.length,e=0,g=d,f,h,j=this.xAxis,l=this.options,k=l.cropThreshold,p=this.isCartesian;if(p&&!this.isDirty&&!j.isDirty&&!this.yAxis.isDirty&&!a)return!1;if(p&&this.sorted&&(!k||d>k||this.forceCrop))if(a=j.getExtremes(),j=a.min,k=a.max,b[d-1]<j||b[0]>k)b=[],c=[];else if(b[0]<j||b[d-1]>k){for(a=0;a<d;a++)if(b[a]>=j){e=Y(0,a-1);break}for(;a<d;a++)if(b[a]>k){g=a+1;break}b=b.slice(e,g);c=c.slice(e,
g);f=!0}for(a=b.length-1;0<a;a--)if(d=b[a]-b[a-1],0<d&&(h===V||d<h))h=d;this.cropped=f;this.cropStart=e;this.processedXData=b;this.processedYData=c;null===l.pointRange&&(this.pointRange=h||1);this.closestPointRange=h},generatePoints:function(){var a=this.options.data,b=this.data,c,d=this.processedXData,e=this.processedYData,g=this.pointClass,f=d.length,h=this.cropStart||0,j,l=this.hasGroupedData,k,p=[],n;!b&&!l&&(b=[],b.length=a.length,b=this.data=b);for(n=0;n<f;n++)j=h+n,l?p[n]=(new g).init(this,
[d[n]].concat(Hb(e[n]))):(b[j]?k=b[j]:b[j]=k=(new g).init(this,a[j],d[n]),p[n]=k);if(b&&(f!==(c=b.length)||l))for(n=0;n<c;n++)n===h&&!l&&(n+=f),b[n]&&b[n].destroyElements();this.data=b;this.points=p},translate:function(){this.processedXData||this.processData();this.generatePoints();for(var a=this.chart,b=this.options,c=b.stacking,d=this.xAxis,e=d.categories,g=this.yAxis,f=this.points,h=f.length,j=!!this.modifyValue,l,k=g.series,p=k.length;p--;)if(k[p].visible){p===this.index&&(l=!0);break}for(p=0;p<
h;p++){var k=f[p],n=k.x,q=k.y,t=k.low,s=g.stacks[(q<b.threshold?"-":"")+this.stackKey];k.plotX=y(10*d.translate(n,0,0,0,1))/10;c&&(this.visible&&s&&s[n])&&(t=s[n],n=t.total,t.cum=t=t.cum-q,q=t+q,l&&(t=b.threshold),"percent"===c&&(t=n?100*t/n:0,q=n?100*q/n:0),k.percentage=n?100*k.y/n:0,k.stackTotal=n,k.stackY=q);k.yBottom=v(t)?g.translate(t,0,1,0,1):null;j&&(q=this.modifyValue(q,k));k.plotY="number"===typeof q?y(10*g.translate(q,0,1,0,1))/10:V;k.clientX=a.inverted?a.plotHeight-k.plotX:k.plotX;k.category=
e&&e[k.x]!==V?e[k.x]:k.x}this.getSegments()},setTooltipPoints:function(a){var b=[],c=this.chart.plotSizeX,d,e;d=this.xAxis;var g,f,h=[];if(!1!==this.options.enableMouseTracking){a&&(this.tooltipPoints=null);r(this.segments||this.points,function(a){b=b.concat(a)});d&&d.reversed&&(b=b.reverse());a=b.length;for(f=0;f<a;f++){g=b[f];d=b[f-1]?b[f-1]._high+1:0;for(e=g._high=b[f+1]?Va((g.plotX+(b[f+1]?b[f+1].plotX:c))/2):c;d<=e;)h[d++]=g}this.tooltipPoints=h}},tooltipHeaderFormatter:function(a){var b=this.tooltipOptions,
c=b.xDateFormat||"%A, %b %e, %Y",d=this.xAxis;return b.headerFormat.replace("{point.key}",d&&"datetime"===d.options.type?hc(c,a):a).replace("{series.name}",this.name).replace("{series.color}",this.color)},onMouseOver:function(){var a=this.chart,b=a.hoverSeries;if(Za||!a.mouseIsDown){if(b&&b!==this)b.onMouseOut();this.options.events.mouseOver&&aa(this,"mouseOver");this.setState(ua);a.hoverSeries=this}},onMouseOut:function(){var a=this.options,b=this.chart,c=b.tooltip,d=b.hoverPoint;if(d)d.onMouseOut();
this&&a.events.mouseOut&&aa(this,"mouseOut");c&&!a.stickyTracking&&!c.shared&&c.hide();this.setState();b.hoverSeries=null},animate:function(a){var b=this.chart,c=this.clipRect,d=this.options.animation;d&&!ob(d)&&(d={});a?c.isAnimating||(c.attr("width",0),c.isAnimating=!0):(c.animate({width:b.plotSizeX},d),this.animate=null)},drawPoints:function(){var a,b=this.points,c=this.chart,d,e,g,f,h,j,l,k;if(this.options.marker.enabled)for(g=b.length;g--;)if(f=b[g],d=f.plotX,e=f.plotY,k=f.graphic,e!==V&&!isNaN(e))if(a=
f.pointAttr[f.selected?"select":Ca],h=a.r,j=u(f.marker&&f.marker.symbol,this.symbol),l=0===j.indexOf("url"),k)k.animate(S({x:d-h,y:e-h},k.symbolName?{width:2*h,height:2*h}:{}));else if(0<h||l)f.graphic=c.renderer.symbol(j,d-h,e-h,2*h,2*h).attr(a).add(this.group)},convertAttribs:function(a,b,c,d){var e=this.pointAttrToOptions,g,f,h={};a=a||{};b=b||{};c=c||{};d=d||{};for(g in e)f=e[g],h[g]=u(a[f],b[g],c[g],d[g]);return h},getAttribs:function(){var a=this,b=qa[a.type].marker?a.options.marker:a.options,
c=b.states,d=c[ua],e,g=a.color,f={stroke:g,fill:g},h=a.points,j=[],l,k=a.pointAttrToOptions,p;a.options.marker?(d.radius=d.radius||b.radius+2,d.lineWidth=d.lineWidth||b.lineWidth+1):d.color=d.color||Ua(d.color||g).brighten(d.brightness).get();j[Ca]=a.convertAttribs(b,f);r([ua,"select"],function(b){j[b]=a.convertAttribs(c[b],j[Ca])});a.pointAttr=j;for(g=h.length;g--;){f=h[g];if((b=f.options&&f.options.marker||f.options)&&!1===b.enabled)b.radius=0;e=!1;if(f.options)for(p in k)v(b[k[p]])&&(e=!0);e?(l=
[],c=b.states||{},e=c[ua]=c[ua]||{},a.options.marker||(e.color=Ua(e.color||f.options.color).brighten(e.brightness||d.brightness).get()),l[Ca]=a.convertAttribs(b,j[Ca]),l[ua]=a.convertAttribs(c[ua],j[ua],l[Ca]),l.select=a.convertAttribs(c.select,j.select,l[Ca])):l=j;f.pointAttr=l}},destroy:function(){var a=this,b=a.chart,c=a.clipRect,d=/AppleWebKit\/533/.test(Ha),e,g,f=a.data||[],h,j,l;aa(a,"destroy");Pa(a);r(["xAxis","yAxis"],function(b){if(l=a[b])Gb(l.series,a),l.isDirty=!0});a.legendItem&&a.chart.legend.destroyItem(a);
for(g=f.length;g--;)(h=f[g])&&h.destroy&&h.destroy();a.points=null;c&&c!==b.clipRect&&(a.clipRect=c.destroy());r(["area","graph","dataLabelsGroup","group","tracker"],function(b){a[b]&&(e=d&&"group"===b?"hide":"destroy",a[b][e]())});b.hoverSeries===a&&(b.hoverSeries=null);Gb(b.series,a);for(j in a)delete a[j]},drawDataLabels:function(){var a=this,b=a.options,c=b.dataLabels;if(c.enabled||a._hasPointLabels){var d,e,g=a.points,f,h,j,l=a.dataLabelsGroup,k=a.chart,p=a.xAxis,p=p?p.left:k.plotLeft,n=a.yAxis,
n=n?n.top:k.plotTop,q=k.renderer,t=k.inverted,s=a.type,J=b.stacking,E="column"===s||"bar"===s,R=null===c.verticalAlign,L=null===c.y,z=q.fontMetrics(c.style.fontSize),w=z.h,A=z.b,N,C;E&&(z={top:A,middle:A-w/2,bottom:-w+A},J?(R&&(c=B(c,{verticalAlign:"middle"})),L&&(c=B(c,{y:z[c.verticalAlign]}))):R?c=B(c,{verticalAlign:"top"}):L&&(c=B(c,{y:z[c.verticalAlign]})));l?l.translate(p,n):l=a.dataLabelsGroup=q.g("data-labels").attr({visibility:a.visible?eb:ab,zIndex:6}).translate(p,n).add();h=c;r(g,function(g){N=
g.dataLabel;c=h;(f=g.options)&&f.dataLabels&&(c=B(c,f.dataLabels));if(C=c.enabled){var n=g.barX&&g.barX+g.barW/2||u(g.plotX,-999),p=u(g.plotY,-999),r=null===c.y?g.y>=b.threshold?-w+A:A:c.y;d=(t?k.plotWidth-p:n)+c.x;e=y((t?k.plotHeight-n:p)+r)}N&&a.isCartesian&&(!k.isInsidePlot(d,e)||!C)?g.dataLabel=N.destroy():C&&(n=c.align,j=c.formatter.call(g.getLabelConfig(),c),"column"===s&&(d+={left:-1,right:1}[n]*g.barW/2||0),!J&&t&&0>g.y&&(n="right",d-=10),c.style.color=u(c.color,c.style.color,a.color,"black"),
N?N.attr({text:j}).animate({x:d,y:e}):v(j)&&(N=g.dataLabel=q[c.rotation?"text":"label"](j,d,e,null,null,null,c.useHTML,!0).attr({align:n,fill:c.backgroundColor,stroke:c.borderColor,"stroke-width":c.borderWidth,r:c.borderRadius||0,rotation:c.rotation,padding:c.padding,zIndex:1}).css(c.style).add(l).shadow(c.shadow)),E&&(b.stacking&&N)&&(n=g.barX,p=g.barY,r=g.barW,g=g.barH,N.align(c,null,{x:t?k.plotWidth-p-g:n,y:t?k.plotHeight-n-r:p,width:t?g:r,height:t?r:g})))})}},drawGraph:function(){var a=this,b=
a.options,c=a.graph,d=[],e,g=a.area,f=a.group,h=b.lineColor||a.color,j=b.lineWidth,l=b.dashStyle,k,p=a.chart.renderer,n=a.yAxis.getThreshold(b.threshold),q=/^area/.test(a.type),t=[],s=[];r(a.segments,function(c){k=[];r(c,function(d,e){a.getPointSpline?k.push.apply(k,a.getPointSpline(c,d,e)):(k.push(e?ga:Aa),e&&b.step&&k.push(d.plotX,c[e-1].plotY),k.push(d.plotX,d.plotY))});1<c.length?d=d.concat(k):t.push(c[0]);if(q){var e=[],f,g=k.length;for(f=0;f<g;f++)e.push(k[f]);3===g&&e.push(ga,k[1],k[2]);if(b.stacking&&
"areaspline"!==a.type)for(f=c.length-1;0<=f;f--)f<c.length-1&&b.step&&e.push(c[f+1].plotX,c[f].yBottom),e.push(c[f].plotX,c[f].yBottom);else e.push(ga,c[c.length-1].plotX,n,ga,c[0].plotX,n);s=s.concat(e)}});a.graphPath=d;a.singlePoints=t;q&&(e=u(b.fillColor,Ua(a.color).setOpacity(b.fillOpacity||0.75).get()),g?g.animate({d:s}):a.area=a.chart.renderer.path(s).attr({fill:e}).add(f));c?(Sb(c),c.animate({d:d})):j&&(c={stroke:h,"stroke-width":j},l&&(c.dashstyle=l),a.graph=p.path(d).attr(c).add(f).shadow(b.shadow))},
invertGroups:function(){function a(){var a={width:b.yAxis.len,height:b.xAxis.len};c.attr(a).invert();d&&d.attr(a).invert()}var b=this,c=b.group,d=b.trackerGroup,e=b.chart;ma(e,"resize",a);ma(b,"destroy",function(){Pa(e,"resize",a)});a();b.invertGroups=a},render:function(){var a=this,b=a.chart,c,d=a.options,e=!1!==d.clip,g=d.animation,f=g&&a.animate,g=f?g&&g.duration||500:0,h=a.clipRect,j=b.renderer;if(!h&&(h=a.clipRect=!b.hasRendered&&b.clipRect?b.clipRect:j.clipRect(0,0,b.plotSizeX,b.plotSizeY+1),
!b.clipRect))b.clipRect=h;a.group||(c=a.group=j.g("series"),c.attr({visibility:a.visible?eb:ab,zIndex:d.zIndex}).translate(a.xAxis.left,a.yAxis.top).add(b.seriesGroup));a.drawDataLabels();f&&a.animate(!0);a.getAttribs();a.drawGraph&&a.drawGraph();a.drawPoints();!1!==a.options.enableMouseTracking&&a.drawTracker();b.inverted&&a.invertGroups();e&&!a.hasRendered&&(c.clip(h),a.trackerGroup&&a.trackerGroup.clip(b.clipRect));f&&a.animate();setTimeout(function(){h.isAnimating=!1;if((c=a.group)&&h!==b.clipRect&&
h.renderer)e&&c.clip(a.clipRect=b.clipRect),h.destroy()},g);a.isDirty=a.isDirtyData=!1;a.hasRendered=!0},redraw:function(){var a=this.chart,b=this.isDirtyData,c=this.group;c&&(a.inverted&&c.attr({width:a.plotWidth,height:a.plotHeight}),c.animate({translateX:this.xAxis.left,translateY:this.yAxis.top}));this.translate();this.setTooltipPoints(!0);this.render();b&&aa(this,"updatedData")},setState:function(a){var b=this.options,c=this.graph,d=b.states,b=b.lineWidth;a=a||Ca;this.state!==a&&(this.state=
a,d[a]&&!1===d[a].enabled||(a&&(b=d[a].lineWidth||b+1),c&&!c.dashstyle&&c.attr({"stroke-width":b},a?0:500)))},setVisible:function(a,b){var c=this.chart,d=this.legendItem,e=this.group,g=this.tracker,f=this.dataLabelsGroup,h,j=this.points,l=c.options.chart.ignoreHiddenSeries;h=this.visible;h=(this.visible=a=a===V?!h:a)?"show":"hide";if(e)e[h]();if(g)g[h]();else if(j)for(e=j.length;e--;)if(g=j[e],g.tracker)g.tracker[h]();if(f)f[h]();d&&c.legend.colorizeItem(this,a);this.isDirty=!0;this.options.stacking&&
r(c.series,function(a){a.options.stacking&&a.visible&&(a.isDirty=!0)});l&&(c.isDirtyBox=!0);!1!==b&&c.redraw();aa(this,h)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(a){this.selected=a=a===V?!this.selected:a;this.checkbox&&(this.checkbox.checked=a);aa(this,a?"select":"unselect")},drawTrackerGroup:function(){var a=this.trackerGroup,b=this.chart;this.isCartesian&&(a||(this.trackerGroup=a=b.renderer.g().attr({zIndex:this.options.zIndex||1}).add(b.trackerGroup)),
a.translate(this.xAxis.left,this.yAxis.top));return a},drawTracker:function(){var a=this,b=a.options,c=[].concat(a.graphPath),d=c.length,e=a.chart,g=e.renderer,f=e.options.tooltip.snap,h=a.tracker,j=b.cursor,j=j&&{cursor:j},l=a.singlePoints,k=a.drawTrackerGroup(),p;if(d)for(p=d+1;p--;)c[p]===Aa&&c.splice(p+1,0,c[p+1]-f,c[p+2],ga),(p&&c[p]===Aa||p===d)&&c.splice(p,0,ga,c[p-2]+f,c[p-1]);for(p=0;p<l.length;p++)d=l[p],c.push(Aa,d.plotX-f,d.plotY,ga,d.plotX+f,d.plotY);h?h.attr({d:c}):a.tracker=g.path(c).attr({isTracker:!0,
stroke:Mc,fill:Ka,"stroke-linejoin":"bevel","stroke-width":b.lineWidth+2*f,visibility:a.visible?eb:ab}).on(Za?"touchstart":"mouseover",function(){if(e.hoverSeries!==a)a.onMouseOver()}).on("mouseout",function(){if(!b.stickyTracking)a.onMouseOut()}).css(j).add(k)}};w=Ra(ja);pa.line=w;w=Ra(ja,{type:"area"});pa.area=w;w=Ra(ja,{type:"spline",getPointSpline:function(a,b,c){var d=b.plotX,e=b.plotY,g=a[c-1],f=a[c+1],h,j,l,k;if(c&&c<a.length-1){a=g.plotY;l=f.plotX;var f=f.plotY,p;h=(1.5*d+g.plotX)/2.5;j=(1.5*
e+a)/2.5;l=(1.5*d+l)/2.5;k=(1.5*e+f)/2.5;p=(k-j)*(l-d)/(l-h)+e-k;j+=p;k+=p;j>a&&j>e?(j=Y(a,e),k=2*e-j):j<a&&j<e&&(j=Wa(a,e),k=2*e-j);k>f&&k>e?(k=Y(f,e),j=2*e-k):k<f&&k<e&&(k=Wa(f,e),j=2*e-k);b.rightContX=l;b.rightContY=k}c?(b=["C",g.rightContX||g.plotX,g.rightContY||g.plotY,h||d,j||e,d,e],g.rightContX=g.rightContY=null):b=[Aa,d,e];return b}});pa.spline=w;w=Ra(w,{type:"areaspline"});pa.areaspline=w;var Ab=Ra(ja,{type:"column",tooltipOutsidePlot:!0,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",
fill:"color",r:"borderRadius"},init:function(){ja.prototype.init.apply(this,arguments);var a=this,b=a.chart;b.hasRendered&&r(b.series,function(b){b.type===a.type&&(b.isDirty=!0)})},translate:function(){var a=this,b=a.chart,c=a.options,d=c.stacking,e=c.borderWidth,g=0,f=a.xAxis,h=f.reversed,j={},l,k;ja.prototype.translate.apply(a);r(b.series,function(b){b.type===a.type&&(b.visible&&a.options.group===b.options.group)&&(b.options.stacking?(l=b.stackKey,j[l]===V&&(j[l]=g++),k=j[l]):k=g++,b.columnIndex=
k)});var b=a.points,f=Ea(f.translationSlope)*(f.ordinalSlope||f.closestPointRange||1),p=f*c.groupPadding,n=(f-2*p)/g,q=c.pointWidth,t=v(q)?(n-q)/2:n*c.pointPadding,s=dc(Y(u(q,n-2*t),1+2*e)),w=t+(p+((h?g-a.columnIndex:a.columnIndex)||0)*n-f/2)*(h?-1:1),E=a.yAxis.getThreshold(c.threshold),y=u(c.minPointLength,5);r(b,function(b){var f=b.plotY,g=u(b.yBottom,E),h=b.plotX+w,j=dc(Wa(f,g)),k=dc(Y(f,g)-j),l=a.yAxis.stacks[(0>b.y?"-":"")+a.stackKey];d&&a.visible&&l&&l[b.x]&&l[b.x].setOffset(w,s);Ea(k)<y&&y&&
(k=y,j=Ea(j-E)>y?g-y:E-(f<=E?y:0));S(b,{barX:h,barY:j,barW:s,barH:k});b.shapeType="rect";f={x:h,y:j,width:s,height:k,r:c.borderRadius,strokeWidth:e};e%2&&(f.y-=1,f.height+=1);b.shapeArgs=f;b.trackerArgs=3>Ea(k)&&B(b.shapeArgs,{height:6,y:j-3})})},getSymbol:function(){},drawGraph:function(){},drawPoints:function(){var a=this,b=a.options,c=a.chart.renderer,d,e;r(a.points,function(g){var f=g.plotY;f!==V&&(!isNaN(f)&&null!==g.y)&&(d=g.graphic,e=g.shapeArgs,d?(Sb(d),d.animate(c.Element.prototype.crisp.apply({},
[e.strokeWidth,e.x,e.y,e.width,e.height]))):g.graphic=d=c[g.shapeType](e).attr(g.pointAttr[g.selected?"select":Ca]).add(a.group).shadow(b.shadow))})},drawTracker:function(){var a=this,b=a.chart,c=b.renderer,d,e,g=+new Date,f=a.options,h=f.cursor,j=h&&{cursor:h},l=a.drawTrackerGroup(),k,p,n;r(a.points,function(h){e=h.tracker;d=h.trackerArgs||h.shapeArgs;p=h.plotY;n=!a.isCartesian||p!==V&&!isNaN(p);delete d.strokeWidth;null!==h.y&&n&&(e?e.attr(d):h.tracker=c[h.shapeType](d).attr({isTracker:g,fill:Mc,
visibility:a.visible?eb:ab}).on(Za?"touchstart":"mouseover",function(c){k=c.relatedTarget||c.fromElement;if(b.hoverSeries!==a&&F(k,"isTracker")!==g)a.onMouseOver();h.onMouseOver()}).on("mouseout",function(b){if(!f.stickyTracking&&(k=b.relatedTarget||b.toElement,F(k,"isTracker")!==g))a.onMouseOut()}).css(j).add(h.group||l))})},animate:function(a){var b=this,c=b.points,d=b.options;a||(r(c,function(a){var c=a.graphic;a=a.shapeArgs;var f=b.yAxis,h=d.threshold;c&&(c.attr({height:0,y:v(h)?f.getThreshold(h):
f.translate(f.getExtremes().min,0,1,0,1)}),c.animate({height:a.height,y:a.y},d.animation))}),b.animate=null)},remove:function(){var a=this,b=a.chart;b.hasRendered&&r(b.series,function(b){b.type===a.type&&(b.isDirty=!0)});ja.prototype.remove.apply(a,arguments)}});pa.column=Ab;w=Ra(Ab,{type:"bar",init:function(){this.inverted=!0;Ab.prototype.init.apply(this,arguments)}});pa.bar=w;w=Ra(ja,{type:"scatter",sorted:!1,translate:function(){var a=this;ja.prototype.translate.apply(a);r(a.points,function(b){b.shapeType=
"circle";b.shapeArgs={x:b.plotX,y:b.plotY,r:a.chart.options.tooltip.snap}})},drawTracker:function(){for(var a=this,b=a.options.cursor,b=b&&{cursor:b},c=a.points,d=c.length,e;d--;)if(e=c[d].graphic)e.element._i=d;a._hasTracking?a._hasTracking=!0:a.group.attr({isTracker:!0}).on(Za?"touchstart":"mouseover",function(b){a.onMouseOver();if(b.target._i!==V)c[b.target._i].onMouseOver()}).on("mouseout",function(){if(!a.options.stickyTracking)a.onMouseOut()}).css(b)}});pa.scatter=w;w=Ra(Ja,{init:function(){Ja.prototype.init.apply(this,
arguments);var a=this,b;S(a,{visible:!1!==a.visible,name:u(a.name,"Slice")});b=function(){a.slice()};ma(a,"select",b);ma(a,"unselect",b);return a},setVisible:function(a){var b=this.series.chart,c=this.tracker,d=this.dataLabel,e=this.connector,g=this.shadowGroup,f;f=(this.visible=a=a===V?!this.visible:a)?"show":"hide";this.group[f]();if(c)c[f]();if(d)d[f]();if(e)e[f]();if(g)g[f]();this.legendItem&&b.legend.colorizeItem(this,a)},slice:function(a,b,c){var d=this.series.chart,e=this.slicedTranslation;
Nb(c,d);u(b,!0);a=this.sliced=v(a)?a:!this.sliced;a={translateX:a?e[0]:d.plotLeft,translateY:a?e[1]:d.plotTop};this.group.animate(a);this.shadowGroup&&this.shadowGroup.animate(a)}});w=Ra(ja,{type:"pie",isCartesian:!1,pointClass:w,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:function(){this.initialColor=this.chart.counters.color},animate:function(){var a=this;r(a.points,function(b){var c=b.graphic;b=b.shapeArgs;var d=-Da/2;c&&(c.attr({r:0,start:d,end:d}),
c.animate({r:b.r,start:b.start,end:b.end},a.options.animation))});a.animate=null},setData:function(a,b){ja.prototype.setData.call(this,a,!1);this.processData();this.generatePoints();u(b,!0)&&this.chart.redraw()},translate:function(){this.generatePoints();var a=0,b=-0.25,c=this.options,d=c.slicedOffset,e=d+c.borderWidth,g=c.center.concat([c.size,c.innerSize||0]),f=this.chart,h=f.plotWidth,j=f.plotHeight,l,k,p,n=this.points,q=2*Da,t,s=Wa(h,j),u,v,w=c.dataLabels.distance,g=$b(g,function(a,b){return/%$/.test(a)?
[h,j,s,s][b]*W(a)/100:a});this.getX=function(a,b){p=ra.asin((a-g[1])/(g[2]/2+w));return g[0]+(b?-1:1)*T(p)*(g[2]/2+w)};this.center=g;r(n,function(b){a+=b.y});r(n,function(c){t=a?c.y/a:0;l=y(1E3*b*q)/1E3;b+=t;k=y(1E3*b*q)/1E3;c.shapeType="arc";c.shapeArgs={x:g[0],y:g[1],r:g[2]/2,innerR:g[3]/2,start:l,end:k};p=(k+l)/2;c.slicedTranslation=$b([T(p)*d+f.plotLeft,Qa(p)*d+f.plotTop],y);u=T(p)*g[2]/2;v=Qa(p)*g[2]/2;c.tooltipPos=[g[0]+0.7*u,g[1]+0.7*v];c.labelPos=[g[0]+u+T(p)*w,g[1]+v+Qa(p)*w,g[0]+u+T(p)*
e,g[1]+v+Qa(p)*e,g[0]+u,g[1]+v,0>w?"center":p<q/4?"left":"right",p];c.percentage=100*t;c.total=a});this.setTooltipPoints()},render:function(){this.getAttribs();this.drawPoints();!1!==this.options.enableMouseTracking&&this.drawTracker();this.drawDataLabels();this.options.animation&&this.animate&&this.animate();this.isDirty=!1},drawPoints:function(){var a=this.chart,b=a.renderer,c,d,e,g=this.options.shadow,f,h;r(this.points,function(j){d=j.graphic;h=j.shapeArgs;e=j.group;f=j.shadowGroup;g&&!f&&(f=j.shadowGroup=
b.g("shadow").attr({zIndex:4}).add());e||(e=j.group=b.g("point").attr({zIndex:5}).add());c=j.sliced?j.slicedTranslation:[a.plotLeft,a.plotTop];e.translate(c[0],c[1]);f&&f.translate(c[0],c[1]);d?d.animate(h):j.graphic=b.arc(h).attr(S(j.pointAttr[Ca],{"stroke-linejoin":"round"})).add(j.group).shadow(g,f);!1===j.visible&&j.setVisible(!1)})},drawDataLabels:function(){var a=this.data,b,c=this.chart,d=this.options.dataLabels,e=u(d.connectorPadding,10),g=u(d.connectorWidth,1),f,h,j=u(d.softConnector,!0),
l=d.distance,k=this.center,p=k[2]/2,n=k[1],q=0<l,t=[[],[]],s,v,w,y,A=2,z;if(d.enabled){ja.prototype.drawDataLabels.apply(this);r(a,function(a){a.dataLabel&&t[a.labelPos[7]<Da/2?0:1].push(a)});t[1].reverse();y=function(a,b){return b.y-a.y};for(a=t[0][0]&&t[0][0].dataLabel&&t[0][0].dataLabel.getBBox().height;A--;){var B=[],F=[],N=t[A],C=N.length,D;if(0<l){for(z=n-p-l;z<=n+p+l;z+=a)B.push(z);w=B.length;if(C>w){h=[].concat(N);h.sort(y);for(z=C;z--;)h[z].rank=z;for(z=C;z--;)N[z].rank>=w&&N.splice(z,1);
C=N.length}for(z=0;z<C;z++){b=N[z];h=b.labelPos;b=9999;for(v=0;v<w;v++)f=Ea(B[v]-h[1]),f<b&&(b=f,D=v);if(D<z&&null!==B[z])D=z;else for(w<C-z+D&&null!==B[z]&&(D=w-C+z);null===B[D];)D++;F.push({i:D,y:B[D]});B[D]=null}F.sort(y)}for(z=0;z<C;z++){b=N[z];h=b.labelPos;f=b.dataLabel;w=!1===b.visible?ab:eb;s=h[1];if(0<l){if(v=F.pop(),D=v.i,v=v.y,s>v&&null!==B[D+1]||s<v&&null!==B[D-1])v=s}else v=s;s=d.justify?k[0]+(A?-1:1)*(p+l):this.getX(0===D||D===B.length-1?s:v,A);f.attr({visibility:w,align:h[6]})[f.moved?
"animate":"attr"]({x:s+d.x+({left:e,right:-e}[h[6]]||0),y:v+d.y});f.moved=!0;q&&g&&(f=b.connector,h=j?[Aa,s+("left"===h[6]?5:-5),v,"C",s,v,2*h[2]-h[4],2*h[3]-h[5],h[2],h[3],ga,h[4],h[5]]:[Aa,s+("left"===h[6]?5:-5),v,ga,h[2],h[3],ga,h[4],h[5]],f?(f.animate({d:h}),f.attr("visibility",w)):b.connector=f=this.chart.renderer.path(h).attr({"stroke-width":g,stroke:d.connectorColor||b.color||"#606060",visibility:w,zIndex:3}).translate(c.plotLeft,c.plotTop).add())}}}},drawTracker:Ab.prototype.drawTracker,getSymbol:function(){}});
pa.pie=w;S(Highcharts,{Chart:Cc,dateFormat:hc,pathAnim:mb,getOptions:function(){return na},hasBidiBug:Vc,numberFormat:jc,Point:Ja,Color:Ua,Renderer:bc,SVGRenderer:Fb,VMLRenderer:ba,CanVGRenderer:uc,seriesTypes:pa,setOptions:function(a){fc=B(fc,a.xAxis);qc=B(qc,a.yAxis);a.xAxis=a.yAxis=V;na=B(na,a);Bc();return na},Series:ja,addEvent:ma,removeEvent:Pa,createElement:wa,discardElement:Yb,css:O,each:r,extend:S,map:$b,merge:B,pick:u,splat:Hb,extendClass:Ra,placeBox:Ac,product:"Highcharts",version:"2.2.3"})})();
;
(function(f){f.fn.draggableMap=function(){var d=this,e;d.css({left:0,top:-210});e=e||f("body").bind("mousedown mouseup touchstart touchend",function(a){if(("mousedown"==a.type||"touchstart"==a.type)&&"statesMap"==f(a.target).attr("id")){var g=0<a.pageX?a:a.originalEvent.targetTouches[0],h=d.position(),l=g.pageX-h.left,m=g.pageY-h.top,j=d.width()-960,k=d.height()-670;e.bind("mousemove touchmove",function(b){var c=0<b.pageX?b:b.originalEvent.targetTouches[0];b=c.pageX-l;var c=c.pageY-m,a={};0<b&&(b=
0);0<c&&(c=0);Math.abs(b)>=j&&(b=-j);Math.abs(c)>=k&&(c=-k);a.left=b;a.top=c;d.css(a)});a.preventDefault()}else e.unbind("mousemove touchmove")});return this}})(jQuery);
;
window.log=function f(){log.history=log.history||[];log.history.push(arguments);if(this.console){var b=arguments;try{b.callee=f.caller}catch(c){}b=[].slice.call(b);"object"===typeof console.log?log.apply.call(console.log,console,b):console.log.apply(console,b)}};
(function(a){function b(){}for(var c="assert count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profileEnd time timeEnd trace warn".split(" "),e;e=c.pop();)a[e]=a[e]||b})(function(){try{return console.log(),window.console}catch(a){return window.console={}}}());
(function(a,b,c,e){var d=a(e),g=function(a,c){a.element.trigger("waypoint.reached",c);if(a.options.triggerOnce)a.element[b]("destroy")},k=function(b,a){if(!a)return-1;for(var c=a.waypoints.length-1;0<=c&&a.waypoints[c].element[0]!==b[0];)c-=1;return c},h=[],n=function(b){a.extend(this,{element:a(b),oldScroll:0,waypoints:[],didScroll:!1,didResize:!1,doScroll:a.proxy(function(){var b=this.element.scrollTop(),d=b>this.oldScroll,e=this,s=a.grep(this.waypoints,function(a){return d?a.offset>e.oldScroll&&
a.offset<=b:a.offset<=e.oldScroll&&a.offset>b}),h=s.length;if(!this.oldScroll||!b)a[c]("refresh");this.oldScroll=b;h&&(d||s.reverse(),a.each(s,function(b,a){if(a.options.continuous||b===h-1)g(a,[d?"down":"up"])}))},this)});a(b).bind("scroll.waypoints",a.proxy(function(){this.didScroll||(this.didScroll=!0,e.setTimeout(a.proxy(function(){this.doScroll();this.didScroll=!1},this),a[c].settings.scrollThrottle))},this)).bind("resize.waypoints",a.proxy(function(){this.didResize||(this.didResize=!0,e.setTimeout(a.proxy(function(){a[c]("refresh");
this.didResize=!1},this),a[c].settings.resizeThrottle))},this));d.load(a.proxy(function(){this.doScroll()},this))},l={init:function(d,e){this.each(function(){var g=a.fn[b].defaults.context,m,p=a(this);e&&e.context&&(g=e.context);a.isWindow(g)||(g=p.closest(g)[0]);var l=g,j=null;a.each(h,function(b,a){if(a.element[0]===l)return j=a,!1});m=j;m||(m=new n(g),h.push(m));var r=k(p,m),q=a.extend({},0>r?a.fn[b].defaults:m.waypoints[r].options,e);q.offset="bottom-in-view"===q.offset?function(){return(a.isWindow(g)?
a[c]("viewportHeight"):a(g).height())-a(this).outerHeight()}:q.offset;0>r?m.waypoints.push({element:p,offset:null,options:q}):m.waypoints[r].options=q;d&&p.bind("waypoint.reached",d);e&&e.handler&&p.bind("waypoint.reached",e.handler)});a[c]("refresh");return this},remove:function(){return this.each(function(b,c){var d=a(c);a.each(h,function(b,a){var c=k(d,a);0<=c&&(a.waypoints.splice(c,1),a.waypoints.length||(a.element.unbind("scroll.waypoints resize.waypoints"),h.splice(b,1)))})})},destroy:function(){return this.unbind("waypoint.reached")[b]("remove")}},
j={refresh:function(){a.each(h,function(b,d){var e=a.isWindow(d.element[0]),h=e?0:d.element.offset().top,k=e?a[c]("viewportHeight"):d.element.height(),j=e?0:d.element.scrollTop();a.each(d.waypoints,function(b,a){if(a){var c=a.options.offset,e=a.offset;"function"===typeof a.options.offset?c=a.options.offset.apply(a.element):"string"===typeof a.options.offset&&(c=parseFloat(a.options.offset),c=a.options.offset.indexOf("%")?Math.ceil(k*(c/100)):c);a.offset=a.element.offset().top-h+j-c;a.options.onlyOnScroll||
(null!==e&&d.oldScroll>e&&d.oldScroll<=a.offset?g(a,["up"]):null!==e&&d.oldScroll<e&&d.oldScroll>=a.offset?g(a,["down"]):!e&&j>a.offset&&g(a,["down"]))}});d.waypoints.sort(function(a,b){return a.offset-b.offset})})},viewportHeight:function(){return e.innerHeight?e.innerHeight:d.height()},aggregate:function(){var b=a();a.each(h,function(c,d){a.each(d.waypoints,function(a,c){b=b.add(c.element)})});return b}};a.fn[b]=function(c){if(l[c])return l[c].apply(this,Array.prototype.slice.call(arguments,1));
if("function"===typeof c||!c)return l.init.apply(this,arguments);if("object"===typeof c)return l.init.apply(this,[null,c]);a.error("Method "+c+" does not exist on jQuery "+b)};a.fn[b].defaults={continuous:!0,offset:0,triggerOnce:!1,context:e};a[c]=function(a){return j[a]?j[a].apply(this):j.aggregate()};a[c].settings={resizeThrottle:200,scrollThrottle:100};d.load(function(){a[c]("refresh")})})(jQuery,"waypoint","waypoints",window);
(function(a){a.fn.numeric=function(b,c){"boolean"===typeof b&&(b={decimal:b});b=b||{};"undefined"==typeof b.negative&&(b.negative=!0);var e=!1===b.decimal?"":b.decimal||".",d=!0===b.negative?!0:!1;return this.data("numeric.decimal",e).data("numeric.negative",d).data("numeric.callback","function"==typeof c?c:function(){}).keypress(a.fn.numeric.keypress).keyup(a.fn.numeric.keyup).blur(a.fn.numeric.blur)};a.fn.numeric.keypress=function(b){var c=a.data(this,"numeric.decimal"),e=a.data(this,"numeric.negative"),
d=b.charCode?b.charCode:b.keyCode?b.keyCode:0;if(13==d&&"input"==this.nodeName.toLowerCase())return!0;if(13==d)return!1;var g=!1;if(b.ctrlKey&&97==d||b.ctrlKey&&65==d||b.ctrlKey&&120==d||b.ctrlKey&&88==d||b.ctrlKey&&99==d||b.ctrlKey&&67==d||b.ctrlKey&&122==d||b.ctrlKey&&90==d||b.ctrlKey&&118==d||b.ctrlKey&&86==d||b.shiftKey&&45==d)return!0;if(48>d||57<d){var k=a(this).val();if(0!==k.indexOf("-")&&e&&45==d&&(0===k.length||0===parseInt(a.fn.getSelectionStart(this),10)))return!0;c&&(d==c.charCodeAt(0)&&
-1!=k.indexOf(c))&&(g=!1);8!=d&&9!=d&&13!=d&&35!=d&&36!=d&&37!=d&&39!=d&&46!=d?g=!1:"undefined"!=typeof b.charCode&&(b.keyCode==b.which&&0!==b.which?(g=!0,46==b.which&&(g=!1)):0!==b.keyCode&&(0===b.charCode&&0===b.which)&&(g=!0));c&&d==c.charCodeAt(0)&&(g=-1==k.indexOf(c)?!0:!1)}else g=!0;return g};a.fn.numeric.keyup=function(){var b=a(this).value;if(b&&0<b.length){var c=a.fn.getSelectionStart(this),e=a.data(this,"numeric.decimal"),d=a.data(this,"numeric.negative");if(""!==e&&null!==e){var g=b.indexOf(e);
0===g&&(this.value="0"+b);1==g&&"-"==b.charAt(0)&&(this.value="-0"+b.substring(1));b=this.value}for(var k=[0,1,2,3,4,5,6,7,8,9,"-",e],g=b.length,h=g-1;0<=h;h--){var n=b.charAt(h);0!==h&&"-"==n?b=b.substring(0,h)+b.substring(h+1):0===h&&(!d&&"-"==n)&&(b=b.substring(1));for(var l=!1,j=0;j<k.length;j++)if(n==k[j]){l=!0;break}if(!l||" "==n)b=b.substring(0,h)+b.substring(h+1)}d=b.indexOf(e);if(0<d)for(g-=1;g>d;g--)b.charAt(g)==e&&(b=b.substring(0,g)+b.substring(g+1));this.value=b;a.fn.setSelection(this,
c)}};a.fn.numeric.blur=function(){var b=a.data(this,"numeric.decimal"),c=a.data(this,"numeric.callback"),e=this.value;""!==e&&(RegExp("^\\d+$|^\\d*"+b+"\\d+$").exec(e)||c.apply(this))};a.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).unbind("keypress",a.fn.numeric.keypress).unbind("blur",a.fn.numeric.blur)};a.fn.getSelectionStart=function(a){if(a.createTextRange){var c=document.selection.createRange().duplicate();c.moveEnd("character",
a.value.length);return""===c.text?a.value.length:a.value.lastIndexOf(c.text)}return a.selectionStart};a.fn.setSelection=function(a,c){"number"==typeof c&&(c=[c,c]);if(c&&c.constructor==Array&&2==c.length)if(a.createTextRange){var e=a.createTextRange();e.collapse(!0);e.moveStart("character",c[0]);e.moveEnd("character",c[1]);e.select()}else a.setSelectionRange&&(a.focus(),a.setSelectionRange(c[0],c[1]))}})(jQuery);
tesla={};
tesla.DocumentAnimations=Backbone.Collection.extend({initialize:function(){this.model=tesla.BaseModel;var a=$("#scrollable").height(),b=$(window).height(),a=-(a-b+400);$(window).resize(function(){$(window).height()});this.add([{selector:"body",start:0,stop:1130,frames:[{index:0,css:{"background-position":{x:0,y:0}}},{index:1,css:{"background-position":{x:0,y:-1130}}}]},{selector:"#main-nav",start:0,stop:120,frames:[{index:0,css:{top:0}},{index:1,css:{top:-120}}]},{selector:"#scrollable",start:0,stop:2701,
frames:[{index:0,css:{top:0}},{index:1,css:{top:-2701}}]},{selector:"#scrollable",start:2901,stop:5968,frames:[{index:0,css:{top:-2701}},{index:1,css:{top:-5968}}]},{selector:"#scrollable",start:6168,stop:9294,frames:[{index:0,css:{top:-5968}},{index:1,css:{top:-9294}}]},{selector:"#scrollable",start:9494,stop:12561,frames:[{index:0,css:{top:-9294}},{index:1,css:{top:-12561}}]},{selector:"#scrollable",start:12761,stop:15844,frames:[{index:0,css:{top:-12561}},{index:1,css:{top:-15844}}]},{selector:"#scrollable",
start:16044,stop:17047,frames:[{index:0,css:{top:-15844}},{index:1,css:{top:a}}]},{selector:"#nav",start:0,stop:699,frames:[{index:0,css:{top:434}},{index:1,css:{top:-265}}]}])}});
tesla.HomeAnimations=Backbone.Collection.extend({initialize:function(){this.model=tesla.BaseModel;this.add([{selector:"#home",start:0,stop:668,onStart:function(){module.navigate("");$("#nav .active").removeClass("active");var a=this;this.get("view").trackingTimeout=setTimeout(function(){a.get("view").initializeAnalytics("Home","DisplayHomePage",a.get("start"),a.get("stop"))},1E3)},onStop:function(){this.get("view").trackingTimeout&&(clearTimeout(this.get("view").trackingTimeout),this.get("view").trackingTimeout=
null)}}])}});
tesla.RangeTitleAnimations=Backbone.Collection.extend({initialize:function(){this.model=tesla.BaseModel;this.add([{selector:"#range-title",start:669,stop:1200,onStart:function(){var a=this;this.get("view").trackingTimeout=setTimeout(function(){a.get("view").initializeAnalytics("Range","DisplayTitle",a.get("start"),a.get("stop"))},1E3)},onStop:function(){this.get("view").trackingTimeout&&(clearTimeout(this.get("view").trackingTimeout),this.get("view").trackingTimeout=null)}},{selector:"#range-title",
start:669,stop:4003,onStart:function(){module.navigate("range");$("#nav .active").removeClass("active");$("#nav .range").addClass("active")}},{selector:"#range-title",start:669,stop:1376,frames:[{index:0,css:{"background-position":{x:0}}},{index:1,css:{"background-position":{x:-120}}}]},{selector:"#range-title .car",start:669,stop:1376,frames:[{index:0,css:{top:180,left:-130}},{index:1,css:{top:150,left:-35}}]}])}});
tesla.RangeIntroAnimations=Backbone.Collection.extend({initialize:function(){this.model=tesla.BaseModel;this.add([{selector:"#range-intro",start:1201,stop:2710,onStart:function(){var a=this;this.get("view").trackingTimeout=setTimeout(function(){a.get("view").initializeAnalytics("Range","DisplayIntro",a.get("start"),a.get("stop"))},1E3)},onStop:function(){this.get("view").trackingTimeout&&(clearTimeout(this.get("view").trackingTimeout),this.get("view").trackingTimeout=null)}},{selector:"#range-intro .red-line-1",
start:1200,stop:2300,frames:[{index:0,css:{height:0}},{index:1,css:{height:1233}}]},{selector:"#range-intro .red-line-2",start:2300,stop:2400,frames:[{index:0,css:{width:371}},{index:1,css:{width:0}}]},{selector:"#range-intro .red-line-3",start:2400,stop:2500,frames:[{index:0,css:{height:0}},{index:1,css:{height:147}}]},{selector:"#range-intro .batteries .kwh60",start:1200,stop:1400,frames:[{index:0,css:{left:0}},{index:1,css:{left:116}}]},{selector:"#range-intro .batteries .kwh40",start:1200,stop:1400,
frames:[{index:0,css:{left:0}},{index:1,css:{left:238}}]},{selector:"#range-intro .bubble",start:2070,stop:2071,frames:[{index:0,callback:function(){this.get("el").fadeOut()}},{index:1,callback:function(){this.get("el").fadeIn()}}]},{selector:"#range-intro .header2 .highlight",start:1560,stop:1561,frames:[{index:0,callback:function(){this.get("el").animate({color:"#666"},300)}},{index:1,callback:function(){this.get("el").animate({color:"#c00"},300)}}]},{selector:"#range-intro .header4 .highlight",
start:2180,stop:2181,frames:[{index:0,callback:function(){this.get("el").animate({color:"#666"},300)}},{index:1,callback:function(){this.get("el").animate({color:"#c00"},300)}}]}])}});
tesla.RangeDashboardAnimations=Backbone.Collection.extend({initialize:function(){this.model=tesla.BaseModel;this.add([{selector:"#range-dashboard",start:2711,stop:3457,onStart:function(){var a=this;this.get("view").trackingTimeout=setTimeout(function(){a.get("view").initializeAnalytics("Range","DisplayDashBoard",a.get("start"),a.get("stop"))},1E3)},onStop:function(){this.get("view").trackingTimeout&&(clearTimeout(this.get("view").trackingTimeout),this.get("view").trackingTimeout=null)}},{selector:"#range-dashboard",
start:1550,stop:3441,onStart:function(){this.get("view").initializeAnimations()},onStop:function(){this.get("view").destroyAnimations()}}])}});
tesla.RangeInfoAnimations=Backbone.Collection.extend({initialize:function(){this.model=tesla.BaseModel;this.add([{selector:"#range-info",start:3458,stop:4047,onStart:function(){var a=this;this.get("view").trackingTimeout=setTimeout(function(){a.get("view").initializeAnalytics("Range","DisplayMoreInfo",a.get("start"),a.get("stop"))},1E3)},onStop:function(){this.get("view").trackingTimeout&&(clearTimeout(this.get("view").trackingTimeout),this.get("view").trackingTimeout=null)}}])}});
tesla.ChargingTitleAnimations=Backbone.Collection.extend({initialize:function(){this.model=tesla.BaseModel;this.add([{selector:"#charging-title",start:3966,stop:4669,onStart:function(){var a=this;this.get("view").trackingTimeout=setTimeout(function(){a.get("view").initializeAnalytics("Charging","DisplayTitle",a.get("start"),a.get("stop"))},1E3)},onStop:function(){this.get("view").trackingTimeout&&(clearTimeout(this.get("view").trackingTimeout),this.get("view").trackingTimeout=null)}},{selector:"#charging-title",
start:3966,stop:7328,onStart:function(){module.navigate("charging");$("#nav .active").removeClass("active");$("#nav .charging").addClass("active")}}])}});
tesla.ChargingIntroAnimations=Backbone.Collection.extend({initialize:function(){this.model=tesla.BaseModel;this.add([{selector:"#charging-intro",start:4670,stop:5949,onStart:function(){var a=this;this.get("view").trackingTimeout=setTimeout(function(){a.get("view").initializeAnalytics("Charging","DisplayIntro",a.get("start"),a.get("stop"))},1E3)},onStop:function(){this.get("view").trackingTimeout&&(clearTimeout(this.get("view").trackingTimeout),this.get("view").trackingTimeout=null)}},{selector:"#charging-intro .red-line-1",
start:4500,stop:5200,frames:[{index:0,css:{height:0}},{index:1,css:{height:808}}]},{selector:"#charging-intro .red-line-2",start:5200,stop:5300,frames:[{index:0,css:{width:67}},{index:1,css:{width:0}}]},{selector:"#charging-intro .red-line-3",start:5300,stop:5400,frames:[{index:0,css:{height:0}},{index:1,css:{height:166}}]},{selector:"#charging-intro .red-line-4",start:5400,stop:5500,frames:[{index:0,css:{width:158}},{index:1,css:{width:0}}]},{selector:"#charging-intro .red-line-5",start:5500,stop:5600,
frames:[{index:0,css:{height:0}},{index:1,css:{height:250}}]},{selector:"#charging-intro .red-line-6",start:5600,stop:5700,frames:[{index:0,css:{width:323}},{index:1,css:{width:0}}]},{selector:"#charging-intro .red-line-7",start:5700,stop:5800,frames:[{index:0,css:{height:0}},{index:1,css:{height:140}}]},{selector:"#charging-intro .battery",start:4500,stop:5E3,maxImages:11},{selector:"#charging-intro .header1 .highlight",start:4600,stop:4601,frames:[{index:0,callback:function(){this.get("el").animate({color:"#666"},
300)}},{index:1,callback:function(){this.get("el").animate({color:"#c00"},300)}}]},{selector:"#charging-intro .header3 .highlight",start:5162,stop:5163,frames:[{index:0,callback:function(){this.get("el").animate({color:"#666"},300)}},{index:1,callback:function(){this.get("el").animate({color:"#c00"},300)}}]},{selector:"#charging-intro .header4 .highlight",start:5500,stop:5501,frames:[{index:0,callback:function(){this.get("el").animate({color:"#666"},300)}},{index:1,callback:function(){this.get("el").animate({color:"#c00"},
300)}}]},{selector:"#charging-intro .sun-moon",start:4900,stop:5100,maxImages:16}])}});
tesla.ChargingDashboardAnimations=Backbone.Collection.extend({initialize:function(){this.model=tesla.BaseModel;this.add([{selector:"#charging-dashboard",start:5950,stop:6709,onStart:function(){var a=this;this.get("view").trackingTimeout=setTimeout(function(){a.get("view").initializeAnalytics("Charging","DisplayDashBoard",a.get("start"),a.get("stop"))},1E3)},onStop:function(){this.get("view").trackingTimeout&&(clearTimeout(this.get("view").trackingTimeout),this.get("view").trackingTimeout=null)}}])}});
tesla.ChargingInfoAnimations=Backbone.Collection.extend({initialize:function(){this.model=tesla.BaseModel;this.add([{selector:"#charging-info",start:6710,stop:7350,onStart:function(){var a=this;this.get("view").trackingTimeout=setTimeout(function(){a.get("view").initializeAnalytics("Charging","DisplayMoreInfo",a.get("start"),a.get("stop"))},1E3)},onStop:function(){this.get("view").trackingTimeout&&(clearTimeout(this.get("view").trackingTimeout),this.get("view").trackingTimeout=null)}}])}});
tesla.RoadTripTitleAnimations=Backbone.Collection.extend({initialize:function(){this.model=tesla.BaseModel;this.add([{selector:"#roadtrip-title",start:7289,stop:7967,onStart:function(){var a=this;this.get("view").trackingTimeout=setTimeout(function(){a.get("view").initializeAnalytics("RoadTrips","DisplayTitle",a.get("start"),a.get("stop"))},1E3);$("#roadtrip-intro .car").removeAttr("style").show().removeClass("t1").removeClass("t2").removeClass("t3").removeClass("t4").removeClass("t5").css({left:"462",
top:"123"});$("#roadtrip-intro .red-line-1").css("height","0");$("#roadtrip-intro .red-line-2").css("width","302");$("#roadtrip-intro .red-line-3").css("height","0")},onStop:function(){this.get("view").trackingTimeout&&(clearTimeout(this.get("view").trackingTimeout),this.get("view").trackingTimeout=null)}},{selector:"#roadtrip-title",start:7289,stop:10127,onStart:function(){module.navigate("roadtrips");$("#nav .active").removeClass("active");$("#nav .roadtrips").addClass("active")}},{selector:"#roadtrip-title",
start:7289,stop:7880,frames:[{index:0,css:{"background-position":{x:-200,y:-410}}},{index:1,css:{"background-position":{x:-280,y:-410}}}]},{selector:"#roadtrip-title .car",start:7289,stop:7880,frames:[{index:0,css:{top:250,left:70}},{index:1,css:{top:270,left:-10}}]}])}});
tesla.RoadTripIntroAnimations=Backbone.Collection.extend({initialize:function(){this.model=tesla.BaseModel;this.add([{selector:"#roadtrip-intro",start:7968,stop:9247,onStart:function(){var a=this;this.get("view").trackingTimeout=setTimeout(function(){a.get("view").initializeAnalytics("RoadTrips","DisplayIntro",a.get("start"),a.get("stop"))},1E3)},onStop:function(){this.get("view").trackingTimeout&&(clearTimeout(this.get("view").trackingTimeout),this.get("view").trackingTimeout=null)}},{selector:"#roadtrip-intro .cow-l",
start:7860,stop:8340,frames:[{index:0,css:{left:240}},{index:1,css:{left:200}}]},{selector:"#roadtrip-intro .cow-r1",start:7860,stop:8340,frames:[{index:0,css:{left:275}},{index:1,css:{left:295}}]},{selector:"#roadtrip-intro .cow-r2",start:7860,stop:8340,frames:[{index:0,css:{left:410}},{index:1,css:{left:460}}]},{selector:"#roadtrip-intro .red-line-1",start:7860,stop:8510,frames:[{index:0,css:{height:0}},{index:1,css:{height:773}}]},{selector:"#roadtrip-intro .red-line-1",start:8610,stop:8860,frames:[{index:0,
css:{height:773}},{index:1,css:{height:1203}}]},{selector:"#roadtrip-intro .red-line-2",start:8860,stop:8960,frames:[{index:0,css:{width:302}},{index:1,css:{width:0}}]},{selector:"#roadtrip-intro .red-line-3",start:8960,stop:9060,frames:[{index:0,css:{height:0}},{index:1,css:{height:170}}]},{selector:"#roadtrip-intro .car",start:7960,stop:8087,onStart:function(){this.get("el").removeClass("t1");this.get("el").removeClass("t2");this.get("el").removeClass("t3");this.get("el").removeClass("t4");this.get("el").removeClass("t5")},
frames:[{index:0,css:{left:462,top:123}},{index:1,css:{left:462,top:253}}]},{selector:"#roadtrip-intro .car",start:8088,stop:8169,onStart:function(){this.get("el").addClass("t1");this.get("el").removeClass("t2");this.get("el").removeClass("t3");this.get("el").removeClass("t4");this.get("el").removeClass("t5")},frames:[{index:0,css:{left:462,top:253}},{index:1,css:{left:305,top:347}}]},{selector:"#roadtrip-intro .car",start:8170,stop:8224,onStart:function(){this.get("el").removeClass("t1");this.get("el").removeClass("t2");
this.get("el").removeClass("t3");this.get("el").removeClass("t4");this.get("el").removeClass("t5")},frames:[{index:0,css:{left:305,top:347}},{index:1,css:{left:305,top:411}}]},{selector:"#roadtrip-intro .car",start:8225,stop:8275,onStart:function(){this.get("el").removeClass("t1");this.get("el").addClass("t2");this.get("el").removeClass("t3");this.get("el").removeClass("t4");this.get("el").removeClass("t5")},frames:[{index:0,css:{left:305,top:411}},{index:1,css:{left:382,top:472}}]},{selector:"#roadtrip-intro .car",
start:8276,stop:8360,onStart:function(){this.get("el").removeClass("t1");this.get("el").removeClass("t2");this.get("el").addClass("t3");this.get("el").removeClass("t4");this.get("el").removeClass("t5")},frames:[{index:0,css:{left:382,top:472}},{index:1,css:{left:410,top:576}}]},{selector:"#roadtrip-intro .car",start:8361,stop:8450,onStart:function(){this.get("el").removeClass("t1");this.get("el").removeClass("t2");this.get("el").removeClass("t3");this.get("el").addClass("t4");this.get("el").removeClass("t5")},
frames:[{index:0,css:{left:410,top:576}},{index:1,css:{left:556,top:678}}]},{selector:"#roadtrip-intro .car",start:8451,stop:8510,onStart:function(){this.get("el").removeClass("t1");this.get("el").removeClass("t2");this.get("el").removeClass("t3");this.get("el").removeClass("t4");this.get("el").removeClass("t5")},frames:[{index:0,css:{left:556,top:678}},{index:1,css:{left:556,top:733}}]},{selector:"#roadtrip-intro .car",start:8610,stop:8695,onStart:function(){this.get("el").removeClass("t1");this.get("el").removeClass("t2");
this.get("el").removeClass("t3");this.get("el").removeClass("t4");this.get("el").removeClass("t5")},frames:[{index:0,css:{left:556,top:733}},{index:1,css:{left:556,top:908}}]},{selector:"#roadtrip-intro .car",start:8695,stop:8718,onStart:function(){this.get("el").removeClass("t1");this.get("el").removeClass("t2");this.get("el").removeClass("t3");this.get("el").removeClass("t4");this.get("el").addClass("t5")},frames:[{index:0,css:{left:556,top:908}},{index:1,css:{left:460,top:953}}]},{selector:"#roadtrip-intro .car",
start:8718,stop:8741,onStart:function(){this.get("el").removeClass("t1");this.get("el").removeClass("t2");this.get("el").removeClass("t3");this.get("el").removeClass("t4");this.get("el").removeClass("t5")},frames:[{index:0,css:{left:460,top:953}},{index:1,css:{left:460,top:990}}]},{selector:"#roadtrip-intro .car",start:8740,stop:8741,frames:[{index:0,callback:function(){this.get("el").fadeIn()}},{index:1,callback:function(){this.get("el").fadeOut()}}]},{selector:"#roadtrip-intro .full",start:7890,
stop:8510,maxImages:11,onStart:function(){this.get("el").show();$("#roadtrip-intro .battery").hide()},onStop:function(){}},{selector:"#roadtrip-intro .battery",start:8509,stop:8590,maxImages:8,onStart:function(){this.get("el").show();$("#roadtrip-intro .full").hide()},onStop:function(){}},{selector:"#roadtrip-intro .header2 .highlight",start:8180,stop:8181,frames:[{index:0,callback:function(){this.get("el").animate({color:"#666"},300)}},{index:1,callback:function(){this.get("el").animate({color:"#c00"},
300)}}]},{selector:"#roadtrip-intro .header3 .highlight",start:8560,stop:8561,frames:[{index:0,callback:function(){this.get("el").animate({color:"#666"},300)}},{index:1,callback:function(){this.get("el").animate({color:"#c00"},300)}}]},{selector:"#roadtrip-intro .header4 .highlight",start:8760,stop:8761,frames:[{index:0,callback:function(){this.get("el").animate({color:"#666"},300)}},{index:1,callback:function(){this.get("el").animate({color:"#c00"},300)}}]}])}});
tesla.RoadTripDashboardAnimations=Backbone.Collection.extend({initialize:function(){this.model=tesla.BaseModel;this.add([{selector:"#roadtrip-dashboard",start:9248,stop:10026,onStart:function(){var a=this;this.get("view").trackingTimeout=setTimeout(function(){a.get("view").initializeAnalytics("RoadTrips","DisplayDashBoard",a.get("start"),a.get("stop"))},1E3)},onStop:function(){this.get("view").trackingTimeout&&(clearTimeout(this.get("view").trackingTimeout),this.get("view").trackingTimeout=null)}}])}});
tesla.RoadTripInfoAnimations=Backbone.Collection.extend({initialize:function(){this.model=tesla.BaseModel;this.add([{selector:"#roadtrip-info",start:10027,stop:10601,onStart:function(){var a=this;this.get("view").trackingTimeout=setTimeout(function(){a.get("view").initializeAnalytics("RoadTrips","DisplayMoreInfo",a.get("start"),a.get("stop"))},1E3)},onStop:function(){this.get("view").trackingTimeout&&(clearTimeout(this.get("view").trackingTimeout),this.get("view").trackingTimeout=null)}}])}});
tesla.ElectricityTitleAnimations=Backbone.Collection.extend({initialize:function(){this.model=tesla.BaseModel;this.add([{selector:"#electricity-title",start:10556,stop:11226,onStart:function(){var a=this;this.get("view").trackingTimeout=setTimeout(function(){a.get("view").initializeAnalytics("Electricity","DisplayTitle",a.get("start"),a.get("stop"))},1E3)},onStop:function(){this.get("view").trackingTimeout&&(clearTimeout(this.get("view").trackingTimeout),this.get("view").trackingTimeout=null)}},{selector:"#electricity-title",
start:10556,stop:13878,onStart:function(){module.navigate("electricity");$("#nav .active").removeClass("active");$("#nav .electricity").addClass("active")}},{selector:"#electricity-title",start:10556,stop:11129,frames:[{index:0,css:{"background-position":{x:-70,y:-380}}},{index:1,css:{"background-position":{x:-150,y:-380}}}]},{selector:"#electricity-title .car",start:10556,stop:11129,frames:[{index:0,css:{left:-80}},{index:1,css:{left:0}}]},{selector:"#electricity-title .foreground",start:10556,stop:11129,
frames:[{index:0,css:{left:-80}},{index:1,css:{left:-180}}]}])}});
tesla.ElectricityIntroAnimations=Backbone.Collection.extend({initialize:function(){this.model=tesla.BaseModel;this.add([{selector:"#electricity-intro",start:11227,stop:12506,onStart:function(){var a=this;this.get("view").trackingTimeout=setTimeout(function(){a.get("view").initializeAnalytics("Electricity","DisplayIntro",a.get("start"),a.get("stop"))},1E3)},onStop:function(){this.get("view").trackingTimeout&&(clearTimeout(this.get("view").trackingTimeout),this.get("view").trackingTimeout=null)}},{selector:"#electricity-intro .red-line",
start:10970,stop:12370,frames:[{index:0,css:{height:0}},{index:1,css:{height:1368}}]},{selector:"#electricity-intro .bubble",start:11275,stop:11276,frames:[{index:0,callback:function(){this.get("el").fadeOut()}},{index:1,callback:function(){this.get("el").fadeIn()}}]},{selector:"#electricity-intro .text1 .highlight",start:11120,stop:11121,frames:[{index:0,callback:function(){this.get("el").animate({color:"#666"},300)}},{index:1,callback:function(){this.get("el").animate({color:"#c00"},300)}}]},{selector:"#electricity-intro .text2 .highlight",
start:11450,stop:11451,frames:[{index:0,callback:function(){this.get("el").animate({color:"#666"},300)}},{index:1,callback:function(){this.get("el").animate({color:"#c00"},300)}}]},{selector:"#electricity-intro .text3 .highlight",start:12150,stop:12151,frames:[{index:0,callback:function(){this.get("el").animate({color:"#666"},300)}},{index:1,callback:function(){this.get("el").animate({color:"#c00"},300)}}]}])}});
tesla.ElectricityDashboardAnimations=Backbone.Collection.extend({initialize:function(){this.model=tesla.BaseModel;this.add([{selector:"#electricity-dashboard",start:12506,stop:13266,onStart:function(){var a=this;this.get("view").trackingTimeout=setTimeout(function(){a.get("view").initializeAnalytics("Electricity","DisplayDashBoard",a.get("start"),a.get("stop"))},1E3)},onStop:function(){this.get("view").trackingTimeout&&(clearTimeout(this.get("view").trackingTimeout),this.get("view").trackingTimeout=
null)}}])}});
tesla.ElectricityInfoAnimations=Backbone.Collection.extend({initialize:function(){this.model=tesla.BaseModel;this.add([{selector:"#electricity-info",start:13267,stop:13897,onStart:function(){var a=this;this.get("view").trackingTimeout=setTimeout(function(){a.get("view").initializeAnalytics("Electricity","DisplayMoreInfo",a.get("start"),a.get("stop"))},1E3)},onStop:function(){this.get("view").trackingTimeout&&(clearTimeout(this.get("view").trackingTimeout),this.get("view").trackingTimeout=null)}}])}});
tesla.SavingTitleAnimations=Backbone.Collection.extend({initialize:function(){this.model=tesla.BaseModel;this.add([{selector:"#saving-title",start:13898,stop:14479,onStart:function(){var a=this;this.get("view").trackingTimeout=setTimeout(function(){a.get("view").initializeAnalytics("Savings","DisplayTitle",a.get("start"),a.get("stop"))},1E3)},onStop:function(){this.get("view").trackingTimeout&&(clearTimeout(this.get("view").trackingTimeout),this.get("view").trackingTimeout=null)}},{selector:"#saving-title",
start:13879,stop:17047,onStart:function(){module.navigate("savings");$("#nav .active").removeClass("active");$("#nav .savings").addClass("active")}}])}});
tesla.SavingIntroAnimations=Backbone.Collection.extend({initialize:function(){this.model=tesla.BaseModel;this.add([{selector:"#saving-intro",start:14480,stop:15759,onStart:function(){var a=this;this.get("view").trackingTimeout=setTimeout(function(){a.get("view").initializeAnalytics("Savings","DisplayIntro",a.get("start"),a.get("stop"))},1E3)},onStop:function(){this.get("view").trackingTimeout&&(clearTimeout(this.get("view").trackingTimeout),this.get("view").trackingTimeout=null)}},{selector:"#saving-intro .red-line",
start:14340,stop:15589,frames:[{index:0,css:{height:0}},{index:1,css:{height:1368}}]},{selector:"#saving-intro .bubble",start:14509,stop:14510,frames:[{index:0,callback:function(){this.get("el").fadeOut()}},{index:1,callback:function(){this.get("el").fadeIn()}}]},{selector:"#saving-intro .graph",start:14850,stop:14970,frames:[{index:0,css:{width:0}},{index:1,css:{width:428}}]},{selector:"#saving-intro .text1 .highlight",start:14459,stop:14460,frames:[{index:0,callback:function(){this.get("el").animate({color:"#666"},
300)}},{index:1,callback:function(){this.get("el").animate({color:"#c00"},300)}}]},{selector:"#saving-intro .text2 .highlight",start:14689,stop:14690,frames:[{index:0,callback:function(){this.get("el").animate({color:"#666"},300)}},{index:1,callback:function(){this.get("el").animate({color:"#c00"},300)}}]},{selector:"#saving-intro .text3 .highlight",start:14979,stop:14980,frames:[{index:0,callback:function(){this.get("el").animate({color:"#666"},300)}},{index:1,callback:function(){this.get("el").animate({color:"#c00"},
300)}}]},{selector:"#saving-intro .text4 .highlight",start:15429,stop:15430,frames:[{index:0,callback:function(){this.get("el").animate({color:"#666"},300)}},{index:1,callback:function(){this.get("el").animate({color:"#c00"},300)}}]}])}});
tesla.SavingDashboardAnimations=Backbone.Collection.extend({initialize:function(){this.model=tesla.BaseModel;this.add([{selector:"#saving-dashboard",start:15760,stop:16426,onStart:function(){var a=this;this.get("view").trackingTimeout=setTimeout(function(){a.get("view").initializeAnalytics("Savings","DisplayDashBoard",a.get("start"),a.get("stop"))},1E3)},onStop:function(){this.get("view").trackingTimeout&&(clearTimeout(this.get("view").trackingTimeout),this.get("view").trackingTimeout=null)}},{selector:"#saving-dashboard",
start:15782,stop:16442,onStart:function(){this.get("view").initializeAnimations()},onStop:function(){this.get("view").destroyAnimations()}}])}});
tesla.SavingInfoAnimations=Backbone.Collection.extend({initialize:function(){this.model=tesla.BaseModel;this.add([{selector:"#saving-info",start:16427,stop:16946,onStart:function(){var a=this;this.get("view").trackingTimeout=setTimeout(function(){a.get("view").initializeAnalytics("Savings","DisplayMoreInfo",a.get("start"),a.get("stop"))},1E3)},onStop:function(){this.get("view").trackingTimeout&&(clearTimeout(this.get("view").trackingTimeout),this.get("view").trackingTimeout=null)}}])}});
tesla.EnergySourcesByState=Backbone.Collection.extend({initialize:function(){this.model=tesla.BaseModel;this.add([{id:"ak",name:"Alaska",lbs_emissions:"18.58",left:198,top:119,sources:{coal:"9.41",hydroelectric:"19.75","natural gas":"53.38","other biomass":"0.10",petroleum:"17.26",wind:"0.10"}},{id:"al",name:"Alabama",lbs_emissions:"14.19",sources:{coal:"38.82",hydroelectric:"8.75","natural gas":"22.07",nuclear:"27.72",other:"0.26","other biomass":"0.01","other gases":"0.09",petroleum:"0.15",wood:"2.12"}},
{id:"ar",name:"Arkansas",lbs_emissions:"15.55",sources:{coal:"43.64",hydroelectric:"7.3","natural gas":"19.53",nuclear:"26.4",other:"0.04","other biomass":"0.1",petroleum:"0.15","pumped storage":"0.17",wood:"2.66"}},{id:"az",name:"Arizona",lbs_emissions:"14.03",sources:{coal:"35.46",hydroelectric:"5.74","natural gas":"31.03",nuclear:"27.38","other biomass":"0.02",petroleum:"0.06","pumped storage":"0.15",solar:"0.01",wind:"0.03",wood:"0.12"}},{id:"ca",name:"California",lbs_emissions:"8.52",sources:{coal:"1",
geothermal:"6.28",hydroelectric:"13.62","natural gas":"55.41",nuclear:"15.51",other:"0.37","other biomass":"1.21","other gases":"0.79",petroleum:"0.75","pumped storage":"0.07",solar:"0.32",wind:"2.85",wood:"1.82"}},{id:"co",name:"Colorado",lbs_emissions:"22.64",sources:{coal:"62.56",hydroelectric:"3.73","natural gas":"27.37",other:"0.11","other biomass":"0.11",petroleum:"0.03","pumped storage":"-0.21",solar:"0.05",wind:"6.26"}},{id:"ct",name:"Connecticut",lbs_emissions:"7.57",sources:{coal:"7.86",
hydroelectric:"1.63","natural gas":"31.43",nuclear:"53.38",other:"2.29","other biomass":"2.43",petroleum:"0.96","pumped storage":"0.02"}},{id:"dc",name:"District of Columbia",lbs_emissions:"29.57",sources:{petroleum:"100"}},{id:"de",name:"Delaware",lbs_emissions:"25.13",sources:{coal:"58.83","natural gas":"28.43",other:"0.12","other biomass":"2.59","other gases":"4.69",petroleum:"5.34"}},{id:"fl",name:"Florida",lbs_emissions:"15.47",sources:{coal:"24.78",hydroelectric:"0.1","natural gas":"54.29",
nuclear:"13.36",other:"1.25","other biomass":"1.09",petroleum:"4.23",wood:"0.9"}},{id:"ga",name:"Georgia",lbs_emissions:"17.57",sources:{coal:"53.99",hydroelectric:"2.53","natural gas":"15.93",nuclear:"24.62",other:"0.02","other biomass":"0.06",petroleum:"0.5","pumped storage":"0.21",wood:"2.13"}},{id:"hi",name:"Hawaii",lbs_emissions:"23.10",sources:{coal:"13.62",geothermal:"1.52",hydroelectric:"1.02",other:"3.46","other biomass":"2.58","other gases":"0.2",petroleum:"75.28",solar:"0.01",wind:"2.28"}},
{id:"ia",name:"Iowa",lbs_emissions:"24.33",sources:{coal:"72.02",hydroelectric:"1.87","natural gas":"2.28",nuclear:"9.02","other biomass":"0.32",petroleum:"0.16",wind:"14.31"}},{id:"id",name:"Idaho",lbs_emissions:"2.30",sources:{coal:"0.63",geothermal:"0.58",hydroelectric:"79.65","natural gas":"12.55",other:"0.55",wind:"2.39",wood:"3.65"}},{id:"il",name:"Illinois",lbs_emissions:"14.99",sources:{coal:"46.41",hydroelectric:"0.07","natural gas":"2.32",nuclear:"49.25",other:"0.03","other biomass":"0.37",
"other gases":"0.05",petroleum:"0.06",wind:"1.45"}},{id:"in",name:"Indiana",lbs_emissions:"27.96",sources:{coal:"92.84",hydroelectric:"0.43","natural gas":"3.28",other:"0.29","other biomass":"0.26","other gases":"1.56",petroleum:"0.13",wind:"1.2"}},{id:"ks",name:"Kansas",lbs_emissions:"22.77",sources:{coal:"69.08",hydroelectric:"0.03","natural gas":"5.72",nuclear:"18.79",petroleum:"0.26",wind:"6.13"}},{id:"ky",name:"Kentucky",lbs_emissions:"27.91",sources:{coal:"92.73",hydroelectric:"3.66","natural gas":"0.97",
other:"0.01","other biomass":"0.11",petroleum:"2.22",wood:"0.29"}},{id:"la",name:"Louisiana",lbs_emissions:"17.17",sources:{coal:"25.35",hydroelectric:"1.36","natural gas":"48.36",nuclear:"18.44",other:"0.5","other biomass":"0.07","other gases":"1.35",petroleum:"2.04",wood:"2.52"}},{id:"ma",name:"Massachusetts",lbs_emissions:"14.83",sources:{coal:"23.17",hydroelectric:"3.08","natural gas":"53.86",nuclear:"13.85",other:"1.95","other biomass":"2.84",petroleum:"2.3","pumped storage":"-1.37",wind:"0.02",
wood:"0.3"}},{id:"md",name:"Maryland",lbs_emissions:"17.21",sources:{coal:"55.2",hydroelectric:"4.31","natural gas":"4.04",nuclear:"33.24",other:"0.58","other biomass":"0.86","other gases":"0.61",petroleum:"0.75",wood:"0.4"}},{id:"me",name:"Maine",lbs_emissions:"8.47",sources:{coal:"0.44",hydroelectric:"25.76","natural gas":"44.99",other:"2.07","other biomass":"1.67",petroleum:"2.65",wind:"1.83",wood:"20.59"}},{id:"mi",name:"Michigan",lbs_emissions:"21.35",sources:{coal:"66.05",hydroelectric:"1.36",
"natural gas":"8.32",nuclear:"21.59",other:"0.34","other biomass":"0.82","other gases":"0.2",petroleum:"0.39","pumped storage":"-0.85",wind:"0.3",wood:"1.47"}},{id:"mn",name:"Minnesota",lbs_emissions:"18.84",sources:{coal:"55.87",hydroelectric:"1.54","natural gas":"5.42",nuclear:"23.61",other:"0.55","other biomass":"1.69","other gases":"0.05",petroleum:"0.12",wind:"9.63",wood:"1.52"}},{id:"mo",name:"Missouri",lbs_emissions:"24.83",sources:{coal:"81.05",hydroelectric:"2.06","natural gas":"3.87",nuclear:"11.6",
other:"0.03","other biomass":"0.08","other gases":"0.01",petroleum:"0.1","pumped storage":"0.64",wind:"0.57"}},{id:"ms",name:"Mississippi",lbs_emissions:"14.16",sources:{coal:"26.61","natural gas":"47.78",nuclear:"22.58",other:"0.03","other biomass":"0.01","other gases":"0.05",petroleum:"0.03",wood:"2.91"}},{id:"mt",name:"Montana",lbs_emissions:"19.29",sources:{coal:"58.44",hydroelectric:"35.59","natural gas":"0.29",other:"0.41","other gases":"0.01",petroleum:"1.84",wind:"3.07",wood:"0.35"}},{id:"nc",
name:"North Carolina",lbs_emissions:"16.08",sources:{coal:"54.97",hydroelectric:"4.37","natural gas":"4.1",nuclear:"34.5",other:"0.19","other biomass":"0.11",petroleum:"0.25","pumped storage":"0.04",wood:"1.48"}},{id:"nd",name:"North Dakota",lbs_emissions:"28.00",sources:{coal:"86.58",hydroelectric:"4.31","natural gas":"0.05","other biomass":"0.03","other gases":"0.13",petroleum:"0.13",wind:"8.77"}},{id:"ne",name:"Nebraska",lbs_emissions:"20.64",sources:{coal:"68.67",hydroelectric:"1.28","natural gas":"0.92",
nuclear:"27.75","other biomass":"0.19",petroleum:"0.07",wind:"1.13"}},{id:"nh",name:"New Hampshire",lbs_emissions:"8.02",sources:{coal:"14.31",hydroelectric:"8.33","natural gas":"26.49",nuclear:"43.72",other:"0.29","other biomass":"0.75",petroleum:"0.91",wind:"0.31",wood:"4.88"}},{id:"nj",name:"New Jersey",lbs_emissions:"7.64",sources:{coal:"8.25",hydroelectric:"0.05","natural gas":"33.37",nuclear:"55.54",other:"0.84","other biomass":"1.5","other gases":"0.27",petroleum:"0.45","pumped storage":"-0.33",
solar:"0.02",wind:"0.03"}},{id:"nm",name:"New Mexico",lbs_emissions:"24.79",sources:{coal:"73.39",hydroelectric:"0.68","natural gas":"21.83","other biomass":"0.08",petroleum:"0.11",wind:"3.9"}},{id:"nv",name:"Nevada",lbs_emissions:"14.25",sources:{coal:"20",geothermal:"4.33",hydroelectric:"6.53","natural gas":"68.63","other gases":"0.01",petroleum:"0.04",solar:"0.46"}},{id:"ny",name:"New York",lbs_emissions:"8.41",sources:{coal:"9.58",hydroelectric:"20.74","natural gas":"31.38",nuclear:"32.66",other:"0.66",
"other biomass":"1.25",petroleum:"1.99","pumped storage":"-0.36",wind:"1.7",wood:"0.4"}},{id:"oh",name:"Ohio",lbs_emissions:"24.82",sources:{coal:"83.56",hydroelectric:"0.39","natural gas":"3.42",nuclear:"11.17",other:"0.01","other biomass":"0.15","other gases":"0.03",petroleum:"0.96",wind:"0.01",wood:"0.3"}},{id:"ok",name:"Oklahoma",lbs_emissions:"20.33",sources:{coal:"45.37",hydroelectric:"4.73","natural gas":"46.13","other biomass":"0.22",petroleum:"0.01","pumped storage":"-0.16",wind:"3.59",wood:"0.09"}},
{id:"or",name:"Oregon",lbs_emissions:"4.87",sources:{coal:"8.64",hydroelectric:"58.27","natural gas":"28.46",other:"0.08","other biomass":"0.23",petroleum:"0.01",wind:"6.12",wood:"1.19"}},{id:"pa",name:"Pennsylvania",lbs_emissions:"15.60",sources:{coal:"48.05",hydroelectric:"1.22","natural gas":"13.31",nuclear:"35.23",other:"0.37","other biomass":"0.72","other gases":"0.2",petroleum:"0.42","pumped storage":"-0.33",wind:"0.49",wood:"0.32"}},{id:"ri",name:"Rhode Island",lbs_emissions:"12.13",sources:{hydroelectric:"0.06",
"natural gas":"97.84","other biomass":"1.88",petroleum:"0.22"}},{id:"sc",name:"South Carolina",lbs_emissions:"11.18",sources:{coal:"34.43",hydroelectric:"2.33","natural gas":"9.77",nuclear:"52.08",other:"0.09","other biomass":"0.14",petroleum:"0.52","pumped storage":"-0.98",wood:"1.61"}},{id:"sd",name:"South Dakota",lbs_emissions:"12.58",sources:{coal:"39.25",hydroelectric:"54.08","natural gas":"0.98",other:"0.38","other biomass":"0.07",petroleum:"0.1",wind:"5.14"}},{id:"tn",name:"Tennessee",lbs_emissions:"16.01",
sources:{coal:"52.23",hydroelectric:"12.81","natural gas":"0.51",nuclear:"33.82","other biomass":"0.05","other gases":"0.02",petroleum:"0.23","pumped storage":"-0.82",wind:"0.06",wood:"1.08"}},{id:"tx",name:"Texas",lbs_emissions:"17.95",sources:{coal:"35.02",hydroelectric:"0.26","natural gas":"47.6",nuclear:"10.45",other:"0.08","other biomass":"0.11","other gases":"0.92",petroleum:"0.35",wind:"5.04",wood:"0.16"}},{id:"ut",name:"Utah",lbs_emissions:"24.62",sources:{coal:"81.59",geothermal:"0.64",hydroelectric:"1.92",
"natural gas":"14.8",other:"0.43","other biomass":"0.11","other gases":"0.06",petroleum:"0.08",wind:"0.37"}},{id:"va",name:"Virginia",lbs_emissions:"15.15",sources:{coal:"36.53",hydroelectric:"2.11","natural gas":"17.41",nuclear:"40.26",other:"0.6","other biomass":"1.01",petroleum:"1.55","pumped storage":"-1.9",wood:"2.44"}},{id:"vt",name:"Vermont",lbs_emissions:"0.03",sources:{hydroelectric:"20.4","natural gas":"0.06",nuclear:"73.61","other biomass":"0.33",petroleum:"0.03",wind:"0.16",wood:"5.4"}},
{id:"wa",name:"Washington",lbs_emissions:"3.80",sources:{coal:"7.16",hydroelectric:"69.81","natural gas":"11.46",nuclear:"6.35",other:"0.06","other biomass":"0.16","other gases":"0.23",petroleum:"0.05","pumped storage":"0.05",wind:"3.42",wood:"1.25"}},{id:"wi",name:"Wisconsin",lbs_emissions:"21.66",sources:{coal:"62.18",hydroelectric:"2.32","natural gas":"9.15",nuclear:"21.15",other:"0.11","other biomass":"0.87",petroleum:"1.19",wind:"1.75",wood:"1.28"}},{id:"wv",name:"West Virginia",lbs_emissions:"27.35",
sources:{coal:"96.18",hydroelectric:"2.33","natural gas":"0.15","other gases":"0.05",petroleum:"0.24",wind:"1.05"}},{id:"wy",name:"Wyoming",lbs_emissions:"28.50",sources:{coal:"91.15",hydroelectric:"2.1","natural gas":"1.06",other:"0.13","other gases":"0.62",petroleum:"0.11",wind:"4.84"}}])}});
var rangedata={city_S2_Wheels19_LightsOff_WindowsDown_acOff:{city_S2_LightsOff_WindowsDown_acOff_000:[206],city_S2_LightsOff_WindowsDown_acOff_032:[228],city_S2_LightsOff_WindowsDown_acOff_050:[230],city_S2_LightsOff_WindowsDown_acOff_070:[236],city_S2_LightsOff_WindowsDown_acOff_090:[238],city_S2_LightsOff_WindowsDown_acOff_110:[241]},city_S2_Wheels19_LightsOff_WindowsDown_acOn:{city_S2_LightsOff_WindowsDown_acOn_000:[140],city_S2_LightsOff_WindowsDown_acOn_032:[164],city_S2_LightsOff_WindowsDown_acOn_050:[194],
city_S2_LightsOff_WindowsDown_acOn_070:[174],city_S2_LightsOff_WindowsDown_acOn_090:[189],city_S2_LightsOff_WindowsDown_acOn_110:[169]},city_S2_Wheels19_LightsOff_WindowsUp_acOff:{city_S2_LightsOff_WindowsUp_acOff_000:[207],city_S2_LightsOff_WindowsUp_acOff_032:[231],city_S2_LightsOff_WindowsUp_acOff_050:[233],city_S2_LightsOff_WindowsUp_acOff_070:[238],city_S2_LightsOff_WindowsUp_acOff_090:[241],city_S2_LightsOff_WindowsUp_acOff_110:[242]},city_S2_Wheels19_LightsOff_WindowsUp_acOn:{city_S2_LightsOff_WindowsUp_acOn_000:[140],
city_S2_LightsOff_WindowsUp_acOn_032:[166],city_S2_LightsOff_WindowsUp_acOn_050:[195],city_S2_LightsOff_WindowsUp_acOn_070:[175],city_S2_LightsOff_WindowsUp_acOn_090:[192],city_S2_LightsOff_WindowsUp_acOn_110:[171]},city_S2_Wheels19_LightsOn_WindowsDown_acOff:{city_S2_LightsOn_WindowsDown_acOff_000:[203],city_S2_LightsOn_WindowsDown_acOff_032:[224],city_S2_LightsOn_WindowsDown_acOff_050:[227],city_S2_LightsOn_WindowsDown_acOff_070:[231],city_S2_LightsOn_WindowsDown_acOff_090:[235],city_S2_LightsOn_WindowsDown_acOff_110:[236]},
city_S2_Wheels19_LightsOn_WindowsDown_acOn:{city_S2_LightsOn_WindowsDown_acOn_000:[143],city_S2_LightsOn_WindowsDown_acOn_032:[162],city_S2_LightsOn_WindowsDown_acOn_050:[191],city_S2_LightsOn_WindowsDown_acOn_070:[172],city_S2_LightsOn_WindowsDown_acOn_090:[187],city_S2_LightsOn_WindowsDown_acOn_110:[168]},city_S2_Wheels19_LightsOn_WindowsUp_acOff:{city_S2_LightsOn_WindowsUp_acOff_000:[205],city_S2_LightsOn_WindowsUp_acOff_032:[227],city_S2_LightsOn_WindowsUp_acOff_050:[229],city_S2_LightsOn_WindowsUp_acOff_070:[235],
city_S2_LightsOn_WindowsUp_acOff_090:[237],city_S2_LightsOn_WindowsUp_acOff_110:[239]},city_S2_Wheels19_LightsOn_WindowsUp_acOn:{city_S2_LightsOn_WindowsUp_acOn_000:[143],city_S2_LightsOn_WindowsUp_acOn_032:[164],city_S2_LightsOn_WindowsUp_acOn_050:[193],city_S2_LightsOn_WindowsUp_acOn_070:[173],city_S2_LightsOn_WindowsUp_acOn_090:[189],city_S2_LightsOn_WindowsUp_acOn_110:[169]},city_S2_Wheels21_LightsOff_WindowsDown_acOff:{city_S2_LightsOff_WindowsDown_acOff_000:[197],city_S2_LightsOff_WindowsDown_acOff_032:[217],
city_S2_LightsOff_WindowsDown_acOff_050:[219],city_S2_LightsOff_WindowsDown_acOff_070:[223],city_S2_LightsOff_WindowsDown_acOff_090:[226],city_S2_LightsOff_WindowsDown_acOff_110:[228]},city_S2_Wheels21_LightsOff_WindowsDown_acOn:{city_S2_LightsOff_WindowsDown_acOn_000:[139],city_S2_LightsOff_WindowsDown_acOn_032:[158],city_S2_LightsOff_WindowsDown_acOn_050:[185],city_S2_LightsOff_WindowsDown_acOn_070:[167],city_S2_LightsOff_WindowsDown_acOn_090:[182],city_S2_LightsOff_WindowsDown_acOn_110:[164]},
city_S2_Wheels21_LightsOff_WindowsUp_acOff:{city_S2_LightsOff_WindowsUp_acOff_000:[199],city_S2_LightsOff_WindowsUp_acOff_032:[220],city_S2_LightsOff_WindowsUp_acOff_050:[221],city_S2_LightsOff_WindowsUp_acOff_070:[226],city_S2_LightsOff_WindowsUp_acOff_090:[228],city_S2_LightsOff_WindowsUp_acOff_110:[230]},city_S2_Wheels21_LightsOff_WindowsUp_acOn:{city_S2_LightsOff_WindowsUp_acOn_000:[141],city_S2_LightsOff_WindowsUp_acOn_032:[159],city_S2_LightsOff_WindowsUp_acOn_050:[187],city_S2_LightsOff_WindowsUp_acOn_070:[169],
city_S2_LightsOff_WindowsUp_acOn_090:[184],city_S2_LightsOff_WindowsUp_acOn_110:[164]},city_S2_Wheels21_LightsOn_WindowsDown_acOff:{city_S2_LightsOn_WindowsDown_acOff_000:[194],city_S2_LightsOn_WindowsDown_acOff_032:[214],city_S2_LightsOn_WindowsDown_acOff_050:[216],city_S2_LightsOn_WindowsDown_acOff_070:[221],city_S2_LightsOn_WindowsDown_acOff_090:[222],city_S2_LightsOn_WindowsDown_acOff_110:[224]},city_S2_Wheels21_LightsOn_WindowsDown_acOn:{city_S2_LightsOn_WindowsDown_acOn_000:[132],city_S2_LightsOn_WindowsDown_acOn_032:[157],
city_S2_LightsOn_WindowsDown_acOn_050:[182],city_S2_LightsOn_WindowsDown_acOn_070:[166],city_S2_LightsOn_WindowsDown_acOn_090:[179],city_S2_LightsOn_WindowsDown_acOn_110:[161]},city_S2_Wheels21_LightsOn_WindowsUp_acOff:{city_S2_LightsOn_WindowsUp_acOff_000:[196],city_S2_LightsOn_WindowsUp_acOff_032:[216],city_S2_LightsOn_WindowsUp_acOff_050:[217],city_S2_LightsOn_WindowsUp_acOff_070:[222],city_S2_LightsOn_WindowsUp_acOff_090:[224],city_S2_LightsOn_WindowsUp_acOff_110:[226]},city_S2_Wheels21_LightsOn_WindowsUp_acOn:{city_S2_LightsOn_WindowsUp_acOn_000:[139],
city_S2_LightsOn_WindowsUp_acOn_032:[157],city_S2_LightsOn_WindowsUp_acOn_050:[185],city_S2_LightsOn_WindowsUp_acOn_070:[167],city_S2_LightsOn_WindowsUp_acOn_090:[181],city_S2_LightsOn_WindowsUp_acOn_110:[163]},city_S3_Wheels19_LightsOff_WindowsDown_acOff:{city_S3_LightsOff_WindowsDown_acOff_000:[264],city_S3_LightsOff_WindowsDown_acOff_032:[282],city_S3_LightsOff_WindowsDown_acOff_050:[284],city_S3_LightsOff_WindowsDown_acOff_070:[290],city_S3_LightsOff_WindowsDown_acOff_090:[292],city_S3_LightsOff_WindowsDown_acOff_110:[294]},
city_S3_Wheels19_LightsOff_WindowsDown_acOn:{city_S3_LightsOff_WindowsDown_acOn_000:[187],city_S3_LightsOff_WindowsDown_acOn_032:[206],city_S3_LightsOff_WindowsDown_acOn_050:[241],city_S3_LightsOff_WindowsDown_acOn_070:[216],city_S3_LightsOff_WindowsDown_acOn_090:[235],city_S3_LightsOff_WindowsDown_acOn_110:[211]},city_S3_Wheels19_LightsOff_WindowsUp_acOff:{city_S3_LightsOff_WindowsUp_acOff_000:[266],city_S3_LightsOff_WindowsUp_acOff_032:[286],city_S3_LightsOff_WindowsUp_acOff_050:[287],city_S3_LightsOff_WindowsUp_acOff_070:[292],
city_S3_LightsOff_WindowsUp_acOff_090:[296],city_S3_LightsOff_WindowsUp_acOff_110:[297]},city_S3_Wheels19_LightsOff_WindowsUp_acOn:{city_S3_LightsOff_WindowsUp_acOn_000:[188],city_S3_LightsOff_WindowsUp_acOn_032:[207],city_S3_LightsOff_WindowsUp_acOn_050:[243],city_S3_LightsOff_WindowsUp_acOn_070:[217],city_S3_LightsOff_WindowsUp_acOn_090:[237],city_S3_LightsOff_WindowsUp_acOn_110:[212]},city_S3_Wheels19_LightsOn_WindowsDown_acOff:{city_S3_LightsOn_WindowsDown_acOff_000:[260],city_S3_LightsOn_WindowsDown_acOff_032:[278],
city_S3_LightsOn_WindowsDown_acOff_050:[279],city_S3_LightsOn_WindowsDown_acOff_070:[285],city_S3_LightsOn_WindowsDown_acOff_090:[288],city_S3_LightsOn_WindowsDown_acOff_110:[290]},city_S3_Wheels19_LightsOn_WindowsDown_acOn:{city_S3_LightsOn_WindowsDown_acOn_000:[185],city_S3_LightsOn_WindowsDown_acOn_032:[203],city_S3_LightsOn_WindowsDown_acOn_050:[238],city_S3_LightsOn_WindowsDown_acOn_070:[214],city_S3_LightsOn_WindowsDown_acOn_090:[232],city_S3_LightsOn_WindowsDown_acOn_110:[209]},city_S3_Wheels19_LightsOn_WindowsUp_acOff:{city_S3_LightsOn_WindowsUp_acOff_000:[263],
city_S3_LightsOn_WindowsUp_acOff_032:[280],city_S3_LightsOn_WindowsUp_acOff_050:[283],city_S3_LightsOn_WindowsUp_acOff_070:[289],city_S3_LightsOn_WindowsUp_acOff_090:[291],city_S3_LightsOn_WindowsUp_acOff_110:[293]},city_S3_Wheels19_LightsOn_WindowsUp_acOn:{city_S3_LightsOn_WindowsUp_acOn_000:[187],city_S3_LightsOn_WindowsUp_acOn_032:[205],city_S3_LightsOn_WindowsUp_acOn_050:[239],city_S3_LightsOn_WindowsUp_acOn_070:[215],city_S3_LightsOn_WindowsUp_acOn_090:[235],city_S3_LightsOn_WindowsUp_acOn_110:[210]},
city_S3_Wheels21_LightsOff_WindowsDown_acOff:{city_S3_LightsOff_WindowsDown_acOff_000:[252],city_S3_LightsOff_WindowsDown_acOff_032:[268],city_S3_LightsOff_WindowsDown_acOff_050:[270],city_S3_LightsOff_WindowsDown_acOff_070:[275],city_S3_LightsOff_WindowsDown_acOff_090:[277],city_S3_LightsOff_WindowsDown_acOff_110:[279]},city_S3_Wheels21_LightsOff_WindowsDown_acOn:{city_S3_LightsOff_WindowsDown_acOn_000:[181],city_S3_LightsOff_WindowsDown_acOn_032:[198],city_S3_LightsOff_WindowsDown_acOn_050:[230],
city_S3_LightsOff_WindowsDown_acOn_070:[208],city_S3_LightsOff_WindowsDown_acOn_090:[225],city_S3_LightsOff_WindowsDown_acOn_110:[203]},city_S3_Wheels21_LightsOff_WindowsUp_acOff:{city_S3_LightsOff_WindowsUp_acOff_000:[255],city_S3_LightsOff_WindowsUp_acOff_032:[271],city_S3_LightsOff_WindowsUp_acOff_050:[273],city_S3_LightsOff_WindowsUp_acOff_070:[278],city_S3_LightsOff_WindowsUp_acOff_090:[280],city_S3_LightsOff_WindowsUp_acOff_110:[281]},city_S3_Wheels21_LightsOff_WindowsUp_acOn:{city_S3_LightsOff_WindowsUp_acOn_000:[182],
city_S3_LightsOff_WindowsUp_acOn_032:[200],city_S3_LightsOff_WindowsUp_acOn_050:[232],city_S3_LightsOff_WindowsUp_acOn_070:[208],city_S3_LightsOff_WindowsUp_acOn_090:[227],city_S3_LightsOff_WindowsUp_acOn_110:[205]},city_S3_Wheels21_LightsOn_WindowsDown_acOff:{city_S3_LightsOn_WindowsDown_acOff_000:[249],city_S3_LightsOn_WindowsDown_acOff_032:[264],city_S3_LightsOn_WindowsDown_acOff_050:[266],city_S3_LightsOn_WindowsDown_acOff_070:[272],city_S3_LightsOn_WindowsDown_acOff_090:[273],city_S3_LightsOn_WindowsDown_acOff_110:[275]},
city_S3_Wheels21_LightsOn_WindowsDown_acOn:{city_S3_LightsOn_WindowsDown_acOn_000:[179],city_S3_LightsOn_WindowsDown_acOn_032:[196],city_S3_LightsOn_WindowsDown_acOn_050:[228],city_S3_LightsOn_WindowsDown_acOn_070:[206],city_S3_LightsOn_WindowsDown_acOn_090:[223],city_S3_LightsOn_WindowsDown_acOn_110:[201]},city_S3_Wheels21_LightsOn_WindowsUp_acOff:{city_S3_LightsOn_WindowsUp_acOff_000:[251],city_S3_LightsOn_WindowsUp_acOff_032:[266],city_S3_LightsOn_WindowsUp_acOff_050:[269],city_S3_LightsOn_WindowsUp_acOff_070:[273],
city_S3_LightsOn_WindowsUp_acOff_090:[277],city_S3_LightsOn_WindowsUp_acOff_110:[278]},city_S3_Wheels21_LightsOn_WindowsUp_acOn:{city_S3_LightsOn_WindowsUp_acOn_000:[180],city_S3_LightsOn_WindowsUp_acOn_032:[197],city_S3_LightsOn_WindowsUp_acOn_050:[230],city_S3_LightsOn_WindowsUp_acOn_070:[207],city_S3_LightsOn_WindowsUp_acOn_090:[224],city_S3_LightsOn_WindowsUp_acOn_110:[202]},hwy_S2_Wheels19_LightsOff_WindowsDown_acOff:{hwy_S2_LightsOff_WindowsDown_acOff_000:[157,169,184,198,216,233],hwy_S2_LightsOff_WindowsDown_acOff_032:[170,
186,203,222,243,264],hwy_S2_LightsOff_WindowsDown_acOff_050:[177,194,212,231,253,275],hwy_S2_LightsOff_WindowsDown_acOff_070:[182,198,216,236,257,279],hwy_S2_LightsOff_WindowsDown_acOff_090:[188,204,222,242,263,286],hwy_S2_LightsOff_WindowsDown_acOff_110:[192,209,226,246,267,290]},hwy_S2_Wheels19_LightsOff_WindowsDown_acOn:{hwy_S2_LightsOff_WindowsDown_acOn_000:[139,148,158,167,177,186],hwy_S2_LightsOff_WindowsDown_acOn_032:[153,165,178,190,203,215],hwy_S2_LightsOff_WindowsDown_acOn_050:[168,183,
198,215,232,248],hwy_S2_LightsOff_WindowsDown_acOn_070:[171,184,198,213,228,242],hwy_S2_LightsOff_WindowsDown_acOn_090:[173,187,202,217,233,248],hwy_S2_LightsOff_WindowsDown_acOn_110:[172,185,197,210,223,235]},hwy_S2_Wheels19_LightsOff_WindowsUp_acOff:{hwy_S2_LightsOff_WindowsUp_acOff_000:[164,176,190,205,223,239],hwy_S2_LightsOff_WindowsUp_acOff_032:[178,194,211,230,250,272],hwy_S2_LightsOff_WindowsUp_acOff_050:[185,202,220,239,261,283],hwy_S2_LightsOff_WindowsUp_acOff_070:[189,206,224,244,265,287],
hwy_S2_LightsOff_WindowsUp_acOff_090:[196,212,230,250,271,294],hwy_S2_LightsOff_WindowsUp_acOff_110:[200,216,234,254,275,297]},hwy_S2_Wheels19_LightsOff_WindowsUp_acOn:{hwy_S2_LightsOff_WindowsUp_acOn_000:[144,153,163,172,181,190],hwy_S2_LightsOff_WindowsUp_acOn_032:[159,171,184,196,209,220],hwy_S2_LightsOff_WindowsUp_acOn_050:[176,190,205,222,238,255],hwy_S2_LightsOff_WindowsUp_acOn_070:[177,191,205,219,234,247],hwy_S2_LightsOff_WindowsUp_acOn_090:[180,194,209,224,239,254],hwy_S2_LightsOff_WindowsUp_acOn_110:[179,
191,204,216,229,240]},hwy_S2_Wheels19_LightsOn_WindowsDown_acOff:{hwy_S2_LightsOn_WindowsDown_acOff_000:[157,169,183,197,215,231],hwy_S2_LightsOn_WindowsDown_acOff_032:[170,185,202,221,241,262],hwy_S2_LightsOn_WindowsDown_acOff_050:[176,193,211,230,251,273],hwy_S2_LightsOn_WindowsDown_acOff_070:[181,197,215,234,255,277],hwy_S2_LightsOn_WindowsDown_acOff_090:[187,203,221,241,261,284],hwy_S2_LightsOn_WindowsDown_acOff_110:[191,208,225,244,265,288]},hwy_S2_Wheels19_LightsOn_WindowsDown_acOn:{hwy_S2_LightsOn_WindowsDown_acOn_000:[138,
148,157,167,176,185],hwy_S2_LightsOn_WindowsDown_acOn_032:[153,165,177,189,202,214],hwy_S2_LightsOn_WindowsDown_acOn_050:[168,182,197,213,230,246],hwy_S2_LightsOn_WindowsDown_acOn_070:[170,183,197,212,226,240],hwy_S2_LightsOn_WindowsDown_acOn_090:[173,187,201,216,232,246],hwy_S2_LightsOn_WindowsDown_acOn_110:[172,184,197,209,222,233]},hwy_S2_Wheels19_LightsOn_WindowsUp_acOff:{hwy_S2_LightsOn_WindowsUp_acOff_000:[163,176,190,203,221,238],hwy_S2_LightsOn_WindowsUp_acOff_032:[177,193,210,229,249,269],
hwy_S2_LightsOn_WindowsUp_acOff_050:[184,201,219,238,259,280],hwy_S2_LightsOn_WindowsUp_acOff_070:[189,205,223,242,263,284],hwy_S2_LightsOn_WindowsUp_acOff_090:[195,211,229,249,269,291],hwy_S2_LightsOn_WindowsUp_acOff_110:[199,215,233,252,273,295]},hwy_S2_Wheels19_LightsOn_WindowsUp_acOn:{hwy_S2_LightsOn_WindowsUp_acOn_000:[144,153,162,171,181,189],hwy_S2_LightsOn_WindowsUp_acOn_032:[159,171,183,195,207,218],hwy_S2_LightsOn_WindowsUp_acOn_050:[175,189,204,220,237,253],hwy_S2_LightsOn_WindowsUp_acOn_070:[177,
190,204,218,232,246],hwy_S2_LightsOn_WindowsUp_acOn_090:[180,193,208,223,238,252],hwy_S2_LightsOn_WindowsUp_acOn_110:[178,190,203,215,227,238]},hwy_S2_Wheels21_LightsOff_WindowsDown_acOff:{hwy_S2_LightsOff_WindowsDown_acOff_000:[151,163,175,189,204,219],hwy_S2_LightsOff_WindowsDown_acOff_032:[162,177,193,209,228,247],hwy_S2_LightsOff_WindowsDown_acOff_050:[169,184,200,218,237,257],hwy_S2_LightsOff_WindowsDown_acOff_070:[173,188,204,222,241,261],hwy_S2_LightsOff_WindowsDown_acOff_090:[179,194,210,
228,247,266],hwy_S2_LightsOff_WindowsDown_acOff_110:[182,198,214,231,250,269]},hwy_S2_Wheels21_LightsOff_WindowsDown_acOn:{hwy_S2_LightsOff_WindowsDown_acOn_000:[133,143,151,160,168,176],hwy_S2_LightsOff_WindowsDown_acOn_032:[147,158,169,181,192,203],hwy_S2_LightsOff_WindowsDown_acOn_050:[161,174,188,203,218,233],hwy_S2_LightsOff_WindowsDown_acOn_070:[163,175,188,202,215,228],hwy_S2_LightsOff_WindowsDown_acOn_090:[166,178,192,206,220,233],hwy_S2_LightsOff_WindowsDown_acOn_110:[165,176,188,199,211,
221]},hwy_S2_Wheels21_LightsOff_WindowsUp_acOff:{hwy_S2_LightsOff_WindowsUp_acOff_000:[157,168,181,194,210,225],hwy_S2_LightsOff_WindowsUp_acOff_032:[169,184,200,217,235,254],hwy_S2_LightsOff_WindowsUp_acOff_050:[176,191,207,225,244,264],hwy_S2_LightsOff_WindowsUp_acOff_070:[180,195,211,229,248,267],hwy_S2_LightsOff_WindowsUp_acOff_090:[186,201,217,235,253,272],hwy_S2_LightsOff_WindowsUp_acOff_110:[190,205,221,238,257,276]},hwy_S2_Wheels21_LightsOff_WindowsUp_acOn:{hwy_S2_LightsOff_WindowsUp_acOn_000:[138,
147,156,164,173,180],hwy_S2_LightsOff_WindowsUp_acOn_032:[153,164,175,186,197,208],hwy_S2_LightsOff_WindowsUp_acOn_050:[167,181,195,209,224,239],hwy_S2_LightsOff_WindowsUp_acOn_070:[169,182,194,207,221,233],hwy_S2_LightsOff_WindowsUp_acOn_090:[172,185,198,211,225,238],hwy_S2_LightsOff_WindowsUp_acOn_110:[170,182,193,205,216,226]},hwy_S2_Wheels21_LightsOn_WindowsDown_acOff:{hwy_S2_LightsOn_WindowsDown_acOff_000:[150,163,174,188,203,218],hwy_S2_LightsOn_WindowsDown_acOff_032:[162,176,192,208,227,245],
hwy_S2_LightsOn_WindowsDown_acOff_050:[168,183,199,217,236,255],hwy_S2_LightsOn_WindowsDown_acOff_070:[172,187,203,221,239,259],hwy_S2_LightsOn_WindowsDown_acOff_090:[178,193,209,226,245,264],hwy_S2_LightsOn_WindowsDown_acOff_110:[182,197,213,230,248,267]},hwy_S2_Wheels21_LightsOn_WindowsDown_acOn:{hwy_S2_LightsOn_WindowsDown_acOn_000:[133,142,151,159,168,175],hwy_S2_LightsOn_WindowsDown_acOn_032:[146,157,169,180,191,202],hwy_S2_LightsOn_WindowsDown_acOn_050:[160,174,187,202,217,232],hwy_S2_LightsOn_WindowsDown_acOn_070:[163,
175,187,201,214,226],hwy_S2_LightsOn_WindowsDown_acOn_090:[165,178,191,205,219,232],hwy_S2_LightsOn_WindowsDown_acOn_110:[164,176,187,198,210,220]},hwy_S2_Wheels21_LightsOn_WindowsUp_acOff:{hwy_S2_LightsOn_WindowsUp_acOff_000:[156,167,180,193,209,223],hwy_S2_LightsOn_WindowsUp_acOff_032:[169,183,199,215,233,252],hwy_S2_LightsOn_WindowsUp_acOff_050:[175,190,206,224,242,261],hwy_S2_LightsOn_WindowsUp_acOff_070:[179,194,210,228,246,265],hwy_S2_LightsOn_WindowsUp_acOff_090:[185,200,216,234,252,270],hwy_S2_LightsOn_WindowsUp_acOff_110:[189,
204,220,237,255,274]},hwy_S2_Wheels21_LightsOn_WindowsUp_acOn:{hwy_S2_LightsOn_WindowsUp_acOn_000:[138,147,155,164,172,179],hwy_S2_LightsOn_WindowsUp_acOn_032:[152,163,174,185,196,206],hwy_S2_LightsOn_WindowsUp_acOn_050:[167,180,194,208,223,237],hwy_S2_LightsOn_WindowsUp_acOn_070:[169,181,193,206,219,231],hwy_S2_LightsOn_WindowsUp_acOn_090:[171,184,197,210,224,236],hwy_S2_LightsOn_WindowsUp_acOn_110:[170,181,193,204,215,224]},hwy_S3_Wheels19_LightsOff_WindowsDown_acOff:{hwy_S3_LightsOff_WindowsDown_acOff_000:[201,
218,235,253,273,289],hwy_S3_LightsOff_WindowsDown_acOff_032:[217,237,258,281,305,330],hwy_S3_LightsOff_WindowsDown_acOff_050:[225,246,267,291,317,345],hwy_S3_LightsOff_WindowsDown_acOff_070:[231,251,273,297,322,349],hwy_S3_LightsOff_WindowsDown_acOff_090:[238,258,280,304,330,357],hwy_S3_LightsOff_WindowsDown_acOff_110:[243,263,285,309,335,361]},hwy_S3_Wheels19_LightsOff_WindowsDown_acOn:{hwy_S3_LightsOff_WindowsDown_acOn_000:[178,191,202,214,225,236],hwy_S3_LightsOff_WindowsDown_acOn_032:[196,211,
227,242,257,272],hwy_S3_LightsOff_WindowsDown_acOn_050:[215,233,251,271,291,312],hwy_S3_LightsOff_WindowsDown_acOn_070:[217,233,251,268,286,303],hwy_S3_LightsOff_WindowsDown_acOn_090:[220,237,255,274,292,311],hwy_S3_LightsOff_WindowsDown_acOn_110:[219,234,250,265,281,295]},hwy_S3_Wheels19_LightsOff_WindowsUp_acOff:{hwy_S3_LightsOff_WindowsUp_acOff_000:[210,227,243,262,280,295],hwy_S3_LightsOff_WindowsUp_acOff_032:[226,246,267,290,315,339],hwy_S3_LightsOff_WindowsUp_acOff_050:[235,255,278,301,327,
354],hwy_S3_LightsOff_WindowsUp_acOff_070:[240,261,283,306,332,358],hwy_S3_LightsOff_WindowsUp_acOff_090:[248,268,290,314,340,366],hwy_S3_LightsOff_WindowsUp_acOff_110:[252,273,295,318,345,370]},hwy_S3_Wheels19_LightsOff_WindowsUp_acOn:{hwy_S3_LightsOff_WindowsUp_acOn_000:[185,198,208,220,231,241],hwy_S3_LightsOff_WindowsUp_acOn_032:[204,219,234,249,264,278],hwy_S3_LightsOff_WindowsUp_acOn_050:[224,242,260,280,300,320],hwy_S3_LightsOff_WindowsUp_acOn_070:[225,242,259,276,293,310],hwy_S3_LightsOff_WindowsUp_acOn_090:[229,
246,264,281,300,319],hwy_S3_LightsOff_WindowsUp_acOn_110:[227,242,257,273,287,301]},hwy_S3_Wheels19_LightsOn_WindowsDown_acOff:{hwy_S3_LightsOn_WindowsDown_acOff_000:[200,218,234,252,271,288],hwy_S3_LightsOn_WindowsDown_acOff_032:[216,236,256,279,303,328],hwy_S3_LightsOn_WindowsDown_acOff_050:[225,245,266,290,315,342],hwy_S3_LightsOn_WindowsDown_acOff_070:[230,250,272,295,320,347],hwy_S3_LightsOn_WindowsDown_acOff_090:[237,257,279,302,328,354],hwy_S3_LightsOn_WindowsDown_acOff_110:[242,262,284,307,
333,358]},hwy_S3_Wheels19_LightsOn_WindowsDown_acOn:{hwy_S3_LightsOn_WindowsDown_acOn_000:[177,191,201,213,224,234],hwy_S3_LightsOn_WindowsDown_acOn_032:[196,210,226,241,256,270],hwy_S3_LightsOn_WindowsDown_acOn_050:[214,232,250,270,290,310],hwy_S3_LightsOn_WindowsDown_acOn_070:[216,232,249,267,284,301],hwy_S3_LightsOn_WindowsDown_acOn_090:[220,237,254,273,290,309],hwy_S3_LightsOn_WindowsDown_acOn_110:[218,233,249,264,279,293]},hwy_S3_Wheels19_LightsOn_WindowsUp_acOff:{hwy_S3_LightsOn_WindowsUp_acOff_000:[209,
226,242,260,279,293],hwy_S3_LightsOn_WindowsUp_acOff_032:[226,245,266,289,313,336],hwy_S3_LightsOn_WindowsUp_acOff_050:[234,254,276,299,324,351],hwy_S3_LightsOn_WindowsUp_acOff_070:[240,260,282,305,330,355],hwy_S3_LightsOn_WindowsUp_acOff_090:[247,267,289,312,338,363],hwy_S3_LightsOn_WindowsUp_acOff_110:[251,272,294,317,342,367]},hwy_S3_Wheels19_LightsOn_WindowsUp_acOn:{hwy_S3_LightsOn_WindowsUp_acOn_000:[185,197,207,219,229,239],hwy_S3_LightsOn_WindowsUp_acOn_032:[204,218,233,248,263,276],hwy_S3_LightsOn_WindowsUp_acOn_050:[223,
241,259,278,298,317],hwy_S3_LightsOn_WindowsUp_acOn_070:[225,241,258,275,291,308],hwy_S3_LightsOn_WindowsUp_acOn_090:[228,245,263,280,298,316],hwy_S3_LightsOn_WindowsUp_acOn_110:[226,241,256,271,286,299]},hwy_S3_Wheels21_LightsOff_WindowsDown_acOff:{hwy_S3_LightsOff_WindowsDown_acOff_000:[192,209,223,240,257,275],hwy_S3_LightsOff_WindowsDown_acOff_032:[207,225,244,264,286,309],hwy_S3_LightsOff_WindowsDown_acOff_050:[215,233,253,274,297,321],hwy_S3_LightsOff_WindowsDown_acOff_070:[220,238,258,279,
301,326],hwy_S3_LightsOff_WindowsDown_acOff_090:[226,245,264,285,308,333],hwy_S3_LightsOff_WindowsDown_acOff_110:[231,249,269,290,312,336]},hwy_S3_Wheels21_LightsOff_WindowsDown_acOn:{hwy_S3_LightsOff_WindowsDown_acOn_000:[171,183,194,204,214,223],hwy_S3_LightsOff_WindowsDown_acOn_032:[188,202,216,230,244,257],hwy_S3_LightsOff_WindowsDown_acOn_050:[205,221,238,256,274,292],hwy_S3_LightsOff_WindowsDown_acOn_070:[207,222,238,254,270,284],hwy_S3_LightsOff_WindowsDown_acOn_090:[210,226,242,259,275,292],
hwy_S3_LightsOff_WindowsDown_acOn_110:[209,223,237,251,265,277]},hwy_S3_Wheels21_LightsOff_WindowsUp_acOff:{hwy_S3_LightsOff_WindowsUp_acOff_000:[200,216,231,248,265,280],hwy_S3_LightsOff_WindowsUp_acOff_032:[216,233,253,273,295,317],hwy_S3_LightsOff_WindowsUp_acOff_050:[224,242,262,283,305,330],hwy_S3_LightsOff_WindowsUp_acOff_070:[228,247,267,288,310,334],hwy_S3_LightsOff_WindowsUp_acOff_090:[235,253,273,294,317,340],hwy_S3_LightsOff_WindowsUp_acOff_110:[239,258,277,298,321,344]},hwy_S3_Wheels21_LightsOff_WindowsUp_acOn:{hwy_S3_LightsOff_WindowsUp_acOn_000:[177,
189,199,210,219,228],hwy_S3_LightsOff_WindowsUp_acOn_032:[195,209,223,236,250,262],hwy_S3_LightsOff_WindowsUp_acOn_050:[213,229,246,264,282,299],hwy_S3_LightsOff_WindowsUp_acOn_070:[215,230,245,261,276,290],hwy_S3_LightsOff_WindowsUp_acOn_090:[218,233,249,266,282,298],hwy_S3_LightsOff_WindowsUp_acOn_110:[216,230,244,258,271,283]},hwy_S3_Wheels21_LightsOn_WindowsDown_acOff:{hwy_S3_LightsOn_WindowsDown_acOff_000:[191,208,222,239,256,273],hwy_S3_LightsOn_WindowsDown_acOff_032:[206,224,243,263,285,307],
hwy_S3_LightsOn_WindowsDown_acOff_050:[214,232,252,273,295,319],hwy_S3_LightsOn_WindowsDown_acOff_070:[219,237,256,277,299,323],hwy_S3_LightsOn_WindowsDown_acOff_090:[225,244,263,284,306,330],hwy_S3_LightsOn_WindowsDown_acOff_110:[230,248,267,288,310,334]},hwy_S3_Wheels21_LightsOn_WindowsDown_acOn:{hwy_S3_LightsOn_WindowsDown_acOn_000:[170,182,194,203,213,222],hwy_S3_LightsOn_WindowsDown_acOn_032:[187,201,215,229,242,255],hwy_S3_LightsOn_WindowsDown_acOn_050:[204,221,237,255,273,290],hwy_S3_LightsOn_WindowsDown_acOn_070:[206,
221,237,252,268,282],hwy_S3_LightsOn_WindowsDown_acOn_090:[210,225,241,257,274,290],hwy_S3_LightsOn_WindowsDown_acOn_110:[208,222,236,250,263,275]},hwy_S3_Wheels21_LightsOn_WindowsUp_acOff:{hwy_S3_LightsOn_WindowsUp_acOff_000:[199,216,230,246,263,279],hwy_S3_LightsOn_WindowsUp_acOff_032:[215,233,251,272,293,315],hwy_S3_LightsOn_WindowsUp_acOff_050:[223,241,260,281,303,327],hwy_S3_LightsOn_WindowsUp_acOff_070:[228,246,265,286,308,331],hwy_S3_LightsOn_WindowsUp_acOff_090:[234,252,272,292,315,338],hwy_S3_LightsOn_WindowsUp_acOff_110:[239,
257,276,297,319,341]},hwy_S3_Wheels21_LightsOn_WindowsUp_acOn:{hwy_S3_LightsOn_WindowsUp_acOn_000:[177,189,198,209,218,226],hwy_S3_LightsOn_WindowsUp_acOn_032:[195,208,222,235,248,260],hwy_S3_LightsOn_WindowsUp_acOn_050:[213,229,245,262,280,297],hwy_S3_LightsOn_WindowsUp_acOn_070:[214,229,244,260,275,288],hwy_S3_LightsOn_WindowsUp_acOn_090:[217,233,248,265,280,296],hwy_S3_LightsOn_WindowsUp_acOn_110:[216,229,243,256,269,281]}};
tesla.BaseModel=Backbone.Model.extend({getSibling:function(a){return this.collection?isNaN(a)?collection.get(a):collection.at(a):null},bindCollection:function(a,b){this._collectionBindings||(this._collectionBindings={});this._collectionBindings[a]=b},getID:function(a){if(a=a?this.get(a):this)return a.get("id")},getPosition:function(a){var b=!a?this.collection:this.get(a)instanceof Backbone.Model?this.get(a).collection:this._collectionBindings[a];return b&&(a=a?this.get(a):this)?b.indexOf(a):-1},moveTo:function(a,
b){var c=this._collectionBindings[a];if(c){var d=isNaN(b)?c.indexOf(c.get(b)):b;-1<d&&d<c.length&&this.set(a,c.at(d))}},movePrevious:function(a){this._collectionBindings[a]&&this.moveTo(a,this.getPosition(a)-1)},moveNext:function(a){this._collectionBindings[a]&&this.moveTo(a,this.getPosition(a)+1)}});
tesla.DocumentModel=tesla.BaseModel.extend({defaults:{currentWidth:0,currentHeight:0,currentLayout:null,currentOrientation:null,scrollPaused:!1},initialize:function(){this.layouts=new Backbone.Collection;this.layouts.model=tesla.Layout;this.layouts.add([new tesla.TabletPortrait,new tesla.TabletLandscape]);this.views=new Backbone.Collection;this.views.model=tesla.BaseModel;this.views.add([{id:"home",viewClass:tesla.Home,animations:tesla.HomeAnimations},{id:"range-title",viewClass:tesla.RangeTitle,
animations:tesla.RangeTitleAnimations},{id:"range-intro",viewClass:tesla.RangeIntro,animations:tesla.RangeIntroAnimations},{id:"range-title-intro",viewClass:tesla.RangeTitleIntro},{id:"range-dashboard",viewClass:tesla.RangeDashboard,animations:tesla.RangeDashboardAnimations},{id:"range-info",viewClass:tesla.RangeInfo,animations:tesla.RangeInfoAnimations},{id:"charging-title",viewClass:tesla.ChargingTitle,animations:tesla.ChargingTitleAnimations},{id:"charging-intro",viewClass:tesla.ChargingIntro,
animations:tesla.ChargingIntroAnimations},{id:"charging-title-intro",viewClass:tesla.ChargingTitleIntro},{id:"charging-dashboard",viewClass:tesla.ChargingDashboard,animations:tesla.ChargingDashboardAnimations},{id:"charging-info",viewClass:tesla.ChargingInfo,animations:tesla.ChargingInfoAnimations},{id:"roadtrip-title",viewClass:tesla.RoadTripTitle,animations:tesla.RoadTripTitleAnimations},{id:"roadtrip-intro",viewClass:tesla.RoadTripIntro,animations:tesla.RoadTripIntroAnimations},{id:"roadtrip-title-intro",
viewClass:tesla.RoadTripTitleIntro},{id:"roadtrip-dashboard",viewClass:tesla.RoadTripDashboard,animations:tesla.RoadTripDashboardAnimations},{id:"roadtrip-info",viewClass:tesla.RoadTripInfo,animations:tesla.RoadTripInfoAnimations},{id:"electricity-title",viewClass:tesla.ElectricityTitle,animations:tesla.ElectricityTitleAnimations},{id:"electricity-intro",viewClass:tesla.ElectricityIntro,animations:tesla.ElectricityIntroAnimations},{id:"electricity-title-intro",viewClass:tesla.ElectricityTitleIntro},
{id:"electricity-dashboard",viewClass:tesla.ElectricityDashboard,animations:tesla.ElectricityDashboardAnimations},{id:"electricity-info",viewClass:tesla.ElectricityInfo,animations:tesla.ElectricityInfoAnimations},{id:"saving-title",viewClass:tesla.SavingTitle,animations:tesla.SavingTitleAnimations},{id:"saving-intro",viewClass:tesla.SavingIntro,animations:tesla.SavingIntroAnimations},{id:"saving-title-intro",viewClass:tesla.SavingTitleIntro},{id:"saving-dashboard",viewClass:tesla.SavingDashboard,
animations:tesla.SavingDashboardAnimations},{id:"saving-info",viewClass:tesla.SavingInfo,animations:tesla.SavingInfoAnimations}]);this.animations=new tesla.DocumentAnimations;this.on("change:currentWidth",this.handleCurrentWidthChange,this);this.on("change:currentLayout",this.handleCurrentLayoutChange,this)},getLayoutByWidth:function(b){return this.layouts.find(function(a){return b<a.get("maximumWidth")})},handleCurrentWidthChange:function(b,a){this.set("currentLayout",this.getLayoutByWidth(a))},
handleCurrentLayoutChange:function(b,a){this.set("currentOrientation",a.get("orientation"))}});
tesla.USEnergySourceModel=tesla.BaseModel.extend({defaults:{gas_car_lbs_emissions:"35.27",sources:{Coal:"44",Hydroelectric:"7","Natural Gas":"23",Nuclear:"20",other:"6"}}});
tesla.RoadTripMatrixModel=tesla.BaseModel.extend({defaults:{rtTripTotalSuper:"TOTAL TRIP TIME: %h HOURS %m MINUTES USING THE TESLA SUPERCHARGER",rtTripTotal:"TOTAL TRIP TIME: %h HOURS %m MINUTES",matrix:{battery:[{capacity:85,charger1:6.336,charger2:8.64,charger3a:72.45,charger3b:51.75,charger3cutoff:50,speed:[{mph:55,distance:[{miles:200,leg:[{distance:200,endingCharge:34,chargeTo:0}]},{miles:250,leg:[{distance:250,endingCharge:17,chargeTo:0}]},{miles:300,leg:[{distance:271,endingCharge:10,chargeTo:20},
{distance:29,endingCharge:10,chargeTo:0}]},{miles:350,leg:[{distance:271,endingCharge:10,chargeTo:36},{distance:79,endingCharge:10,chargeTo:0}]},{miles:400,leg:[{distance:271,endingCharge:10,chargeTo:53},{distance:129,endingCharge:10,chargeTo:0}]}]},{mph:60,distance:[{miles:200,leg:[{distance:200,endingCharge:28,chargeTo:0}]},{miles:250,leg:[{distance:250,endingCharge:10,chargeTo:0}]},{miles:300,leg:[{distance:249,endingCharge:10,chargeTo:28},{distance:51,endingCharge:10,chargeTo:0}]},{miles:350,
leg:[{distance:249,endingCharge:10,chargeTo:46},{distance:101,endingCharge:10,chargeTo:0}]},{miles:400,leg:[{distance:249,endingCharge:10,chargeTo:64},{distance:151,endingCharge:10,chargeTo:0}]}]},{mph:65,distance:[{miles:200,leg:[{distance:200,endingCharge:22,chargeTo:0}]},{miles:250,leg:[{distance:230,endingCharge:10,chargeTo:18},{distance:20,endingCharge:10,chargeTo:0}]},{miles:300,leg:[{distance:230,endingCharge:10,chargeTo:38},{distance:70,endingCharge:10,chargeTo:0}]},{miles:350,leg:[{distance:230,
endingCharge:10,chargeTo:57},{distance:120,endingCharge:10,chargeTo:0}]},{miles:400,leg:[{distance:230,endingCharge:10,chargeTo:77},{distance:170,endingCharge:10,chargeTo:0}]}]}]},{capacity:60,charger1:6.336,charger2:8.64,charger3a:72.45,charger3b:51.75,charger3cutoff:50,speed:[{mph:55,distance:[{miles:200,leg:[{distance:200,endingCharge:14,chargeTo:0}]},{miles:250,leg:[{distance:209,endingCharge:10,chargeTo:28},{distance:41,endingCharge:10,chargeTo:0}]},{miles:300,leg:[{distance:209,endingCharge:10,
chargeTo:49},{distance:91,endingCharge:10,chargeTo:0}]},{miles:350,leg:[{distance:209,endingCharge:10,chargeTo:71},{distance:141,endingCharge:10,chargeTo:0}]},{miles:400,leg:[{distance:220,endingCharge:5,chargeTo:87},{distance:180,endingCharge:10,chargeTo:0}]}]},{mph:60,distance:[{miles:200,leg:[{distance:200,endingCharge:6.5,chargeTo:0}]},{miles:250,leg:[{distance:193,endingCharge:10,chargeTo:35},{distance:57,endingCharge:10,chargeTo:0}]},{miles:300,leg:[{distance:193,endingCharge:10,chargeTo:58},
{distance:107,endingCharge:10,chargeTo:0}]},{miles:350,leg:[{distance:193,endingCharge:10,chargeTo:80},{distance:157,endingCharge:6.4,chargeTo:0}]},{miles:400,leg:[{distance:193,endingCharge:10,chargeTo:80},{distance:150,endingCharge:10,chargeTo:37},{distance:57,endingCharge:10,chargeTo:0}]}]},{mph:65,distance:[{miles:200,leg:[{distance:176,endingCharge:10,chargeTo:22},{distance:24,endingCharge:10,chargeTo:0}]},{miles:250,leg:[{distance:176,endingCharge:10,chargeTo:48},{distance:74,endingCharge:10,
chargeTo:0}]},{miles:300,leg:[{distance:176,endingCharge:10,chargeTo:73},{distance:124,endingCharge:10,chargeTo:0}]},{miles:350,leg:[{distance:176,endingCharge:10,chargeTo:80},{distance:137,endingCharge:10,chargeTo:29},{distance:37,endingCharge:10,chargeTo:0}]},{miles:400,leg:[{distance:176,endingCharge:10,chargeTo:80},{distance:137,endingCharge:10,chargeTo:54},{distance:87,endingCharge:10,chargeTo:0}]}]}]},{capacity:40,charger1:6.336,charger2:8.64,charger3a:-1,charger3b:-1,charger3cutoff:50,speed:[{mph:55,
distance:[{miles:200,leg:[{distance:145,endingCharge:10,chargeTo:44},{distance:55,endingCharge:10,chargeTo:0}]},{miles:250,leg:[{distance:145,endingCharge:10,chargeTo:75},{distance:105,endingCharge:10,chargeTo:0}]},{miles:300,leg:[{distance:145,endingCharge:10,chargeTo:80},{distance:113,endingCharge:10,chargeTo:36},{distance:42,endingCharge:10,chargeTo:0}]},{miles:350,leg:[{distance:145,endingCharge:10,chargeTo:80},{distance:113,endingCharge:10,chargeTo:67},{distance:92,endingCharge:10,chargeTo:0}]},
{miles:400,leg:[{distance:145,endingCharge:10,chargeTo:80},{distance:112,endingCharge:10,chargeTo:80},{distance:104,endingCharge:10,chargeTo:34},{distance:39,endingCharge:10,chargeTo:0}]}]},{mph:60,distance:[{miles:200,leg:[{distance:133,endingCharge:10,chargeTo:68},{distance:67,endingCharge:10,chargeTo:0}]},{miles:250,leg:[{distance:133,endingCharge:10,chargeTo:80},{distance:117,endingCharge:5.3,chargeTo:0}]},{miles:300,leg:[{distance:133,endingCharge:10,chargeTo:80},{distance:104,endingCharge:10,
chargeTo:53},{distance:63,endingCharge:10,chargeTo:0}]},{miles:350,leg:[{distance:133,endingCharge:10,chargeTo:80},{distance:104,endingCharge:10,chargeTo:80},{distance:104,endingCharge:10,chargeTo:16},{distance:9,endingCharge:10,chargeTo:0}]},{miles:400,leg:[{distance:133,endingCharge:10,chargeTo:80},{distance:104,endingCharge:10,chargeTo:80},{distance:104,endingCharge:10,chargeTo:50},{distance:59,endingCharge:10,chargeTo:0}]}]},{mph:65,distance:[{miles:200,leg:[{distance:122,endingCharge:10,chargeTo:79},
{distance:78,endingCharge:10,chargeTo:0}]},{miles:250,leg:[{distance:122,endingCharge:10,chargeTo:80},{distance:95,endingCharge:8.7,chargeTo:35},{distance:33,endingCharge:10,chargeTo:0}]},{miles:300,leg:[{distance:122,endingCharge:10,chargeTo:80},{distance:95,endingCharge:10,chargeTo:72},{distance:83,endingCharge:10,chargeTo:0}]},{miles:350,leg:[{distance:122,endingCharge:10,chargeTo:80},{distance:95,endingCharge:10,chargeTo:80},{distance:95,endingCharge:10,chargeTo:39},{distance:38,endingCharge:10,
chargeTo:0}]},{miles:400,leg:[{distance:122,endingCharge:10,chargeTo:80},{distance:95,endingCharge:10,chargeTo:80},{distance:95,endingCharge:10,chargeTo:76},{distance:88,endingCharge:10,chargeTo:0}]}]}]}]}}});
tesla.Layout=tesla.BaseModel.extend({defaults:{minimumWidth:0,maximumWidth:Number.POSITIVE_INFINITY,orientation:null,swipeMinLength:0}});
tesla.TabletLandscape=tesla.Layout.extend({defaults:{minimumWidth:1024,maximumWidth:Number.POSITIVE_INFINITY,orientation:"landscape",swipeMinLength:70}});
tesla.TabletPortrait=tesla.Layout.extend({defaults:{minimumWidth:768,maximumWidth:1023,orientation:"portrait",swipeMinLength:70}});
tesla.BaseView=Backbone.View.extend({firstRun:!0,_configure:function(b){this.modelClass&&(this.model=new this.modelClass,this.model.set("view",this));Backbone.View.prototype._configure.call(this,b)},initialize:function(){module.on("layoutChange",this.handleLayoutChange,this);module.on("viewportChange",this.handleViewportChange,this)},initializeAnalytics:function(b,c,a,e){var d="GoElectric_"+b;window.touchEnabled?this.$el.bind("inview",function(b,a){a&&_gaq.push(["_trackEvent",d,c])}):module.view.scrollListener._stp>=
a&&module.view.scrollListener._stp<=e&&_gaq.push(["_trackEvent",d,c])},getMaxImages:function(b){var c;(new (this.model.get("animations"))).each(function(a){a.get("maxImages")&&a.get("selector")==b&&(c=a.get("maxImages"))});return c},handleLayoutChange:function(){},handleViewportChange:function(){}});
tesla.Document=tesla.BaseView.extend({modelClass:tesla.DocumentModel,initialize:function(){this.setElement(document);var b=this;$(window).resize(function(){b.model.set("currentWidth",b.getViewportWidth());b.model.set("currentHeight",b.getViewportHeight())});this.model.on("change:currentWidth",this.handleViewportChange,this);this.model.on("change:currentHeight",this.handleViewportChange,this);this.model.on("change:currentLayout",this.handleLayoutChange,this);this.model.set("currentWidth",this.getViewportWidth());
this.model.set("currentHeight",this.getViewportHeight());module.on("preloadComplete",this.handlePreloadComplete,this)},positionFooter:function(){var b=$(window).height(),a=$("body").height(),c=$("#page").height(),d=$("#footer").height()+10,b=b-c;0<b?360<c&&(a=b-d,$("#footer").css("top",a+"px")):(a-=c,0<a&&$("#footer").css("top",a+"px"))},loadAssets:function(){this.trigger("assetsLoaded")},handlePreloadComplete:function(){var b=this;this.$el.find("#nav ul li a").click(function(a){a.preventDefault();
$("#nav .active").removeClass("active");Backbone.history.fragment===$(this).attr("class")?module.defaultRoute($(this).attr("class")):module.navigate($(this).attr("class"),{trigger:!0});$(this).addClass("active")});this.$el.find(".share a.sharebtn").click(function(a){a.preventDefault();a=$(this).siblings(".panel");a.hasClass("active")?a.removeClass("active").fadeOut():a.addClass("active").fadeIn()});this.$el.find(".share .panel a.close").click(function(a){a.preventDefault();$(this).parents(".panel").removeClass("active").fadeOut()});
this.$el.find(".top a").click(function(a){a.preventDefault();module.navigate("",{trigger:!0})});window.touchEnabled?($(window).scroll(function(){665<$("body").scrollTop()?$("#nav").hasClass("nav")&&($("#nav").removeClass("nav"),$("#nav").addClass("fixed-nav")):$("#nav").hasClass("fixed-nav")&&($("#nav").removeClass("fixed-nav"),$("#nav").addClass("nav"))}),$(window).scroll()):(this.scrollListener=new tesla.ScrollListener,this.model.animations.each(function(a){b.scrollListener.addAnimation(a)}));this.model.views.each(function(a){var c=
a.get("viewClass"),d=a.get("id"),e=new c({el:"#"+d,model:a});window.touchEnabled||(a=a.get("animations"))&&(new a).each(function(a){a.set("view",e);b.scrollListener.addAnimation(a)})})},getViewportWidth:function(){return"undefined"!=typeof window.innerWidth?window.innerWidth:"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?document.documentElement.clientWidth:document.getElementsByTagName("body")[0].clientWidth},
getViewportHeight:function(){return"undefined"!=typeof window.innerHeight?window.innerHeight:"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientHeight&&0!=document.documentElement.clientHeight?document.documentElement.clientHeight:document.getElementsByTagName("body")[0].clientHeight},getCurrentLayout:function(){return this.model.get("currentLayout")},getCurrentOrientation:function(){return this.model.get("currentOrientation")},handleViewportChange:function(){module.trigger("viewportChange",
this.model.get("currentWidth"),this.model.get("currentHeight"))},handleLayoutChange:function(b,a){module.trigger("layoutChange",a)}});
tesla.Home=tesla.BaseView.extend({initialize:function(){this.initializeAnalytics("Home","DisplayHomePage");tesla.BaseView.prototype.initialize.call(this)}});
tesla.RangeTitle=tesla.BaseView.extend({initialize:function(){tesla.BaseView.prototype.initialize.call(this)}});
tesla.RangeIntro=tesla.BaseView.extend({initialize:function(){tesla.BaseView.prototype.initialize.call(this)}});
tesla.RangeTitleIntro=tesla.BaseView.extend({initialize:function(){window.touchEnabled&&(this.initializeAnalytics("Range","DisplayTitleIntro"),this.$el.bind("inview",function(b,a){a&&(module.navigate("range"),$("#nav .active").removeClass("active"),$("#nav .range").addClass("active"))}),tesla.BaseView.prototype.initialize.call(this))}});
tesla.RangeDashboard=tesla.BaseView.extend({lights:"LightsOff",season:"summer",road:"hwy",wheels:"Wheels19",ac:"acOff",aero:"off",driving:"off",windows:"WindowsUp",temperatureIndex:2,temperature:70,outsideTempsTop:[0,-45,-85,-120,-153,-176],outsideTempsVals:[0,33,66,100,135,165],outsideTemps:[110,90,70,50,32,0],climateControlAPI:null,drivingTypeAPI:null,percentHighway:100,speed:55,speedVals:[70,65,60,55,50,45],panSpeeds:[10,15,20,25,30,35],wheelFPS:[50,60,70,80,90,100],speedRange:[45,50,55,60,65,
70],speedIndex:2,popupTimeout:null,isIE8:!1,running:!1,currentBG:null,currentRoad:null,initialize:function(){this.currentBG=this.$el.find(".bg .day");this.currentRoad=this.$el.find("#road #highway");this.isIE8=$("html").hasClass("ie8 lt-ie9");var a=this;this.$el.bind("inview",function(d,b){b?a.initializeAnimations():a.destroyAnimations()});this.initializeHotSpots();this.initializeClimateControl();this.initializeRangeInputs();this.initializeHighwaySpeed();this.update();this.initializeAnalytics("Range",
"DisplayDashBoard");tesla.BaseView.prototype.initialize.call(this)},initializeAnimations:function(){var a=this.wheelFPS[this.speedIndex];try{this.$el.find("#front-wheels, #rear-wheels").sprite({fps:a,no_of_frames:12})}catch(d){}try{this.currentRoad.pan({fps:24,speed:1,dir:"right",depth:10}),this.$el.find("#street").pan({fps:24,speed:4,dir:"right",depth:70}),this.currentRoad.spRelSpeed(this.panSpeeds[this.speedIndex]),this.$el.find("#street").spRelSpeed(this.panSpeeds[this.speedIndex])}catch(b){}"acOn"==
this.ac&&(50<this.temperature?this.toggleAC("on"):this.toggleHeat("on"));this.running=!0;module.on("scroll",this.handleScroll,this);module.on("scrollStop",this.handleScrollStop,this)},destroyAnimations:function(){module.off("scroll",this.handleScroll,this);module.off("scrollStop",this.handleScrollStop,this);try{this.$el.find("#front-wheels").destroy()}catch(a){}try{this.currentRoad.destroy()}catch(d){}try{this.$el.find("#street").destroy()}catch(b){}try{this.$el.find("#ac-fan").destroy()}catch(c){}try{this.$el.find("#heat-on").destroy()}catch(f){}this.running=
!1},initializeHotSpots:function(){var a=this;this.$el.find(".hot-spots > .day-night").click(function(){a.toggleDayNight()});this.$el.find(".hot-spots > .tires").click(function(){a.toggleTires()});this.$el.find(".highway-speed .info").click(function(){1>a.$el.find(".city-only-overlay:visible").length&&a.toggleAerodynamics()});this.$el.find(".hot-spots > .windows").click(function(){a.toggleWindows()})},toggleDayNight:function(){if(this.running){var a=this;this.closeAllPopups();if("LightsOff"==this.lights){this.lights=
"LightsOn";this.$el.addClass("night");this.currentBG.fadeOut();this.currentBG="summer"==this.season?this.$el.find(".bg .night"):this.$el.find(".bg .winter-night");this.currentBG.fadeIn(400,function(){a.$el.css("background-color","black")});var d=parseInt(this.currentRoad.css("backgroundPosition").split("px")[0]);if(this.isIE8){this.currentRoad.hide();try{this.currentRoad.spStop()}catch(b){}}else this.currentRoad.css({top:"0px",display:"block",opacity:"1"}).animate({opacity:"0"},400,function(){$(this).css("display",
"none");$(this).spStop()});this.currentRoad="hwy"==this.road?this.$el.find("#road #highway-night"):this.$el.find("#road #city-night");try{this.currentRoad.spStart()}catch(c){this.currentRoad.pan({fps:24,speed:1,dir:"right",depth:10}),this.currentRoad.spRelSpeed(this.panSpeeds[this.speedIndex])}if(this.isIE8)try{this.currentRoad.spSet("l",d).show()}catch(f){}else this.currentRoad.spSet("l",d).css({top:"0px",display:"block",opacity:"0"}).animate({opacity:"1"});this.$el.find(".#street .mask").fadeOut();
this.$el.find(".car .chassis").addClass("night");this.$el.find("#street").addClass("night");this.$el.find(".aero-overlay").addClass("night");this.$el.find(".hot-spots > div").addClass("night");this.$el.find(".temperature .ui-window.night").animate({opacity:"1"});try{"Wheels19"==this.wheels?this.$el.find(".wheels").spState(3):this.$el.find(".wheels").spState(4)}catch(g){}this.showPopup("lights")}else{this.lights="LightsOff";this.$el.removeClass("night");this.currentBG.fadeOut();this.currentBG="summer"==
this.season?this.$el.find(".bg .day"):this.$el.find(".bg .winter");this.currentBG.fadeIn(400,function(){a.$el.css("background-color","white")});d=parseInt(this.currentRoad.css("backgroundPosition").split("px")[0]);if(this.isIE8){this.currentRoad.hide();try{this.currentRoad.spStop()}catch(e){}}else this.currentRoad.css({top:"0px",display:"block",opacity:"1"}).animate({opacity:"0"},400,function(){$(this).css("display","none");$(this).spStop()});this.currentRoad="hwy"==this.road?this.$el.find("#road #highway"):
this.$el.find("#road #city");try{this.currentRoad.spStart()}catch(h){this.currentRoad.pan({fps:24,speed:1,dir:"right",depth:10}),this.currentRoad.spRelSpeed(this.panSpeeds[this.speedIndex])}if(this.isIE8)try{this.currentRoad.spSet("l",d).show()}catch(j){}else this.currentRoad.spSet("l",d).css({top:"0px",display:"block",opacity:"0"}).animate({opacity:"1"});this.$el.find(".#street .mask").fadeIn();this.$el.find(".car .chassis").removeClass("night");this.$el.find("#street").removeClass("night");this.$el.find(".aero-overlay").removeClass("night");
this.$el.find(".hot-spots > div").removeClass("night");this.$el.find(".temperature .ui-window.night").animate({opacity:"0"});try{"Wheels19"==this.wheels?this.$el.find(".wheels").spState(1):this.$el.find(".wheels").spState(2)}catch(k){}this.closeAllPopups()}this.update()}},toggleTires:function(){if(this.running){if("Wheels19"==this.wheels){this.wheels="Wheels21";this.$el.find(".hot-spots .tires").addClass("size21");this.showPopup("wheels");try{"LightsOff"==this.lights?this.$el.find(".wheels").spState(2):
this.$el.find(".wheels").spState(4)}catch(a){}}else{this.closeAllPopups();this.wheels="Wheels19";this.$el.find(".hot-spots .tires").removeClass("size21");try{"LightsOff"==this.lights?this.$el.find(".wheels").spState(1):this.$el.find(".wheels").spState(3)}catch(d){}}this.update()}},toggleAerodynamics:function(){"off"==this.aero?(this.aero="on",this.isIE8?this.$el.find(".aero-overlay").show():this.$el.find(".aero-overlay").fadeIn(),this.showPopup("highway-speed")):(this.closeAllPopups(),this.aero="off",
this.isIE8?this.$el.find(".aero-overlay").hide():this.$el.find(".aero-overlay").fadeOut())},toggleWindows:function(){"WindowsUp"==this.windows?(this.windows="WindowsDown",this.$el.find(".hot-spots .windows").addClass("down"),this.showPopup("windows"),this.$el.find(".car .windows").animate({top:40},"slow")):(this.closeAllPopups(),this.windows="WindowsUp",this.$el.find(".hot-spots .windows").removeClass("down"),this.$el.find(".car .windows").animate({top:10},"slow"));this.update()},toggleRoad:function(){if(this.running)if(0<
this.percentHighway){if("hwy"!=this.road){this.road="hwy";var a=parseInt(this.currentRoad.css("backgroundPosition").split("px")[0]);this.isIE8?(this.currentRoad.hide(),this.currentRoad.spStop()):this.currentRoad.animate({top:"20",opacity:"0"},400,function(){$(this).css("display","none");$(this).spStop()});this.currentRoad="LightsOff"==this.lights?this.$el.find("#road #highway"):this.$el.find("#road #highway-night");try{this.currentRoad.spStart()}catch(d){this.currentRoad.pan({fps:24,speed:1,dir:"right",
depth:10}),this.currentRoad.spRelSpeed(this.panSpeeds[this.speedIndex])}this.isIE8?this.currentRoad.spSet("l",a).show():this.currentRoad.spSet("l",a).css({display:"block",opacity:"0",top:"20px"}).animate({top:"0",opacity:"1"},400);this.isIE8?(this.$el.find("#mileage, .highway-speed .info").show(),this.$el.find(".city-only-overlay").hide()):(this.$el.find("#mileage, .highway-speed .info").animate({opacity:1},"fast"),this.$el.find(".city-only-overlay").fadeOut())}}else{this.road="city";a=parseInt(this.currentRoad.css("backgroundPosition").split("px")[0]);
this.isIE8?(this.currentRoad.hide(),this.currentRoad.spStop()):this.currentRoad.animate({top:"20",opacity:"0"},400,function(){$(this).css("display","none");$(this).spStop()});this.currentRoad="LightsOff"==this.lights?this.$el.find("#road #city"):this.$el.find("#road #city-night");try{this.currentRoad.spStart()}catch(b){this.currentRoad.pan({fps:24,speed:1,dir:"right",depth:10}),this.currentRoad.spRelSpeed(this.panSpeeds[this.speedIndex])}this.isIE8?this.currentRoad.spSet("l",a).show():this.currentRoad.spSet("l",
a).css({display:"block",opacity:"0",top:"20px"}).animate({top:"0",opacity:"1"},400);this.isIE8?(this.$el.find("#mileage, .highway-speed .info").hide(),this.$el.find(".city-only-overlay").show()):(this.$el.find("#mileage, .highway-speed .info").animate({opacity:0.15},"fast"),this.$el.find(".city-only-overlay").fadeIn())}},initializeRangeInputs:function(){var a=this;this.$el.find("#driving-type-input").rangeinput({value:100,step:1,min:0,max:100,speed:200,vertical:!0,change:function(d,b){var c=Math.round(2*
(b/100));a.percentHighway=Math.round(100*(c/2));this.setValue(a.percentHighway);a.toggleRoad();a.update();a.$el.find(".driving .active").removeClass("active");switch(a.percentHighway){case 0:a.$el.find(".driving .city").addClass("active");break;case 50:a.$el.find(".popup.driving").is(":visible")&&a.$el.find(".popup.driving").hide().unbind("click");a.driving="off";break;case 100:a.$el.find(".driving .highway").addClass("active")}}});this.drivingTypeAPI=this.$el.find(".driving-type .input.range").data("rangeinput");
this.$el.find(".driving-type .info").click(function(){"off"==a.driving?(a.driving="on",50!=a.drivingTypeAPI.getValue()&&a.showPopup("driving-type")):(a.closeAllPopups(),a.driving="off")});this.$el.find("#vehicle-input").rangeinput({value:100,step:1,min:0,max:100,speed:200,vertical:!0,change:function(d,b){var c=Math.round(1*(b/100));this.setValue(Math.round(100*(c/1)));0==c&&a.showPopup("model-s-performance")}});window.touchEnabled&&this.$el.find(".handle").bind("touchstart",this,this.onSliderHandlePress)},
onSliderHandlePress:function(a){a=a.data;module.view.model.set("scrollPaused",!0);window.touchEnabled&&$(document).bind("touchend",a,a.onSliderHandleRelease)},onSliderHandleRelease:function(a){a=a.data;module.view.model.set("scrollPaused",!1);window.touchEnabled&&$(document).unbind("touchend",a.onSliderHandleRelease)},initializeClimateControl:function(){var a=this;this.$el.find(".ac .dial").click(function(){"acOn"==a.ac?($(this).addClass("off"),50<a.temperature?a.toggleAC("off"):a.toggleHeat("off")):
($(this).removeClass("off"),50<a.temperature?a.toggleAC("on"):a.toggleHeat("on"));a.ac="acOn"==a.ac?"acOff":"acOn";a.update()});this.$el.find(".temperature .ui-window.night").css("opacity","0");this.$el.find(".temperature #panel-input").rangeinput({value:66,step:1,min:0,max:165,speed:200,vertical:!0,change:function(d,b){var c="undefined"!==typeof a.temperature?a.temperature:0;"undefined"===typeof a.temperature&&(a.temperature=0);a.temperatureIndex=Math.round((a.outsideTemps.length-1)*(b/150));a.temperature=
a.outsideTemps[a.temperatureIndex];this.setValue(a.outsideTempsVals[a.temperatureIndex]);a.onTemperatureChange(c)}});this.climateControlAPI=this.$el.find(".temperature #panel-input").data("rangeinput");this.$el.find(".temperature .up, .temperature .down").click(function(){var d=a.temperature;switch($(this).attr("class")){case "up":0<a.temperatureIndex&&a.temperatureIndex--;break;case "down":a.temperatureIndex<a.outsideTempsTop.length-1&&a.temperatureIndex++}a.temperature=a.outsideTemps[a.temperatureIndex];
a.climateControlAPI.setValue(a.outsideTempsVals[a.temperatureIndex]);a.onTemperatureChange(d)})},onTemperatureChange:function(a){"undefined"===typeof this.temperature&&(this.temperature=0);32>=this.temperature?(this.season="winter",32<a&&(this.currentBG.fadeOut(),this.currentBG="LightsOff"==this.lights?this.$el.find(".bg .winter"):this.$el.find(".bg .winter-night"),this.currentBG.fadeIn())):(this.season="summer",32>=a&&(this.currentBG.fadeOut(),this.currentBG="LightsOff"==this.lights?this.$el.find(".bg .day"):
this.$el.find(".bg .night"),this.currentBG.fadeIn()));50>=this.temperature?(this.$el.find(".ac .dial").addClass("heat"),"acOn"==this.ac&&(this.toggleAC("off"),this.toggleHeat("on"))):(this.$el.find(".ac .dial").removeClass("heat"),"acOn"==this.ac&&(this.toggleAC("on"),this.toggleHeat("off")));this.update()},toggleAC:function(a){"on"==a?this.$el.find("#ac-fan").show():this.$el.find("#ac-fan").hide()},toggleHeat:function(a){"on"==a?this.$el.find("#heat-on").show():this.$el.find("#heat-on").hide()},
showPopup:function(a){var d=this;this.closeAllPopups();var b;switch(a){case "lights":b=this.$el.find(".popup.lights");break;case "wheels":b=this.$el.find(".popup.wheel");break;case "windows":b=this.$el.find(".popup.windows");break;case "driving-type":b=this.$el.find(".popup.driving");break;case "highway-speed":b=this.$el.find(".popup.speed");break;case "model-s-performance":b=this.$el.find(".popup.model-s-performance")}this.isIE8?b.show().click(function(){d.closePopup(b)}):b.fadeIn(400,function(){b.click(function(){d.closePopup(b)})});
this.popupTimeout=setTimeout(function(){d.closeAllPopups()},15E3)},closePopup:function(a){this.driving=this.aero="off";this.popupTimeout&&(clearTimeout(this.popupTimeout),this.popupTimeout=null);this.isIE8?(this.$el.find(".aero-overlay:visible").hide(),this.$el.find(a).hide().unbind("click")):(this.$el.find(".aero-overlay:visible").fadeOut(),this.$el.find(a).fadeOut(400,function(){$(this).unbind("click")}))},closeAllPopups:function(){var a=this;$.each(this.$el.find(".popup:visible"),function(){a.closePopup(this)})},
initializeHighwaySpeed:function(){var a,d,b,c=this;$("#mileage .overview").append("<li>&nbsp;</li>");d=a=0;b=c.$el.find("#mileage").tinycircleslider({radius:45,callback:function(b,g,e){e=Math.abs(e);260<=e?e-=260:0<=e&&260>e&&(e+=100);200<e?(c.$el.find(".thumb","#mileage")[0].style.top=a+"px",c.$el.find(".thumb","#mileage")[0].style.left=d+"px"):(a=c.$el.find(".thumb").position().top,d=c.$el.find(".thumb").position().left,c.speedIndex=Math.round((c.speedRange.length-1)*(e/210)),b=c.speedRange[c.speedIndex],
window.touchEnabled&&(b=70-b+45,c.speedIndex=c.speedRange.indexOf(b)),c.$el.find("#daily_mileage").val(""+b),c.$el.find(".mileage-output").html("<span id='mileage_display'><p>"+Math.round(b)+"</p><span class='num'>MPH</span></span>"),c.update(b))}});b.gotoClosestAngle(-20);this.$el.find(".mileage-output").html("<span id='mileage_display'><p>"+Math.round(55)+"</p><span class='num'>MPH</span></span>");this.$el.find("#daily_mileage").val("55");b.bind("complete",function(){var a=parseInt($("#mileage_display p").text());
try{c.currentRoad.spRelSpeed(c.panSpeeds[c.speedIndex]),c.$el.find("#street").spRelSpeed(c.panSpeeds[c.speedIndex])}catch(b){}a>c.speed?c.surgeForward(a):c.surgeBack(a);window.touchEnabled&&(module.view.model.set("scrollPaused",!1),$(document).unbind("touchend",c.onSliderHandleRelease))});window.touchEnabled&&this.$el.find(".thumb").bind("touchstart",this,this.onSliderHandlePress)},surgeForward:function(a){if(a!=this.speed){this.speed=a;try{this.$el.find("#front-wheels").fps(this.wheelFPS[this.speedIndex])}catch(d){}this.$el.find(".car").animate({marginLeft:"165px"},
1E3,"easeInOutQuad",function(){$(this).animate({marginLeft:"195px"},2E3,"easeOutQuad")})}},surgeBack:function(a){if(a!=this.speed){this.speed=a;try{this.$el.find("#front-wheels").fps(this.wheelFPS[this.speedIndex])}catch(d){}this.$el.find(".car").animate({marginLeft:"225px"},1E3,"easeOutQuad",function(){$(this).animate({marginLeft:"195px"},2E3,"easeInOutQuad")})}},update:function(a){this.$el.find(".mpc60 h3").html(this.getMilesForBattery("S2",a)+'<span class="mi">MI</span>');this.$el.find(".miles85 h2").html(this.getMilesForBattery("S3",
a))},getMilesForBattery:function(a,d){var b=-1,c="undefined"!==typeof this.temperature?this.temperature.toString():"0";3>c.length&&(c="0"+c);1==c.length&&(c="00"+c);"00"===c&&(c="0"+c);b=rangedata[this.road+"_"+a+"_"+this.wheels+"_"+this.lights+"_"+this.windows+"_"+this.ac][this.road+"_"+a+"_"+this.lights+"_"+this.windows+"_"+this.ac+"_"+c];if(0===this.percentHighway)b=Number(b[0]);else{var f=this.getIndexByValue(d||this.speed,this.speedVals),b=Number(b[f]);100!==this.percentHighway&&(f=1-this.percentHighway/
100,b=Number(rangedata["city-"+a+"-"+this.wheels+"-"+this.lights+"-"+this.windows+"-"+this.ac]["city_"+a+"_"+this.lights+"_"+this.windows+"_"+this.ac+"_"+c][0])*f+b*(1-f))}return Math.round(b)},getIndexByValue:function(a,d){for(var b=d.length;b--;)if(d[b]===a)return b;return-1},handleScroll:function(){try{this.currentRoad.spStop(),this.$el.find("#street").spStop(),this.$el.find("#front-wheels").spStop(),this.running=!1}catch(a){}},handleScrollStop:function(){try{this.currentRoad.spStart(),this.$el.find("#street").spStart(),
this.$el.find("#front-wheels").spStart().fps(this.wheelFPS[this.speedIndex]),this.running=!0}catch(a){}}});
tesla.RangeInfo=tesla.BaseView.extend({initialize:function(){this.initializeAnalytics("Range","DisplayMoreInfo");tesla.BaseView.prototype.initialize.call(this)}});
tesla.ChargingTitle=tesla.BaseView.extend({initialize:function(){tesla.BaseView.prototype.initialize.call(this)}});
tesla.ChargingIntro=tesla.BaseView.extend({initialize:function(){this.buildBattery();this.buildSunMoon();tesla.BaseView.prototype.initialize.call(this)},buildBattery:function(){for(var b=this.getMaxImages("#charging-intro .battery"),a=1;a<=b;a++)this.$el.find(".battery").append("<div id=img"+a+" class='img-container'></div>"),this.$el.find(".battery #img"+a).css({"background-image":"url("+("/sites/all/themes/tesla/goelectric/img/charging_intro/battery"+a+".png")+")"})},buildSunMoon:function(){for(var b=
this.getMaxImages("#charging-intro .sun-moon"),a=1;a<=b;a++)this.$el.find(".sun-moon").append("<div id=img"+a+" class='img-container'></div>"),this.$el.find(".sun-moon #img"+a).css({"background-image":"url("+("/sites/all/themes/tesla/goelectric/img/charging_intro/sun-moon/sun-moon"+a+".png")+")"})}});
tesla.ChargingTitleIntro=tesla.BaseView.extend({initialize:function(){window.touchEnabled&&(this.initializeAnalytics("Charging","DisplayTitleIntro"),this.$el.bind("inview",function(b,a){a&&(module.navigate("charging"),$("#nav .active").removeClass("active"),$("#nav .charging").addClass("active"))}),tesla.BaseView.prototype.initialize.call(this))}});
tesla.ChargingDashboard=tesla.BaseView.extend({initialize:function(){this.initializeButtons();this.initializeChargerInputs();this.calculateTime();this.initializeAnalytics("Charging","DisplayDashBoard");tesla.BaseView.prototype.initialize.call(this)},formatTime:function(a){var b;b=Math.floor((a=Number(a))/3600);a=Math.floor(a%3600/60);2>(""+b).length&&(b="0"+b);2>(""+a).length&&(a="0"+a);return""+b+":"+a},calculateTime:function(){var a=$(".miles input").val(),b=$(".btns .active").attr("rel"),a=283*
a/1E3/b;$("#charging-dashboard .time").html(this.formatTime(3600*a))},initializeButtons:function(){var a=this;this.$el.find(".chargers .btn").click(function(b){a.toggleCharger();b.preventDefault()});this.$el.find(".outlet .btns a").click(function(b){a.toggleOutlet(this);b.preventDefault()})},toggleCharger:function(){this.$el.find(".chargers").toggleClass("active")},toggleOutlet:function(a){if(!$(a).hasClass("active")){var b=$(a).attr("class");"hpwc single"==b&&(b="hpwc");this.$el.find(".outlets .active").removeClass("active");
this.$el.find(".copy .active").removeClass("active");this.$el.find(".btns .active").removeClass("active");this.$el.find(".outlets ."+b).addClass("active");this.$el.find(".copy ."+b).addClass("active");$(a).addClass("active");$(a).hasClass("hpwc")?$(".chargers").addClass("active"):$(".chargers").removeClass("active");this.calculateTime()}},initializeChargerInputs:function(){var a=this;this.$el.find("#charger-type-input").rangeinput({value:100,step:1,min:0,max:100,speed:200,vertical:!0,change:function(b,
d){var c=Math.round(1*(d/100));this.setValue(Math.ceil(100*(c/1)));1==c?($(".btns .hpwc").attr("rel","18").removeClass("single"),$(".chargers .overlay").removeClass("single"),$(this).removeClass("single"),$(".btns .hpwc span.amps").html("80")):($(".btns .hpwc").attr("rel","9").addClass("single"),$(".chargers .overlay").addClass("single"),$(this).addClass("single"),$(".btns .hpwc span.amps").html("40"));a.calculateTime()}});this.$el.find(".milesinput").rangeinput({step:5,min:0,max:300,speed:0,vertical:!1,
onSlide:function(){var b=$(".miles .handle").position(),b=b.left-25;$(".miles .range").css("left",b);a.calculateTime()},change:function(){var b=$(".miles .handle").position(),b=b.left-25;$(".miles .range").css("left",b);setTimeout(function(){a.calculateTime()},0)}});window.touchEnabled?this.$el.find(".handle").bind("touchstart",this,this.onRangeHandlePress):this.$el.find(".handle").bind("mousedown",this,this.onRangeHandlePress)},onRangeHandlePress:function(a){a=a.data;module.view.model.set("scrollPaused",
!0);window.touchEnabled?$(document).bind("touchend",a,a.onRangeHandleRelease):$(document).bind("mouseup",a,a.onRangeHandleRelease)},onRangeHandleRelease:function(a){a=a.data;module.view.model.set("scrollPaused",!1);window.touchEnabled?$(document).unbind("touchend",a,a.onRangeHandleRelease):$(document).unbind("mouseup",a.onRangeHandleRelease)}});
tesla.ChargingInfo=tesla.BaseView.extend({initialize:function(){this.initializeRangeInputs();this.initializeAnalytics("Charging","DisplayMoreInfo");tesla.BaseView.prototype.initialize.call(this)},initializeRangeInputs:function(){this.$el.find("#connector-type-input").rangeinput({value:100,step:1,min:0,max:100,speed:200,vertical:!0,change:function(a,c){var b=Math.round(1*(c/100));this.setValue(Math.ceil(100*(b/1)));0==b?($(".bkgds .hpwc").fadeIn(),$(".bkgds .hpwc").addClass("active"),$(".bkgds .mobile").removeClass("active"),
$(this).addClass("hpwc")):($(".bkgds .hpwc").fadeOut(),$(".bkgds .hpwc").removeClass("active"),$(".bkgds .mobile").addClass("active"),$(this).removeClass("hpwc"))}});window.touchEnabled?this.$el.find(".handle").bind("touchstart",this,this.onRangeHandlePress):this.$el.find(".handle").bind("mousedown",this,this.onRangeHandlePress)},onRangeHandlePress:function(a){a=a.data;module.view.model.set("scrollPaused",!0);window.touchEnabled?$(document).bind("touchend",a,a.onRangeHandleRelease):$(document).bind("mouseup",
a,a.onRangeHandleRelease)},onRangeHandleRelease:function(a){a=a.data;module.view.model.set("scrollPaused",!1);window.touchEnabled?$(document).unbind("touchend",a,a.onRangeHandleRelease):$(document).unbind("mouseup",a.onRangeHandleRelease)}});
tesla.RoadTripTitle=tesla.BaseView.extend({initialize:function(){tesla.BaseView.prototype.initialize.call(this)}});
tesla.RoadTripIntro=tesla.BaseView.extend({initialize:function(){this.buildFullBattery();this.buildBattery();tesla.BaseView.prototype.initialize.call(this)},buildFullBattery:function(){for(var b=this.getMaxImages("#roadtrip-intro .full"),a=1;a<=b;a++)this.$el.find(".full").append("<div id=img"+a+" class='img-container'></div>"),this.$el.find(".full #img"+a).css({"background-image":"url("+("/sites/all/themes/tesla/goelectric/img/roadtrip-intro/full/full"+a+".png")+")"})},buildBattery:function(){for(var b=
this.getMaxImages("#roadtrip-intro .battery"),a=1;a<=b;a++)this.$el.find(".battery").append("<div id=img"+a+" class='img-container'></div>"),this.$el.find(".battery #img"+a).css({"background-image":"url("+("/sites/all/themes/tesla/goelectric/img/roadtrip-intro/battery/battery-"+a+".png")+")"})}});
tesla.RoadTripTitleIntro=tesla.BaseView.extend({initialize:function(){window.touchEnabled&&(this.initializeAnalytics("RoadTrips","DisplayTitleIntro"),this.$el.bind("inview",function(b,a){a&&(module.navigate("roadtrips"),$("#nav .active").removeClass("active"),$("#nav .roadtrips").addClass("active"))}),tesla.BaseView.prototype.initialize.call(this))}});
tesla.RoadTripDashboard=tesla.BaseView.extend({middleWidth:578,endCapWidth:60,platformBoxWidth:710,popup:"off",isIE8:!1,initialize:function(){var a=this;this.model=new tesla.RoadTripMatrixModel;this.data=this.model.get("matrix");this.isIE8=$("html").hasClass("ie8 lt-ie9");this.initializeRangeInputs();this.initializeHighwaySpeed();a.$el.find("#chargeTimePanel0").hide();a.$el.find("#chargeTimePanel1").hide();a.$el.find("#chargeTimePanel2").hide();a.$el.find("#mLabel0").show();a.$el.find("#mLabel1").hide();
a.$el.find("#mLabel2").hide();a.$el.find("#mLabel3").hide();a.$el.find(".info").click(function(){"off"==a.popup?a.showPopup():a.closePopup()});this.calculate();this.initializeAnalytics("RoadTrips","DisplayDashBoard");tesla.BaseView.prototype.initialize.call(this)},showPopup:function(){var a=this;a.popup="on";this.isIE8?a.$el.find(".popup.speed").show().click(function(){a.closePopup()}):a.$el.find(".popup.speed").fadeIn(400,function(){a.$el.find(".popup.speed").click(function(){a.closePopup()})})},
closePopup:function(){var a=this;a.popup="off";this.isIE8?(a.$el.find(".popup.speed").hide(),a.$el.find(".popup.speed").unbind("click")):a.$el.find(".popup.speed").fadeOut(400,function(){a.$el.unbind("click")})},update:function(a,d,b){var c=_.find(this.data.battery,function(b){return b.capacity==a}),f=_.find(c.speed,function(a){return a.mph==d}),f=_.find(f.distance,function(a){return a.miles==b});this.updateTripTotal(f,d,c);c=f.leg.length;this.$el.find(".charges").find(".number").text(c-1);1==c-1?
this.$el.find(".charges").find(".label").text("Charge"):this.$el.find(".charges").find(".label").text("Charges")},updateTripTotal:function(a,d,b){for(var c=b.charger3a,f=b.charger3b,g=b.charger3cutoff,e=0,k=0;k<a.leg.length-1;k++){var j=b.capacity,h=a.leg[k].endingCharge,l=a.leg[k].chargeTo||0,m=0,n=0;h<g&&l>g?(m=(g-h)/100*j,n=(l-g)/100*j):h<g?m=(l-h)/100*j:n=(l-h)/100*j;e+=m/c;e+=n/f}d=a.miles/d+e;g=Math.round(60*(d-Math.floor(d)));d=Math.floor(d);-1==c||-1==f?this.$el.find(".tripTimeText").hide():
(c=1==a.leg.length?this.model.get("rtTripTotal"):this.model.get("rtTripTotalSuper"),c=c.split("%h").join(d),c=c.split("%m").join(g),this.$el.find(".tripTimeText").text(c),this.$el.find(".tripTimeText").show());this.updateChargeTimePanel(a,b)},calculate:function(){var a=$("#battery-input").val();0==a?a=40:50==a?a=60:100==a&&(a=85);var d=$("#speed_display p").html(),b=$("#roadtrip-dashboard .miles .number").html();200==b?(this.platformBoxWidth=710,this.middleWidth=578,$(".travel").animate({width:698}),
$(".landscape").animate({width:613}),$(".platform .middle").animate({width:578})):250==b?(this.platformBoxWidth=750,this.middleWidth=613,$(".travel").animate({width:733}),$(".landscape").animate({width:648}),$(".platform .middle").animate({width:613})):300==b?(this.platformBoxWidth=785,this.middleWidth=648,$(".travel").animate({width:768}),$(".landscape").animate({width:683}),$(".platform .middle").animate({width:648})):350==b?(this.platformBoxWidth=825,this.middleWidth=683,$(".travel").animate({width:803}),
$(".landscape").animate({width:718}),$(".platform .middle").animate({width:683})):400==b&&(this.platformBoxWidth=865,this.middleWidth=718,$(".travel").animate({width:838}),$(".landscape").animate({width:753}),$(".platform .middle").animate({width:718}));this.update(a,d,b)},initializeRangeInputs:function(){var a=this;this.$el.find("#battery-input").rangeinput({value:100,step:1,min:50,max:100,speed:200,vertical:!0,change:function(d,b){var c=Math.round(2*(b/100));this.setValue(Math.ceil(100*(c/2)));
a.calculate()}});this.$el.find("#length-input").rangeinput({value:200,step:50,min:200,max:400,speed:0,vertical:!1,onSlide:function(a,b){var c=$(".length .handle").position(),c=c.left-25;$(".length .range").css("left",c);$("#roadtrip-dashboard .miles .number").html(b)},change:function(d,b){var c=$(".length .handle").position(),c=c.left-25;$(".length .range").css("left",c);$("#roadtrip-dashboard .miles .number").html(b);a.calculate()}});window.touchEnabled?this.$el.find(".handle").bind("touchstart",
this,this.onRangeHandlePress):this.$el.find(".handle").bind("mousedown",this,this.onRangeHandlePress)},onRangeHandlePress:function(a){a=a.data;module.view.model.set("scrollPaused",!0);window.touchEnabled?$(document).bind("touchend",a,a.onRangeHandleRelease):$(document).bind("mouseup",a,a.onRangeHandleRelease)},onRangeHandleRelease:function(a){a=a.data;module.view.model.set("scrollPaused",!1);window.touchEnabled?$(document).unbind("touchend",a,a.onRangeHandleRelease):$(document).unbind("mouseup",a.onRangeHandleRelease)},
initializeHighwaySpeed:function(){var a,d,b,c=this;$("#speed .overview").append("<li>&nbsp;</li>");d=a=0;b=c.$el.find("#speed").tinycircleslider({radius:45,callback:function(b,g,e){e=Math.abs(e);255<=e?e-=255:0<=e&&255>e&&(e+=105);if(210<e)return c.$el.find(".thumb","#speed")[0].style.top=a+"px",c.$el.find(".thumb","#speed")[0].style.left=d+"px",!1;a=c.$el.find(".thumb").position().top;d=c.$el.find(".thumb").position().left;b=[55,60,65];e=c.speed=b[Math.round((b.length-1)*(e/210))];window.touchEnabled&&
(e=65-e+55);c.$el.find("#hwy_speed").val(""+e);c.$el.find(".speed-output").html("<span id='speed_display'><p>"+Math.round(e)+"</p><span class='num'>MPH</span></span>");return!0}});b.gotoClosestAngle(360);c.$el.find(".speed-output").html("<span id='speed_display'><p>"+Math.round(60)+"</p><span class='num'>MPH</span></span>");c.$el.find("#hwy_speed").val("60");b.bind("complete",function(){c.calculate()})},updateChargeTimePanel:function(a,d){var b=this;b.$el.find("#chargeTimePanel0, #chargeTimePanel1, #chargeTimePanel2").hide();
b.$el.find("#mLabel0").show();b.$el.find("#mLabel1, #mLabel2, #mLabel3").hide();var c=[],f=[],g=$("#roadtrip-dashboard .miles .number").text();$.each(a.leg,function(a,d){c.push(Math.round(d.distance/g*b.platformBoxWidth)+-40);for(var j=0,h=0;h<=a;h++)j+=c[h];f.push(j)});$.each(a.leg,function(a,c){0>=c.chargeTo||(b.$el.find("#chargeTimePanel"+a).css("left",f[a]),b.isIE8?(b.$el.find("#chargeTimePanel"+a).show(),b.$el.find("#mLabel"+parseInt(a+1)).show()):(b.$el.find("#chargeTimePanel"+a).fadeIn("slow"),
b.$el.find("#mLabel"+parseInt(a+1)).fadeIn("slow")));var j=(c.chargeTo-c.endingCharge)*d.capacity,j=j/100;b.$el.find("#mLabel"+a).text(c.distance+" MILES");var h=$(b.$el.find(".chargingtimes")[0]).width();if(0<a&&a<f.length-1){var g=f[a]-f[a-1],h=f[a-1]+h/2;b.$el.find("#mLabel"+a).css({left:h,width:g})}else 0==a?(g=b.$el.find("#chargeTimePanel"+a).is(":visible")?f[a]+h/2:f[a],b.$el.find("#mLabel"+a).css({left:0,width:g})):(h=f[a-1]+h/2,g=b.middleWidth+2*b.endCapWidth-h-23,50>g&&(g="auto",h+=10),b.$el.find("#mLabel"+
a).css({left:h,width:g}));b.$el.find("#chargeTimePanel"+a).find(".time.public").html(b.formatTimeString(j,d.charger1));b.$el.find("#chargeTimePanel"+a).find(".time.v240").html(b.formatTimeString(j,d.charger2));b.$el.find("#chargeTimePanel"+a).find(".time.super").html(b.formatDualChargeTimeString(c.endingCharge,c.chargeTo,d.capacity,d.charger3a,d.charger3b,d.charger3cutoff));b.$el.find("#chargeTimePanel"+a).find(".percent").find(".begin").text(Math.round(c.endingCharge)+"%");b.$el.find("#chargeTimePanel"+
a).find(".percent").find(".end").text(Math.round(c.chargeTo)+"%")})},formatTimeString:function(a,d){var b='<span class="hour">%h<span class="label">h</span></span><span class="minutes">%m<span class="label">m</span></span>';if(-1==d)return b=b.split("%h").join("--"),b=b.split("%m").join("--");var c=a/d,f=Math.round(60*(c-Math.floor(c))),f=10>f?"0"+f:f,b=b.split("%h").join(Math.floor(c));return b=b.split("%m").join(f)},formatDualChargeTimeString:function(a,d,b,c,f,g){var e='<span class="hour">%h<span class="label">h</span></span><span class="minutes">%m<span class="label">m</span></span>';
if(-1==c||-1==f)return e=e.split("%h").join("--"),e=e.split("%m").join("--");var k=0,j=0;a<g&&d>g?(k=(g-a)/100*b,j=(d-g)/100*b):a<g?k=(d-a)/100*b:j=(d-a)/100*b;a=k/c+j/f;d=Math.round(60*(a-Math.floor(a)));d=10>d?"0"+d:d;e=e.split("%h").join(Math.floor(a));return e=e.split("%m").join(d)}});
tesla.RoadTripInfo=tesla.BaseView.extend({initialize:function(){this.initializeAnalytics("RoadTrips","DisplayMoreInfo");tesla.BaseView.prototype.initialize.call(this)}});
tesla.ElectricityTitle=tesla.BaseView.extend({initialize:function(){tesla.BaseView.prototype.initialize.call(this)}});
tesla.ElectricityIntro=tesla.BaseView.extend({initialize:function(){tesla.BaseView.prototype.initialize.call(this)}});
tesla.ElectricityTitleIntro=tesla.BaseView.extend({initialize:function(){window.touchEnabled&&(this.initializeAnalytics("Electricity","DisplayTitleIntro"),this.$el.bind("inview",function(b,a){a&&(module.navigate("electricity"),$("#nav .active").removeClass("active"),$("#nav .electricity").addClass("active"))}),tesla.BaseView.prototype.initialize.call(this))}});
tesla.ElectricityDashboard=tesla.BaseView.extend({data:null,initialize:function(){function g(){$("#mapBlocker").fadeOut();$("#blockerBtn").fadeOut();$("#ipadExitInteract").show()}function f(){$("#ipadExitInteract").hide();$("#mapBlocker").fadeIn();$("#blockerBtn").fadeIn()}var b=this;this.initializeAnalytics("Electricity","DisplayDashBoard");tesla.BaseView.prototype.initialize.call(this);this.data=new tesla.EnergySourcesByState;this.us_energy_model=new tesla.USEnergySourceModel;var k=["nuclear","natural gas",
"hydroelectric","coal","petroleum"];Array.indexOf||(Array.prototype.indexOf=function(b){for(var c=0;c<this.length;c++)if(this[c]==b)return c;return-1});Modernizr.touch?(this.$el.find("#mapBlocker").show(),this.$el.find("#blockerBtn").bind("touchstart",g).show(),this.$el.find("#ipadExitInteract").bind("touchstart",f)):-1!=navigator.userAgent.toLowerCase().indexOf("qtcarbrowser")&&(this.$el.find("#mapBlocker").show(),this.$el.find("#blockerBtn").bind("click",g).show(),this.$el.find("#ipadExitInteract").bind("click",
f));this.data.each(function(e){var c=e.get("id"),h=e.get("name").replace(/\s/g,"-").replace(/\./g,"-"),g=e.get("name"),d=e.get("sources"),j=[];$.each(d,function(b,a){j.push([b,a])});j.sort(function(b,a){return a[1]-b[1]});var d=Math.round(j[0][1]),f=j[0][0],l=f.toString(),a;a='<div class="stateButton" id="state_'+h+'" rel="#stateOverlay">'+('<div id="name_'+h+'" class="stateFullName">'+e.get("name").toUpperCase()+"</div>");a+='<div class="topEnergySourcePct">'+d;a+='<span class="topEnergySourceName">% '+
l.toUpperCase()+"</span>";a+="</div>";a+="</div>";b.$el.find(".stateButtons").append(a);b.$el.find("#state_"+h).click(function(){b.$el.find("#chartContainer").css("background-image","url(/sites/all/themes/tesla/goelectric/img/electricity-dashboard/charts/"+c.toLowerCase()+".png)");b.$el.find("#overlayStateName").text(g);b.$el.find("#stateIcon").css("background-image","url(/sites/all/themes/tesla/goelectric/img/electricity-dashboard/states/"+c.toUpperCase()+".png)");var a=e.get("lbs_emissions");new Highcharts.Chart({chart:{renderTo:"barContainer",
type:"column",backgroundColor:"rgba(0,0,0,0)",width:550,height:260},title:{text:null},subtitle:{text:null},xAxis:{categories:[""],lineWidth:0,tickWidth:0},yAxis:{min:0,title:{text:""},labels:{enabled:!1},gridLineWidth:0},credits:{enabled:!1},legend:{enabled:!1},tooltip:{enabled:!1},plotOptions:{column:{pointPadding:1,borderWidth:0,dataLabels:{enabled:!0,style:{color:"#cf0000",fontFamily:"proxima-nova-1",fontSize:"25px"}},shadow:!1},series:{pointWidth:77}},series:[{name:"TESLA MODEL S",data:[parseFloat(a)],
color:{linearGradient:[0,0,0,300],stops:[[0,"rgb(214, 0, 0)"],[1,"rgb(240,0,0)"]]}},{name:"GAS CAR",data:[parseFloat(b.us_energy_model.get("gas_car_lbs_emissions"))],color:{linearGradient:[0,0,0,300],stops:[[0,"rgb(129, 129, 129)"],[1,"rgb(177,177,177)"]]}}]});"ca"==c.toLowerCase()?b.$el.find("#barLabelModelSuper").show():b.$el.find("#barLabelModelSuper").hide()});d=k.indexOf(f);d="0 "+-30*d+"px";b.$el.find("#name_"+h).css({"background-position":d})});this.$el.find(".draggableMap").draggableMap();
Modernizr.touch?(this.$el.find(".draggableMap").bind("touchstart",function(){module.view.model.set("scrollPaused",!0)}),this.$el.find(".draggableMap").bind("touchend",function(){module.view.model.set("scrollPaused",!1)})):-1!=navigator.userAgent.toLowerCase().indexOf("qtcarbrowser")&&(this.$el.find(".draggableMap").bind("mousedown",function(){module.view.model.set("scrollPaused",!0)}),this.$el.find(".draggableMap").bind("mouseup",function(){module.view.model.set("scrollPaused",!1)}));this.$el.find(".stateButton").overlay({mask:{color:"#000000",
loadSpeed:200,opacity:0.6},onClose:function(){}})}});
tesla.ElectricityInfo=tesla.BaseView.extend({initialize:function(){this.initializeAnalytics("Electricity","DisplayMoreInfo");tesla.BaseView.prototype.initialize.call(this)}});
tesla.SavingTitle=tesla.BaseView.extend({initialize:function(){tesla.BaseView.prototype.initialize.call(this)}});
tesla.SavingIntro=tesla.BaseView.extend({initialize:function(){tesla.BaseView.prototype.initialize.call(this)}});
tesla.SavingTitleIntro=tesla.BaseView.extend({initialize:function(){window.touchEnabled&&(this.initializeAnalytics("Savings","DisplayTitleIntro"),this.$el.bind("inview",function(b,a){a&&(module.navigate("savings"),$("#nav .active").removeClass("active"),$("#nav .savings").addClass("active"))}),tesla.BaseView.prototype.initialize.call(this))}});
tesla.SavingDashboard=tesla.BaseView.extend({noMoreItems:"GAS STATIONS;OIL CHANGES;SPARK PLUGS;SMOG CHECKS;TIMING BELTS;FUEL FILTERS".split(";"),startIndex:0,intervalID:null,initialize:function(){var a=this;a.calculateFuelCosts();$.browser.msie&&this.$el.find(".amt").keypress(function(b){if(13===(b.keyCode||b.which))return b.preventDefault(),a.calculateFuelCosts(),!1});this.$el.find(".amt").numeric();this.$el.find(".milesDrivenInput").rangeinput({useCustomSuffix:!0,customSuffix:"K",step:5,min:0,max:120,
speed:0,vertical:!1,onSlide:function(){var b=$(".miles-driven .handle").position(),b=b.left-35;$(".milesDrivenInput").css("left",b);a.calculateFuelCosts()},change:function(){var b=$(".miles-driven .handle").position(),b=b.left-35;$(".milesDrivenInput").css("left",b);setTimeout(function(){a.calculateFuelCosts()},0)}}).bind("input",function(){var b=parseInt($(".milesDrivenInput").val());if(!0==isNaN(b)||0>b)b=0;a.$el.find(".milesDrivenInput").data().rangeinput.setValue(b)});this.$el.find("#cost-per-kilowatt-hour-amt").change(function(){9.99<
$(this).val()&&$(this).val(9.99);0>$(this).val()&&$(this).val(0);a.calculateFuelCosts()});this.$el.find("#fuel-cost-amt").change(function(){9.99<$(this).val()&&$(this).val(9.99);0>$(this).val()&&$(this).val(0);a.calculateFuelCosts()});this.$el.find("#vehicle-mpg-amt").change(function(){0>=$(this).val()&&$(this).val(1);a.calculateFuelCosts()});a=this;this.$el.bind("inview",function(b,c){c?a.initializeAnimations():a.destroyAnimations()});this.initializeAnalytics("Savings","DisplayDashBoard");tesla.BaseView.prototype.initialize.call(this)},
initializeAnimations:function(){var a=this;this.intervalID=window.setInterval(function(){a.startIndex=a.startIndex==a.noMoreItems.length-1?0:a.startIndex+1;a.$el.find(".no-more-types").fadeOut("slow",function(){a.$el.find(".no-more-types").text(a.noMoreItems[a.startIndex]);a.$el.find(".no-more-types").fadeIn("slow")})},3E3)},destroyAnimations:function(){window.clearInterval(this.intervalID);this.intervalID=null},calculateFuelCosts:function(){var a=1E3*parseInt($(".miles-driven input").val()),b=$("#cost-per-kilowatt-hour-amt").val(),
b=Math.round(283*a/1E3*b);999<b&&(b=b.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","));$("#total-fuel-cost-right-calculated-value").html(b);var b=$("#fuel-cost-amt").val(),c=$("#vehicle-mpg-amt").val(),a=Math.round(a/c*b);999<a&&(a=a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","));$("#total-fuel-cost-left-calculated-value").html(a);this.addKSuffix()},addKSuffix:function(){},isDecimal:function(a){return-1!=String(a).search(/^\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*$/)}});
tesla.SavingInfo=tesla.BaseView.extend({initialize:function(){this.initializeAnalytics("Savings","DisplayMoreInfo");tesla.BaseView.prototype.initialize.call(this)}});
tesla.ScrollListener=tesla.BaseView.extend({_p:!1,_sbAPI:null,_sd:1,_sdg:!1,_sst:0,_stp:0,_stw:0,_ssp:40,_sm:0,_s:!1,_ts:{x:0,y:0},_lt:{x:0,y:0},_td:0,_tdg:!1,_b:0,_sp:0.2,_id:null,_res:1E4,_d:!1,_ie8:!1,_ct:0,initialize:function(){this._ie8=$("html").hasClass("ie8");this.setElement("body");window.touchEnabled?(this._res=1E3,this.initTE()):this.initSB();this.initMW();this._an=new Backbone.Collection;module.view.model.on("change:scrollPaused",this.handleScrollPaused,this);module.on("scrollTo",this.handleScrollTo,
this);tesla.BaseView.prototype.initialize.call(this)},a:function(){this._id=requestAnimationFrame(this.a.bind(this));if(!this._p){if(Math.ceil(this._stw)===Math.floor(this._stp)){if(!this._tdg){module.trigger("scrollStop");cancelAnimationFrame(this._id);this._id=null;return}}else{module.trigger("scroll");this.setScrollMax();this._sbAPI&&!this._sdg&&this._sbAPI.setValue(100-Math.round(100*(this._stp/this._sm)));this._stw=this._tdg?this._stp:0<this._sd?this._stw+Math.ceil(this._sp*(this._stp-this._stw)):
this._stw+Math.floor(this._sp*(this._stp-this._stw));this._sd=this._stp>this._stw?1:-1;var a=this;this._an.each(function(b){a._stw>=b.get("start")&&a._stw<=b.get("stop")?(a.startAnimation(b),a.r(b)):a.stopAnimation(b)})}if(this._d){$("#debug").show();var b=(new Date).getTime(),c=b-this._ct;this._ct=b;$("#debug .time").text("ms: "+c);$("#debug .peak").text("fps: "+Math.round(1E3/c))}}},r:function(a){var b=(a.get("start")-this._stw)/(a.get("start")-a.get("stop")),b=Math.max(0,Math.min(1,Math.round(b*
this._res)/this._res)),c={};a.set("lastProgress",b);if(a.get("el").hasClass("img-sequence"))a.get("lastVisible")&&a.get("lastVisible").css("visibility","hidden"),c=a.get("maxImages"),b=Math.ceil(b*c),1>b&&(b=1),b=a.get("el").find("#img"+b),b.css("visibility","visible"),a.set("lastVisible",b);else{var e=a.get("frames");if(e){if("function"==typeof e[Math.round(b)].callback){e[Math.round(b)].callback.call(a);return}for(var j=1;j<e.length;j++){var d=e[j],k=e[j-1],l=(k.index-b)/(k.index-d.index),l=Math.round(l*
this._res)/this._res;if(0<=l&&1>=l)for(var f in d.css)if("background-position"===f&&d.css[f].hasOwnProperty("x")){var g=d.css[f],m=k.css[f],h="",h="number"===typeof g.x?h+(this.tween(m.x,g.x,l,1)+"px"):h+g.x,h=h+" ",h="number"===typeof g.y?h+(this.tween(m.y,g.y,l,1)+"px"):h+g.y;c[f]=h}else if("rotate"===f)for(var g=this.tween(k.css[f],d.css[f],l,1),h="rotate("+g+"deg)",g="progid:DXImageTransform.Microsoft.Matrix("+this.getRadians(g)+", SizingMethod='auto expand')",m=["ms","moz","webkit","o","filter"],
n=0;n<m.length;++n){var p;"filter"===m[n]&&this._ie8?(p=m[n],c[p]=g):(p="-"+m[n]+"-transform",c[p]=h)}else c[f]=this.tween(k.css[f],d.css[f],l,1)}}a.get("el").css(c)}},getRadians:function(a){rad=a*(Math.PI/180);costheta=Math.cos(rad);sintheta=Math.sin(rad);return String("M11="+String(costheta)+", M12="+String(-sintheta)+", M21="+String(sintheta)+", M22="+String(costheta))},start:function(){!this._s&&this._b&&(this._stw=this._stp=this._b);this._stp++;this._s||(this._s=!0,this.initAnimations(),this.checkAnimationLoop())},
initTE:function(){var a=this;this.$el.find("#scrollwrapper").hide();this.$el[0].addEventListener("touchstart",function(b){a._p||(a._tdg=!0,a._ts.x=a._lt.x=b.touches[0].pageX,a._ts.y=a._lt.y=b.touches[0].pageY,a._sst=a._stp)});this.$el[0].addEventListener("touchmove",function(b){b.preventDefault();a._p||(a._stp=Math.max(0,a._sst+(a._ts.y-b.touches[0].pageY)),a.checkScrollMax(),a.checkAnimationLoop(),a._td=a._lt.y-b.touches[0].pageY,a._lt.x=b.touches[0].pageX,a._lt.y=b.touches[0].pageY)});this.$el[0].addEventListener("touchend",
function(){a._tdg=!1;a._stp+=5*a._td})},checkScrollMax:function(){0>this._stp?this._stp=0:this._stp>this._sm&&(this._stp=this._sm)},initMW:function(){var a=this;this.$el.mousewheel(function(b,c){b.preventDefault();a._p||(a._stp-=c*a._ssp,0>a._stp&&(a._stp=0),a.checkScrollMax(),a.checkAnimationLoop())})},initSB:function(){var a=this;$("#scrollbar").rangeinput({value:50,step:0.01,min:0,max:100,speed:0,vertical:!0,onSlide:function(b,c){a._p||(a._sdg&&(a._stp=(100-c)/100*a._sm),a.checkAnimationLoop())},
change:function(b,c){a._p||(a._sdg||(a._stp=(100-c)/100*a._sm),a.checkAnimationLoop())}});this._sbAPI=$("#scrollbar").data("rangeinput");this.$el.find(".handle").bind("mousedown",this,this.onScrollHandlePress)},initAnimations:function(){this._an.each(function(a){a.set("lastProgress",0);void 0==a.get("el")&&a.set("el",$(a.get("selector")));var b=a.get("frames"),c;for(c in b){var e=b[c];if(0==e.index){var j=b[Number(c)+1],d;for(d in j.css)void 0==e.css[d]&&/left|top/.test(d)&&(e.css[d]=a.get("el").position()[d])}for(j=
Number(c);0<j;){var k=b[j];for(d in k.css)void 0==e.css[d]&&(e.css[d]=k.css[d]);j--}}})},startAnimation:function(a){a.get("started")||(a.set("started",!0),a.get("onStart")&&"function"===typeof a.get("onStart")&&a.get("onStart").call(a))},stopAnimation:function(a){if(a.get("started")&&a.get("stop")<this._stw||a.get("started")&&a.get("start")>this._stw||0>this._sd&&0<a.get("lastProgress")&&a.get("start")>this._stw||0<this._sd&&1>a.get("lastProgress")&&a.get("stop")<this._stw||void 0==a.get("started")&&
a.get("stop")<this._stw)this.r(a),a.get("onStop")&&"function"===typeof a.get("onStop")&&a.get("onStop").call(a),a.set("started",!1)},resetAnimations:function(){this._an.each(function(a){a.get("started")&&(a.set("el",null),a.set("started",!1))})},tween:function(a,b,c,e){return Math.round(TWEEN.Easing.Linear.None(c/e)*(b-a)+a)},addAnimation:function(a){this._an.add(a)},setScrollMax:function(){this._sm=this.$el.find("#scrollable").innerHeight()-this.$el.innerHeight();this._sm+=400},onScrollHandlePress:function(a){a=
a.data;a._sdg=!0;a.$el.bind("mouseup",a,a.onScrollHandleRelease)},onScrollHandleRelease:function(a){a=a.data;a._sdg=!1;a.$el.unbind("mouseup",a.onScrollHandleRelease)},handleScrollPaused:function(a,b){this._p=b},handleViewportChange:function(){this.setScrollMax();var a=100-Math.round(100*(this._stp/this._sm));isNaN(a)||(this._stp=(100-a)/100*this._sm,this._sbAPI&&this._sbAPI.setValue(a))},handleScrollTo:function(a){if(window.touchEnabled||this._ie8)this._sp=0.99;this._stp=this._b=a;this._s||this.start();
this.checkAnimationLoop();this._sp=0.2},checkAnimationLoop:function(){this._id||this.a(this)},handleLayoutChange:function(){}});
tesla.Module=Backbone.Router.extend({viewClass:tesla.Document,routes:{"*actions":"defaultRoute"},initialize:function(){if(window.module)throw Error("Only one module instance may be created.");window.module=this;this.modelClass&&this.setModel(new this.modelClass);this.viewClass&&this.setView(new this.viewClass)},setModel:function(a){this.model=a},setView:function(a){this.view=a;this.view.on("assetsLoaded",this.handleViewAssetsLoaded,this);this.view.loadAssets()},handleViewAssetsLoaded:function(){this.trigger("preloadComplete");
Backbone.history.start()},defaultRoute:function(a){var b,c;switch(a){case "range":c=$("#range-title-intro");a=699;b="ClickRange";break;case "charging":c=$("#charging-title-intro");a=4096;b="ClickCharging";break;case "roadtrips":c=$("#roadtrip-title-intro");a=7419;b="ClickRoadTrips";break;case "electricity":c=$("#electricity-title-intro");a=10686;b="ClickElectricity";break;case "savings":c=$("#saving-title-intro");a=13970;b="ClickSavings";break;default:c=$("#home"),a=0,b="ClickHome"}_gaq.push(["_trackEvent",
"GoElectric_Navgation",b]);window.touchEnabled?($("#ipadSpacerHack").css("height","100px"),$("body").animate({scrollTop:c.offset().top},1E3,function(){$("#ipadSpacerHack").css("height","0px")})):this.trigger("scrollTo",a)},getView:function(){return this.view}});
var _gaq=[["_setAccount","UA-9152935-1"],["_trackPageview"]];(function(a,b){var c=a.createElement(b),e=a.getElementsByTagName(b)[0];c.src=("https:"==location.protocol?"//ssl":"//www")+".google-analytics.com/ga.js";e.parentNode.insertBefore(c,e)})(document,"script");
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(c){var b=(new Date).getTime(),d=Math.max(0,16-(b-a)),f=window.setTimeout(function(){c(b+d)},d);a=b+d;return f});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)})})();$(window).ready(function(){var a=window.location.href;-1!=a.indexOf("index.html")&&(a=a.replace("index.html",""),document.location=a);-1!=a.indexOf("index.htm")&&(a=a.replace("index.htm",""),document.location=a);new tesla.Module});
;
/*
 * jQuery Form Plugin
 * version: 2.25 (08-APR-2009)
 * @requires jQuery v1.2.2 or later
 * @note This has been modified for ajax.module
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}(';(5($){$.B.1s=5(u){2(!4.G){R(\'1b: 2M 9 2N - 2O 2P 1t\');6 4}2(S u==\'5\')u={T:u};3 v=4.14(\'1c\')||1d.2Q.2R;v=(v.2S(/^([^#]+)/)||[])[1];v=v||\'\';u=$.1n({1e:v,H:4.14(\'1u\')||\'1Q\'},u||{});3 w={};4.L(\'C-1R-1S\',[4,u,w]);2(w.1T){R(\'1b: 9 1U 1o C-1R-1S L\');6 4}2(u.1v&&u.1v(4,u)===I){R(\'1b: 9 1f 1o 1v 1V\');6 4}3 a=4.1w(u.2T);2(u.J){u.O=u.J;K(3 n 1x u.J){2(u.J[n]2U 15){K(3 k 1x u.J[n])a.D({7:n,8:u.J[n][k]})}E a.D({7:n,8:u.J[n]})}}2(u.1y&&u.1y(a,4,u)===I){R(\'1b: 9 1f 1o 1y 1V\');6 4}4.L(\'C-9-1W\',[a,4,u,w]);2(w.1T){R(\'1b: 9 1U 1o C-9-1W L\');6 4}3 q=$.1z(a);2(u.H.2V()==\'1Q\'){u.1e+=(u.1e.2W(\'?\')>=0?\'&\':\'?\')+q;u.J=F}E u.J=q;3 x=4,V=[];2(u.2X)V.D(5(){x.1X()});2(u.2Y)V.D(5(){x.1Y()});2(!u.16&&u.17){3 y=u.T||5(){};V.D(5(a){$(u.17).2Z(a).P(y,1Z)})}E 2(u.T)V.D(u.T);u.T=5(a,b){K(3 i=0,M=V.G;i<M;i++)V[i].30(u,[a,b,x])};3 z=$(\'W:31\',4).18();3 A=I;K(3 j=0;j<z.G;j++)2(z[j])A=Q;2(u.20||A){2(u.21)$.32(u.21,1A);E 1A()}E $.33(u);4.L(\'C-9-34\',[4,u]);6 4;5 1A(){3 h=x[0];2($(\':W[7=9]\',h).G){35(\'36: 37 22 38 39 3a 3b "9".\');6}3 i=$.1n({},$.23,u);3 s=$.1n(Q,{},$.1n(Q,{},$.23),i);3 j=\'3c\'+(1B 3d().3e());3 k=$(\'<20 3f="\'+j+\'" 7="\'+j+\'" 24="25:26" />\');3 l=k[0];k.3g({3h:\'3i\',27:\'-28\',29:\'-28\'});3 m={1f:0,19:F,1g:F,3j:0,3k:\'n/a\',3l:5(){},2a:5(){},3m:5(){},3n:5(){4.1f=1;k.14(\'24\',\'25:26\')}};3 g=i.2b;2(g&&!$.1C++)$.1h.L("3o");2(g)$.1h.L("3p",[m,i]);2(s.2c&&s.2c(m,s)===I){s.2b&&$.1C--;6}2(m.1f)6;3 o=0;3 p=0;3 q=h.U;2(q){3 n=q.7;2(n&&!q.1i){u.O=u.O||{};u.O[n]=q.8;2(q.H=="X"){u.O[7+\'.x\']=h.Y;u.O[7+\'.y\']=h.Z}}}1j(5(){3 t=x.14(\'17\'),a=x.14(\'1c\');h.1k(\'17\',j);2(h.2d(\'1u\')!=\'2e\')h.1k(\'1u\',\'2e\');2(h.2d(\'1c\')!=i.1e)h.1k(\'1c\',i.1e);2(!u.3q){x.14({3r:\'2f/C-J\',3s:\'2f/C-J\'})}2(i.1D)1j(5(){p=Q;11()},i.1D);3 b=[];2g{2(u.O)K(3 n 1x u.O)b.D($(\'<W H="3t" 7="\'+n+\'" 8="\'+u.O[n]+\'" />\').2h(h)[0]);k.2h(\'1l\');l.2i?l.2i(\'2j\',11):l.3u(\'2k\',11,I);h.9()}3v{h.1k(\'1c\',a);t?h.1k(\'17\',t):x.3w(\'17\');$(b).2l()}},10);3 r=0;5 11(){2(o++)6;l.2m?l.2m(\'2j\',11):l.3x(\'2k\',11,I);3 c=Q;2g{2(p)3y\'1D\';3 d,N;N=l.2n?l.2n.2o:l.2p?l.2p:l.2o;2((N.1l==F||N.1l.2q==\'\')&&!r){r=1;o--;1j(11,2r);6}m.19=N.1l?N.1l.2q:F;m.1g=N.2s?N.2s:N;m.2a=5(a){3 b={\'3z-H\':i.16};6 b[a]};2(i.16==\'3A\'||i.16==\'3B\'){3 f=N.1E(\'1F\')[0];m.19=f?f.8:m.19}E 2(i.16==\'2t\'&&!m.1g&&m.19!=F){m.1g=2u(m.19)}d=$.3C(m,i.16)}3D(e){c=I;$.3E(i,m,\'2v\',e)}2(c){i.T(d,\'T\');2(g)$.1h.L("3F",[m,i])}2(g)$.1h.L("3G",[m,i]);2(g&&!--$.1C)$.1h.L("3H");2(i.2w)i.2w(m,c?\'T\':\'2v\');1j(5(){k.2l();m.1g=F},2r)};5 2u(s,a){2(1d.2x){a=1B 2x(\'3I.3J\');a.3K=\'I\';a.3L(s)}E a=(1B 3M()).3N(s,\'1G/2t\');6(a&&a.2y&&a.2y.1p!=\'3O\')?a:F}}};$.B.3P=5(c){6 4.2z().2A(\'9.C-1q\',5(){$(4).1s(c);6 I}).P(5(){$(":9,W:X",4).2A(\'2B.C-1q\',5(e){3 a=4.C;a.U=4;2(4.H==\'X\'){2(e.2C!=12){a.Y=e.2C;a.Z=e.3Q}E 2(S $.B.2D==\'5\'){3 b=$(4).2D();a.Y=e.2E-b.29;a.Z=e.2F-b.27}E{a.Y=e.2E-4.3R;a.Z=e.2F-4.3S}}1j(5(){a.U=a.Y=a.Z=F},10)})})};$.B.2z=5(){4.2G(\'9.C-1q\');6 4.P(5(){$(":9,W:X",4).2G(\'2B.C-1q\')})};$.B.1w=5(b){3 a=[];2(4.G==0)6 a;3 c=4[0];3 d=b?c.1E(\'*\'):c.22;2(!d)6 a;K(3 i=0,M=d.G;i<M;i++){3 e=d[i];3 n=e.7;2(!n)1H;2(b&&c.U&&e.H=="X"){2(!e.1i&&c.U==e)a.D({7:n+\'.x\',8:c.Y},{7:n+\'.y\',8:c.Z});1H}3 v=$.18(e,Q);2(v&&v.1r==15){K(3 j=0,2H=v.G;j<2H;j++)a.D({7:n,8:v[j]})}E 2(v!==F&&S v!=\'12\')a.D({7:n,8:v})}2(!b&&c.U){3 f=c.1E("W");K(3 i=0,M=f.G;i<M;i++){3 g=f[i];3 n=g.7;2(n&&!g.1i&&g.H=="X"&&c.U==g)a.D({7:n+\'.x\',8:c.Y},{7:n+\'.y\',8:c.Z})}}6 a};$.B.3T=5(a){6 $.1z(4.1w(a))};$.B.3U=5(b){3 a=[];4.P(5(){3 n=4.7;2(!n)6;3 v=$.18(4,b);2(v&&v.1r==15){K(3 i=0,M=v.G;i<M;i++)a.D({7:n,8:v[i]})}E 2(v!==F&&S v!=\'12\')a.D({7:4.7,8:v})});6 $.1z(a)};$.B.18=5(a){K(3 b=[],i=0,M=4.G;i<M;i++){3 c=4[i];3 v=$.18(c,a);2(v===F||S v==\'12\'||(v.1r==15&&!v.G))1H;v.1r==15?$.3V(b,v):b.D(v)}6 b};$.18=5(b,c){3 n=b.7,t=b.H,1a=b.1p.1I();2(S c==\'12\')c=Q;2(c&&(!n||b.1i||t==\'1m\'||t==\'3W\'||(t==\'1J\'||t==\'1K\')&&!b.1L||(t==\'9\'||t==\'X\')&&b.C&&b.C.U!=b||1a==\'13\'&&b.1M==-1))6 F;2(1a==\'13\'){3 d=b.1M;2(d<0)6 F;3 a=[],1N=b.3X;3 e=(t==\'13-2I\');3 f=(e?d+1:1N.G);K(3 i=(e?d:0);i<f;i++){3 g=1N[i];2(g.1t){3 v=g.8;2(!v)v=(g.1O&&g.1O[\'8\']&&!(g.1O[\'8\'].3Y))?g.1G:g.8;2(e)6 v;a.D(v)}}6 a}6 b.8};$.B.1Y=5(){6 4.P(5(){$(\'W,13,1F\',4).2J()})};$.B.2J=$.B.3Z=5(){6 4.P(5(){3 t=4.H,1a=4.1p.1I();2(t==\'1G\'||t==\'40\'||1a==\'1F\')4.8=\'\';E 2(t==\'1J\'||t==\'1K\')4.1L=I;E 2(1a==\'13\')4.1M=-1})};$.B.1X=5(){6 4.P(5(){2(S 4.1m==\'5\'||(S 4.1m==\'41\'&&!4.1m.42))4.1m()})};$.B.43=5(b){2(b==12)b=Q;6 4.P(5(){4.1i=!b})};$.B.2K=5(b){2(b==12)b=Q;6 4.P(5(){3 t=4.H;2(t==\'1J\'||t==\'1K\')4.1L=b;E 2(4.1p.1I()==\'2L\'){3 a=$(4).44(\'13\');2(b&&a[0]&&a[0].H==\'13-2I\'){a.45(\'2L\').2K(I)}4.1t=b}})};5 R(){2($.B.1s.46&&1d.1P&&1d.1P.R)1d.1P.R(\'[47.C] \'+15.48.49.4a(1Z,\'\'))}})(4b);',62,260,'||if|var|this|function|return|name|value|submit||||||||||||||||||||||||||||fn|form|push|else|null|length|type|false|data|for|trigger|max|doc|extraData|each|true|log|typeof|success|clk|callbacks|input|image|clk_x|clk_y||cb|undefined|select|attr|Array|dataType|target|a_fieldValue|responseText|tag|ajaxSubmit|action|window|url|aborted|responseXML|event|disabled|setTimeout|setAttribute|body|reset|extend|via|tagName|plugin|constructor|a_ajaxSubmit|selected|method|beforeSerialize|a_formToArray|in|beforeSubmit|param|fileUpload|new|active|timeout|getElementsByTagName|textarea|text|continue|toLowerCase|checkbox|radio|checked|selectedIndex|ops|attributes|console|GET|pre|serialize|veto|vetoed|callback|validate|a_resetForm|a_clearForm|arguments|iframe|closeKeepAlive|elements|ajaxSettings|src|about|blank|top|1000px|left|getResponseHeader|global|beforeSend|getAttribute|POST|multipart|try|appendTo|attachEvent|onload|load|remove|detachEvent|contentWindow|document|contentDocument|innerHTML|100|XMLDocument|xml|toXml|error|complete|ActiveXObject|documentElement|a_ajaxFormUnbind|bind|click|offsetX|offset|pageX|pageY|unbind|jmax|one|a_clearFields|a_selected|option|skipping|process|no|element|location|href|match|semantic|instanceof|toUpperCase|indexOf|resetForm|clearForm|html|apply|file|get|ajax|notify|alert|Error|Form|must|not|be|named|jqFormIO|Date|getTime|id|css|position|absolute|status|statusText|getAllResponseHeaders|setRequestHeader|abort|ajaxStart|ajaxSend|skipEncodingOverride|encoding|enctype|hidden|addEventListener|finally|removeAttr|removeEventListener|throw|content|json|script|httpData|catch|handleError|ajaxSuccess|ajaxComplete|ajaxStop|Microsoft|XMLDOM|async|loadXML|DOMParser|parseFromString|parsererror|a_ajaxForm|offsetY|offsetLeft|offsetTop|a_formSerialize|a_fieldSerialize|merge|button|options|specified|a_clearInputs|password|object|nodeType|a_enable|parent|find|debug|jquery|prototype|join|call|jQuery'.split('|'),0,{}));
/**
 * Automatic ajax validation
 *
 * @see http://drupal.org/project/ajax
 * @see irc://freenode.net/#drupy
 * @depends Drupal 6
 * @author brendoncrawford
 * @note This file uses a 79 character width limit.
 * 
 *
 */

Drupal.Ajax = new Object;

Drupal.Ajax.plugins = {};

Drupal.Ajax.firstRun = false;

/**
 * Init function.
 * This is being executed by Drupal behaviours.
 * See bottom of script.
 * 
 * @param {HTMLElement} context
 * @return {Bool}
 */
Drupal.Ajax.init = function(context) {
  var f, s;
  if (f = $('.ajax-form', context)) {
    if (!Drupal.Ajax.firstRun) {
      Drupal.Ajax.invoke('init');
      Drupal.Ajax.firstRun = true;
    }
    s = $('input[type="submit"]', f);
    s.click(function(){
      this.form.ajax_activator = $(this);
      return true;
    });
    f.each(function(){
      this.ajax_activator = null;
      $(this).submit(function(){
        if (this.ajax_activator === null) {
          this.ajax_activator = $('#edit-submit', this);
        }
        if (this.ajax_activator.hasClass('ajax-trigger')) {
          Drupal.Ajax.go($(this), this.ajax_activator);
          return false;
        }
        else {
          return true;
        }
      });
      return true;
    });
  }
  return true;
};

/**
 * Invokes plugins
 * 
 * @param {Object} formObj
 * @param {Object} submitter
 */
Drupal.Ajax.invoke = function(hook, args) {
  var plugin, r, ret;
  ret = true;
  for (plugin in Drupal.Ajax.plugins) {
    r = Drupal.Ajax.plugins[plugin](hook, args);
    if (r === false) {
      ret = false;
    }
  }
  return ret;
};

/**
 * Handles submission
 * 
 * @param {Object} submitter_
 * @return {Bool}
 */
Drupal.Ajax.go = function(formObj, submitter) {
  var submitterVal, submitterName, extraData;
  Drupal.Ajax.invoke('submit', {submitter:submitter});
  submitterVal = submitter.val();
  submitterName = submitter.attr('name');
  submitter.val(Drupal.t('Loading...'));
  extraData = {};
  extraData[submitterName] = submitterVal;
  extraData['drupal_ajax'] = '1';
  formObj.a_ajaxSubmit({
    extraData : extraData,
    beforeSubmit : function(data) {
      data[data.length] = {
        name : submitterName,
        value : submitterVal
      };
      data[data.length] = {
        name : 'drupal_ajax',
        value : '1'
      };
      return true;
    },
    dataType : 'json',
    error: function (XMLHttpRequest, textStatus, errorThrown) {
      //window.alert(Drupal.t('ajax.module: An unknown error has occurred.'));
      if (window.console) {
        console.log('error', arguments);
      }
      return true;
    },
    success: function(data){
      submitter.val(submitterVal);
      Drupal.Ajax.response(submitter, formObj, data);
      return true;
    }
  });
  return false;
};

/**
 * Handles messaging
 * 
 * @param {Object} formObj
 * @param {Object} submitter
 * @param {Object} data
 * @param {Object} options
 * @return {Bool}
 */
Drupal.Ajax.message = function(formObj, submitter, data, options) {
  var args;
  data.local = {
    submitter : submitter,
    form : formObj
  };
  if (Drupal.Ajax.invoke('message', data)) {
    Drupal.Ajax.writeMessage(data.local.form, data.local.submitter, options);
    Drupal.Ajax.invoke('afterMessage', data);
  }
  return true;
};

/**
 * Writes message
 * 
 * @param {Object} formObj
 * @param {Object} submitter
 * @param {Object} options
 * @return {Bool}
 */
Drupal.Ajax.writeMessage = function(formObj, submitter, options) {
  var i, _i, thisItem, log, errBox, h, data;
  if (options.action === 'notify') {
    // Cleanups
    $('.messages, .ajax-preview', formObj).remove();
    $('input, textarea').removeClass('error status warning required');
    // Preview
    if (options.type === 'preview') {
      log = $('<div>').addClass('ajax-preview');
      log.html(options.messages);
      formObj.prepend(log);
    }
    // Status, Error, Message
    else {
      log = $('<ul>');
      errBox = $(".messages." + options.type, formObj[0])
      for (i = 0, _i = options.messages.length; i < _i; i++) {
        thisItem = $('#' + options.messages[i].id, formObj[0])
        thisItem.addClass(options.type);
        if (options.messages[i].required) {
          thisItem.addClass('required');
        }
        log.append('<li>' + options.messages[i].value + '</li>');
      }
      if (errBox.length === 0) {
        errBox = $("<div class='messages " + options.type + "'>");
        formObj.prepend(errBox);
      }
      errBox.html(log);
    }
  }
  else if (options.action === 'clear') {
    $('.messages, .ajax-preview', formObj).remove();
  }
  return true;
};

/**
 * Updates message containers
 * 
 * @param {Object} updaters
 * @return {Bool}
 */
Drupal.Ajax.updater = function(updaters) {
  var i, _i, elm;
  for (i = 0, _i = updaters.length; i < _i; i++) {
    elm = $(updaters[i].selector);
    // HTML:IN
    if (updaters[i].type === 'html_in') {
      elm.html(updaters[i].value);
    }
    // HTML:OUT
    else if (updaters[i].type === 'html_out') {
      elm.replaceWith(updaters[i].value);
    }
    // FIELD
    else if (updaters[i].type === 'field') {
      elm.val(updaters[i].value);
    }
    // REMOVE
    else if(updaters[i].type === 'remove') {
      elm.remove();
    }
  }
  return true;
};

/**
 * Handles data response
 * 
 * @param {Object} submitter
 * @param {Object} formObj
 * @param {Object} data
 * @return {Bool}
 */
Drupal.Ajax.response = function(submitter, formObj, data){
  var newSubmitter;
  data.local = {
    submitter : submitter,
    form : formObj
  };
  /**
   * Failure
   */
  if (data.status === false) {
    Drupal.Ajax.updater(data.updaters);
    Drupal.Ajax.message(formObj, submitter, data, {
      action : 'notify',
      messages : data.messages_error,
      type : 'error'
    });
  }
  /**
   * Success
   */
  else {
    // Display preview
    if (data.preview !== null) {
      Drupal.Ajax.updater(data.updaters);
      Drupal.Ajax.message(formObj, submitter, data, {
        action : 'notify',
        messages : decodeURIComponent(data.preview),
        type : 'preview'
      });
    }
    // If no redirect, then simply show messages
    else if (data.redirect === null) {
      if (data.messages_status.length > 0) {
        Drupal.Ajax.message(formObj, submitter, data, {
          action : 'notify',
          messages : data.messages_status,
          type : 'status'
        });
      }
      if (data.messages_warning.length > 0) {
        Drupal.Ajax.message(formObj, submitter, data, {
          action : 'notify',
          messages : data.messages_warning,
          type : 'warning'
        });
      }
      if (data.messages_status.length === 0 &&
          data.messages_warning.length === 0) {
        Drupal.Ajax.message(formObj, submitter, data, {action:'clear'});
      }
    }
    // Redirect
    else {
      if (Drupal.Ajax.invoke('redirect', data)) {
        Drupal.Ajax.redirect( data.redirect );
      }
      else {
        Drupal.Ajax.updater(data.updaters);
        if (data.messages_status.length === 0 &&
            data.messages_warning.length === 0) {
          Drupal.Ajax.message(formObj, submitter, data, {action:'clear'});
        }
        else {
          Drupal.Ajax.message(formObj, submitter, data, {
            action : 'notify',
            messages : data.messages_status,
            type : 'status'
          });
        }
      }
    }
  }
  return true;
};


/**
 * Redirects to appropriate page
 * 
 * @todo
 *   Some of this functionality should possibly hapen on
 *   the server instead of client.
 * @param {String} url
 */
Drupal.Ajax.redirect = function(url) {
  window.location.href = url;
};

Drupal.behaviors.Ajax = Drupal.Ajax.init;


;
/**
 * Automatic ajax validation
 *
 * @see http://drupal.org/project/ajax
 * @see irc://freenode.net/#drupy
 * @depends Drupal 6
 * @author brendoncrawford
 * @note This file uses a 79 character width limit.
 * 
 * @see http://drupal.org/node/114774#javascript-behaviors
 *
 */

/**
 * Disables redirection for Ajax forms
 * 
 * @param {String} hook
 * @param {Object} args
 * @return {Bool}
 */
Drupal.Ajax.plugins.disable_redirect = function(hook, args) {
  if (hook === 'redirect') {
    if (args.options.disable_redirect === true) {
      args.local.form[0].reset();
      //IE
      $('.form-item select', args.local.form[0]).attr('selectedIndex', 0);
      if (args.options.remove_form === true) {
        args.local.form.remove();
      }
      else {
        $('.form-item :input', args.local.form[0])[0].focus();
      }
      return false;
    }
  }
}


;
/**
 * Automatic ajax validation
 *
 * @see http://drupal.org/project/ajax
 * @see irc://freenode.net/#drupy
 * @depends Drupal 6
 * @author brendoncrawford
 * @note This file uses a 79 character width limit.
 */

/**
 * Ajax Forms plugin for scroller
 * 
 * @param {String} hook
 * @param {Object} args
 * @return {Bool}
 */
Drupal.Ajax.plugins.scroller = function(hook, args) {
  var scroll_weight, box, found, timer;
  if (hook === 'afterMessage') {
    if (args.options.scroller === true) {
      scroll_weight = 100;
      timer = window.setInterval(function(){
        box = args.local.submitter[0];
        found = false;
        // Watch for thickbox
        while (box.parentNode !== null &&
        Drupal.Ajax.invoke('scrollFind', {
          container: box
        })) {
          box = box.parentNode;
          // Document
          if (box === document) {
            if (box.documentElement.scrollTop &&
            box.documentElement.scrollTop > 0) {
              box.documentElement.scrollTop -= scroll_weight;
              found = true;
            }
          }
          // Body
          else 
            if (box === document.body) {
              if (box.scrollTop &&
              box.scrollTop > 0) {
                box.scrollTop -= scroll_weight;
                found = true;
              }
            }
            // Window
            else 
              if (box === window) {
                if ((window.pageYOffset && window.pageYOffset > 0) ||
                (window.scrollY && window.scrollY > 0)) {
                  window.scrollBy(0, -scroll_weight);
                  found = true;
                }
              }
              // Any other element
              else {
                if (box.scrollTop && box.scrollTop > 0) {
                  box.scrollTop -= scroll_weight;
                  found = true;
                }
              }
        }
        // Check if completed
        if (!found) {
          window.clearInterval(timer);
        }
        return true;
      }, 100);
      return true;
    }
  }
}


;
/**
* hoverIntent r5 // 2007.03.27 // jQuery 1.1.2+
* <http://cherne.net/brian/resources/jquery.hoverIntent.html>
* 
* @param  f  onMouseOver function || An object with configuration options
* @param  g  onMouseOut function  || Nothing (use configuration options object)
* @author    Brian Cherne <brian@cherne.net>
*/
(function($){$.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY;};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).unbind("mousemove",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev]);}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev]);};var handleHover=function(e){var p=(e.type=="mouseover"?e.fromElement:e.toElement)||e.relatedTarget;while(p&&p!=this){try{p=p.parentNode;}catch(e){p=this;}}if(p==this){return false;}var ev=jQuery.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);}if(e.type=="mouseover"){pX=ev.pageX;pY=ev.pageY;$(ob).bind("mousemove",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}}else{$(ob).unbind("mousemove",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob);},cfg.timeout);}}};return this.mouseover(handleHover).mouseout(handleHover);};})(jQuery);;
/*
    Spinner provides a simple approach for adding and removing a preloader
    for your web applications. Usage is as simple as calling $('elem').spinner() and
    subsequently $('elem').spinner.remove(). You may create your own preloader
    at http://www.ajaxload.info. Please note that if you use a custom preloader,
    you must pass in the new height and width as options.
    
    Copyright (C) 2010 Corey Ballou
    Website: http://www.jqueryin.com
    Documentation: http://www.jqueryin.com/projects/spinner-jquery-preloader-plugin/

    This program is free software; you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation; either version 2 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License along
    with this program; if not, write to the Free Software Foundation, Inc.,
    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */
(function($) {
    $.fn.spinner = function(options) {
        var opts = $.extend({}, $.fn.spinner.defaults, options);

        return this.each(function() {
            var l=0, t=0, w=0, h=0, shim=0, $s;
            var $this = $(this);
            
            // removal handling
            if (options == 'remove' || options == 'close') {
                var $s = $this.data('spinner');
                var o = $this.data('opts');
                if (typeof $s != 'undefined') {
                    $s.remove();
                    $this.removeData('spinner').removeData('opts');
                    if (o.hide) $this.css('visibility', 'visible');
                    o.onFinish.call(this);
                }
                return;
            }
            
            // add a spinner if it doesn't already have one
            if ($this.data('spinner') == null) {
                // retrieve element positioning
                var pos = $this.offset();
                w = $this.outerWidth();
                h = $this.outerHeight();

                // calculate vertical centering
                if (h > opts.height) shim = Math.round((h - opts.height)/ 2);
                else if (h < opts.height) shim = 0 - Math.round((opts.height - h) / 2);
                t = pos.top + shim + 'px';

                // calculate horizontal positioning
                if (opts.position == 'right') {
                    l = pos.left + w + 10 + 'px';
                } else if (opts.position == 'left') {
                    l = pos.left - opts.width - 10 + 'px';
                } else {
                    l = pos.left + Math.round(.5 * w) - Math.round(.5 * opts.width) + 'px';
                }

                // call start callback
                opts.onStart.call(this);

                // hide element?
                if (opts.hide) $this.css('visibility', 'hidden');

                // create the spinner and attach
                $s = $('<img src="' + opts.img + '" style="position: absolute; left: ' + l +'; top: ' + t + '; width: ' + opts.width + 'px; height: ' + opts.height + 'px; z-index: ' + opts.zIndex + ';" />').appendTo('body');

                // removal handling
                $this.data('spinner', $s).data('opts', opts);                
            }

        });
    };
    
    // default spinner options
    $.fn.spinner.defaults = {
        position    : 'right'       // left, right, center
        , img       : 'spinner.gif' // path to spinner img
        , height    : 16            // height of spinner img
        , width     : 16            // width of spinner img
        , zIndex    : 1001          // z-index of spinner
        , hide      : false         // whether to hide the elem
        , onStart   : function(){ } // start callback
        , onFinish  : function(){ } // end callback
    };
})(jQuery);
;
/*
 * Shadowbox.js, version 3.0.3
 * http://shadowbox-js.com/
 *
 * Copyright 2007-2010, Michael J. I. Jackson
 * Date: 2010-04-06 19:45:54 +0000
 */
(function(window,undefined){var S={version:"3.0.3"};var ua=navigator.userAgent.toLowerCase();if(ua.indexOf("windows")>-1||ua.indexOf("win32")>-1){S.isWindows=true}else{if(ua.indexOf("macintosh")>-1||ua.indexOf("mac os x")>-1){S.isMac=true}else{if(ua.indexOf("linux")>-1){S.isLinux=true}}}S.isIE=ua.indexOf("msie")>-1;S.isIE6=ua.indexOf("msie 6")>-1;S.isIE7=ua.indexOf("msie 7")>-1;S.isGecko=ua.indexOf("gecko")>-1&&ua.indexOf("safari")==-1;S.isWebKit=ua.indexOf("applewebkit/")>-1;var inlineId=/#(.+)$/,galleryName=/^(light|shadow)box\[(.*?)\]/i,inlineParam=/\s*([a-z_]*?)\s*=\s*(.+)\s*/,fileExtension=/[0-9a-z]+$/i,scriptPath=/(.+\/)shadowbox\.js/i;var open=false,initialized=false,lastOptions={},slideDelay=0,slideStart,slideTimer;S.current=-1;S.dimensions=null;S.ease=function(state){return 1+Math.pow(state-1,3)};S.errorInfo={fla:{name:"Flash",url:"http://www.adobe.com/products/flashplayer/"},qt:{name:"QuickTime",url:"http://www.apple.com/quicktime/download/"},wmp:{name:"Windows Media Player",url:"http://www.microsoft.com/windows/windowsmedia/"},f4m:{name:"Flip4Mac",url:"http://www.flip4mac.com/wmv_download.htm"}};S.gallery=[];S.onReady=noop;S.path=null;S.player=null;S.playerId="sb-player";S.options={animate:true,animateFade:true,autoplayMovies:true,continuous:false,enableKeys:true,flashParams:{bgcolor:"#000000",allowfullscreen:true},flashVars:{},flashVersion:"9.0.115",handleOversize:"resize",handleUnsupported:"link",onChange:noop,onClose:noop,onFinish:noop,onOpen:noop,showMovieControls:true,skipSetup:false,slideshowDelay:0,viewportPadding:20};S.getCurrent=function(){return S.current>-1?S.gallery[S.current]:null};S.hasNext=function(){return S.gallery.length>1&&(S.current!=S.gallery.length-1||S.options.continuous)};S.isOpen=function(){return open};S.isPaused=function(){return slideTimer=="pause"};S.applyOptions=function(options){lastOptions=apply({},S.options);apply(S.options,options)};S.revertOptions=function(){apply(S.options,lastOptions)};S.init=function(options,callback){if(initialized){return}initialized=true;if(S.skin.options){apply(S.options,S.skin.options)}if(options){apply(S.options,options)}if(!S.path){var path,scripts=document.getElementsByTagName("script");for(var i=0,len=scripts.length;i<len;++i){path=scriptPath.exec(scripts[i].src);if(path){S.path=path[1];break}}}if(callback){S.onReady=callback}bindLoad()};S.open=function(obj){if(open){return}var gc=S.makeGallery(obj);S.gallery=gc[0];S.current=gc[1];obj=S.getCurrent();if(obj==null){return}S.applyOptions(obj.options||{});filterGallery();if(S.gallery.length){obj=S.getCurrent();if(S.options.onOpen(obj)===false){return}open=true;S.skin.onOpen(obj,load)}};S.close=function(){if(!open){return}open=false;if(S.player){S.player.remove();S.player=null}if(typeof slideTimer=="number"){clearTimeout(slideTimer);slideTimer=null}slideDelay=0;listenKeys(false);S.options.onClose(S.getCurrent());S.skin.onClose();S.revertOptions()};S.play=function(){if(!S.hasNext()){return}if(!slideDelay){slideDelay=S.options.slideshowDelay*1000}if(slideDelay){slideStart=now();slideTimer=setTimeout(function(){slideDelay=slideStart=0;S.next()},slideDelay);if(S.skin.onPlay){S.skin.onPlay()}}};S.pause=function(){if(typeof slideTimer!="number"){return}slideDelay=Math.max(0,slideDelay-(now()-slideStart));if(slideDelay){clearTimeout(slideTimer);slideTimer="pause";if(S.skin.onPause){S.skin.onPause()}}};S.change=function(index){if(!(index in S.gallery)){if(S.options.continuous){index=(index<0?S.gallery.length+index:0);if(!(index in S.gallery)){return}}else{return}}S.current=index;if(typeof slideTimer=="number"){clearTimeout(slideTimer);slideTimer=null;slideDelay=slideStart=0}S.options.onChange(S.getCurrent());load(true)};S.next=function(){S.change(S.current+1)};S.previous=function(){S.change(S.current-1)};S.setDimensions=function(height,width,maxHeight,maxWidth,topBottom,leftRight,padding,preserveAspect){var originalHeight=height,originalWidth=width;var extraHeight=2*padding+topBottom;if(height+extraHeight>maxHeight){height=maxHeight-extraHeight}var extraWidth=2*padding+leftRight;if(width+extraWidth>maxWidth){width=maxWidth-extraWidth}var changeHeight=(originalHeight-height)/originalHeight,changeWidth=(originalWidth-width)/originalWidth,oversized=(changeHeight>0||changeWidth>0);if(preserveAspect&&oversized){if(changeHeight>changeWidth){width=Math.round((originalWidth/originalHeight)*height)}else{if(changeWidth>changeHeight){height=Math.round((originalHeight/originalWidth)*width)}}}S.dimensions={height:height+topBottom,width:width+leftRight,innerHeight:height,innerWidth:width,top:Math.floor((maxHeight-(height+extraHeight))/2+padding),left:Math.floor((maxWidth-(width+extraWidth))/2+padding),oversized:oversized};return S.dimensions};S.makeGallery=function(obj){var gallery=[],current=-1;if(typeof obj=="string"){obj=[obj]}if(typeof obj.length=="number"){each(obj,function(i,o){if(o.content){gallery[i]=o}else{gallery[i]={content:o}}});current=0}else{if(obj.tagName){var cacheObj=S.getCache(obj);obj=cacheObj?cacheObj:S.makeObject(obj)}if(obj.gallery){gallery=[];var o;for(var key in S.cache){o=S.cache[key];if(o.gallery&&o.gallery==obj.gallery){if(current==-1&&o.content==obj.content){current=gallery.length}gallery.push(o)}}if(current==-1){gallery.unshift(obj);current=0}}else{gallery=[obj];current=0}}each(gallery,function(i,o){gallery[i]=apply({},o)});return[gallery,current]};S.makeObject=function(link,options){var obj={content:link.href,title:link.getAttribute("title")||"",link:link};if(options){options=apply({},options);each(["player","title","height","width","gallery"],function(i,o){if(typeof options[o]!="undefined"){obj[o]=options[o];delete options[o]}});obj.options=options}else{obj.options={}}if(!obj.player){obj.player=S.getPlayer(obj.content)}var rel=link.getAttribute("rel");if(rel){var match=rel.match(galleryName);if(match){obj.gallery=escape(match[2])}each(rel.split(";"),function(i,p){match=p.match(inlineParam);if(match){obj[match[1]]=match[2]}})}return obj};S.getPlayer=function(content){if(content.indexOf("#")>-1&&content.indexOf(document.location.href)==0){return"inline"}var q=content.indexOf("?");if(q>-1){content=content.substring(0,q)}var ext,m=content.match(fileExtension);if(m){ext=m[0].toLowerCase()}if(ext){if(S.img&&S.img.ext.indexOf(ext)>-1){return"img"}if(S.swf&&S.swf.ext.indexOf(ext)>-1){return"swf"}if(S.flv&&S.flv.ext.indexOf(ext)>-1){return"flv"}if(S.qt&&S.qt.ext.indexOf(ext)>-1){if(S.wmp&&S.wmp.ext.indexOf(ext)>-1){return"qtwmp"}else{return"qt"}}if(S.wmp&&S.wmp.ext.indexOf(ext)>-1){return"wmp"}}return"iframe"};function filterGallery(){var err=S.errorInfo,plugins=S.plugins,obj,remove,needed,m,format,replace,inlineEl,flashVersion;for(var i=0;i<S.gallery.length;++i){obj=S.gallery[i];remove=false;needed=null;switch(obj.player){case"flv":case"swf":if(!plugins.fla){needed="fla"}break;case"qt":if(!plugins.qt){needed="qt"}break;case"wmp":if(S.isMac){if(plugins.qt&&plugins.f4m){obj.player="qt"}else{needed="qtf4m"}}else{if(!plugins.wmp){needed="wmp"}}break;case"qtwmp":if(plugins.qt){obj.player="qt"}else{if(plugins.wmp){obj.player="wmp"}else{needed="qtwmp"}}break}if(needed){if(S.options.handleUnsupported=="link"){switch(needed){case"qtf4m":format="shared";replace=[err.qt.url,err.qt.name,err.f4m.url,err.f4m.name];break;case"qtwmp":format="either";replace=[err.qt.url,err.qt.name,err.wmp.url,err.wmp.name];break;default:format="single";replace=[err[needed].url,err[needed].name]}obj.player="html";obj.content='<div class="sb-message">'+sprintf(S.lang.errors[format],replace)+"</div>"}else{remove=true}}else{if(obj.player=="inline"){m=inlineId.exec(obj.content);if(m){inlineEl=get(m[1]);if(inlineEl){obj.content=inlineEl.innerHTML}else{remove=true}}else{remove=true}}else{if(obj.player=="swf"||obj.player=="flv"){flashVersion=(obj.options&&obj.options.flashVersion)||S.options.flashVersion;if(S.flash&&!S.flash.hasFlashPlayerVersion(flashVersion)){obj.width=310;obj.height=177}}}}if(remove){S.gallery.splice(i,1);if(i<S.current){--S.current}else{if(i==S.current){S.current=i>0?i-1:i}}--i}}}function listenKeys(on){if(!S.options.enableKeys){return}(on?addEvent:removeEvent)(document,"keydown",handleKey)}function handleKey(e){if(e.metaKey||e.shiftKey||e.altKey||e.ctrlKey){return}var code=keyCode(e),handler;switch(code){case 81:case 88:case 27:handler=S.close;break;case 37:handler=S.previous;break;case 39:handler=S.next;break;case 32:handler=typeof slideTimer=="number"?S.pause:S.play;break}if(handler){preventDefault(e);handler()}}function load(changing){listenKeys(false);var obj=S.getCurrent();var player=(obj.player=="inline"?"html":obj.player);if(typeof S[player]!="function"){throw"unknown player "+player}if(changing){S.player.remove();S.revertOptions();S.applyOptions(obj.options||{})}S.player=new S[player](obj,S.playerId);if(S.gallery.length>1){var next=S.gallery[S.current+1]||S.gallery[0];if(next.player=="img"){var a=new Image();a.src=next.content}var prev=S.gallery[S.current-1]||S.gallery[S.gallery.length-1];if(prev.player=="img"){var b=new Image();b.src=prev.content}}S.skin.onLoad(changing,waitReady)}function waitReady(){if(!open){return}if(typeof S.player.ready!="undefined"){var timer=setInterval(function(){if(open){if(S.player.ready){clearInterval(timer);timer=null;S.skin.onReady(show)}}else{clearInterval(timer);timer=null}},10)}else{S.skin.onReady(show)}}function show(){if(!open){return}S.player.append(S.skin.body,S.dimensions);S.skin.onShow(finish)}function finish(){if(!open){return}if(S.player.onLoad){S.player.onLoad()}S.options.onFinish(S.getCurrent());if(!S.isPaused()){S.play()}listenKeys(true)}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(obj,from){var len=this.length>>>0;from=from||0;if(from<0){from+=len}for(;from<len;++from){if(from in this&&this[from]===obj){return from}}return -1}}function now(){return(new Date).getTime()}function apply(original,extension){for(var property in extension){original[property]=extension[property]}return original}function each(obj,callback){var i=0,len=obj.length;for(var value=obj[0];i<len&&callback.call(value,i,value)!==false;value=obj[++i]){}}function sprintf(str,replace){return str.replace(/\{(\w+?)\}/g,function(match,i){return replace[i]})}function noop(){}function get(id){return document.getElementById(id)}function remove(el){el.parentNode.removeChild(el)}var supportsOpacity=true,supportsFixed=true;function checkSupport(){var body=document.body,div=document.createElement("div");supportsOpacity=typeof div.style.opacity==="string";div.style.position="fixed";div.style.margin=0;div.style.top="20px";body.appendChild(div,body.firstChild);supportsFixed=div.offsetTop==20;body.removeChild(div)}S.getStyle=(function(){var opacity=/opacity=([^)]*)/,getComputedStyle=document.defaultView&&document.defaultView.getComputedStyle;return function(el,style){var ret;if(!supportsOpacity&&style=="opacity"&&el.currentStyle){ret=opacity.test(el.currentStyle.filter||"")?(parseFloat(RegExp.$1)/100)+"":"";return ret===""?"1":ret}if(getComputedStyle){var computedStyle=getComputedStyle(el,null);if(computedStyle){ret=computedStyle[style]}if(style=="opacity"&&ret==""){ret="1"}}else{ret=el.currentStyle[style]}return ret}})();S.appendHTML=function(el,html){if(el.insertAdjacentHTML){el.insertAdjacentHTML("BeforeEnd",html)}else{if(el.lastChild){var range=el.ownerDocument.createRange();range.setStartAfter(el.lastChild);var frag=range.createContextualFragment(html);el.appendChild(frag)}else{el.innerHTML=html}}};S.getWindowSize=function(dimension){if(document.compatMode==="CSS1Compat"){return document.documentElement["client"+dimension]}return document.body["client"+dimension]};S.setOpacity=function(el,opacity){var style=el.style;if(supportsOpacity){style.opacity=(opacity==1?"":opacity)}else{style.zoom=1;if(opacity==1){if(typeof style.filter=="string"&&(/alpha/i).test(style.filter)){style.filter=style.filter.replace(/\s*[\w\.]*alpha\([^\)]*\);?/gi,"")}}else{style.filter=(style.filter||"").replace(/\s*[\w\.]*alpha\([^\)]*\)/gi,"")+" alpha(opacity="+(opacity*100)+")"}}};S.clearOpacity=function(el){S.setOpacity(el,1)};function getTarget(e){return e.target}function getPageXY(e){return[e.pageX,e.pageY]}function preventDefault(e){e.preventDefault()}function keyCode(e){return e.keyCode}function addEvent(el,type,handler){jQuery(el).bind(type,handler)}function removeEvent(el,type,handler){jQuery(el).unbind(type,handler)}jQuery.fn.shadowbox=function(options){return this.each(function(){var el=jQuery(this);var opts=jQuery.extend({},options||{},jQuery.metadata?el.metadata():jQuery.meta?el.data():{});var cls=this.className||"";opts.width=parseInt((cls.match(/w:(\d+)/)||[])[1])||opts.width;opts.height=parseInt((cls.match(/h:(\d+)/)||[])[1])||opts.height;Shadowbox.setup(el,opts)})};var loaded=false,DOMContentLoaded;if(document.addEventListener){DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);S.load()}}else{if(document.attachEvent){DOMContentLoaded=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);S.load()}}}}function doScrollCheck(){if(loaded){return}try{document.documentElement.doScroll("left")}catch(e){setTimeout(doScrollCheck,1);return}S.load()}function bindLoad(){if(document.readyState==="complete"){return S.load()}if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);window.addEventListener("load",S.load,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded);window.attachEvent("onload",S.load);var topLevel=false;try{topLevel=window.frameElement===null}catch(e){}if(document.documentElement.doScroll&&topLevel){doScrollCheck()}}}}S.load=function(){if(loaded){return}if(!document.body){return setTimeout(S.load,13)}loaded=true;checkSupport();S.onReady();if(!S.options.skipSetup){S.setup()}S.skin.init()};S.plugins={};if(navigator.plugins&&navigator.plugins.length){var names=[];each(navigator.plugins,function(i,p){names.push(p.name)});names=names.join(",");var f4m=names.indexOf("Flip4Mac")>-1;S.plugins={fla:names.indexOf("Shockwave Flash")>-1,qt:names.indexOf("QuickTime")>-1,wmp:!f4m&&names.indexOf("Windows Media")>-1,f4m:f4m}}else{var detectPlugin=function(name){var axo;try{axo=new ActiveXObject(name)}catch(e){}return !!axo};S.plugins={fla:detectPlugin("ShockwaveFlash.ShockwaveFlash"),qt:detectPlugin("QuickTime.QuickTime"),wmp:detectPlugin("wmplayer.ocx"),f4m:false}}var relAttr=/^(light|shadow)box/i,expando="shadowboxCacheKey",cacheKey=1;S.cache={};S.select=function(selector){var links=[];if(!selector){var rel;each(document.getElementsByTagName("a"),function(i,el){rel=el.getAttribute("rel");if(rel&&relAttr.test(rel)){links.push(el)}})}else{var length=selector.length;if(length){if(typeof selector=="string"){if(S.find){links=S.find(selector)}}else{if(length==2&&typeof selector[0]=="string"&&selector[1].nodeType){if(S.find){links=S.find(selector[0],selector[1])}}else{for(var i=0;i<length;++i){links[i]=selector[i]}}}}else{links.push(selector)}}return links};S.setup=function(selector,options){each(S.select(selector),function(i,link){S.addCache(link,options)})};S.teardown=function(selector){each(S.select(selector),function(i,link){S.removeCache(link)})};S.addCache=function(link,options){var key=link[expando];if(key==undefined){key=cacheKey++;link[expando]=key;addEvent(link,"click",handleClick)}S.cache[key]=S.makeObject(link,options)};S.removeCache=function(link){removeEvent(link,"click",handleClick);delete S.cache[link[expando]];link[expando]=null};S.getCache=function(link){var key=link[expando];return(key in S.cache&&S.cache[key])};S.clearCache=function(){for(var key in S.cache){S.removeCache(S.cache[key].link)}S.cache={}};function handleClick(e){S.open(this);if(S.gallery.length){preventDefault(e)}}
/*
 * Sizzle CSS Selector Engine - v1.0
 *  Copyright 2009, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 *
 * Modified for inclusion in Shadowbox.js
 */
S.find=(function(){var chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,done=0,toString=Object.prototype.toString,hasDuplicate=false,baseHasDuplicate=true;[0,0].sort(function(){baseHasDuplicate=false;return 0});var Sizzle=function(selector,context,results,seed){results=results||[];var origContext=context=context||document;if(context.nodeType!==1&&context.nodeType!==9){return[]}if(!selector||typeof selector!=="string"){return results}var parts=[],m,set,checkSet,extra,prune=true,contextXML=isXML(context),soFar=selector;while((chunker.exec(""),m=chunker.exec(soFar))!==null){soFar=m[3];parts.push(m[1]);if(m[2]){extra=m[3];break}}if(parts.length>1&&origPOS.exec(selector)){if(parts.length===2&&Expr.relative[parts[0]]){set=posProcess(parts[0]+parts[1],context)}else{set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);while(parts.length){selector=parts.shift();if(Expr.relative[selector]){selector+=parts.shift()}set=posProcess(selector,set)}}}else{if(!seed&&parts.length>1&&context.nodeType===9&&!contextXML&&Expr.match.ID.test(parts[0])&&!Expr.match.ID.test(parts[parts.length-1])){var ret=Sizzle.find(parts.shift(),context,contextXML);context=ret.expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0]}if(context){var ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),parts.length===1&&(parts[0]==="~"||parts[0]==="+")&&context.parentNode?context.parentNode:context,contextXML);set=ret.expr?Sizzle.filter(ret.expr,ret.set):ret.set;if(parts.length>0){checkSet=makeArray(set)}else{prune=false}while(parts.length){var cur=parts.pop(),pop=cur;if(!Expr.relative[cur]){cur=""}else{pop=parts.pop()}if(pop==null){pop=context}Expr.relative[cur](checkSet,pop,contextXML)}}else{checkSet=parts=[]}}if(!checkSet){checkSet=set}if(!checkSet){throw"Syntax error, unrecognized expression: "+(cur||selector)}if(toString.call(checkSet)==="[object Array]"){if(!prune){results.push.apply(results,checkSet)}else{if(context&&context.nodeType===1){for(var i=0;checkSet[i]!=null;i++){if(checkSet[i]&&(checkSet[i]===true||checkSet[i].nodeType===1&&contains(context,checkSet[i]))){results.push(set[i])}}}else{for(var i=0;checkSet[i]!=null;i++){if(checkSet[i]&&checkSet[i].nodeType===1){results.push(set[i])}}}}}else{makeArray(checkSet,results)}if(extra){Sizzle(extra,origContext,results,seed);Sizzle.uniqueSort(results)}return results};Sizzle.uniqueSort=function(results){if(sortOrder){hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate){for(var i=1;i<results.length;i++){if(results[i]===results[i-1]){results.splice(i--,1)}}}}return results};Sizzle.matches=function(expr,set){return Sizzle(expr,null,null,set)};Sizzle.find=function(expr,context,isXML){var set,match;if(!expr){return[]}for(var i=0,l=Expr.order.length;i<l;i++){var type=Expr.order[i],match;if((match=Expr.leftMatch[type].exec(expr))){var left=match[1];match.splice(1,1);if(left.substr(left.length-1)!=="\\"){match[1]=(match[1]||"").replace(/\\/g,"");set=Expr.find[type](match,context,isXML);if(set!=null){expr=expr.replace(Expr.match[type],"");break}}}}if(!set){set=context.getElementsByTagName("*")}return{set:set,expr:expr}};Sizzle.filter=function(expr,set,inplace,not){var old=expr,result=[],curLoop=set,match,anyFound,isXMLFilter=set&&set[0]&&isXML(set[0]);while(expr&&set.length){for(var type in Expr.filter){if((match=Expr.match[type].exec(expr))!=null){var filter=Expr.filter[type],found,item;anyFound=false;if(curLoop===result){result=[]}if(Expr.preFilter[type]){match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter);if(!match){anyFound=found=true}else{if(match===true){continue}}}if(match){for(var i=0;(item=curLoop[i])!=null;i++){if(item){found=filter(item,match,i,curLoop);var pass=not^!!found;if(inplace&&found!=null){if(pass){anyFound=true}else{curLoop[i]=false}}else{if(pass){result.push(item);anyFound=true}}}}}if(found!==undefined){if(!inplace){curLoop=result}expr=expr.replace(Expr.match[type],"");if(!anyFound){return[]}break}}}if(expr===old){if(anyFound==null){throw"Syntax error, unrecognized expression: "+expr}else{break}}old=expr}return curLoop};var Expr=Sizzle.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(elem){return elem.getAttribute("href")}},relative:{"+":function(checkSet,part){var isPartStr=typeof part==="string",isTag=isPartStr&&!/\W/.test(part),isPartStrNotTag=isPartStr&&!isTag;if(isTag){part=part.toLowerCase()}for(var i=0,l=checkSet.length,elem;i<l;i++){if((elem=checkSet[i])){while((elem=elem.previousSibling)&&elem.nodeType!==1){}checkSet[i]=isPartStrNotTag||elem&&elem.nodeName.toLowerCase()===part?elem||false:elem===part}}if(isPartStrNotTag){Sizzle.filter(part,checkSet,true)}},">":function(checkSet,part){var isPartStr=typeof part==="string";if(isPartStr&&!/\W/.test(part)){part=part.toLowerCase();for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var parent=elem.parentNode;checkSet[i]=parent.nodeName.toLowerCase()===part?parent:false}}}else{for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part}}if(isPartStr){Sizzle.filter(part,checkSet,true)}}},"":function(checkSet,part,isXML){var doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!/\W/.test(part)){var nodeCheck=part=part.toLowerCase();checkFn=dirNodeCheck}checkFn("parentNode",part,doneName,checkSet,nodeCheck,isXML)},"~":function(checkSet,part,isXML){var doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!/\W/.test(part)){var nodeCheck=part=part.toLowerCase();checkFn=dirNodeCheck}checkFn("previousSibling",part,doneName,checkSet,nodeCheck,isXML)}},find:{ID:function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m?[m]:[]}},NAME:function(match,context){if(typeof context.getElementsByName!=="undefined"){var ret=[],results=context.getElementsByName(match[1]);for(var i=0,l=results.length;i<l;i++){if(results[i].getAttribute("name")===match[1]){ret.push(results[i])}}return ret.length===0?null:ret}},TAG:function(match,context){return context.getElementsByTagName(match[1])}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,isXML){match=" "+match[1].replace(/\\/g,"")+" ";if(isXML){return match}for(var i=0,elem;(elem=curLoop[i])!=null;i++){if(elem){if(not^(elem.className&&(" "+elem.className+" ").replace(/[\t\n]/g," ").indexOf(match)>=0)){if(!inplace){result.push(elem)}}else{if(inplace){curLoop[i]=false}}}}return false},ID:function(match){return match[1].replace(/\\/g,"")},TAG:function(match,curLoop){return match[1].toLowerCase()},CHILD:function(match){if(match[1]==="nth"){var test=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(match[2]==="even"&&"2n"||match[2]==="odd"&&"2n+1"||!/\D/.test(match[2])&&"0n+"+match[2]||match[2]);match[2]=(test[1]+(test[2]||1))-0;match[3]=test[3]-0}match[0]=done++;return match},ATTR:function(match,curLoop,inplace,result,not,isXML){var name=match[1].replace(/\\/g,"");if(!isXML&&Expr.attrMap[name]){match[1]=Expr.attrMap[name]}if(match[2]==="~="){match[4]=" "+match[4]+" "}return match},PSEUDO:function(match,curLoop,inplace,result,not){if(match[1]==="not"){if((chunker.exec(match[3])||"").length>1||/^\w/.test(match[3])){match[3]=Sizzle(match[3],null,null,curLoop)}else{var ret=Sizzle.filter(match[3],curLoop,inplace,true^not);if(!inplace){result.push.apply(result,ret)}return false}}else{if(Expr.match.POS.test(match[0])||Expr.match.CHILD.test(match[0])){return true}}return match},POS:function(match){match.unshift(true);return match}},filters:{enabled:function(elem){return elem.disabled===false&&elem.type!=="hidden"},disabled:function(elem){return elem.disabled===true},checked:function(elem){return elem.checked===true},selected:function(elem){elem.parentNode.selectedIndex;return elem.selected===true},parent:function(elem){return !!elem.firstChild},empty:function(elem){return !elem.firstChild},has:function(elem,i,match){return !!Sizzle(match[3],elem).length},header:function(elem){return/h\d/i.test(elem.nodeName)},text:function(elem){return"text"===elem.type},radio:function(elem){return"radio"===elem.type},checkbox:function(elem){return"checkbox"===elem.type},file:function(elem){return"file"===elem.type},password:function(elem){return"password"===elem.type},submit:function(elem){return"submit"===elem.type},image:function(elem){return"image"===elem.type},reset:function(elem){return"reset"===elem.type},button:function(elem){return"button"===elem.type||elem.nodeName.toLowerCase()==="button"},input:function(elem){return/input|select|textarea|button/i.test(elem.nodeName)}},setFilters:{first:function(elem,i){return i===0},last:function(elem,i,match,array){return i===array.length-1},even:function(elem,i){return i%2===0},odd:function(elem,i){return i%2===1},lt:function(elem,i,match){return i<match[3]-0},gt:function(elem,i,match){return i>match[3]-0},nth:function(elem,i,match){return match[3]-0===i},eq:function(elem,i,match){return match[3]-0===i}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];if(filter){return filter(elem,i,match,array)}else{if(name==="contains"){return(elem.textContent||elem.innerText||getText([elem])||"").indexOf(match[3])>=0}else{if(name==="not"){var not=match[3];for(var i=0,l=not.length;i<l;i++){if(not[i]===elem){return false}}return true}else{throw"Syntax error, unrecognized expression: "+name}}}},CHILD:function(elem,match){var type=match[1],node=elem;switch(type){case"only":case"first":while((node=node.previousSibling)){if(node.nodeType===1){return false}}if(type==="first"){return true}node=elem;case"last":while((node=node.nextSibling)){if(node.nodeType===1){return false}}return true;case"nth":var first=match[2],last=match[3];if(first===1&&last===0){return true}var doneName=match[0],parent=elem.parentNode;if(parent&&(parent.sizcache!==doneName||!elem.nodeIndex)){var count=0;for(node=parent.firstChild;node;node=node.nextSibling){if(node.nodeType===1){node.nodeIndex=++count}}parent.sizcache=doneName}var diff=elem.nodeIndex-last;if(first===0){return diff===0}else{return(diff%first===0&&diff/first>=0)}}},ID:function(elem,match){return elem.nodeType===1&&elem.getAttribute("id")===match},TAG:function(elem,match){return(match==="*"&&elem.nodeType===1)||elem.nodeName.toLowerCase()===match},CLASS:function(elem,match){return(" "+(elem.className||elem.getAttribute("class"))+" ").indexOf(match)>-1},ATTR:function(elem,match){var name=match[1],result=Expr.attrHandle[name]?Expr.attrHandle[name](elem):elem[name]!=null?elem[name]:elem.getAttribute(name),value=result+"",type=match[2],check=match[4];return result==null?type==="!=":type==="="?value===check:type==="*="?value.indexOf(check)>=0:type==="~="?(" "+value+" ").indexOf(check)>=0:!check?value&&result!==false:type==="!="?value!==check:type==="^="?value.indexOf(check)===0:type==="$="?value.substr(value.length-check.length)===check:type==="|="?value===check||value.substr(0,check.length+1)===check+"-":false},POS:function(elem,match,i,array){var name=match[2],filter=Expr.setFilters[name];if(filter){return filter(elem,i,match,array)}}}};var origPOS=Expr.match.POS;for(var type in Expr.match){Expr.match[type]=new RegExp(Expr.match[type].source+/(?![^\[]*\])(?![^\(]*\))/.source);Expr.leftMatch[type]=new RegExp(/(^(?:.|\r|\n)*?)/.source+Expr.match[type].source)}var makeArray=function(array,results){array=Array.prototype.slice.call(array,0);if(results){results.push.apply(results,array);return results}return array};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(e){makeArray=function(array,results){var ret=results||[];if(toString.call(array)==="[object Array]"){Array.prototype.push.apply(ret,array)}else{if(typeof array.length==="number"){for(var i=0,l=array.length;i<l;i++){ret.push(array[i])}}else{for(var i=0;array[i];i++){ret.push(array[i])}}}return ret}}var sortOrder;if(document.documentElement.compareDocumentPosition){sortOrder=function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition){if(a==b){hasDuplicate=true}return a.compareDocumentPosition?-1:1}var ret=a.compareDocumentPosition(b)&4?-1:a===b?0:1;if(ret===0){hasDuplicate=true}return ret}}else{if("sourceIndex" in document.documentElement){sortOrder=function(a,b){if(!a.sourceIndex||!b.sourceIndex){if(a==b){hasDuplicate=true}return a.sourceIndex?-1:1}var ret=a.sourceIndex-b.sourceIndex;if(ret===0){hasDuplicate=true}return ret}}else{if(document.createRange){sortOrder=function(a,b){if(!a.ownerDocument||!b.ownerDocument){if(a==b){hasDuplicate=true}return a.ownerDocument?-1:1}var aRange=a.ownerDocument.createRange(),bRange=b.ownerDocument.createRange();aRange.setStart(a,0);aRange.setEnd(a,0);bRange.setStart(b,0);bRange.setEnd(b,0);var ret=aRange.compareBoundaryPoints(Range.START_TO_END,bRange);if(ret===0){hasDuplicate=true}return ret}}}}function getText(elems){var ret="",elem;for(var i=0;elems[i];i++){elem=elems[i];if(elem.nodeType===3||elem.nodeType===4){ret+=elem.nodeValue}else{if(elem.nodeType!==8){ret+=getText(elem.childNodes)}}}return ret}(function(){var form=document.createElement("div"),id="script"+(new Date).getTime();form.innerHTML="<a name='"+id+"'/>";var root=document.documentElement;root.insertBefore(form,root.firstChild);if(document.getElementById(id)){Expr.find.ID=function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m?m.id===match[1]||typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id").nodeValue===match[1]?[m]:undefined:[]}};Expr.filter.ID=function(elem,match){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return elem.nodeType===1&&node&&node.nodeValue===match}}root.removeChild(form);root=form=null})();(function(){var div=document.createElement("div");div.appendChild(document.createComment(""));if(div.getElementsByTagName("*").length>0){Expr.find.TAG=function(match,context){var results=context.getElementsByTagName(match[1]);if(match[1]==="*"){var tmp=[];for(var i=0;results[i];i++){if(results[i].nodeType===1){tmp.push(results[i])}}results=tmp}return results}}div.innerHTML="<a href='#'></a>";if(div.firstChild&&typeof div.firstChild.getAttribute!=="undefined"&&div.firstChild.getAttribute("href")!=="#"){Expr.attrHandle.href=function(elem){return elem.getAttribute("href",2)}}div=null})();if(document.querySelectorAll){(function(){var oldSizzle=Sizzle,div=document.createElement("div");div.innerHTML="<p class='TEST'></p>";if(div.querySelectorAll&&div.querySelectorAll(".TEST").length===0){return}Sizzle=function(query,context,extra,seed){context=context||document;if(!seed&&context.nodeType===9&&!isXML(context)){try{return makeArray(context.querySelectorAll(query),extra)}catch(e){}}return oldSizzle(query,context,extra,seed)};for(var prop in oldSizzle){Sizzle[prop]=oldSizzle[prop]}div=null})()}(function(){var div=document.createElement("div");div.innerHTML="<div class='test e'></div><div class='test'></div>";if(!div.getElementsByClassName||div.getElementsByClassName("e").length===0){return}div.lastChild.className="e";if(div.getElementsByClassName("e").length===1){return}Expr.order.splice(1,0,"CLASS");Expr.find.CLASS=function(match,context,isXML){if(typeof context.getElementsByClassName!=="undefined"&&!isXML){return context.getElementsByClassName(match[1])}};div=null})();function dirNodeCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){elem=elem[dir];var match=false;while(elem){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break}if(elem.nodeType===1&&!isXML){elem.sizcache=doneName;elem.sizset=i}if(elem.nodeName.toLowerCase()===cur){match=elem;break}elem=elem[dir]}checkSet[i]=match}}}function dirCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){elem=elem[dir];var match=false;while(elem){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break}if(elem.nodeType===1){if(!isXML){elem.sizcache=doneName;elem.sizset=i}if(typeof cur!=="string"){if(elem===cur){match=true;break}}else{if(Sizzle.filter(cur,[elem]).length>0){match=elem;break}}}elem=elem[dir]}checkSet[i]=match}}}var contains=document.compareDocumentPosition?function(a,b){return a.compareDocumentPosition(b)&16}:function(a,b){return a!==b&&(a.contains?a.contains(b):true)};var isXML=function(elem){var documentElement=(elem?elem.ownerDocument||elem:0).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};var posProcess=function(selector,context){var tmpSet=[],later="",match,root=context.nodeType?[context]:context;while((match=Expr.match.PSEUDO.exec(selector))){later+=match[0];selector=selector.replace(Expr.match.PSEUDO,"")}selector=Expr.relative[selector]?selector+"*":selector;for(var i=0,l=root.length;i<l;i++){Sizzle(selector,root[i],tmpSet)}return Sizzle.filter(later,tmpSet)};return Sizzle})();
/*
 * SWFObject v2.1 <http://code.google.com/p/swfobject/>
 * Copyright (c) 2007-2008 Geoff Stearns, Michael Williams, and Bobby van der Sluis
 * This software is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
 *
 * Modified for inclusion in Shadowbox.js
 */
S.flash=(function(){var swfobject=function(){var UNDEF="undefined",OBJECT="object",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash",EXPRESS_INSTALL_ID="SWFObjectExprInst",win=window,doc=document,nav=navigator,domLoadFnArr=[],regObjArr=[],objIdArr=[],listenersArr=[],script,timer=null,storedAltContent=null,storedAltContentId=null,isDomLoaded=false,isExpressInstallActive=false;var ua=function(){var w3cdom=typeof doc.getElementById!=UNDEF&&typeof doc.getElementsByTagName!=UNDEF&&typeof doc.createElement!=UNDEF,playerVersion=[0,0,0],d=null;if(typeof nav.plugins!=UNDEF&&typeof nav.plugins[SHOCKWAVE_FLASH]==OBJECT){d=nav.plugins[SHOCKWAVE_FLASH].description;if(d&&!(typeof nav.mimeTypes!=UNDEF&&nav.mimeTypes[FLASH_MIME_TYPE]&&!nav.mimeTypes[FLASH_MIME_TYPE].enabledPlugin)){d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1");playerVersion[0]=parseInt(d.replace(/^(.*)\..*$/,"$1"),10);playerVersion[1]=parseInt(d.replace(/^.*\.(.*)\s.*$/,"$1"),10);playerVersion[2]=/r/.test(d)?parseInt(d.replace(/^.*r(.*)$/,"$1"),10):0}}else{if(typeof win.ActiveXObject!=UNDEF){var a=null,fp6Crash=false;try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX+".7")}catch(e){try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX+".6");playerVersion=[6,0,21];a.AllowScriptAccess="always"}catch(e){if(playerVersion[0]==6){fp6Crash=true}}if(!fp6Crash){try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX)}catch(e){}}}if(!fp6Crash&&a){try{d=a.GetVariable("$version");if(d){d=d.split(" ")[1].split(",");playerVersion=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]}}catch(e){}}}}var u=nav.userAgent.toLowerCase(),p=nav.platform.toLowerCase(),webkit=/webkit/.test(u)?parseFloat(u.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ie=false,windows=p?/win/.test(p):/win/.test(u),mac=p?/mac/.test(p):/mac/.test(u);
/*@cc_on
			ie = true;
			@if (@_win32)
				windows = true;
			@elif (@_mac)
				mac = true;
			@end
		@*/
return{w3cdom:w3cdom,pv:playerVersion,webkit:webkit,ie:ie,win:windows,mac:mac}}();var onDomLoad=function(){if(!ua.w3cdom){return}addDomLoadEvent(main);if(ua.ie&&ua.win){try{doc.write("<script id=__ie_ondomload defer=true src=//:><\/script>");script=getElementById("__ie_ondomload");if(script){addListener(script,"onreadystatechange",checkReadyState)}}catch(e){}}if(ua.webkit&&typeof doc.readyState!=UNDEF){timer=setInterval(function(){if(/loaded|complete/.test(doc.readyState)){callDomLoadFunctions()}},10)}if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("DOMContentLoaded",callDomLoadFunctions,null)}addLoadEvent(callDomLoadFunctions)}();function checkReadyState(){if(script.readyState=="complete"){script.parentNode.removeChild(script);callDomLoadFunctions()}}function callDomLoadFunctions(){if(isDomLoaded){return}if(ua.ie&&ua.win){var s=createElement("span");try{var t=doc.getElementsByTagName("body")[0].appendChild(s);t.parentNode.removeChild(t)}catch(e){return}}isDomLoaded=true;if(timer){clearInterval(timer);timer=null}var dl=domLoadFnArr.length;for(var i=0;i<dl;i++){domLoadFnArr[i]()}}function addDomLoadEvent(fn){if(isDomLoaded){fn()}else{domLoadFnArr[domLoadFnArr.length]=fn}}function addLoadEvent(fn){if(typeof win.addEventListener!=UNDEF){win.addEventListener("load",fn,false)}else{if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("load",fn,false)}else{if(typeof win.attachEvent!=UNDEF){addListener(win,"onload",fn)}else{if(typeof win.onload=="function"){var fnOld=win.onload;win.onload=function(){fnOld();fn()}}else{win.onload=fn}}}}}function main(){var rl=regObjArr.length;for(var i=0;i<rl;i++){var id=regObjArr[i].id;if(ua.pv[0]>0){var obj=getElementById(id);if(obj){regObjArr[i].width=obj.getAttribute("width")?obj.getAttribute("width"):"0";regObjArr[i].height=obj.getAttribute("height")?obj.getAttribute("height"):"0";if(hasPlayerVersion(regObjArr[i].swfVersion)){if(ua.webkit&&ua.webkit<312){fixParams(obj)}setVisibility(id,true)}else{if(regObjArr[i].expressInstall&&!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)){showExpressInstall(regObjArr[i])}else{displayAltContent(obj)}}}}else{setVisibility(id,true)}}}function fixParams(obj){var nestedObj=obj.getElementsByTagName(OBJECT)[0];if(nestedObj){var e=createElement("embed"),a=nestedObj.attributes;if(a){var al=a.length;for(var i=0;i<al;i++){if(a[i].nodeName=="DATA"){e.setAttribute("src",a[i].nodeValue)}else{e.setAttribute(a[i].nodeName,a[i].nodeValue)}}}var c=nestedObj.childNodes;if(c){var cl=c.length;for(var j=0;j<cl;j++){if(c[j].nodeType==1&&c[j].nodeName=="PARAM"){e.setAttribute(c[j].getAttribute("name"),c[j].getAttribute("value"))}}}obj.parentNode.replaceChild(e,obj)}}function showExpressInstall(regObj){isExpressInstallActive=true;var obj=getElementById(regObj.id);if(obj){if(regObj.altContentId){var ac=getElementById(regObj.altContentId);if(ac){storedAltContent=ac;storedAltContentId=regObj.altContentId}}else{storedAltContent=abstractAltContent(obj)}if(!(/%$/.test(regObj.width))&&parseInt(regObj.width,10)<310){regObj.width="310"}if(!(/%$/.test(regObj.height))&&parseInt(regObj.height,10)<137){regObj.height="137"}doc.title=doc.title.slice(0,47)+" - Flash Player Installation";var pt=ua.ie&&ua.win?"ActiveX":"PlugIn",dt=doc.title,fv="MMredirectURL="+win.location+"&MMplayerType="+pt+"&MMdoctitle="+dt,replaceId=regObj.id;if(ua.ie&&ua.win&&obj.readyState!=4){var newObj=createElement("div");replaceId+="SWFObjectNew";newObj.setAttribute("id",replaceId);obj.parentNode.insertBefore(newObj,obj);obj.style.display="none";var fn=function(){obj.parentNode.removeChild(obj)};addListener(win,"onload",fn)}createSWF({data:regObj.expressInstall,id:EXPRESS_INSTALL_ID,width:regObj.width,height:regObj.height},{flashvars:fv},replaceId)}}function displayAltContent(obj){if(ua.ie&&ua.win&&obj.readyState!=4){var el=createElement("div");obj.parentNode.insertBefore(el,obj);el.parentNode.replaceChild(abstractAltContent(obj),el);obj.style.display="none";var fn=function(){obj.parentNode.removeChild(obj)};addListener(win,"onload",fn)}else{obj.parentNode.replaceChild(abstractAltContent(obj),obj)}}function abstractAltContent(obj){var ac=createElement("div");if(ua.win&&ua.ie){ac.innerHTML=obj.innerHTML}else{var nestedObj=obj.getElementsByTagName(OBJECT)[0];if(nestedObj){var c=nestedObj.childNodes;if(c){var cl=c.length;for(var i=0;i<cl;i++){if(!(c[i].nodeType==1&&c[i].nodeName=="PARAM")&&!(c[i].nodeType==8)){ac.appendChild(c[i].cloneNode(true))}}}}}return ac}function createSWF(attObj,parObj,id){var r,el=getElementById(id);if(el){if(typeof attObj.id==UNDEF){attObj.id=id}if(ua.ie&&ua.win){var att="";for(var i in attObj){if(attObj[i]!=Object.prototype[i]){if(i.toLowerCase()=="data"){parObj.movie=attObj[i]}else{if(i.toLowerCase()=="styleclass"){att+=' class="'+attObj[i]+'"'}else{if(i.toLowerCase()!="classid"){att+=" "+i+'="'+attObj[i]+'"'}}}}}var par="";for(var j in parObj){if(parObj[j]!=Object.prototype[j]){par+='<param name="'+j+'" value="'+parObj[j]+'" />'}}el.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+att+">"+par+"</object>";objIdArr[objIdArr.length]=attObj.id;r=getElementById(attObj.id)}else{if(ua.webkit&&ua.webkit<312){var e=createElement("embed");e.setAttribute("type",FLASH_MIME_TYPE);for(var k in attObj){if(attObj[k]!=Object.prototype[k]){if(k.toLowerCase()=="data"){e.setAttribute("src",attObj[k])}else{if(k.toLowerCase()=="styleclass"){e.setAttribute("class",attObj[k])}else{if(k.toLowerCase()!="classid"){e.setAttribute(k,attObj[k])}}}}}for(var l in parObj){if(parObj[l]!=Object.prototype[l]){if(l.toLowerCase()!="movie"){e.setAttribute(l,parObj[l])}}}el.parentNode.replaceChild(e,el);r=e}else{var o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);for(var m in attObj){if(attObj[m]!=Object.prototype[m]){if(m.toLowerCase()=="styleclass"){o.setAttribute("class",attObj[m])}else{if(m.toLowerCase()!="classid"){o.setAttribute(m,attObj[m])}}}}for(var n in parObj){if(parObj[n]!=Object.prototype[n]&&n.toLowerCase()!="movie"){createObjParam(o,n,parObj[n])}}el.parentNode.replaceChild(o,el);r=o}}}return r}function createObjParam(el,pName,pValue){var p=createElement("param");p.setAttribute("name",pName);p.setAttribute("value",pValue);el.appendChild(p)}function removeSWF(id){var obj=getElementById(id);if(obj&&(obj.nodeName=="OBJECT"||obj.nodeName=="EMBED")){if(ua.ie&&ua.win){if(obj.readyState==4){removeObjectInIE(id)}else{win.attachEvent("onload",function(){removeObjectInIE(id)})}}else{obj.parentNode.removeChild(obj)}}}function removeObjectInIE(id){var obj=getElementById(id);if(obj){for(var i in obj){if(typeof obj[i]=="function"){obj[i]=null}}obj.parentNode.removeChild(obj)}}function getElementById(id){var el=null;try{el=doc.getElementById(id)}catch(e){}return el}function createElement(el){return doc.createElement(el)}function addListener(target,eventType,fn){target.attachEvent(eventType,fn);listenersArr[listenersArr.length]=[target,eventType,fn]}function hasPlayerVersion(rv){var pv=ua.pv,v=rv.split(".");v[0]=parseInt(v[0],10);v[1]=parseInt(v[1],10)||0;v[2]=parseInt(v[2],10)||0;return(pv[0]>v[0]||(pv[0]==v[0]&&pv[1]>v[1])||(pv[0]==v[0]&&pv[1]==v[1]&&pv[2]>=v[2]))?true:false}function createCSS(sel,decl){if(ua.ie&&ua.mac){return}var h=doc.getElementsByTagName("head")[0],s=createElement("style");s.setAttribute("type","text/css");s.setAttribute("media","screen");if(!(ua.ie&&ua.win)&&typeof doc.createTextNode!=UNDEF){s.appendChild(doc.createTextNode(sel+" {"+decl+"}"))}h.appendChild(s);if(ua.ie&&ua.win&&typeof doc.styleSheets!=UNDEF&&doc.styleSheets.length>0){var ls=doc.styleSheets[doc.styleSheets.length-1];if(typeof ls.addRule==OBJECT){ls.addRule(sel,decl)}}}function setVisibility(id,isVisible){var v=isVisible?"visible":"hidden";if(isDomLoaded&&getElementById(id)){getElementById(id).style.visibility=v}else{createCSS("#"+id,"visibility:"+v)}}function urlEncodeIfNecessary(s){var regex=/[\\\"<>\.;]/;var hasBadChars=regex.exec(s)!=null;return hasBadChars?encodeURIComponent(s):s}var cleanup=function(){if(ua.ie&&ua.win){window.attachEvent("onunload",function(){var ll=listenersArr.length;for(var i=0;i<ll;i++){listenersArr[i][0].detachEvent(listenersArr[i][1],listenersArr[i][2])}var il=objIdArr.length;for(var j=0;j<il;j++){removeSWF(objIdArr[j])}for(var k in ua){ua[k]=null}ua=null;for(var l in swfobject){swfobject[l]=null}swfobject=null})}}();return{registerObject:function(objectIdStr,swfVersionStr,xiSwfUrlStr){if(!ua.w3cdom||!objectIdStr||!swfVersionStr){return}var regObj={};regObj.id=objectIdStr;regObj.swfVersion=swfVersionStr;regObj.expressInstall=xiSwfUrlStr?xiSwfUrlStr:false;regObjArr[regObjArr.length]=regObj;setVisibility(objectIdStr,false)},getObjectById:function(objectIdStr){var r=null;if(ua.w3cdom){var o=getElementById(objectIdStr);if(o){var n=o.getElementsByTagName(OBJECT)[0];if(!n||(n&&typeof o.SetVariable!=UNDEF)){r=o}else{if(typeof n.SetVariable!=UNDEF){r=n}}}}return r},embedSWF:function(swfUrlStr,replaceElemIdStr,widthStr,heightStr,swfVersionStr,xiSwfUrlStr,flashvarsObj,parObj,attObj){if(!ua.w3cdom||!swfUrlStr||!replaceElemIdStr||!widthStr||!heightStr||!swfVersionStr){return}widthStr+="";heightStr+="";if(hasPlayerVersion(swfVersionStr)){setVisibility(replaceElemIdStr,false);var att={};if(attObj&&typeof attObj===OBJECT){for(var i in attObj){if(attObj[i]!=Object.prototype[i]){att[i]=attObj[i]}}}att.data=swfUrlStr;att.width=widthStr;att.height=heightStr;var par={};if(parObj&&typeof parObj===OBJECT){for(var j in parObj){if(parObj[j]!=Object.prototype[j]){par[j]=parObj[j]}}}if(flashvarsObj&&typeof flashvarsObj===OBJECT){for(var k in flashvarsObj){if(flashvarsObj[k]!=Object.prototype[k]){if(typeof par.flashvars!=UNDEF){par.flashvars+="&"+k+"="+flashvarsObj[k]}else{par.flashvars=k+"="+flashvarsObj[k]}}}}addDomLoadEvent(function(){createSWF(att,par,replaceElemIdStr);if(att.id==replaceElemIdStr){setVisibility(replaceElemIdStr,true)}})}else{if(xiSwfUrlStr&&!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)){isExpressInstallActive=true;setVisibility(replaceElemIdStr,false);addDomLoadEvent(function(){var regObj={};regObj.id=regObj.altContentId=replaceElemIdStr;regObj.width=widthStr;regObj.height=heightStr;regObj.expressInstall=xiSwfUrlStr;showExpressInstall(regObj)})}}},getFlashPlayerVersion:function(){return{major:ua.pv[0],minor:ua.pv[1],release:ua.pv[2]}},hasFlashPlayerVersion:hasPlayerVersion,createSWF:function(attObj,parObj,replaceElemIdStr){if(ua.w3cdom){return createSWF(attObj,parObj,replaceElemIdStr)}else{return undefined}},removeSWF:function(objElemIdStr){if(ua.w3cdom){removeSWF(objElemIdStr)}},createCSS:function(sel,decl){if(ua.w3cdom){createCSS(sel,decl)}},addDomLoadEvent:addDomLoadEvent,addLoadEvent:addLoadEvent,getQueryParamValue:function(param){var q=doc.location.search||doc.location.hash;if(param==null){return urlEncodeIfNecessary(q)}if(q){var pairs=q.substring(1).split("&");for(var i=0;i<pairs.length;i++){if(pairs[i].substring(0,pairs[i].indexOf("="))==param){return urlEncodeIfNecessary(pairs[i].substring((pairs[i].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(isExpressInstallActive&&storedAltContent){var obj=getElementById(EXPRESS_INSTALL_ID);if(obj){obj.parentNode.replaceChild(storedAltContent,obj);if(storedAltContentId){setVisibility(storedAltContentId,true);if(ua.ie&&ua.win){storedAltContent.style.display="block"}}storedAltContent=null;storedAltContentId=null;isExpressInstallActive=false}}}}}();return swfobject})();S.lang={code:"en",of:"of",loading:"loading",cancel:"Cancel",next:"Next",previous:"Previous",play:"Play",pause:"Pause",close:"Close",errors:{single:'You must install the <a href="{0}">{1}</a> browser plugin to view this content.',shared:'You must install both the <a href="{0}">{1}</a> and <a href="{2}">{3}</a> browser plugins to view this content.',either:'You must install either the <a href="{0}">{1}</a> or the <a href="{2}">{3}</a> browser plugin to view this content.'}};var pre,proxyId="sb-drag-proxy",dragData,dragProxy,dragTarget;function resetDrag(){dragData={x:0,y:0,startX:null,startY:null}}function updateProxy(){var dims=S.dimensions;apply(dragProxy.style,{height:dims.innerHeight+"px",width:dims.innerWidth+"px"})}function enableDrag(){resetDrag();var style=["position:absolute","cursor:"+(S.isGecko?"-moz-grab":"move"),"background-color:"+(S.isIE?"#fff;filter:alpha(opacity=0)":"transparent")].join(";");S.appendHTML(S.skin.body,'<div id="'+proxyId+'" style="'+style+'"></div>');dragProxy=get(proxyId);updateProxy();addEvent(dragProxy,"mousedown",startDrag)}function disableDrag(){if(dragProxy){removeEvent(dragProxy,"mousedown",startDrag);remove(dragProxy);dragProxy=null}dragTarget=null}function startDrag(e){preventDefault(e);var xy=getPageXY(e);dragData.startX=xy[0];dragData.startY=xy[1];dragTarget=get(S.player.id);addEvent(document,"mousemove",positionDrag);addEvent(document,"mouseup",endDrag);if(S.isGecko){dragProxy.style.cursor="-moz-grabbing"}}function positionDrag(e){var player=S.player,dims=S.dimensions,xy=getPageXY(e);var moveX=xy[0]-dragData.startX;dragData.startX+=moveX;dragData.x=Math.max(Math.min(0,dragData.x+moveX),dims.innerWidth-player.width);var moveY=xy[1]-dragData.startY;dragData.startY+=moveY;dragData.y=Math.max(Math.min(0,dragData.y+moveY),dims.innerHeight-player.height);apply(dragTarget.style,{left:dragData.x+"px",top:dragData.y+"px"})}function endDrag(){removeEvent(document,"mousemove",positionDrag);removeEvent(document,"mouseup",endDrag);if(S.isGecko){dragProxy.style.cursor="-moz-grab"}}S.img=function(obj,id){this.obj=obj;this.id=id;this.ready=false;var self=this;pre=new Image();pre.onload=function(){self.height=obj.height?parseInt(obj.height,10):pre.height;self.width=obj.width?parseInt(obj.width,10):pre.width;self.ready=true;pre.onload=null;pre=null};pre.src=obj.content};S.img.ext=["bmp","gif","jpg","jpeg","png"];S.img.prototype={append:function(body,dims){var img=document.createElement("img");img.id=this.id;img.src=this.obj.content;img.style.position="absolute";var height,width;if(dims.oversized&&S.options.handleOversize=="resize"){height=dims.innerHeight;width=dims.innerWidth}else{height=this.height;width=this.width}img.setAttribute("height",height);img.setAttribute("width",width);body.appendChild(img)},remove:function(){var el=get(this.id);if(el){remove(el)}disableDrag();if(pre){pre.onload=null;pre=null}},onLoad:function(){var dims=S.dimensions;if(dims.oversized&&S.options.handleOversize=="drag"){enableDrag()}},onWindowResize:function(){var dims=S.dimensions;switch(S.options.handleOversize){case"resize":var el=get(this.id);el.height=dims.innerHeight;el.width=dims.innerWidth;break;case"drag":if(dragTarget){var top=parseInt(S.getStyle(dragTarget,"top")),left=parseInt(S.getStyle(dragTarget,"left"));if(top+this.height<dims.innerHeight){dragTarget.style.top=dims.innerHeight-this.height+"px"}if(left+this.width<dims.innerWidth){dragTarget.style.left=dims.innerWidth-this.width+"px"}updateProxy()}break}}};S.iframe=function(obj,id){this.obj=obj;this.id=id;var overlay=get("sb-overlay");this.height=obj.height?parseInt(obj.height,10):overlay.offsetHeight;this.width=obj.width?parseInt(obj.width,10):overlay.offsetWidth};S.iframe.prototype={append:function(body,dims){var html='<iframe id="'+this.id+'" name="'+this.id+'" height="100%" width="100%" frameborder="0" marginwidth="0" marginheight="0" style="visibility:hidden" onload="this.style.visibility=\'visible\'" scrolling="auto"';if(S.isIE){html+=' allowtransparency="true"';if(S.isIE6){html+=" src=\"javascript:false;document.write('');\""}}html+="></iframe>";body.innerHTML=html},remove:function(){var el=get(this.id);if(el){remove(el);if(S.isGecko){delete window.frames[this.id]}}},onLoad:function(){var win=S.isIE?get(this.id).contentWindow:window.frames[this.id];win.location.href=this.obj.content}};S.html=function(obj,id){this.obj=obj;this.id=id;this.height=obj.height?parseInt(obj.height,10):300;this.width=obj.width?parseInt(obj.width,10):500};S.html.prototype={append:function(body,dims){var div=document.createElement("div");div.id=this.id;div.className="html";div.innerHTML=this.obj.content;body.appendChild(div)},remove:function(){var el=get(this.id);if(el){remove(el)}}};S.swf=function(obj,id){this.obj=obj;this.id=id;this.height=obj.height?parseInt(obj.height,10):300;this.width=obj.width?parseInt(obj.width,10):300};S.swf.ext=["swf"];S.swf.prototype={append:function(body,dims){var tmp=document.createElement("div");tmp.id=this.id;body.appendChild(tmp);var height=dims.innerHeight,width=dims.innerWidth,swf=this.obj.content,version=S.options.flashVersion,express=S.path+"expressInstall.swf",flashvars=S.options.flashVars,params=S.options.flashParams;S.flash.embedSWF(swf,this.id,width,height,version,express,flashvars,params)},remove:function(){S.flash.expressInstallCallback();S.flash.removeSWF(this.id)},onWindowResize:function(){var dims=S.dimensions,el=get(this.id);el.height=dims.innerHeight;el.width=dims.innerWidth}};var jwControllerHeight=20;S.flv=function(obj,id){this.obj=obj;this.id=id;this.height=obj.height?parseInt(obj.height,10):300;if(S.options.showMovieControls){this.height+=jwControllerHeight}this.width=obj.width?parseInt(obj.width,10):300};S.flv.ext=["flv","m4v"];S.flv.prototype={append:function(body,dims){var tmp=document.createElement("div");tmp.id=this.id;body.appendChild(tmp);var height=dims.innerHeight,width=dims.innerWidth,swf=S.path+"player.swf",version=S.options.flashVersion,express=S.path+"expressInstall.swf",flashvars=apply({file:this.obj.content,height:height,width:width,autostart:(S.options.autoplayMovies?"true":"false"),controlbar:(S.options.showMovieControls?"bottom":"none"),backcolor:"0x000000",frontcolor:"0xCCCCCC",lightcolor:"0x557722"},S.options.flashVars),params=S.options.flashParams;S.flash.embedSWF(swf,this.id,width,height,version,express,flashvars,params)},remove:function(){S.flash.expressInstallCallback();S.flash.removeSWF(this.id)},onWindowResize:function(){var dims=S.dimensions,el=get(this.id);el.height=dims.innerHeight;el.width=dims.innerWidth}};var qtControllerHeight=16;S.qt=function(obj,id){this.obj=obj;this.id=id;this.height=obj.height?parseInt(obj.height,10):300;if(S.options.showMovieControls){this.height+=qtControllerHeight}this.width=obj.width?parseInt(obj.width,10):300};S.qt.ext=["dv","mov","moov","movie","mp4","avi","mpg","mpeg"];S.qt.prototype={append:function(body,dims){var opt=S.options,autoplay=String(opt.autoplayMovies),controls=String(opt.showMovieControls);var html="<object",movie={id:this.id,name:this.id,height:this.height,width:this.width,kioskmode:"true"};if(S.isIE){movie.classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B";movie.codebase="http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0"}else{movie.type="video/quicktime";movie.data=this.obj.content}for(var m in movie){html+=" "+m+'="'+movie[m]+'"'}html+=">";var params={src:this.obj.content,scale:"aspect",controller:controls,autoplay:autoplay};for(var p in params){html+='<param name="'+p+'" value="'+params[p]+'">'}html+="</object>";body.innerHTML=html},remove:function(){try{document[this.id].Stop()}catch(e){}var el=get(this.id);if(el){remove(el)}}};var overlayOn=false,visibilityCache=[],pngIds=["sb-nav-close","sb-nav-next","sb-nav-play","sb-nav-pause","sb-nav-previous"],container,overlay,wrapper,doWindowResize=true;function animate(el,property,to,duration,callback){var isOpacity=(property=="opacity"),anim=isOpacity?S.setOpacity:function(el,value){el.style[property]=""+value+"px"};if(duration==0||(!isOpacity&&!S.options.animate)||(isOpacity&&!S.options.animateFade)){anim(el,to);if(callback){callback()}return}var from=parseFloat(S.getStyle(el,property))||0;var delta=to-from;if(delta==0){if(callback){callback()}return}duration*=1000;var begin=now(),ease=S.ease,end=begin+duration,time;var interval=setInterval(function(){time=now();if(time>=end){clearInterval(interval);interval=null;anim(el,to);if(callback){callback()}}else{anim(el,from+ease((time-begin)/duration)*delta)}},10)}function setSize(){container.style.height=S.getWindowSize("Height")+"px";container.style.width=S.getWindowSize("Width")+"px"}function setPosition(){container.style.top=document.documentElement.scrollTop+"px";container.style.left=document.documentElement.scrollLeft+"px"}function toggleTroubleElements(on){if(on){each(visibilityCache,function(i,el){el[0].style.visibility=el[1]||""})}else{visibilityCache=[];each(S.options.troubleElements,function(i,tag){each(document.getElementsByTagName(tag),function(j,el){visibilityCache.push([el,el.style.visibility]);el.style.visibility="hidden"})})}}function toggleNav(id,on){var el=get("sb-nav-"+id);if(el){el.style.display=on?"":"none"}}function toggleLoading(on,callback){var loading=get("sb-loading"),playerName=S.getCurrent().player,anim=(playerName=="img"||playerName=="html");if(on){S.setOpacity(loading,0);loading.style.display="block";var wrapped=function(){S.clearOpacity(loading);if(callback){callback()}};if(anim){animate(loading,"opacity",1,S.options.fadeDuration,wrapped)}else{wrapped()}}else{var wrapped=function(){loading.style.display="none";S.clearOpacity(loading);if(callback){callback()}};if(anim){animate(loading,"opacity",0,S.options.fadeDuration,wrapped)}else{wrapped()}}}function buildBars(callback){var obj=S.getCurrent();get("sb-title-inner").innerHTML=obj.title||"";var close,next,play,pause,previous;if(S.options.displayNav){close=true;var len=S.gallery.length;if(len>1){if(S.options.continuous){next=previous=true}else{next=(len-1)>S.current;previous=S.current>0}}if(S.options.slideshowDelay>0&&S.hasNext()){pause=!S.isPaused();play=!pause}}else{close=next=play=pause=previous=false}toggleNav("close",close);toggleNav("next",next);toggleNav("play",play);toggleNav("pause",pause);toggleNav("previous",previous);var counter="";if(S.options.displayCounter&&S.gallery.length>1){var len=S.gallery.length;if(S.options.counterType=="skip"){var i=0,end=len,limit=parseInt(S.options.counterLimit)||0;if(limit<len&&limit>2){var h=Math.floor(limit/2);i=S.current-h;if(i<0){i+=len}end=S.current+(limit-h);if(end>len){end-=len}}while(i!=end){if(i==len){i=0}counter+='<a onclick="Shadowbox.change('+i+');"';if(i==S.current){counter+=' class="sb-counter-current"'}counter+=">"+(++i)+"</a>"}}else{counter=[S.current+1,S.lang.of,len].join(" ")}}get("sb-counter").innerHTML=counter;callback()}function showBars(callback){var titleInner=get("sb-title-inner"),infoInner=get("sb-info-inner"),duration=0.35;titleInner.style.visibility=infoInner.style.visibility="";if(titleInner.innerHTML!=""){animate(titleInner,"marginTop",0,duration)}animate(infoInner,"marginTop",0,duration,callback)}function hideBars(anim,callback){var title=get("sb-title"),info=get("sb-info"),titleHeight=title.offsetHeight,infoHeight=info.offsetHeight,titleInner=get("sb-title-inner"),infoInner=get("sb-info-inner"),duration=(anim?0.35:0);animate(titleInner,"marginTop",titleHeight,duration);animate(infoInner,"marginTop",infoHeight*-1,duration,function(){titleInner.style.visibility=infoInner.style.visibility="hidden";callback()})}function adjustHeight(height,top,anim,callback){var wrapperInner=get("sb-wrapper-inner"),duration=(anim?S.options.resizeDuration:0);animate(wrapper,"top",top,duration);animate(wrapperInner,"height",height,duration,callback)}function adjustWidth(width,left,anim,callback){var duration=(anim?S.options.resizeDuration:0);animate(wrapper,"left",left,duration);animate(wrapper,"width",width,duration,callback)}function setDimensions(height,width){var bodyInner=get("sb-body-inner"),height=parseInt(height),width=parseInt(width),topBottom=wrapper.offsetHeight-bodyInner.offsetHeight,leftRight=wrapper.offsetWidth-bodyInner.offsetWidth,maxHeight=overlay.offsetHeight,maxWidth=overlay.offsetWidth,padding=parseInt(S.options.viewportPadding)||20,preserveAspect=(S.player&&S.options.handleOversize!="drag");return S.setDimensions(height,width,maxHeight,maxWidth,topBottom,leftRight,padding,preserveAspect)}var K={};K.markup='<div id="sb-container"><div id="sb-overlay"></div><div id="sb-wrapper"><div id="sb-title"><div id="sb-title-inner"></div></div><div id="sb-wrapper-inner"><div id="sb-body"><div id="sb-body-inner"></div><div id="sb-loading"><div id="sb-loading-inner"><span>{loading}</span></div></div></div></div><div id="sb-info"><div id="sb-info-inner"><div id="sb-counter"></div><div id="sb-nav"><a id="sb-nav-close" title="{close}" onclick="Shadowbox.close()"></a><a id="sb-nav-next" title="{next}" onclick="Shadowbox.next()"></a><a id="sb-nav-play" title="{play}" onclick="Shadowbox.play()"></a><a id="sb-nav-pause" title="{pause}" onclick="Shadowbox.pause()"></a><a id="sb-nav-previous" title="{previous}" onclick="Shadowbox.previous()"></a></div></div></div></div></div>';K.options={animSequence:"sync",counterLimit:10,counterType:"default",displayCounter:true,displayNav:true,fadeDuration:0.35,initialHeight:160,initialWidth:320,modal:false,overlayColor:"#000",overlayOpacity:0.5,resizeDuration:0.35,showOverlay:true,troubleElements:["select","object","embed","canvas"]};K.init=function(){S.appendHTML(document.body,sprintf(K.markup,S.lang));K.body=get("sb-body-inner");container=get("sb-container");overlay=get("sb-overlay");wrapper=get("sb-wrapper");if(!supportsFixed){container.style.position="absolute"}if(!supportsOpacity){var el,m,re=/url\("(.*\.png)"\)/;each(pngIds,function(i,id){el=get(id);if(el){m=S.getStyle(el,"backgroundImage").match(re);if(m){el.style.backgroundImage="none";el.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true,src="+m[1]+",sizingMethod=scale);"}}})}var timer;addEvent(window,"resize",function(){if(timer){clearTimeout(timer);timer=null}if(open){timer=setTimeout(K.onWindowResize,10)}})};K.onOpen=function(obj,callback){doWindowResize=false;container.style.display="block";setSize();var dims=setDimensions(S.options.initialHeight,S.options.initialWidth);adjustHeight(dims.innerHeight,dims.top);adjustWidth(dims.width,dims.left);if(S.options.showOverlay){overlay.style.backgroundColor=S.options.overlayColor;S.setOpacity(overlay,0);if(!S.options.modal){addEvent(overlay,"click",S.close)}overlayOn=true}if(!supportsFixed){setPosition();addEvent(window,"scroll",setPosition)}toggleTroubleElements();container.style.visibility="visible";if(overlayOn){animate(overlay,"opacity",S.options.overlayOpacity,S.options.fadeDuration,callback)}else{callback()}};K.onLoad=function(changing,callback){toggleLoading(true);while(K.body.firstChild){remove(K.body.firstChild)}hideBars(changing,function(){if(!open){return}if(!changing){wrapper.style.visibility="visible"}buildBars(callback)})};K.onReady=function(callback){if(!open){return}var player=S.player,dims=setDimensions(player.height,player.width);var wrapped=function(){showBars(callback)};switch(S.options.animSequence){case"hw":adjustHeight(dims.innerHeight,dims.top,true,function(){adjustWidth(dims.width,dims.left,true,wrapped)});break;case"wh":adjustWidth(dims.width,dims.left,true,function(){adjustHeight(dims.innerHeight,dims.top,true,wrapped)});break;default:adjustWidth(dims.width,dims.left,true);adjustHeight(dims.innerHeight,dims.top,true,wrapped)}};K.onShow=function(callback){toggleLoading(false,callback);doWindowResize=true};K.onClose=function(){if(!supportsFixed){removeEvent(window,"scroll",setPosition)}removeEvent(overlay,"click",S.close);wrapper.style.visibility="hidden";var callback=function(){container.style.visibility="hidden";container.style.display="none";toggleTroubleElements(true)};if(overlayOn){animate(overlay,"opacity",0,S.options.fadeDuration,callback)}else{callback()}};K.onPlay=function(){toggleNav("play",false);toggleNav("pause",true)};K.onPause=function(){toggleNav("pause",false);toggleNav("play",true)};K.onWindowResize=function(){if(!doWindowResize){return}setSize();var player=S.player,dims=setDimensions(player.height,player.width);adjustWidth(dims.width,dims.left);adjustHeight(dims.innerHeight,dims.top);if(player.onWindowResize){player.onWindowResize()}};S.skin=K;window.Shadowbox=S})(window);;
Tesla = window.Tesla || {};

try {
    console.log('');
} catch (e) {
    window.console = {};
    var names = [ 'log', 'debug', 'info', 'warn', 'error', 'assert', 'clear', 'dir', 'dirxml', 'trace', 'group', 'groupCollapsed', 'groupEnd', 'time', 'timeEnd', 'timeStamp', 'profile', 'profileEnd', 'count', 'exception', 'table' ];
    for (var i = 0; i < names.length; ++i) {
        window.console[names[i]] = function() {};
    }
}

function log( str ) {
    console.log( str );
}

var urlParams = {};

var webFormModal = null;

(function () {
    var e,
        a = /\+/g,  // Regex for replacing addition symbol with a space
        r = /([^&=]+)=?([^&]*)/g,
        d = function (s) { return decodeURIComponent(s.replace(a, " ")); },
        q = window.location.search.substring(1);

    while (e = r.exec(q))
       urlParams[d(e[1])] = d(e[2]);
})();

/* Touchscreen modifications */
(function () {

    var isVehicleBrowser = (navigator.userAgent.toLowerCase().indexOf('qtcarbrowser') !== -1);

    if (isVehicleBrowser) {
        document.write("<link rel=\"stylesheet\" href=\"\/sites\/all\/themes\/tesla\/styles\/touchscreen.css?20130923\" \/>");
    }

}());

/*
 *  Checks to see if it's a Smartling country. If so, Smartling takes care
 *  of the translation.
 */
Tesla.Smartling = Tesla.Smartling || {};
Tesla.Smartling.Countries = [ "da_DK", "fr_BE", "nl_BE", "sv_SE", "zh_CN", "cn" ];

Tesla.Smartling.getVariable = ( function( smartling, other ) {
    return ( ( Tesla.Smartling.Countries.indexOf( Drupal.settings.tesla.locale ) != -1 ) ? smartling : other );
} );

function include(filename) {
    var head = document.getElementsByTagName('head')[0];
    script = document.createElement('script');
    script.src = filename;
    script.type = 'text/javascript';
    head.appendChild(script);
}


// This function creates a new anchor element and uses location
// properties (inherent) to get the desired URL data. Some String
// operations are used (to normalize results across browsers).
function parseURL(url) {
    var a =  document.createElement('a');
    a.href = url;
    return {
        source: url,
        protocol: a.protocol.replace(':',''),
        host: a.hostname,
        port: a.port,
        query: a.search,
        params: (function(){
            var ret = {},
                seg = a.search.replace(/^\?/,'').split('&'),
                len = seg.length, i = 0, s;
            for (;i<len;i++) {
                if (!seg[i]) { continue; }
                s = seg[i].split('=');
                ret[s[0]] = s[1];
            }
            return ret;
        })(),
        file: (a.pathname.match(/\/([^\/?#]+)$/i) || [,''])[1],
        hash: a.hash.replace('#',''),
        path: a.pathname.replace(/^([^\/])/,'/$1'),
        relative: (a.href.match(/tp:\/\/[^\/]+(.+)/) || [,''])[1],
        segments: a.pathname.replace(/^\//,'').split('/')
    };
}


/*
 * Cookie functions
 */
function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function eraseCookie(name) {
    createCookie(name,"",-1);
}


/*
 * Generic window opening function
 */
function openWin(url, name, opts) {
    document.domain = 'teslamotors.com';
    if (!opts) {
        opts = "";
    }
    return window.open(url, name, opts);
}


    /* Featured owner photostrip hovers */
    if ($('div.view-featured-owners-nq').length) {
        $('div.view-featured-owners-nq div.views-field-field-photo-fid img').mouseenter(
            function() {
                $('#clone', $(this).parents()).remove(); //gc
                var owner = $(this).parents('div.views-row');
                var pos = getOrdinalPosition(owner);
                var x_offset = pos * 75;
                // clone the div as a popup
                var clone = owner.clone();
                clone.addClass('hovered');
                clone.attr('id','clone');
                clone.css('left', x_offset);
                clone.mouseout(function() {
                    $(this).remove();
                });
                clone.appendTo('#featured-owners .view-content');
            });
    }




/*
 * Initialize store page photo galleries
 */
function initGalleries() {
    if (window.Galleria && Drupal.settings.tesla.flickr_api_key) {
        Galleria.loadTheme('/sites/all/themes/tesla/js/galleria/src/themes/classic/galleria.classic.js');
        var flickr = new Galleria.Flickr(Drupal.settings.tesla.flickr_api_key); // initialize the plugin

        $('#gallery-index li a').click(function() {
            $('#gallery-index li').removeClass('selected');
            $(this).parent().addClass('selected');
            var href = $(this).attr('href').split('=');
            var set_id = href[1];
            flickr.getSet(set_id, {size:'medium'}, function(data) {
                $('#galleria').galleria({
                    data_source: data
                });
            });
            return false;
        });

        // trigger click on first gallery item
        $('#gallery-index li.first a').trigger('click');
    }
}

// delay-remove fade status messages (from e.g. region picker)
function fadeAlerts () {
    $('.messages.fade').fadeOut(400);

}

// given an element, figure out which oridinal position it has
// among its siblings
function getOrdinalPosition(el) {
    var position = -1;
    // we have to do this because el.siblings() does not return the element itself
    var siblings = el.parent().children();
    $.each(siblings, function(key, value) {
    if (value == el[0]) {
        position = key;
        return false;
    }
    });
    return position;
}




/*
 * Initialize analytics custom events
 */
function initAnalyticsEvents() {
    // Event tracking for the Home page and Model S
    // Order, Test Drive, and Call Me buttons
    if ($('#page-homepage').length) {
        $('#page-homepage #models-landing-buttons a.red').click(function(){
            debug.log('Track Event for Homepage order button');
            _gaq.push(['_trackEvent', 'OrderButton', 'Click - Home Page']);
        });
        $('#page-homepage #models-landing-buttons a.grey:first').click(function(){
            debug.log('Track Event for Homepage test drive button');
            _gaq.push(['_trackEvent', 'TestDriveButton', 'Click - Home Page']);
        });
        $('#page-homepage #models-landing-buttons a.grey.models-requestcallback-button').click(function(){
            debug.log('Track Event for Homepage Call Me button');
            _gaq.push(['_trackEvent', 'CallMeButton', 'Click - Home Page']);
        });
    }

    if ($('#page-models').length) {
        $('#page-models #models-landing-buttons a.red').click(function(){
            debug.log('Track Event for Model S Page order button');
            _gaq.push(['_trackEvent', 'OrderButton', 'Click - Model S Page']);
        });
        $('#page-models #models-landing-buttons a.grey:first').click(function(){
            debug.log('Track Event for Model S Page test drive button');
            _gaq.push(['_trackEvent', 'TestDriveButton', 'Click - Model S Page']);
        });
        $('#page-models #models-landing-buttons a.grey.models-requestcallback-button').click(function(){
            debug.log('Track Event for Model S Page Call Me button');
            _gaq.push(['_trackEvent', 'CallMeButton', 'Click - Model S Page']);
        });
    }
    // End event tracking for the Home page and Model S


    $('.page-own a#request-callback').click(function() {
        debug.log("Track pageview for /own/callback_form");
       _gaq.push(['_trackPageview', '/own/callback_form']);
    });

    $('body#page-goelectric-incentives a#request-callback').click(function() {
        debug.log("Track pageview for /incentives/callback_form");
       _gaq.push(['_trackPageview', '/incentives/callback_form']);
    });

    $('#store-body a.schedule-button').click(function() {
        debug.log("Track pageview for /store/appointment_form");
       _gaq.push(['_trackPageview', '/store/appointment_form']);
    });

    $('#store-body a.callback-button').click(function() {
        debug.log("Track pageview for /store/callback_form");
       _gaq.push(['_trackPageview', '/store/callback_form']);
    });

    $('body#page-goelectric #hero-action .replace-text').click(function() {
        debug.log("Track pageview for /video/goelectric_v1");
       _gaq.push(['_trackPageview', '/video/goelectric_v1']);
    });

    if ($('body#page-roadster').length) {
        // Buy button in Roadster page slider
        $('#page-roadster #buy .button a').click(function() {
            debug.log("Track pageview for /roadster/buy_click");
           _gaq.push(['_trackPageview', '/roadster/buy_click']);
        });

        // Appt button in Roadster page slider
        $('#page-roadster #drive .button a').click(function() {
            debug.log("Track pageview for /roadster/appt_click");
           _gaq.push(['_trackPageview', '/roadster/appt_click']);
        });

        // Roadster experience video
        $('#page-roadster #experience .overlay a').click(function() {
            debug.log("Track pageview for /video/roadster/experience_v1");
           _gaq.push(['_trackPageview', '/video/roadster/experience_v1']);
        });

        // Roadster interior video
        $('#page-roadster #vision .overlay a').click(function() {
            debug.log("Track pageview for /video/roadster/interior_v1");
           _gaq.push(['_trackPageview', '/video/roadster/interior_v1']);
        });

    }

    if ($('body#page-models').length) {
        // Reserve button in Model S page slider
        $('#page-models #reserve .button a').click(function() {
            debug.log("Track pageview for /models/reserve_click");
           _gaq.push(['_trackPageview', '/models/reserve_click']);
        });

        // Discuss button in Model S page slider
        $('#page-models #discuss .button a').click(function() {
            debug.log("Track pageview for /models/discuss_click");
           _gaq.push(['_trackPageview', '/models/discuss_click']);
        });

        // Model S video
        $('#page-models #experience .overlay a').click(function() {
            debug.log("Track pageview for /video/models/thefuture_v1");
           _gaq.push(['_trackPageview', '/video/models/thefuture_v1']);
        });
    }

    // Buy Flow
    // Report model code
    if ($('body#page-own').length) {
        var modelcode = $('input:radio[name=modelcode]:checked').val();
        debug.log("Track pageview for /own/" + modelcode);
        _gaq.push(['_trackPageview', '/own/' + modelcode]);
    }

}

/*
 * attach analytics events for webform submits
 */
function attachWebformAnalytics(form_id) {
    switch (form_id) {
        case 'webform-client-form-119':
            // own/store/incentives call me back
            // Same form id is used on both store, own and incentives callback forms
            // need to figure out which one it is
            if ($('body').hasClass('node-type-teslastore')) {
                debug.log('Track pageview for store/callback_submit');
                _gaq.push(['_trackPageview', '/store/callback_submit']);
            } else if ($('body').attr('id')=='page-goelectric-incentives') {
                debug.log('Track pageview for incentives/callback_submit');
                _gaq.push(['_trackPageview', '/incentives/callback_submit']);
            } else {
                debug.log('Track pageview for own/callback_submit');
                _gaq.push(['_trackPageview', '/own/callback_submit']);
            }
            break;
        case 'webform-client-form-3836':
            // test drive
            debug.log('Track pageview for testdrive_submit');
            _gaq.push(['_trackPageview', 'testdrive_submit']);
            break;
        case 'webform-client-form-120':
            // store appt form
            debug.log('Track pageview for /store/appointment_submit');
            _gaq.push(['_trackPageview', '/store/appointment_submit']);
            break;
        case 'webform-client-form-121':
            // store appt form
            debug.log('Track pageview for /event_submit');
            _gaq.push(['_trackPageview', '/event_submit']);
            break;
        case 'webform-client-form-3974':
            // Newsletter signup
            debug.log('Track pageview for /newsletter_submit');
            _gaq.push(['_trackPageview', '/newsletter_submit']);
            break;
        case 'webform-client-form-122':
            // Newsletter signup (US)
            debug.log('Track pageview for /newsletter_us_submit');
            _gaq.push(['_trackPageview', '/newsletter_us_submit']);
            break;
    }
}

/*
 * Make an anchor open in a new window
 */
function openLinkNewWindow(link) {
    if (link.length) {
        link.click(function() {
            openWin(link.attr('href'));
            return false;
        });
    }
}

/*
 * Perform any locale-specific tasks
 */
function attachLocaleHandlers() {
    // look for country/language code in body class. It will look something like 'i18n-ja_JP'
    var body_classes = $('body').attr('class').split(' ');
    var code = '';
    for (var i=0, l=body_classes.length; i<l; i++) {
        if (body_classes[i].indexOf('i18n') > -1) {
            code = body_classes[i].substr(5);
        }
    }
    switch(code) {
        case 'ja_JP':
            // for Japan, open IR and careers links in a new window
        openLinkNewWindow($('.menu-17808 a'));
        openLinkNewWindow($('.menu-17807 a'));
        openLinkNewWindow($('ul.quicklinks li:first-child a'));
        // Change labels of form fields on own page to EN
            if ($('#tesla-buy-basic-form').length) {
            $('#edit-Email-wrapper label').html('EMAIL:');
            $('#edit-Country-wrapper label').html('COUNTRY:')
        }
            break;
    }

    localize_events_rsvp();
}

/*
 * Localize "Join our email newsletter list".
 */
function localize_events_rsvp() {

  // Get localized label contents and strip colons.
  var LocalLabel = $('form#webform-client-form-121 #webform-component-subscriptions__c label:first').html();
  if (LocalLabel != null) {
      LocalLabelNoColon = LocalLabel.replace(":", "");

      // Get non-localized label contents and insert localized text.
      var NonLocalLabel = $('form#webform-client-form-121 #edit-submitted-subscriptions--c-Tesla-Newsletter-wrapper label').html();
      NewLocalLabel = NonLocalLabel.replace("Join our email newsletter list", LocalLabelNoColon);
      $('form#webform-client-form-121 #edit-submitted-subscriptions--c-Tesla-Newsletter-wrapper label').html(NewLocalLabel);
  }
}

/*
 * Initialize home page heros and newsletter signup
 */
function initHome() {
    if ($('body').attr('id') == 'page-homepage') {
        // hero centered, absolutely
        //reposHero();
        //var resizeTimer = null;
        //$(window).resize(function() {
        //    reposHero();
        //});

        var homepageSlideshowOptions = {
            timeout: 6500,
            fx: "fade",
            speed: 700,
            delay: 7000,
            vss_id: "homepage_slideshow-default",
            sort: 1,
            start_paused: 0,
            sync: 1,
            random: 0,
            pause: 0,
            nowrap: 0,
            cleartype: true,
            cleartypenobg: false,
            pager: "#hero-thumbs",
            activePagerClass: "activeSlide",
            pagerAnchorBuilder: function(idx, slide) {
                var thumb = $('.slideshow-controls > li').eq(idx);
                $(thumb).filter('li').addClass('pager-item');
                $(thumb).children('img').wrap('<a href="#" />');
                return thumb;
            }
        };
        $('#hero-image').cycle(homepageSlideshowOptions);

        /* -- Newsletter Form -- */
        var $signupForm = $("#newsletter-signup form");

        //static HP workaround because the form has already been submitted
        $signupForm.ajaxError(function(e, xhr) {
            // This text *must* match the confirmation msg in Quick Signup webform
            // in order to be translated.
            $('.submit-progress', "#newsletter-signup").hide();
            $(this).replaceWith('<p>' +
                Drupal.t('Thanks! Keep an eye out for the next edition of the Tesla Newsletter.') +
                    '</p>');
        });

        // fancy label
        var signupLabel = $('#edit-submitted-email-wrapper label').hide().text();
        var parts = signupLabel.split(':');
        if (signupLabel !== '') {
            $('#edit-submitted-email').val(parts[0]).click(function() {
                this.value='';
                $(this).unbind('click');
            });
        }
            // progress bar
            //$signupForm.submit(function() {
            //        $(this).find('input[type=submit]').hide()
            //        .after('<img class="ajax-loader" src="/sites/all/themes/tesla/images/ajax-loader-bar.gif" alt="Loading, please wait" />');
            //});

        // ensure form uniqueness
        //var sF_nid = 3974;
        //$.get('webform/'+ sF_nid, function(data) {
        //  $signupForm.find('input[name=form_build_id]')
        //      .replaceWith($(data).find('input[name=form_build_id]'));

        //  $signupForm.find('input[name=form_token]')
        //      .replaceWith($(data).find('input[name=form_token]'));
        //});

    } else if ( $('body').attr('id') == 'page-modelx' ) {

         /* -- Newsletter Form -- */
        var $signupForm = $("#newsletter-signup form");

        $('.pane-title').hide().text();
        $('#webform-client-form-16704 label').css('display', 'block');
        $('.links.inline').hide();

        //static HP workaround because the form has already been submitted
        $signupForm.ajaxError(function(e, xhr) {
            // This text *must* match the confirmation msg in Quick Signup webform
            // in order to be translated.
            $("#newsletter-signup").hide();
            $(this).replaceWith('<p>' +
                Drupal.t('Thanks! Keep an eye out for the next edition of the Tesla Newsletter.') +
                    '</p>');
        });

    }

    else if ($('body').attr('id') === "page-models-drive") {
        /*
            Adding country drop down for Europe
        */
        var _region = Drupal.settings.tesla.locale, val = $( "#edit-submitted-country" ).val();
        if ( _region == "en_CA" || _region == "fr_CA" || _region == "en_US" ){
            $('#webform-component-country').css( "display", "none" );
        }
        else {
            var $countryField, title, val, _options = "", i, _locale,
                _countyCode = [ "eu", "be", "dk", "de", "fr", "it", "nl", "no", "at", "ch", "bg",
                                "cz", "ee", "fi", "gi", "gr", "hu", "lv", "li", "lt", "lu",
                                "mc", "pl", "pt", "ro", "sm", "sk", "si", "es", "se", "gb", "cn"
                              ];

            for( i = 0; i < _countyCode.length; i++ ){
                _options += "<option value='" + _countyCode[i] + "'>" + Tesla.Smartling[ 'country_' + _countyCode[ i ] ] + "</option>";
            }

            var _countryTxt = Tesla.Smartling.getVariable( Tesla.Smartling._country, Drupal.t( "Country:" ) );
            $( "#webform-component-postalcode" ).after( "<div class='webform-component webform-component-select' id='webform-component-country'>" +
                "<div class='form-item' id='edit-submitted-country-wrapper'>" +
                "<label for='edit-submitted-country'>" + _countryTxt + "</label>" +
                "<select name='submitted[country]' class='form-select required' id='edit-submitted-country'>" +
                "<option value=''>-- Select Country --</option><option value='af'>Afghanistan</option></select>" +
                "<span id='select-country-overlay' class='select-country'><img src='/tesla_theme/images/icn_" + val + "_flag_no_shadow.png' width='16' height='11' class='basic-flag' />&nbsp;&nbsp;" + Tesla.Smartling[ 'country_' + val ] + "</span>" +
                "</div></div>"
            );

            $countryField = $('#webform-component-country');

            function checkValidCountry( countryCode ){
                if ( countryCode == "eu" ){
                    $( "#webform-client-form-19198 > div" )
                        .addClass( "errors" )
                        .find( "#edit-submit" ).attr( "disabled", "disabled" );
                }
                else{
                    $( "#webform-client-form-19198 > div" )
                        .removeClass( "errors" )
                        .find( "#edit-submit" ).removeAttr( "disabled", "disabled" );
                }
            }

            function updateFlag(){
                var ctry_code = $( this ).val().toLowerCase();

                title = Tesla.Smartling[ 'country_' + ctry_code ];

                if(ctry_code == 'us' || ctry_code == 'ca' || ctry_code == 'au' || ctry_code == 'at' || ctry_code == 'be' || ctry_code == 'dk' || ctry_code == 'de' || ctry_code == 'fr' || ctry_code == 'gb' || ctry_code == 'it' || ctry_code == 'nl' || ctry_code == 'ch' || ctry_code == 'hk' || ctry_code == 'jp' || ctry_code == 'no' || ctry_code == 'cn') {
                  title = '<img src="/tesla_theme/images/icn_'+ctry_code+'_flag_no_shadow.png" width="16" height="11" class="basic-flag" />&nbsp;&nbsp;' + title;

                }
                $('#select-country-overlay').html(title);

                checkValidCountry( ctry_code );
            }

            $( "#edit-actions #edit-submit" ).attr( "value", Drupal.t( "Submit" ) );

            checkValidCountry( val );

            $countryField.find( "#edit-submitted-country" )
                .html( _options )
                .change( updateFlag );

            $('#webform-component-country')
                .find( "#edit-submitted-country option[value=" + val + "]" )
                .attr( "selected", "selected" );

        }
    }

    else if ($("body").attr("id") === "page-models-drive") {
    }

    else if ($('body').attr('id') == 'page-financing') {

        // fancy label for first name
        var firstnameLabel = $('#edit-submitted-firstname-wrapper label').hide().text();
        var partsfirstnameLabel = firstnameLabel.split(':');
        if (firstnameLabel !== '') {
            $('#edit-submitted-firstname').val(partsfirstnameLabel[0]).click(function() {
                this.value='';
                this.style.color = '#000000';
                $(this).unbind('click');
            });
            $('#edit-submitted-firstname').focus(function() {
                if(this.value == partsfirstnameLabel[0]){
                    this.value='';
                }
                this.style.color = '#000000';
            });
            $('#edit-submitted-firstname').blur(function() {
                if(this.value == ''){
                    this.value=partsfirstnameLabel[0];
                    this.style.color = '#cccccc';
                }
            });
        }
     // fancy label for last name
        var lastnameLabel = $('#edit-submitted-lastname-wrapper label').hide().text();
        var partslastnameLabel = lastnameLabel.split(':');
        if (lastnameLabel !== '') {
            $('#edit-submitted-lastname').val(partslastnameLabel[0]).click(function() {
                this.value='';
                this.style.color = '#000000';
                $(this).unbind('click');
            });
            $('#edit-submitted-lastname').focus(function() {
                if(this.value == partslastnameLabel[0]){
                    this.value='';
                }
                this.style.color = '#000000';
            });
            $('#edit-submitted-lastname').blur(function() {
                if(this.value == ''){
                    this.value=partslastnameLabel[0];
                    this.style.color = '#cccccc';
                }
            });
        }
        //alert(parts[0]);
        if(partslastnameLabel[0]!=''){
     // fancy label for email
        var defaultEmail = $('#edit-submitted-email').val();
        var emailLabel = $('#edit-submitted-email-wrapper label').hide().text();
        var partsemailLabel = emailLabel.split(':');
        if (emailLabel !== '' && $('#edit-submitted-email').val()=='' ) {
            $('#edit-submitted-email').val(partsemailLabel[0]).click(function() {
                this.value='';
                this.style.color = '#000000';
                $(this).unbind('click');
            });

        }
        $('#edit-submitted-email').focus(function() {
            this.style.color = '#000000';
            if(this.value == partsemailLabel[0]){
                this.value='';
            }

            if(defaultEmail!=''){
                this.value=defaultEmail;
            }
            //alert(this.value);



        });
        $('#edit-submitted-email').blur(function() {
            if(this.value == ''){
                this.value=partsemailLabel[0];
                this.style.color = '#cccccc';
            }
            defaultEmail = this.value;
        });
     // fancy label for postal code number
        var postalcodeLabel = $('#edit-submitted-postalcode-wrapper label').hide().text();
        var partspostalcodeLabel = postalcodeLabel.split(':');
        if (postalcodeLabel !== '') {
            $('#edit-submitted-postalcode').val(partspostalcodeLabel[0]).click(function() {
                this.value='';
                this.style.color = '#000000';
                $(this).unbind('click');
            });
            $('#edit-submitted-postalcode').focus(function() {
                if(this.value == partspostalcodeLabel[0]){
                    this.value='';
                }
                this.style.color = '#000000';
            });
            $('#edit-submitted-postalcode').blur(function() {
                if(this.value == ''){
                    this.value=partspostalcodeLabel[0];
                    this.style.color = '#cccccc';
                }
            });

        }
    // fancy label for phone number
        var phoneLabel = $('#edit-submitted-phone-wrapper label').hide().text();
        var partsphoneLabel = phoneLabel.split(':');
        if (phoneLabel !== '') {
            $('#edit-submitted-phone').val(partsphoneLabel[0]).click(function() {
                this.value='';
                this.style.color = '#000000';
                $(this).unbind('click');
            });
            $('#edit-submitted-phone').focus(function() {
                if(this.value == partsphoneLabel[0]){
                    this.value='';
                }
                this.style.color = '#000000';
            });
            $('#edit-submitted-phone').blur(function() {
                if(this.value == ''){
                    this.value=partsphoneLabel[0];
                    this.style.color = '#cccccc';
                }
            });

        }

    // fancy label for description
        var descriptionLabel = $('#edit-submitted-description-wrapper label').hide().text();
        var partsdescriptionLabel = descriptionLabel.split(':');
        if (descriptionLabel !== '') {
            $('#edit-submitted-description').val(partsdescriptionLabel[0]).click(function() {
                this.value='';
                this.style.color = '#000000';
                $(this).unbind('click');
            });
            $('#edit-submitted-description').focus(function() {
                if(this.value == partsdescriptionLabel[0]){
                    this.value='';
                }
                this.style.color = '#000000';
            });
            $('#edit-submitted-description').blur(function() {
                if(this.value == ''){
                    this.value=partsdescriptionLabel[0];
                    this.style.color = '#cccccc';
                }
            });

        }

        }
    }


}


/*
 * Pass in an array of image urls to pre-load
 */
Drupal.settings.imagecache = [];
function preLoadImages() {
    var args_len = arguments.length;
    for (var i = args_len; i--;) {
      var cacheImage = document.createElement('img');
      cacheImage.src = arguments[i];
      Drupal.settings.imagecache.push(cacheImage);
    }
}

/*
 * Live Update elements to reflect a user's logged-in state
 */
Tesla.updateLoggedInState = function() {
    $.ajax({
        url:window.location.pathname,
        cache:false,
        success:function(page) {
            $("#utils-menu").html($(page).find("#utils-menu").children());
        }
    });
}

/*
 * Logic for checking and working with the desired-locale cookie
 */
function checkCookie(){
        var cookie_locale = readCookie('desired-locale');
        var show_blip_count = readCookie('show_blip_count');
        var tesla_locale = 'en_US'; //default to US
        var path = window.location.pathname;
        // debug.log("path = " + path);
        var parsed_url = parseURL(window.location.href);
        var path_array = parsed_url.segments;
        var path_length = path_array.length
        var locale_path_index = -1;
        var locale_in_path = false;
        var locales = ['de_AT', 'en_AU', 'en_BE', 'fr_BE', 'nl_BE', 'en_CA',
                       'fr_CA', 'de_DE', 'en_DK', 'en_GB',
                       'en_HK', 'en_EU', 'nl_NL',
                       'de_CH', 'fr_CH', 'it_CH',
                       'en_US', 'it_IT', 'fr_FR', 'en_AT', 'no_NO', 'jp', 'sv_SE', 'cn'];
        // see if we are on a locale path
        $.each(locales, function(index, value){
            locale_path_index = $.inArray(value, path_array);
            if (locale_path_index != -1) {
                if (value == 'jp'){
                    value = 'ja_JP';
                } 
                else if (value = 'cn'){
                    value = 'zh_CN';
                }
                tesla_locale = value;
                locale_in_path = true;
            }
        });
        // debug.log('tesla_locale = ' + tesla_locale);
        cookie_locale = (cookie_locale == null || cookie_locale == 'null') ? false:cookie_locale;
        // Only do the js redirect on the static homepage.
        if ((path_length == 1) && (locale_in_path || path == '/')) {
            debug.log("path in redirect section = " + path);
            if (cookie_locale && (cookie_locale != tesla_locale)) {
                // debug.log('Redirecting to cookie_locale...');
                var path_base = '';
                switch (cookie_locale){
                    case 'en_US':
                        path_base = path_length > 1 ? path_base:'/';
                        break;
                    case 'ja_JP':
                        path_base = '/jp'
                        break;
                    case 'zh_CN':
                        path_base = '/cn'
                        break;
                    default:
                        path_base = '/' + cookie_locale;
                }
                path_array = locale_in_path != -1 ? path_array.slice(locale_in_path):path_array;
                path_array.unshift(path_base);
                window.location.href = path_array.join('/');
            }
        }
        // only do the ajax call if we don't have a cookie

        if (!cookie_locale) {
            cookie_locale = 'null';
            var get_data = {cookie:cookie_locale, page:path, t_locale:tesla_locale};
            var query_country_string = parsed_url.query != '' ? parsed_url.query.split('='):false;
            var query_country = query_country_string ? (query_country_string.slice(0,1) == '?country' ? query_country_string.slice(-1):false):false;
            if (query_country) {
                get_data.query_country = query_country;
            }
            $.ajax({
                url:'/check_locale',
                data:get_data,
                cache: false,
                dataType: "json",
                success: function(data){
                            var ip_locale = data.locale;
                            var market = data.market;
                            var new_locale_link = $('#locale_pop #locale_link');
                            if (data.show_blip && show_blip_count < 3) {
                                setTimeout(function(){
                                    $('#locale_msg').text(data.locale_msg);
                                    $('#locale_welcome').text(data.locale_welcome);
                                    new_locale_link[0].href = data.new_path;
                                    new_locale_link.text(data.locale_link);
                                    new_locale_link.attr('rel', data.locale);
                                    if (!new_locale_link.hasClass(data.locale)) {
                                        new_locale_link.addClass(data.locale);
                                    }
                                    $('#locale_pop').slideDown('slow', function(){
                                        var hide_blip = setTimeout(function(){
                                            $('#locale_pop').slideUp('slow', function(){
                                                        var show_blip_count = readCookie('show_blip_count');
                                                        if (!show_blip_count) {
                                                            createCookie('show_blip_count',1,360);
                                                        }
                                                        else if (show_blip_count < 3 ) {
                                                            var b_count = show_blip_count;
                                                            b_count ++;
                                                            eraseCookie('show_blip_count');
                                                            createCookie('show_blip_count',b_count,360);
                                                        }
                                                });
                                            },10000);
                                        $('#locale_pop').hover(function(){
                                            clearTimeout(hide_blip);
                                            },function(){
                                                setTimeout(function(){$('#locale_pop').slideUp();},10000);
                                            });
                                    });
                                },1000);
                            }
                        }
            });
    }
}

function showWebFormOverlay(webFormID, webFormWidth, webFormHeight) {
    var webFormOverlay = $('#'+ webFormID);
    var webFormOverlayCloseButton = $('#webform-close-button-'+ webFormID);

    if(!webFormModal){
        $('#page').before('<div id="webform-modal"></div>');
        webFormModal = $('#webform-modal');
    }

    webFormOverlay.find('.pane-content').css('max-height', webFormHeight - 20);
    webFormOverlay.find('.pane-content').css('padding-left', 14);
    webFormOverlay.find('.pane-content').css('margin-right', "18px");

    // Set the height of the webform modal to the document height and fade it in.
    webFormModal.stop().css({
        'display':      'block',
        'height':       $(document).height()
    }).animate({
        'opacity':      .6
    }, 500);

    // Show the webform overlay.
    webFormOverlay.stop().css({
        'display':      'block',
        'width':        webFormWidth,
        'max-height':       webFormHeight,
        'margin-left':  (980 - webFormWidth) / 2
    }).animate({
        'opacity':      1
    }, 1000);

    // Check for an existing close button, if there isnt one, create one.
    var webFormOverlayCloseButton = $('#webform-close-button-'+ webFormID);
    if(webFormOverlayCloseButton.length == 0){
        var formIDString = "'"+ webFormID +"'";
        /*webFormOverlay.prepend('<a class="webform-overlay-close-button" id="webform-close-button-'+ webFormID +'" href="javascript:hideWebFormOverlay('+ formIDString +');">&nbsp;</a>');*/
         webFormOverlay.prepend('<a class="webform-overlay-close-button" id="webform-close-button-'+ webFormID +'" href="">&nbsp;</a>');

    }
}

function hideWebFormOverlay(webFormID) {
    var webFormOverlay = $('#'+ webFormID);
    var webFormOverlayCloseButton = $('#webform-close-button-'+ webFormID);
    resetForm(webFormOverlay);
    resetForm(webFormModal);

    webFormOverlay.stop().animate({
        'opacity':      0
    }, 500, function(){
        webFormOverlay.css('display', 'none');
    });

    webFormModal.stop().animate({
        'opacity':      0
    }, 500, function(){
        webFormModal.css('display', 'none');
    });
}
function resetForm($form) {
    $form.find('input:text, input:password, input:file, select, textarea').val('');
    $form.find('input:radio, input:checkbox')
     .removeAttr('checked').removeAttr('selected');
}

// to call, use:
resetForm($('#myform')); // by id, recommended

Drupal.Ajax.plugins.colorbox = function(hooks, args){
    if(!$.colorbox) return;
    setTimeout(function(){
           $.colorbox.resize();
    }, 50);

}

Drupal.Ajax.plugins.shadowbox = function(hook, args) {
    if (hook === 'init') {
    $('form.webform-client-form').after('<div class="submit-progress"><img src="/sites/all/themes/tesla/images/ajax-loader-bar-transparent.gif" alt="Sending, please wait" /></div>');
    //unbind ajax form handlers from original
    function ajaxUnbindOriginal(sbInline) {
        var f;
        if (f = $('.ajax-form', sbInline.content)) {
        $("#"+f.attr('id'), document).each(function() {
            $(this).unbind('submit')
            .find('input[type=submit]').unbind('click');
        });
        }
    };
    // and re-bind in SB context
        function ajaxShadowbox(sbInline) {
            Drupal.attachBehaviors($('#sb-player'));
        }

        Shadowbox.options['onFinish'] = ajaxShadowbox;
        Shadowbox.options['onOpen'] = ajaxUnbindOriginal;

        //disable keyboard overrides
        Shadowbox.options['enableKeys'] = false;

    return false;
    }
    else if (hook === 'submit') {
        debug.log('shadowbox hook submit');
        var thisForm = args.submitter.parents('form.webform-client-form');
        args.submitter.hide();
        thisForm.next('.submit-progress').show();
        attachWebformAnalytics(thisForm.attr('id'));
    }
    else if (hook === 'afterMessage') {
        if (args.status == false) {
            $('.submit-progress').hide();
            args.local.submitter.show();
        }


    }
    else if (hook === 'redirect') {
        if (args.status === true) {
            // work around possible same origin policy issues introduced by CDN
            var redirectPath = parseURL(args.redirect).path;
            $.get(redirectPath, function (data) {

                var confMsg = $(data).find('.webform-confirmation');
                //  Localizing the confirmation message
                $( confMsg ).html( $( confMsg ).html()
                    .replace( "Contact the Tesla Financing Team", Drupal.t( "Contact the Tesla Financing Team" ) )
                    .replace( "Thanks!", Drupal.t( "Thanks!" ) )
                    .replace( "We will get in touch with you shortly.", Drupal.t( "We will get in touch with you shortly." ) ) );

                $('.submit-progress').hide();

                args.local.form.parents('.node-webform').html(confMsg);
            });
        }
    return false; //do not redirect
    }
    // there is no 'error' hook... condition logged to console, and the form seems to hang
    else if (hook === 'error') {
        $('.submit-progress').hide();
        thisForm.replaceWith('<div class="webform-confirmation error">Sorry, there was an internal server error while submitting this form. Please try again later.</div>');

    }
    return true;
}



/*
 * Reposition background image on an element by a specified amount. Used for sprite nav.
 */
function reposBackground(e, amount) {
    if (e.css('backgroundPositionY') != "") {
    // IE and webkit
    e.css('backgroundPositionY', amount + 'px');
    } else {
    // FF
    e.css('backgroundPosition', e.css('backgroundPosition').split(" ")[0] + ' ' + amount + 'px');
    }
}

/*
 * Do this stuff as soon as DOM is ready.
 */
$(document).ready(function() {

    if (typeof Drupal.settings.tesla == 'undefined') { Drupal.settings.tesla = new Object(); }
    // Store galleries
    initGalleries();

    // Typekit
    // If any Galleries are on the page, need to delay loading typekit until after galleries are
    // initialized, or else Galleries don't work in IE
    if (window.Galleria && Drupal.settings.tesla.flickr_api_key && $.browser.msie) {
        setTimeout('initTypeKit();', 700);
    }

    // set a deafult cookie for the buy flow based on locale
    var buy_flow_cookie = readCookie('buy_flow_locale');
    if (!buy_flow_cookie) {
        createCookie('buy_flow_locale',Drupal.settings.tesla.locale, 360);
    }

    //WEB-7462: set cookie if query string in the form '?advocate=menlopark' exists
    var qs = (function(a) {
        if (a == "") return {};
        var b = {};
        for (var i = 0; i < a.length; ++i)
        {
            var p=a[i].split('=');
            if (p.length != 2) continue;
            b[p[0]] = decodeURIComponent(p[1].replace(/\+/g, " "));
        }
        return b;
    })(window.location.search.substr(1).split('&'));
    if(qs["advocate"]){
        createCookie('advocate',qs["advocate"], 1);
    }

    // legal menu item, don't show on top menubar
    $('#site-menu .secondary-menu li.menu-legal').remove();

    // erase persistent login cookie if logout is clicked
    if($('#menu-logout').length) {
        $('#menu-logout').click(function(){
            eraseCookie('tesla_login');
        });
    }

    /**
     * main menu: secondary nav hovers
     */

    // Helper function to get the language code.
    function getLangCode() {
        var body_classes = $('body').attr('class').split(' ');
        var code = '';
        for (var i=0, l=body_classes.length; i<l; i++) {
            if (body_classes[i].indexOf('i18n') > -1) {
                code = body_classes[i].substr(5);
            }
        }
        return code;
    }




    // hook google analytics events
    initAnalyticsEvents();

    // Forms
    $('form#comment-form input[type=submit]')
    .after('<div class="submit-progress"><img src="/sites/all/themes/tesla/images/ajax-loader-bar.gif" alt="Loading, please wait" /></div>')
    .click(function() {
            $(this).hide()
            .next('.submit-progress').show();
    });

    // Country Selector
    $('#tesla-country-selector .form-submit').hide();
    $('#tesla-country-selector #edit-country').change(function() {
        if ($(this).val() !== '') {
            $('#tesla-country-selector').submit();
        }
    });

    // Shop subnav link -- open in new window
    $('.menu-16276 a').attr('target','_new');

    // Locale specific
    attachLocaleHandlers();

    // Homepage
    initHome();

    // Fade alerts
    messagesBye = setTimeout(fadeAlerts, 4000);

    // Press page styling
    $('#page-about-press #left-col .pane-title').addClass('style-header');

    // We don't want margins on all p tags. Sometimes the WYSIWYG adds p tags you don't need.
    $('#page-goelectric-charging #page_bottom .row-3-col div p:has(a img)').css('margin', '0');

    $('.typekit-badge').hide();

    // locale selector actions

    $('.locale-link').click(function(){
        if (window.location.hostname == $(this).get(0).hostname) {
            var desired_locale = $(this).attr('rel');
            createCookie('desired-locale',desired_locale,360);
            createCookie('buy_flow_locale',desired_locale,360);
        }
    });

    $('#locale_pop a.close').click(function(){
        var show_blip_count = readCookie('show_blip_count');
        if (!show_blip_count) {
            createCookie('show_blip_count',3,360);
        }
        else if (show_blip_count < 3 ) {
            eraseCookie('show_blip_count');
            createCookie('show_blip_count',3,360);
        }
        $('#locale_pop').slideUp();
        return false;
    });

    if($('#page-user-login').length) {

        $('#btnSelectDO').css('opacity','0.6');
        $('#btnSelectDO').unbind('click');

        /*
        // WEB-8822 / TFM
        // Scale background image
        // --------------------------------------
        function loginBgSize () {

            var $page_user_login = $('#page-user-login .wrapper'),
                $window = $(window);

            $page_user_login.css({
                'background-size': 'cover'
            });
            if ($window.width() < 961) {

                $page_user_login.css({
                    'background-size': 'cover'
                });

                if ($window.height() < 797) {
                    $page_user_login.css({
                        'background-size': '961px 797px'
                    });
                }
            }
            else if ($window.height() < 797) {

                $page_user_login.css({
                    'background-size': 'cover'
                });

                if ($window.width() < 796) {
                    $page_user_login.css({
                        'background-size': '961px 796px'
                    });
                }
            }
        }

        loginBgSize();
        $(window).resize(function () {
            loginBgSize();
        });
        // --------------------------------------
        */

        // if($('#btnSelectDO').length && !$('#messages-wrapper').length) {
        //     $('#btnSelectDO').css('opacity','0.5');
        //     $('#btnSelectDO').unbind('click');
        // }

        // WEB-9309 / TFM
        // ----------------------------
        // if($('#btnSelectDO').length) {
        //     // $('#btnSelectDO').css('opacity','1');
        //     $('#btnSelectDO').unbind('click');
        //     $('#btnSelectDO').click(function() {
        //         submitLoginForm('login');
        //     });
        // }
        // ----------------------------

        // if an error message was set, then edit and show it
        if($('#messages-wrapper').length) {
            var error_field = 'edit-name';
            var anchor_pos = $('#'+error_field).position();
            var error_pos_x = anchor_pos.left;
            var error_pos_y = anchor_pos.top;
            var error_title = '';
            var error_msg = Drupal.t('We could not sign you in using the information you provided. Please try again.');
            // $('.messages.error').html();
            error_msg = error_title + error_msg;
            $('.messages.error').html(error_msg);
            $('#messages-wrapper').css('left',error_pos_x-440);
            $('#messages-wrapper').css('top',error_pos_y-90);
            if($('.messages.error').length) {
                $('#messages-wrapper').fadeIn('slow');
            }
            //checkPassEmailField('login');
        }
        // get cookie and prefill username field
        var login_cookie = readCookie('tesla_login');
        var login_username = readCookie('tesla_username');
        // get URL parameter data
        var url_data = parseURL(location.href);
        var url_email = url_data.params.email;

        if(login_username && login_username !== '') {
            $('#edit-name').val(decodeURIComponent(login_username));
        }

        if(url_email && url_email !== '') {
            $('#edit-name').val(decodeURIComponent(url_email));
        }

        // WEB-9309 / TFM
        // -------------------------
        // if name prepopulated, then set focus to pass field
        // if($('#edit-name').val() !== '') {
        //     $('#edit-pass').focus();
        // } else {
            $('#edit-name').focus();
        // }
        // -------------------------

        $('#main').css('margin-bottom','0px');

        if($('#edit-persistent-login-wrapper').length) {
            $('#edit-persistent-login-wrapper').removeClass('form-item');
            $('label[for="edit-persistent-login"]').removeClass('option');
            $('label[for="edit-persistent-login"]').css('cursor','pointer');
            var label_epl = $('label[for="edit-persistent-login"]').html();
            var input_epl = label_epl.substring(0,label_epl.indexOf('>')+1);
            var label_epl = label_epl.substring(label_epl.indexOf('>')+1);
            var spacer_epl = '&nbsp;&nbsp;';
            if($.browser.chrome) {spacer_epl = '&nbsp;&nbsp;&nbsp;';}
            var label_epl = input_epl+spacer_epl+label_epl;
            $('label[for="edit-persistent-login"]').html(label_epl);
            $('#edit-persistent-login').css('opacity','0');
            $('#edit-persistent-login').click(function() {
                if($('#keep_signed_in').val() == '1') {
                    $('#keep_signed_in').val(0);
                    $('#edit-persistent-login-wrapper').css('background-image','url(/tesla_theme/images/own/own-terms-checkbox-off.png)');
                } else {
                    $('#keep_signed_in').val(1);
                    $('#edit-persistent-login-wrapper').css('background-image','url(/tesla_theme/images/own/own-terms-checkbox-on.png)');
                }
            });
            // if($('#keep_signed_in').val() == '1') {
                $('#edit-persistent-login').click();
            // }
        }

        // run a function after the page loads to see if the email
        //  and password are prepop'd by browser.
        var origin = 'login';
        // setTimeout(checkPassEmailField,1000,[origin]);
    }

    if($('#page-user-password').length) {
        $('#edit-name').focus();
        if($('#btnSelectDO').length && !$('#messages-wrapper').length) {
            $('#btnSelectDO').css('opacity','0.5');
            $('#btnSelectDO').unbind('click');
        }

        // CAPTCHA by Mollom
        //------------

        if ($('#edit-mollom-captcha-wrapper').length) {
            // Reorder CAPTCHA position in register form
            $('#edit-mollom-captcha-wrapper').appendTo('#password-confirm-group-wrapper');

            // Restructure CAPTCHA module design
            // ---------------------------------

            // Re-position CAPTCHA Image or Audio (play button)
            if ($('.mollom-audio-captcha').length) {
                $('span.mollom-captcha-content.mollom-audio-captcha').appendTo('#edit-mollom-captcha-wrapper > .field-prefix');
            }
            if ($('.mollom-image-captcha').length) {
                $('span.mollom-captcha-content.mollom-image-captcha').appendTo('#edit-mollom-captcha-wrapper > .field-prefix');
            }
            // Re-position CAPTCHA Image or Audio (play button) as user clicks between both modes
            var clickbind = function () {

                // Cache link description
                var linkText = $(".mollom-switch-captcha").text();

                // Poll until text changes
                var timeout = setInterval(function () {

                    if (linkText !== $(".mollom-switch-captcha").text()) {

                        if ($('.mollom-audio-captcha').length) {
                            $('span.mollom-captcha-content.mollom-audio-captcha').appendTo('#edit-mollom-captcha-wrapper > .field-prefix');
                        }
                        if ($('.mollom-image-captcha').length) {
                            $('span.mollom-captcha-content.mollom-image-captcha').appendTo('#edit-mollom-captcha-wrapper > .field-prefix');
                        }

                        $('.mollom-switch-captcha').click(clickbind);
                        clearTimeout(timeout);
                    }

                }, 100);

            };
            $('.mollom-switch-captcha').click(clickbind);

            // Remove required star '*'
            $('#edit-mollom-captcha-wrapper').find('.form-required').remove();
            $('#edit-mollom-captcha-wrapper > label').text('Type the code below');

            // ---------------------------------

            // Reword CAPTCHA error
            if ($('#messages-wrapper').length) {
                $messages = $('#messages-wrapper').find('.error');
                var str = $messages.html();

                if(typeof str === 'string'){
                    // String Replacements
                    $messages.html(str.replace(
                        'The word verification was not completed correctly. Please complete this new word verification and try again. If you feel this is in error, please ',
                        'Please complete the word verification to continue. This helps us prevent spam in our forums'
                    ));
                }
            }
        }

        // // CAPTCHA Test Mode
        if ($('#messages-wrapper').length) { // If error message is found
            $messages_wrapper = $('#messages-wrapper');
            if ($messages_wrapper.find('.error:contains("Your submission has triggered the spam filter and will not be accepted. If you feel this is in error, please")')) {
                $messages_wrapper.find('.error').html($('#messages-wrapper').find('.error').html().replace(
                    'Your submission has triggered the spam filter and will not be accepted. If you feel this is in error, please ',
                    'An automated security monitor is preventing your account from being created. Please contact us for more information'
                ));
            }
        }

        //------------

        if($('#messages-wrapper').length) {
           $('.messages.error a').remove();
            $('.messages.error ul li:nth-child(2)').remove();
            $('.messages.error ul li:nth-child(3)').remove();
            if($('#edit-name').hasClass('error')){
                var error_pos_x = 335;
                var error_pos_y = 210;
            } else {
                var error_pos_x = 335;
                var error_pos_y = 375;
                $('#recaptcha_response_field').addClass('error');
            }
            if($('.messages.error ul').length) {
                $('.messages.error').css('margin-left','-2px');
            }
            $('#messages-wrapper').css('left',error_pos_x);
            $('#messages-wrapper').css('top',error_pos_y);
            if($('.messages.error').length) {
                $('#messages-wrapper').fadeIn('slow');
            }
            checkPassEmailField();
        }
        $('#main').css('margin-bottom','0px');
        setTimeout(checkPassEmailField,1000);

    }

    if($('*[id*=page-user-reset-]').length) {
        $('#edit-pass-pass1').focus();
        $('*[id*=page-user-reset-]').css('text-align','center');
        $('#btnSelectDO').css('opacity','0.5');
        $('#edit-pass-pass2').keyup(function(event) {
            checkKeyPressed(event);
        });

        if($('#reset-submit-btn-container').length) {
            $('#reset-submit-btn-container').remove();
        }

        if($('#edit-pass-pass1').length) {
            $('#edit-pass-pass1').keyup(function() {
                checkResetPasswordFields();
            });
            $('#edit-pass-pass1').blur(function() {
                checkResetPasswordFields();
            });
        }

        if($('#edit-pass-pass2').length) {
            $('#edit-pass-pass2').keyup(function() {
                checkResetPasswordFields();
            });
            $('#edit-pass-pass2').blur(function() {
                checkResetPasswordFields();
            });
        }
    }

    if($('#page-user-change-pass').length) {
        $('#edit-pwd').focus();
        $('#btnSelectDO').css('opacity','0.5');
    }

    // start create account page
    if($('#page-user-register').length) {

        // WEB-9309 / TFM
        // Deactivate login button when page loads
        // --------------
        $('#btnCreateAccount').css('opacity','0.5');
        $('#btnCreateAccount').unbind('click');
        $('#btnCreateAccount').unbind('keyup');
        // --------------

        /*
        // WEB-8822 / TFM
        // Scale background image
        // --------------------------------------
        function registerBgSize () {

            var $page_user_register = $('#page-user-register'),
                $window = $(window);

            $page_user_register.css({
                'background-size': 'cover'
            });

            if ($window.width() < 961) {

                $page_user_register.css({
                    'background-size': 'cover'
                });

                if ($window.height() < 797) {
                    $page_user_register.css({
                        'background-size': '961px 797px'
                    });
                }
            }
            else if ($window.height() < 797) {

                $page_user_register.css({
                    'background-size': 'cover'
                });

                if ($window.width() < 796) {
                    $page_user_register.css({
                        'background-size': '961px 796px'
                    });
                }
            }
        }

        registerBgSize();
        $(window).resize(function () {

            registerBgSize();
        });
        // --------------------------------------
        */

        // set focus to fname
        // WEB-9303 / TFM
        // ---------------------
        //if($('#edit-first-name').length) {
            $('#edit-first-name').focus();
        //}
        // ---------------------
        // if error message displayed, then edit and show it
        if($('#messages-wrapper').length) {
            $('.messages.error a').remove();
            $('.messages.error ul li:nth-child(2) a').remove();
            $('.messages.error ul li:nth-child(3) a').remove();
            var error_field = 'edit-name';
            var anchor_pos = $('#'+error_field).position();
            var error_pos_x = anchor_pos.left;
            var error_pos_y = anchor_pos.top;
            var error_title = '<strong>'+Drupal.t('Please Try Again')+'</strong><br>';
            var error_msg = Drupal.t('The username or password you used were incorrect.');
            // $('.messages.error').html();
            error_msg = error_title + error_msg;
            // $('.messages.error').html(error_msg);
            if($('.messages.error ul').length) {
                $('.messages.error').css('margin-left','-2px');
            }
            $('#messages-wrapper').css('left',error_pos_x-440);
            $('#messages-wrapper').css('top',error_pos_y-218);
            if($('.messages.error').length) {
                $('#messages-wrapper').fadeIn('slow');
            }
            checkCreateAcctFields('create_account');
        }

        // WEB-8822 / TFM
        // Form errors
        // -------------------------------------

        // Multi-case errors (submit errors)
        if ($('.messages.error ul').length) {

            var $messages = $('#messages-wrapper').find('.error'),
                $messages_wrapper = $('#messages-wrapper');

            // Resize tooltip
            $messages_wrapper.css({
                'height': $messages.outerHeight() + 'px', // !important',
                'background-size': '100% ' + $messages.outerHeight() + 'px' //!important
            });
            // Fallback Hack
            // $('html > head').append($('<style>#messages-wrapper {background-size: 100% ' + $messages.height() + ';}</style>'));

            // Align message error wrapper adjacent to form buttons on bad submit
            if (!$('#edit-mollom-captcha-wrapper').length) {
                $messages_wrapper.addClass("submit-error");
            }
            else {
                $messages_wrapper.addClass("submit-error-captcha");
            }

        }

        // -------------------------------------

        if($('#edit-pass-pass1').length) {
            $('#edit-pass-pass1').keyup(function() {checkCreateAcctFields('create_account')});
        }
        if($('#edit-pass-pass2').length) {
            $('#edit-pass-pass2').keyup(function() {checkCreateAcctFields('create_account')});
        }


        // WEB-8822 / TFM
        // CAPTCHA by Mollom
        // -----------------

        if ($('#edit-mollom-captcha-wrapper').length) {
            // Reorder CAPTCHA position in register form
            $('#edit-mollom-captcha-wrapper').appendTo('#password-confirm-group-wrapper');

            // Restructure CAPTCHA module design
            // ---------------------------------

            // Re-position CAPTCHA Image or Audio (play button)
            if ($('.mollom-audio-captcha').length) {
                $('span.mollom-captcha-content.mollom-audio-captcha').appendTo('#edit-mollom-captcha-wrapper > .field-prefix');
            }
            if ($('.mollom-image-captcha').length) {
                $('span.mollom-captcha-content.mollom-image-captcha').appendTo('#edit-mollom-captcha-wrapper > .field-prefix');
            }
            // Re-position CAPTCHA Image or Audio (play button) as user clicks between both modes
            var clickbind = function () {

                // Cache link description
                var linkText = $(".mollom-switch-captcha").text();

                // Poll until text changes
                var timeout = setInterval(function () {

                    if (linkText !== $(".mollom-switch-captcha").text()) {

                        if ($('.mollom-audio-captcha').length) {
                            $('span.mollom-captcha-content.mollom-audio-captcha').appendTo('#edit-mollom-captcha-wrapper > .field-prefix');
                        }
                        if ($('.mollom-image-captcha').length) {
                            $('span.mollom-captcha-content.mollom-image-captcha').appendTo('#edit-mollom-captcha-wrapper > .field-prefix');
                        }

                        $('.mollom-switch-captcha').click(clickbind);
                        clearTimeout(timeout);
                    }

                }, 100);

            };
            $('.mollom-switch-captcha').click(clickbind);

            // Remove required star '*'
            $('#edit-mollom-captcha-wrapper').find('.form-required').remove();
            $('#edit-mollom-captcha-wrapper > label').text('Type the code below');

            // ---------------------------------

            $("#edit-mollom-captcha").keyup(function() {checkCreateAcctFields('create_account')});

            // Reword CAPTCHA error
            if ($('#messages-wrapper').length) {
                $messages = $('#messages-wrapper').find('.error');
                var str = $messages.html();

                // String Replacements
                $messages.html(str.replace(
                    'The word verification was not completed correctly. Please complete this new word verification and try again. If you feel this is in error, please ',
                    'Please complete the word verification to continue. This helps us prevent spam in our forums'
                ));

                // // String Replacements
                // $messages.html(str.replace(
                //     'To complete this form, please complete the word verification below.',
                //     'To complete this form, please complete the word verification.'
                // ));
            }
        }

        // // CAPTCHA Test Mode
        if ($('#messages-wrapper').length) { // If error message is found
            $messages_wrapper = $('#messages-wrapper');
            if ($messages_wrapper.find('.error:contains("Your submission has triggered the spam filter and will not be accepted. If you feel this is in error, please")')) {
                $messages_wrapper.find('.error').html($('#messages-wrapper').find('.error').html().replace(
                    'Your submission has triggered the spam filter and will not be accepted. If you feel this is in error, please ',
                    'An automated security monitor is preventing your account from being created. Please contact us for more information'
                ));
            }
        }

        // -----------------

        // WEB-9269 / TFM
        // -----------------
        if($('#edit-persistent-login-wrapper').length) {

            // Style "Keep me signed in" checkbox
            // --------------
            $('#edit-persistent-login-wrapper').removeClass('form-item');
            $('label[for="edit-persistent-login"]').removeClass('option');
            $('label[for="edit-persistent-login"]').css('cursor','pointer');
            var label_epl = $('label[for="edit-persistent-login"]').html();
            var input_epl = label_epl.substring(0,label_epl.indexOf('>')+1);
            var label_epl = label_epl.substring(label_epl.indexOf('>')+1);
            var spacer_epl = '&nbsp;&nbsp;';
            if($.browser.chrome) {spacer_epl = '&nbsp;&nbsp;&nbsp;';}
            var label_epl = input_epl+spacer_epl+label_epl;
            $('label[for="edit-persistent-login"]').html(label_epl);
            $('#edit-persistent-login').css('opacity','0');
            // --------------


            // "Keep me signed in" checkbox state
            // --------------
            // Toggle checkmark
            $('#edit-persistent-login').click(function() {
                if (readCookie('keep_me_signed_in') === "1") {
                    eraseCookie('keep_me_signed_in');
                    createCookie('keep_me_signed_in', "0", 1);
                    $('#keep_signed_in').val(0);
                    $('#edit-persistent-login-wrapper').css('background-image','url(/tesla_theme/images/own/own-terms-checkbox-off.png)');
                } 
                else {
                    eraseCookie('keep_me_signed_in');
                    createCookie('keep_me_signed_in', "1", 1);
                    $('#keep_signed_in').val(1);
                    $('#edit-persistent-login-wrapper').css('background-image','url(/tesla_theme/images/own/own-terms-checkbox-on.png)');
                }
            });

            // On page refresh set checkmark
            if (readCookie('keep_me_signed_in') !== null) {

                if (readCookie('keep_me_signed_in') === "1") {
                    $('#keep_signed_in').val(1);
                    $('#edit-persistent-login-wrapper').css('background-image','url(/tesla_theme/images/own/own-terms-checkbox-on.png)');
                }
                else {
                    $('#keep_signed_in').val(0);
                    $('#edit-persistent-login-wrapper').css('background-image','url(/tesla_theme/images/own/own-terms-checkbox-off.png)');
                }
            }
            // Create a new cookie if one doesn't exist
            else {
                createCookie('keep_me_signed_in', '0', 1);
                $('#keep_signed_in').val(1);
                $('#edit-persistent-login').click();
            }
            // --------------

        }


        if($('#edit-newsletter-wrapper').length) {

            // Style "Get Tesla Updates" checkbox
            // --------------
            $('#edit-newsletter-wrapper').removeClass('form-item');
            $('label[for="edit-newsletter"]').removeClass('option');
            $('label[for="edit-newsletter"]').css('cursor','pointer');
            var label_epl = $('label[for="edit-newsletter"]').html();
            var input_epl = label_epl.substring(0,label_epl.indexOf('>')+1);
            var label_epl = label_epl.substring(label_epl.indexOf('>')+1);
            var spacer_epl = '&nbsp;&nbsp;';
            if($.browser.chrome) {spacer_epl = '&nbsp;&nbsp;&nbsp;';}
            var label_epl = input_epl+spacer_epl+label_epl;
            $('label[for="edit-newsletter"]').html(label_epl);
            $('#edit-newsletter').css('opacity','0');
            // --------------

  
            // "Get Tesla Updates" checkbox state
            // --------------
            // Toggle checkmark
            $('#edit-newsletter').click(function() {
                if (readCookie('newsletter_indicator') === "1") {
                    eraseCookie('newsletter_indicator');
                    createCookie('newsletter_indicator', "0", 1);
                    $('#newsletter_indicator').val(0);
                    $('#edit-newsletter-wrapper').css('background-image','url(/tesla_theme/images/own/own-terms-checkbox-off.png)');
                } 
                else {
                    eraseCookie('newsletter_indicator');
                    createCookie('newsletter_indicator', "1", 1);
                    $('#newsletter_indicator').val(1);
                    $('#edit-newsletter-wrapper').css('background-image','url(/tesla_theme/images/own/own-terms-checkbox-on.png)');
                }
            });

            // On page refresh set checkmark
            if (readCookie('newsletter_indicator') !== null) {

                if (readCookie('newsletter_indicator') === "1") {
                    $('#newsletter_indicator').val(1);
                    $('#edit-newsletter-wrapper').css('background-image','url(/tesla_theme/images/own/own-terms-checkbox-on.png)');
                }
                else {
                    $('#newsletter_indicator').val(0);
                    $('#edit-newsletter-wrapper').css('background-image','url(/tesla_theme/images/own/own-terms-checkbox-off.png)');
                }
            }
            // Create a new cookie if one doesn't exist
            else {
                createCookie('newsletter_indicator', '0', 1);
                $('#newsletter_indicator').val(1);
                $('#edit-newsletter').click();
            }
            // --------------


        }
        // -----------------

        if($('#useremail-check-message').length) {
            var ur_notePosition = $('#edit-mail').position();
            var ur_notePositionX = ur_notePosition.left;
            var ur_notePositionY = ur_notePosition.top;
            $('#useremail-check-message').css('left',ur_notePositionX-250);
            $('#useremail-check-message').css('top',ur_notePositionY-20);
        }

    }
    // end create account page

    // if on change reservation page
    if(document.getElementById('page-mytesla-change-reservation')) {
        //$('#btnReserve').focus();
    }

    // Model X webcast items
    // Hack to get the background to stretch full width
    if ($('#webcast-variant').length != 0) {
        // $('body').css('background-image','none');
        $('body').css('background-image','url(/tesla_theme/images/modelx/bg_webcast.png)');

        $('#main-content').css('background-color','transparent');
    }

    // start mytesla profile
    if($('#page-user-me-edit').length || $('#page-user-edit').length) {

        var profile_error_msg = '';
        var profile_existing_msg = '';
        if($('#email-match-error').length) {
            profile_existing_msg = $('#email-match-error').val();
        }
        // if there's an error on the page (default drupal) then grab it and show it elsewhere
        if($('#messages-wrapper').length) {

            if($('.messages.error').length) {
                profile_error_msg = $('.messages.error').html();
            } else if($('.messages.status').length) {
                profile_error_msg = $('.messages.status').html();
            } else {
                profile_error_msg = Drupal.t('Your profile has been updated successfully.');
            }
            if(profile_error_msg != '') {
                if(profile_error_msg.indexOf('The changes have been saved') > 0) {
                    profile_error_msg = Drupal.t('Your profile has been updated successfully.');
                }
                if(profile_error_msg != '' && profile_existing_msg != '') {
                    profile_existing_msg = profile_error_msg + '<br/>' + profile_existing_msg;
                } else {
                    profile_existing_msg = profile_error_msg;
                }

            }
            $('#profile-msg-content-div').html(profile_existing_msg);
            if($('#profile-msg-content-div').css('display') == 'none') {
                if($('#profile-msg-content-div ul').length) {
                    $('#profile-msg-content-div ul').css('margin-bottom','0px');
                }
                $('#profile-msg-div').css('display','block');
                $('#profile-msg-content-div').fadeIn('slow');
            }
        // show save success message div
        } else if($('#edit-profile-savesuccess').length) {
            $('#profile-msg-content-div').html($('#edit-profile-savesuccess').val());
            $('#profile-msg-div').css('display','block');
            $('#profile-msg-content-div').fadeIn('slow');
        }

        if($('#browser').length) {
            if(!$.browser.msie) {
                $('#browser').val($.browser.version);
            }
        }

        if($('#edit-mail').length) {
            $('#edit-mail').val($('#edit-email').val());
        }

        if($('#edit-mail-wrapper').length) {
            $('#edit-mail-wrapper').removeClass('form-item');
        }

        if($('#edit-name-wrapper').length) {
            $('#edit-name-wrapper').removeClass('form-item');
        }

        if($('#edit-picture-upload-wrapper').length) {
            $('#edit-picture-upload-wrapper').removeClass('form-item');
        }

        if($('.picture').length) {
            $('.picture').css('display','none');
        }

        if($('#edit-picture-delete-wrapper').length) {
            $('#edit-picture-delete-wrapper').removeClass('form-item');
        }

        $('.mytesla-photo-chg-link').click(function() {
            openChangePhotoDiv();
        });

        if($('#edit-picture-upload').length) {

            $('.description').css('display','none');
            $('label[for="edit-picture-upload"]').css('display','none');

            if($.browser.msie) {
                $('#profile-form-div').css('display','block');
                $('.mytesla-photo-chg-link').unbind('click');
                $('.mytesla-photo-chg-link').click(function() {
                    $("html, body").animate({ scrollTop: ($("#profile-form-div").offset().top)-20 }, "slow");
                });
                $('#edit-picture-upload-wrapper').css('display','block');
                $('#edit-picture-upload-wrapper').before('<div class="profile-subhdr">'+Drupal.t('Change Your Profile Image')+'</div>');
                $('#edit-picture-upload-wrapper').css('background','none');
                $('#edit-picture-upload').css('opacity','1');
                // $('#edit-picture-upload').remove('form-file');
            } else {
                $('#edit-picture-upload-wrapper').append('<div id="edit-picture-btn-txt">'+Drupal.t('choose file')+'</div>');
                $('#edit-picture-upload').css({'opacity':'0','-khtml-appearance':'none','cursor':'pointer'});
                $('#edit-picture-upload').change(function() {
                    if(!$.browser.msie) {
                        $('#edit-picture-upload-wrapper').append('<div id="edit-picture-displayfile"></div>');
                        var msg = Drupal.t('Selected file:') + '<br/>' + $('#edit-picture-upload').val();
                        $('#edit-picture-displayfile').html(msg);
                        $('#edit-picture-displayfile').fadeIn('slow');
                    }
                });
            }
        }

        var multiplier = 6.3;
        if(Drupal.settings.tesla.locale == 'ja_JP') {
            multiplier = 9.5;
        }
        var notePositionW = $('label[for="edit-email"]').html().length * multiplier;
        var notePosition = $('#edit-email').position();
        var notePositionX = notePosition.left + notePositionW;
        var notePositionY = notePosition.top - 18;
        var locale = '';
        if(Drupal.settings.tesla.country != 'US') {
            locale = '/'+Drupal.settings.tesla.locale;
        }
        if(locale == '/ja_JP') {
            locale = '/jp';
        }
        if(locale == '/zh_CN') {
            locale = '/cn';
        }
        $('#profile-email-note').css('top',notePositionY);
        $('#profile-email-note').css('left',notePositionX);

        $('#profile-addr2-note').css('top',notePositionY);
        $('#profile-addr2-note').css('left',notePositionX+50);

        $('#profile-navbar-title').click(function() {
            window.location.href=locale+'/mytesla';
        });

        $('#profile-navbar-two').click(function(){
            window.location.href=locale+'/own/financing';
        });

        $('#profile-navbar-three').click(function(){
            window.location.href=locale+'/own/service';
        });

        $('#changepwd-btn-cancel').click(function() {
            $('#changepwd-error-div').html('');
            $('#changepwd-error-div').css('display','none');
            $('#profile-popup-closex').css('display','none');
            $('#edit-changepwd-current').val('');
            $('#edit-pass-pass1').val('');
            $('#edit-pass-pass2').val('');
            $('#profile-changepwd-div').css('display','none');
            $('#page-disable').fadeOut('slow',function() {
                $(this).remove();
            });
        });

        $('#changephoto-btn-cancel').click(function() {
            $('#changephoto-error-div').html('');
            $('#changephoto-error-div').css('display','none');
            $('#profile-popup-closex').css('display','none');
            $('#edit-picture-upload').val('');
            $('#profile-changephoto-div').css('display','none');
            $('#changephoto-processing-img').css('display','none');
            $('#page-disable').fadeOut('slow',function() {
                $(this).remove();
            });
        });

        $('#changepwd-btn-save').click(function() {
            submitChangePassword();
        });

        $('#changephoto-btn-save').click(function() {
            submitChangePhoto();
        });

        // cancel button functionality on profile page
        $('#btnSelectDOBack').click(function() {

            var back_destination = $('#edit-profile-destination').val();
            if (back_destination.indexOf('?')) {
                back_destination = back_destination.substring(0,back_destination.indexOf('?'));
            }

            window.location.href = back_destination;
        });

        // submit button functionality on profile page
        if($('#btnSelectDO').length) {
            $('#btnSelectDO').click(function() {
                submitUserEditForm();
            });
        }
        // set the overlay for main contact country select box
        setMailingCountryOverlay();

        // open the alternate contact div if user has one
        if($('#edit-profile-hasalt-contact').length && $('#edit-profile-hasalt-contact').val() == 'true') {
            changeProfileCountry('profile-alt-mailing-addr','altmailing','onready');
            // set the overlay for alternate contact country select box
            if($.browser.msie && $.browser.version < 9) {
                // do nothing, this will get handled later
            } else {
                setAltMailingCountryOverlay();
            }
        }

        // set alt contact open/close links only if altcontact container is available
        if($('#profile-altcontact-container').length && $('#profile-altcontact-container').css('display') == 'block') {
            $('#profile-addremove-icon').unbind('click');
            $('#profile-addremove-icon').click(function() {
                openAltContactDiv();
            });
            $('#profile-addremove-title').unbind('click');
            $('#profile-addremove-title').click(function() {
                openAltContactDiv();
            });
        }

        // set contact preference to 1st option by default
        // if($('#profile-contactprefs-radio1').length) {
        //     setProfileAltContactRadio(0);
        // }
        if($('#contact_prefs').length && $('#contact_prefs').val() == '1') {
            setProfileAltContactRadio($('#contact_prefs').val());
        } else {
            setProfileAltContactRadio(0);
        }


        if($('#removeprompt-btn-confirm-cancel').length) {
            $('#removeprompt-btn-confirm-cancel').click(function() {
                $('#profile-popup-closex').css('display','none');
                $('#profile-removeprompt-div').css('display','none');
                $('#page-disable').fadeOut('slow');
            });
        }

        if($('#removeprompt-btn-confirm').length) {
            $('#removeprompt-btn-confirm').click(function() {
                var window_height = $(window).height();
                var window_width = $(window).width();
                var x_position = window_width/2;
                var y_position = window_height/2;
                var pdiv_width = $('#processing-div').width();
                var pdiv_height = $('#processing-div').height();
                x_position = x_position - (pdiv_width/2);
                y_position = y_position - (pdiv_height/2);
                $('#processing-div').css('left',x_position);
                $('#processing-div').css('top',y_position);
                $('#processing-div').css('position','fixed');
                $('#profile-popup-closex').css('display','none');
                $('#profile-removeprompt-div').fadeOut('slow',function() {
                    $('#processing-div').fadeIn('slow',function() {
                        removeAltContact();
                    });
                });
            });
        }

        if($('#profile-form-div').length && $.browser.msie) {
            if($('#profile-form-div fieldset:first-child legend').html() == 'Account validation') {
                $('#profile-form-div fieldset:first-child').css('display','none');
            }
        }

    }
    // end mytesla profile

});
/////////////////////////// end onready

function setMailingCountryOverlay(origin) {
    // select element styling
    if($('#edit-mailing-country').length && !$('#mailing-country-overlay').length) {
        $('#edit-mailing-country').each(function(){
            var title = $(this).attr('title');
            if( $('option:selected', this).val() != ''  ) title = $('option:selected',this).text().substring(0,24);
            $(this)
                .css({'z-index':1,'opacity':0,'-khtml-appearance':'none'})
                .after('<span id="mailing-country-overlay" class="select-mailing">' + title + '</span>')
                .change(function(){
                    ctry_code = $('option:selected',this).val().toLowerCase();
                    val = $('option:selected',this).text().substring(0,24);
                    if(ctry_code == 'us' || ctry_code == 'ca' || ctry_code == 'au' || ctry_code == 'at' || ctry_code == 'be' || ctry_code == 'dk' || ctry_code == 'de' || ctry_code == 'fr' || ctry_code == 'gb' || ctry_code == 'it' || ctry_code == 'nl' || ctry_code == 'ch' || ctry_code == 'hk' || ctry_code == 'jp' || ctry_code == 'cn') {
                      val = '<img src="/tesla_theme/images/icn_'+ctry_code+'_flag_no_shadow.png" width="16" height="11" class="basic-flag" />&nbsp;' + val;
                    }
                    $('#mailing-country-overlay').html(val);
                })
                .keyup(function() {
                    ctry_code = $('option:selected',this).val().toLowerCase();
                    val = $('option:selected',this).text().substring(0,24);
                    if(ctry_code == 'us' || ctry_code == 'ca' || ctry_code == 'au' || ctry_code == 'at' || ctry_code == 'be' || ctry_code == 'dk' || ctry_code == 'de' || ctry_code == 'fr' || ctry_code == 'gb' || ctry_code == 'it' || ctry_code == 'nl' || ctry_code == 'ch' || ctry_code == 'hk' || ctry_code == 'jp' || ctry_code == 'cn') {
                      val = '<img src="/tesla_theme/images/icn_'+ctry_code+'_flag_no_shadow.png" width="16" height="11" class="basic-flag" />&nbsp;' + val;
                    }
                    $('#mailing-country-overlay').html(val);
                })
        });

        if(!origin) {
            changeProfileCountry('profile-owner-mailing-addr','mailing','onready');
        } else {
            changeProfileCountry('profile-owner-mailing-addr','mailing');
        }

        // set position of country dropdown overlay
        var countryPosition = $('#edit-mailing-country').position();
        var countryPositionX = countryPosition.left-3;
        var countryPositionY = countryPosition.top;
        if($.browser.safari) {
            countryPositionY = countryPosition.top-2;
        }
        var ctry_code = $('#edit-mailing-country').val().toLowerCase();
        var ctry_label = $('#edit-mailing-country option:selected').text().substring(0,24);
        $('#mailing-country-overlay').css('left',countryPositionX);
        $('#mailing-country-overlay').css('top',countryPositionY);
        // if locale supported country, show flag in dropdown
        if(ctry_code == 'us' || ctry_code == 'ca' || ctry_code == 'au' || ctry_code == 'at' || ctry_code == 'be' || ctry_code == 'dk' || ctry_code == 'de' || ctry_code == 'fr' || ctry_code == 'gb' || ctry_code == 'it' || ctry_code == 'nl' || ctry_code == 'ch' || ctry_code == 'hk' || ctry_code == 'jp' || ctry_code == 'cn') {
            $('#mailing-country-overlay').html('<img src="/tesla_theme/images/icn_'+ctry_code+'_flag_no_shadow.png" width="16" height="11" class="basic-flag" />&nbsp;'+ctry_label);
        }

        $('#mailing-country-overlay').fadeIn('slow');

    }
}

function setAltMailingCountryOverlay(origin) {

    if($('#edit-altmailing-country').length && !$('#altmailing-country-overlay').length) {
        $('#edit-altmailing-country').each(function(){
            var title = $(this).attr('title');
            if( $('option:selected', this).val() != ''  ) title = $('option:selected',this).text().substring(0,24);
            $(this)
                .css({'z-index':1,'opacity':0,'-khtml-appearance':'none'})
                .after('<span id="altmailing-country-overlay" class="select-mailing">' + title + '</span>')
                .change(function(){
                    ctry_code = $('option:selected',this).val().toLowerCase();
                    val = $('option:selected',this).text().substring(0,24);
                    if(ctry_code == 'us' || ctry_code == 'ca' || ctry_code == 'au' || ctry_code == 'at' || ctry_code == 'be' || ctry_code == 'dk' || ctry_code == 'de' || ctry_code == 'fr' || ctry_code == 'gb' || ctry_code == 'it' || ctry_code == 'nl' || ctry_code == 'ch' || ctry_code == 'hk' || ctry_code == 'jp' || ctry_code == 'cn') {
                      val = '<img src="/tesla_theme/images/icn_'+ctry_code+'_flag_no_shadow.png" width="16" height="11" class="basic-flag" />&nbsp;' + val;
                    }
                    $('#altmailing-country-overlay').html(val);
                })
                .keyup(function() {
                    ctry_code = $('option:selected',this).val().toLowerCase();
                    val = $('option:selected',this).text().substring(0,24);
                    if(ctry_code == 'us' || ctry_code == 'ca' || ctry_code == 'au' || ctry_code == 'at' || ctry_code == 'be' || ctry_code == 'dk' || ctry_code == 'de' || ctry_code == 'fr' || ctry_code == 'gb' || ctry_code == 'it' || ctry_code == 'nl' || ctry_code == 'ch' || ctry_code == 'hk' || ctry_code == 'jp' || ctry_code == 'cn') {
                      val = '<img src="/tesla_theme/images/icn_'+ctry_code+'_flag_no_shadow.png" width="16" height="11" class="basic-flag" />&nbsp;' + val;
                    }
                    $('#altmailing-country-overlay').html(val);
                })
        });

        if(origin) {
            // set position of country dropdown overlay
            var countryPosition = $('#edit-altmailing-country').position();
            var countryPositionX = countryPosition.left-3;
            var countryPositionY = countryPosition.top;
            var ctry_code = $('#edit-altmailing-country').val().toLowerCase();
            var ctry_label = $('#edit-altmailing-country option:selected').text().substring(0,24);
            $('#altmailing-country-overlay').css('left',countryPositionX);
            $('#altmailing-country-overlay').css('top',countryPositionY);
            // if locale supported country, show flag in dropdown
            if(ctry_code == 'us' || ctry_code == 'ca' || ctry_code == 'au' || ctry_code == 'at' || ctry_code == 'be' || ctry_code == 'dk' || ctry_code == 'de' || ctry_code == 'fr' || ctry_code == 'gb' || ctry_code == 'it' || ctry_code == 'nl' || ctry_code == 'ch' || ctry_code == 'hk' || ctry_code == 'jp' || ctry_code == 'cn') {
                $('#altmailing-country-overlay').html('<img src="/tesla_theme/images/icn_'+ctry_code+'_flag_no_shadow.png" width="16" height="11" class="basic-flag" />&nbsp;'+ctry_label);
            }
            $('#altmailing-country-overlay').fadeIn('slow');
        }
    }
}

function setProfileCloseX(origin,action) {
    if($('#profile-'+origin+'-div').length) {
        if(action == 'open') {
            var popLocation = $('#profile-'+origin+'-div').position();
            alert(popLocation.top);
            popLocationX = popLocation.left;
            popLocationY = popLocation.top;
            $('#profile-popup-closex').css('left',popLocationX);
            $('#profile-popup-closex').css('top',popLocationY);
            $('#profile-popup-closex').css('display','block');
        } else {
            $('#profile-popup-closex').css('display','none');
        }
    }
}

function checkProfileRequiredFields(origin) {

    // $('#btnSelectDO').css('opacity','0.6');
    var no_main_contact = false;
    var aContactReqd = new Array();
    var aReqd = new Array();
    aReqd.push('username');
    aReqd.push('first-name');
    aReqd.push('last-name');
    aReqd.push('email');

    if($('#edit-profile-contactid').length && $('#edit-profile-contactid').val() != '') {
        aReqd.push('phone');
        aReqd.push('mailing-address-1');
        if($('#edit-mailing-country').val() != 'JP') {
            aReqd.push('mailing-city');
        }
        if($('#edit-mailing-country').val() != 'CN') {
            aReqd.push('mailing-zip');
        }
        if($('#mailing-province-istextbox').length) {
            aReqd.push('mailing-state');
        }
    } else {
        no_main_contact = true;
        aContactReqd.push('phone');
        aContactReqd.push('mailing-address-1');
        if($('#edit-mailing-country').val() != 'JP') {
            aContactReqd.push('mailing-city');
        }
        if($('#edit-mailing-country').val() != 'CN') {
            aReqd.push('mailing-zip');
        }
        if($('#mailing-province-istextbox').length) {
            aContactReqd.push('mailing-state');
        }
    }
    if(($('#edit-profile-hasalt-contact').length && $('#edit-profile-hasalt-contact').val() == 'true') || ($('#edit-profile-addingalt-contact').length && $('#edit-profile-addingalt-contact').val() == '1')) {
        aReqd.push('altcontact-firstname');
        aReqd.push('altcontact-lastname');
        aReqd.push('altcontact-mail');
        aReqd.push('altcontact-phone');
        aReqd.push('altmailing-address-1');
        if($('#altmailing-country').val() != 'JP') {
            aReqd.push('altmailing-city');
        }
        if($('#altmailing-province-istextbox').length) {
            aReqd.push('altmailing-state');
        }
        if($('#edit-mailing-country').val() != 'CN') {
            aReqd.push('altmailing-zip');
        }
    }

    for(var i=0;i<aReqd.length;i++) {

        $('#edit-'+aReqd[i]).unbind('keyup');
        $('#edit-'+aReqd[i]).keyup(function() {
            // console.log('checking this field!');
            var incomplete = 0;
            for(var ii=0;ii<aReqd.length;ii++) {
                if($('#edit-'+aReqd[ii]).val() == '') {
                    incomplete = 1;
                }
            }
            if(incomplete == 0) {
                $('#btnSelectDO').css('opacity','1');
            } else {
                $('#btnSelectDO').css('opacity','0.6');
            }
        });
    }
    // new condition for users with no main mailing address and start to add one
    if(no_main_contact === true) {
        for(var i=0;i<aContactReqd.length;i++) {

            $('#edit-'+aContactReqd[i]).unbind('keyup');
            $('#edit-'+aContactReqd[i]).keyup(function() {
                // console.log('checking this field!');
                var incomplete = 0;
                var adding_contact = 0;
                for(var ii=0;ii<aContactReqd.length;ii++) {
                    if($('#edit-'+aContactReqd[ii]).val() != '') {
                        adding_contact = 1;
                    }
                }
                if(adding_contact == 1) {
                    if(!$('#edit-profile-addmaincontact').length) {
                        $('#user-profile-form').append('<input type="hidden" name="edit-profile-addmaincontact" id="edit-profile-addmaincontact" value="1" />');
                    }
                    for(var ii=0;ii<aContactReqd.length;ii++) {
                        if($('#edit-'+aContactReqd[ii]).val() == '') {
                            incomplete = 1;
                        }
                    }
                } else {
                    if($('#edit-profile-addmaincontact').length) {
                        $('#edit-profile-addmaincontact').remove();
                    }
                }
                if(incomplete == 0) {
                    $('#btnSelectDO').css('opacity','1');
                } else {
                    $('#btnSelectDO').css('opacity','0.6');
                }
            });
        }
    }

    if(origin) {
        var incomplete = 0;
        for(var j=0;j<aReqd.length;j++) {
            if($('#edit-'+aReqd[j]).val() == '') {
                incomplete = 1;
            }
        }
        if(no_main_contact === true) {
            incomplete = 0;
        }
        if(incomplete == 0) {
            // $('#btnSelectDO').unbind('click');
            $('#btnSelectDO').css('opacity','1');
            // $('#btnSelectDO').click(function() {
            //     submitUserEditForm();
            // });
        } else {
            $('#btnSelectDO').css('opacity','0.6');
        }
    }
    // $('#btnSelectDO').click(function() {
    //     submitUserEditForm();
    // });
}


/*
 * Do this stuff when the page is loaded -- any visible transistions
 */
$(window).load(function() {

    // fade in any tooltips
    $('.hover_tooltip').fadeIn(1500);
    // check to see if we need to show the locale blip
    checkCookie();

});

function makeCursor(obj) {
    document.getElementById(obj.id).style.cursor = 'pointer';
}

// onclick function for removing/deleting alternate contact
// calls submit user edit form which will submit the entire form
// and refresh the page
function removeAltContact() {

    var destination = $('#edit-profile-destination').val();
    $('#edit-profile-removealt-contact').val(1);
    submitUserEditForm('removeAltContact');

}

// updated function to change the mailing countries on the profile page.
// new ajax call to post new state/province values or empty text box if
// no related provinces/states.
// removed page refresh call which loses user input information
function changeProfileCountry(whichblock,fieldsegment,origin) {
    debug.error('****** changeProfileCountry invoked', whichblock, fieldsegment, origin);
    var container            = $('#'+whichblock);
    var selectedCountryIndex = document.getElementById('edit-'+fieldsegment+'-country').selectedIndex;
    var selectedCountry      = document.getElementById('edit-'+fieldsegment+'-country').options[selectedCountryIndex].value;
    var buyFlowCountry       = $('#edit-'+fieldsegment+'-country').val();
    var ln_container         = 'localname-container'; // china reservation

    //WEB-8685 for China, we must rely on saved values(hidden fields), will break if coming from other county
    var savedCountry = $('#edit-'+fieldsegment+'-country-h').val();
    if(origin || savedCountry == 'CN') {
        var mailing_addr1   = $('#edit-'+fieldsegment+'-address-1-h').val();
        var mailing_addr2   = $('#edit-'+fieldsegment+'-address-2-h').val();
        var mailing_city    = $('#edit-'+fieldsegment+'-city-h').val();
        var mailing_county  = $('#edit-'+fieldsegment+'-county-h').val();
        var mailing_state   = $('#edit-'+fieldsegment+'-state-h').val();
        var mailing_zip     = $('#edit-'+fieldsegment+'-zip-h').val();
        var mailing_country = $('#edit-'+fieldsegment+'-country-h').val();
    } else {
        var mailing_addr1 = $('#edit-'+fieldsegment+'-address-1').val();
        var mailing_addr2 = $('#edit-'+fieldsegment+'-address-2').val();
        var mailing_city  = $('#edit-'+fieldsegment+'-city').val();
        var mailing_county  = $('#edit-'+fieldsegment+'-county').val();
        var mailing_state = $('#edit-'+fieldsegment+'-state').val();
        var mailing_zip   = $('#edit-'+fieldsegment+'-zip').val();
    }

    var mailing_addr1_label      = $('#edit-mailing-addr1-label').val();
    var mailing_addr2_label      = $('#edit-mailing-addr2-label').val();
    var mailing_city_label       = $('#edit-mailing-city-label').val();
    var mailing_state_label      = $('#edit-mailing-state-label').val();
    var mailing_zip_label        = $('#edit-mailing-zip-label').val();
    var mailing_province_label   = $('#edit-mailing-province-label').val();
    var mailing_postalcode_label = $('#edit-mailing-postalcode-label').val();

    var mailing_addr1_css = '';
    var mailing_city_css  = '';
    var mailing_state_css = '';
    var mailing_zip_css   = '';

    if($('label[for="edit-'+fieldsegment+'-address-1"]').length && $('label[for="edit-'+fieldsegment+'-address-1"]').css('color') == 'rgb(204, 0, 0)') {
        mailing_addr1_css = 'error';
    }
    if($('label[for="edit-'+fieldsegment+'-city"]').length && $('label[for="edit-'+fieldsegment+'-city"]').css('color') == 'rgb(204, 0, 0)') {
        mailing_city_css = 'error';
    }
    if($('label[for="edit-'+fieldsegment+'-state"]').length && $('label[for="edit-'+fieldsegment+'-state"]').css('color') == 'rgb(204, 0, 0)') {
        mailing_state_css = 'error';
    }
    if($('label[for="edit-'+fieldsegment+'-zip"]').length && $('label[for="edit-'+fieldsegment+'-zip"]').css('color') == 'rgb(204, 0, 0)') {
        mailing_zip_css = 'error';
    } else if($('#'+fieldsegment+'-zip-error').length) {
        mailing_zip_css = 'error';
    }

    if(!mailing_addr1) {mailing_addr1 = '';}
    if(!mailing_addr2) {mailing_addr2 = '';}
    if(!mailing_city) {mailing_city = '';}
    if(!mailing_state) {mailing_state = '';}
    if(!mailing_zip) {mailing_zip = '';}
    if(!mailing_country) {mailing_country = '';}

    if(fieldsegment == 'altmailing') {
        ln_container = 'alt-localname-container';
    }
    var user_selected = ( typeof(origin) != 'undefined' || origin == 'onready' ) ? false : true;

    // Swith places for first and last name fields for China
    var $lNameWrapper = $("#edit-last-name-wrapper").parent(),
        $fNameWrapper = $("#col-left #edit-first-name-wrapper").parent();

    if(selectedCountry == "CN") {
        $fNameWrapper.before($lNameWrapper);
        $lNameWrapper.parent().addClass("CN");
    }
    else {
        $fNameWrapper.after($lNameWrapper);
        $lNameWrapper.parent().removeClass("CN");
    }
    
    var data_mail_country = {countryTo: selectedCountry, address1: mailing_addr1, address2: mailing_addr2, city: mailing_city, county: mailing_county, state: mailing_state, zip: mailing_zip, country: mailing_country, mailing_addr1_lbl: mailing_addr1_label, mailing_addr2_lbl:mailing_addr2_label, mailing_city_lbl:mailing_city_label, mailing_state_lbl:mailing_state_label,mailing_zip_lbl:mailing_zip_label,mailing_province_lbl:mailing_province_label,mailing_postalcode_lbl:mailing_postalcode_label,segment:fieldsegment,addr1_css:mailing_addr1_css,city_css:mailing_city_css,state_css:mailing_state_css,zip_css:mailing_zip_css,user_selected:user_selected};
    debug.error('***** data_mail_country', data_mail_country);

    $.post("/mytesla/mailing-country", data_mail_country,
        function(data) {
        if(origin) {
            container.html(data);
            container.css('display','block');
            showMailingState();
            if(fieldsegment == 'altmailing') {
                openAltContactDiv('noscroll');
            }
        } else {
            container.fadeOut(function() {
                container.html(data);
                container.fadeIn(function() {
                    showMailingState();
                });
            });
        }

        if(selectedCountry == 'JP' || selectedCountry == 'CN') {
            if($('#'+ln_container).css('display') == 'none') {
                $('#'+ln_container).fadeIn('slow');
            }
        } else {
            if($('#'+ln_container).css('display') == 'block') {
                $('#'+ln_container).fadeOut('slow');
            }
        }
    });

    function showMailingState() {
        var selectedCountry = document.getElementById('edit-'+fieldsegment+'-country').options[selectedCountryIndex].value;
        if(selectedCountry != 'CN') {
            //WEB-11244
            if (!$('#province-selectbox-hidden').length){
                // select element styling
                if(!$('#'+fieldsegment+'-province-istextbox').length) {
                    $('#edit-'+fieldsegment+'-state').each(function(){
                        var title = $(this).attr('title');
                        if( $('option:selected', this).val() != ''  ) title = $('option:selected',this).text();
                        $(this)
                            .css({'z-index':13,'opacity':0,'-khtml-appearance':'none'})
                            // .after('<span id="mailing-state-overlay" class="select-mailing">' + title.substring(0,38) + '</span>')
                            .unbind('change')
                            .unbind('keyup')
                            .change(function(){
                                val = $('option:selected',this).text();
                                $('#'+fieldsegment+'-state-overlay').html(val.substring(0,22));
                            })
                            .keyup(function() {
                                val = $('option:selected',this).text();
                                $('#'+fieldsegment+'-state-overlay').html(val.substring(0,22));
                            })
                    });

                    var provPosition = $('#edit-'+fieldsegment+'-state').position();
                    var provPositionX = provPosition.left - 2;
                    var provPositionY = provPosition.top + 2;
                    if(selectedCountry == 'JP') {
                        provPositionX = provPositionX - 2;
                    }
                    $('#'+fieldsegment+'-state-overlay').css('left',provPositionX);
                    $('#'+fieldsegment+'-state-overlay').css('top',provPositionY);
                    if(origin) {
                        $('#mailing-state-overlay').fadeIn('fast');
                    } else {
                        // if($('#edit-'+fieldsegment+'-state').css('display') == 'none') {
                            $('#'+fieldsegment+'-state-overlay').fadeIn('fast');
                        // }
                    }
                }
            }
            checkProfileRequiredFields('onready');
        } else {
            loadChinaRegions(fieldsegment);
            ////////////////////////////////
            // start province overlay
            if ($('#edit-'+fieldsegment+'-99-province').length && !$('#edit-'+fieldsegment+'-99-province-overlay').length) {
                $('#edit-'+fieldsegment+'-99-province').each(function(){
                    var title = $(this).attr('title');
                    if ( $('option:selected', this).val() !== '' ) title = $('option:selected',this).text().substring(0,8);
                    $(this)
                        .css({'z-index':13,'opacity':0,'-khtml-appearance':'none','height':'40px'})
                        .after('<span id="edit-'+fieldsegment+'-99-province-overlay" class="select-short" style="display:none;" tabindex="0">' + title + '</span>')
                        .change(function(){
                            val = $('option:selected',this).text();
                            $('#edit-'+fieldsegment+'-99-province-overlay').html(val.substring(0,8));
                        })
                        .keyup(function() {
                            val = $('option:selected',this).text();
                            $('#edit-'+fieldsegment+'-99-province-overlay').html(val.substring(0,8));
                        })
                });

                setTimeout(function() {
                    var provPosition = $('#edit-'+fieldsegment+'-99-province').position();
                    var provPositionX = provPosition.left-2;
                    var provPositionY = provPosition.top+2; // -4
                    $('#edit-'+fieldsegment+'-99-province-overlay').css('left',provPositionX);
                    $('#edit-'+fieldsegment+'-99-province-overlay').css('top',provPositionY);
                    $('#edit-'+fieldsegment+'-99-province-overlay').fadeIn('slow');
                },1000);
            }
            else {
                // reposition just in case...
                setTimeout(function() {
                    var provPosition = $('#edit-'+fieldsegment+'99-province').position();
                    var provPositionX = provPosition.left-2;
                    var provPositionY = provPosition.top+2; // -4
                    $('#edit-'+fieldsegment+'-99-province-overlay').css('left',provPositionX);
                    $('#edit-'+fieldsegment+'-99-province-overlay').css('top',provPositionY);
                    $('#edit-'+fieldsegment+'-99-province-overlay').fadeIn('slow');
                },1000);
            }

            ////////////////////////////////
            // start city overlay
            if ($('#edit-'+fieldsegment+'-99-city').length && !$('#edit-'+fieldsegment+'-99-city-overlay').length) {
                $('#edit-'+fieldsegment+'-99-city').each(function(){
                    var title = $(this).attr('title');
                    if ( $('option:selected', this).val() !== '' ) title = $('option:selected',this).text().substring(0,8);
                    $(this)
                        .css({'z-index':13,'opacity':0,'-khtml-appearance':'none','height':'40px'})
                        .after('<span id="edit-'+fieldsegment+'-99-city-overlay" class="select-short" style="display:none;" tabindex="0">' + title + '</span>')
                        .change(function(){
                            val = $('option:selected',this).text();
                            $('#edit-'+fieldsegment+'-99-city-overlay').html(val.substring(0,8));
                        })
                        .keyup(function() {
                            val = $('option:selected',this).text();
                            $('#edit-'+fieldsegment+'-99-city-overlay').html(val.substring(0,8));
                        })
                });

                setTimeout(function() {
                    var cityPosition = $('#edit-'+fieldsegment+'-99-city').position();
                    var cityPositionX = cityPosition.left-2;
                    var cityPositionY = cityPosition.top; // -4
                    $('#edit-'+fieldsegment+'-99-city-overlay').css('left',cityPositionX);
                    $('#edit-'+fieldsegment+'-99-city-overlay').css('top',cityPositionY);
                    $('#edit-'+fieldsegment+'-99-city-overlay').fadeIn('slow');
                },1000);
            }
            else {
                // reposition just in case...
                setTimeout(function() {
                    var cityPosition = $('#edit-'+fieldsegment+'-99-city').position();
                    var cityPositionX = cityPosition.left-2;
                    var cityPositionY = cityPosition.top; // -4
                    $('#edit-'+fieldsegment+'-99-city-overlay').css('left',cityPositionX);
                    $('#edit-'+fieldsegment+'-99-city-overlay').css('top',cityPositionY);
                    $('#edit-'+fieldsegment+'-99-city-overlay').fadeIn('slow');
                },1000);
            }

            ////////////////////////////////
            // start district overlay
            if ($('#edit-'+fieldsegment+'-99-district').length && !$('#edit-'+fieldsegment+'-99-district-overlay').length) {
                $('#edit-'+fieldsegment+'-99-district').each(function(){
                    var title = $(this).attr('title');
                    if ( $('option:selected', this).val() !== '' ) title = $('option:selected',this).text().substring(0,8);
                    $(this)
                        .css({'z-index':13,'opacity':0,'-khtml-appearance':'none','height':'40px'})
                        .after('<span id="edit-'+fieldsegment+'-99-district-overlay" class="select-short" style="display:none;" tabindex="0">' + title + '</span>')
                        .change(function(){
                            val = $('option:selected',this).text();
                            $('#edit-'+fieldsegment+'-99-district-overlay').html(val.substring(0,8));
                        })
                        .keyup(function() {
                            val = $('option:selected',this).text();
                            $('#edit-'+fieldsegment+'-99-district-overlay').html(val.substring(0,8));
                        })
                });

                setTimeout(function() {
                    var distPosition = $('#edit-'+fieldsegment+'-99-district').position();
                    var distPositionX = distPosition.left-2;
                    var distPositionY = distPosition.top+2; // -4
                    $('#edit-'+fieldsegment+'-99-district-overlay').css('left',distPositionX);
                    $('#edit-'+fieldsegment+'-99-district-overlay').css('top',distPositionY);
                    $('#edit-'+fieldsegment+'-99-district-overlay').fadeIn('slow');
                },1000);
            }
            else {
                // reposition just in case...
                setTimeout(function() {
                    var distPosition = $('#edit-'+fieldsegment+'-99-district').position();
                    var distPositionX = distPosition.left-2;
                    var distPositionY = distPosition.top+2; // -4
                    $('#edit-'+fieldsegment+'-99-district-overlay').css('left',distPositionX);
                    $('#edit-'+fieldsegment+'-99-district-overlay').css('top',distPositionY);
                    $('#edit-'+fieldsegment+'-99-district-overlay').fadeIn('slow');
                },1000);
            }
            //china dropdowns
            //change handler for province dropdown(updates city dropdown)
            $( "#edit-"+fieldsegment+"-99-province" ).change(function() {
                $('#edit-'+fieldsegment+'-99-city-overlay').hide();
                $( "#edit-"+fieldsegment+"-99-city" ).html('');
                    $.each( chinaPCDMap[this.value], function( i, object ) {
                        $( "<option>" ).attr( "value", i ).html(i).appendTo("#edit-"+fieldsegment+"-99-city");
                    });
                $( "#edit-"+fieldsegment+"-99-city" ).change(); //trigger city change event
                $('#edit-'+fieldsegment+'-99-city-overlay').fadeIn('slow');
            });

            //change handler for city dropdown(updates district dropdown)
            $( "#edit-"+fieldsegment+"-99-city" ).change(function() {
                $('#edit-'+fieldsegment+'-99-district-overlay').hide();
                $( "#edit-"+fieldsegment+"-99-district" ).html('');
                    var province = $("#edit-"+fieldsegment+"-99-province").val();
                    $.each( chinaPCDMap[province][this.value], function( k, v ) {
                        $( "<option>" ).attr( "value", v ).html(v).appendTo("#edit-"+fieldsegment+"-99-district");
                    });
                $( "#edit-"+fieldsegment+"-99-district" ).change();
                $('#edit-'+fieldsegment+'-99-district-overlay').fadeIn('slow');
            });
            checkProfileRequiredFields('onready');
        }
    }
}

//used both in user profile page AND car profile page(registration block)
var chinaPCDMap = ''; //holds mapping of china regions for dropdowns in china order flow ie. province[city][n][districts]
function loadChinaRegions(fieldsegment){
    if(chinaPCDMap == '') {
        $.getJSON( Drupal.settings.basePath + 'sites/all/modules/99bill/province_city_district_map.json', {
            format: "json"
        }).done(function( data ) {
            chinaPCDMap = data;
            populateChinaDropdowns(fieldsegment,chinaPCDMap);
        });
    } else {
        populateChinaDropdowns(fieldsegment,chinaPCDMap);
    }
}

/**
  * China Order Flow function that gives value to the province/city/district dropdowns unique
  * to the country in the payment block. Only populates province dropdown and then triggers
  * change event to have the others be updated based on the value selected.
*/
function populateChinaDropdowns(fieldsegment, map) {
    var country = $('#edit-'+fieldsegment+'-99-hidden-country').val();
    //only use account values if account country is china since we need to match values with json map
    if(country == 'CN'){
        var p = ($('#edit-'+fieldsegment+'-99-hidden-province').val() != '' ? $('#edit-'+fieldsegment+'-99-hidden-province').val() : "");
        var c = ($('#edit-'+fieldsegment+'-99-hidden-city').val() != '' ? $('#edit-'+fieldsegment+'-99-hidden-city').val() : "");
        var d = ($('#edit-'+fieldsegment+'-99-hidden-district').val() != '' ? $('#edit-'+fieldsegment+'-99-hidden-district').val() : "");
    } else {
        var p = "";
        var c = "";
        var d = "";
    }

    //reset province dropdown before loading its values
    $( "#edit-"+fieldsegment+"-99-province" ).html('');
    // $( "<option>" ).attr( "value", " " ).html("").appendTo("#edit-99-province"); //default value
    _.each( map, function(object, i) {
        if(p == i){
            $( "<option selected>" ).attr( "value", i ).html(i).appendTo("#edit-"+fieldsegment+"-99-province");
        } else {
            $( "<option>" ).attr( "value", i ).html(i).appendTo("#edit-"+fieldsegment+"-99-province");
        }
    });
    $("#edit-"+fieldsegment+"-99-province").trigger('keyup');

    //city
    $( "#edit-"+fieldsegment+"-99-city" ).html('');
    // $( "<option>" ).attr( "value", " " ).html("/").appendTo("#edit-99-city"); //default value
    if(p != 0){
        _.each( _.keys(map[p]), function( object, i, list) {
            if(c == object){
                $( "<option selected>" ).attr( "value", object ).html(object).appendTo("#edit-"+fieldsegment+"-99-city");
            } else {
                $( "<option>" ).attr( "value", object ).html(object).appendTo("#edit-"+fieldsegment+"-99-city");
            }
        });
    }
    $("#edit-"+fieldsegment+"-99-city").trigger('keyup');

    //district
    $( "#edit-"+fieldsegment+"-99-district" ).html('');
    // $( "<option>" ).attr( "value", " " ).html("").appendTo("#edit-99-district"); //default value
    if(p != 0 && c != 0){
        _.each( map[p][c], function( value, i, list) {
            if(d == value){
                $( "<option selected>" ).attr( "value", value ).html(value).appendTo("#edit-"+fieldsegment+"-99-district");
            } else {
                $( "<option>" ).attr( "value", value ).html(value).appendTo("#edit-"+fieldsegment+"-99-district");
            }
        });
    }
    $("#edit-"+fieldsegment+"-99-district").trigger('keyup');
}

function selectPhotoFile() {
    if($('#edit-picture-upload').length) {
        $('#edit-picture-upload').click();
    }
}

function submitChangePhoto() {
    // files[0]
    // .size, .type,
    // image/jpeg, image/png, image/gif, image/jpeg
    var file_error_msg = 'Sorry, there was an error saving your image.  Please try again.';
    var is_valid_filetype = false;
    var is_oversized_file = false;
    var aFileTypes = new Array();
    aFileTypes.push('image/jpeg');
    aFileTypes.push('image/jpg');
    aFileTypes.push('image/png');
    aFileTypes.push('image/gif');

    if($('#edit-picture-upload').length) {
        var photo_file = document.getElementById('edit-picture-upload');
        for(var i=0;i<aFileTypes.length;i++) {
            if(!$.browser.msie) {
                if(photo_file.files[0].type == aFileTypes[i]) {
                    is_valid_filetype = true;
                }
                if(photo_file.files[0].size > 2097152) {
                    is_oversized_file = true;
                }
            } else {
                if(photo_file.value.toLowerCase().indexOf(aFileTypes[i].toLowerCase())) {
                    is_valid_filetype = true;
                }
                if(photo_file.size > 2097152) {
                    is_oversized_file = true;
                }
            }
        }

        if(is_valid_filetype == true && is_oversized_file == false) {
            $('#changephoto-processing-img').fadeIn('fast');
            // save the rest of the form
            document.forms['user-profile-form'].submit();
        } else {
            if(is_valid_filetype == false) {
                file_error_msg = 'Your selected image is not one of the accepted file types.  Please select an image in either JPEG/JPG, PNG, or GIF file format.';
            } else if(is_oversized_file == true) {
                file_error_msg = 'Your selected image exceeds the file size limitations.  Please select a different image or resize your image.';
            }
            $('#changephoto-error-div').html('<p>'+file_error_msg+'</p>');
            $('#changephoto-error-div').slideDown('slow');
            $('#changephoto-processing-img').css('display','none');
        }
    }
}

function profileFillEmail(obj) {
    if($('#edit-mail').length) {
        $('#edit-mail').val(obj.value);
    }
}

function profileFillUsername(obj) {
    if($('#edit-name').length) {
        $('#edit-name').val(obj.value);
    }
    $(obj).blur(function () {
         $(obj).val(trim(obj.value));
         $('#edit-name').val(trim(obj.value));
    });
}

function submitChangePassword() {
    // var minpwdlen = 6;
    // var minpwdlen_inwords ="six";
    // var sf_pwd_strength = document.getElementById('sf-pwd-strength').value;
    // if(sf_pwd_strength){
    //     if(sf_pwd_strength == "Strong"){
    //         minpwdlen=8;
    //         minpwdlen_inwords ="eight";
    //         document.getElementById("edit-profile-pwdlen-error").value = Drupal.t('Your new password must be at least ' + minpwdlen+ ' characters');
    //         // Refer template.php for edit-profile-pwdlen-error

    //     }
    //     else{
    //         minpwdlen=6;
    //         minpwdlen_inwords ="six";

    //     }
    // }

    if($('#changepwd-error-div').css('display') == 'block') {
        $('#changepwd-error-div').css('display','none');
    }

    var form_error = 0;
    var form_error_msg = '';
    var container = $('#changepwd-content-body');
    var current_pwd = $('#edit-changepwd-current').val();
    var new_pwd = $('#edit-pass-pass1').val();
    var confirm_pwd = $('#edit-pass-pass2').val();
    var uid = $('#edit-profile-uid').val();
    var user_email = $('#edit-email').val();
    var user_name = $('#edit-username').val();

    var hasLetters = new_pwd.match(/[a-zA-Z]+/);
    var hasNumbers = new_pwd.match(/[0-9]+/);
    var hasPunctuation = new_pwd.match(/[^a-zA-Z0-9]+/);
    var hasCasing = new_pwd.match(/[a-z]+.*[A-Z]+|[A-Z]+.*[a-z]+/);

    // start validate
    if(current_pwd == null || current_pwd == '') {
        form_error = 1;
        form_error_msg = $('#edit-profile-cpwd-error').val() + '<br>';
    }
    if(new_pwd == null || new_pwd == '') {
        form_error = 1;
        form_error_msg = form_error_msg + $('#edit-profile-npwd-error').val() + '<br>';
    }
    if(confirm_pwd == null || confirm_pwd == '') {
        form_error = 1;
        form_error_msg = form_error_msg + $('#edit-profile-cfpwd-error').val() + '<br>';
    }
    if(form_error == 0 && new_pwd != confirm_pwd) {
        form_error = 1;
        form_error_msg = $('#edit-profile-pwdmatch-error').val();
    }
    if(form_error == 0 && new_pwd.length < 6) {
        form_error = 1;
        form_error_msg = $('#edit-profile-pwdlen-error').val();
    }
    else{
        var count = (hasLetters ? 1 : 0) + (hasNumbers ? 1 : 0);
        strength_pass = count > 1 ? "pass" : "fail";
            if(strength_pass == "fail"){
                form_error_msg = Drupal.t('For your security, please provide a password at least six characters long that contains at least one number and one letter.');
                form_error = 1;
            }
    }


    // var error_msg_hdr = '<strong>'+$('#edit-profile-error-hdr').val()+'</strong><br>';
    // form_error_msg = error_msg_hdr + form_error_msg;
    // form_error_msg = form_error_msg + '<br><input type="button" name="closePopup" id="closePopup" value=" '+$('#edit-profile-error-showme').val()+' " />';

    if(form_error != 0) {
        $('#changepwd-error-div').html(form_error_msg);
        $('#changepwd-error-div').slideDown('slow');
    } else {
        var destination = $('#edit-profile-destination').val();
        $('#changepwd-processing-img').fadeIn('fast');
        $.post("/mytesla/change-password", {current_pass: current_pwd, new_pass: new_pwd, uid:uid, email:user_email, username:user_name}, function(data) {
            if(data.success == 'true') {
                window.location.href = destination + '?success=true';
            } else {
                $('#changepwd-error-div').html('Sorry, there was an error in saving your new password, please try again.');
                $('#changepwd-error-div').slideDown('slow');
                $('#changepwd-processing-img').css('display','none');
            }
        }, 'json');
    }

}

function submitUserEditForm(origin) {

    // validate the form fields
    var form_error = 0;
    var form_error_msg = '';
    var username      = $('#edit-username').val();
    var fname         = $('#edit-first-name').val();
    var lname         = $('#edit-last-name').val();
    var email         = $('#edit-mail').val();
    var phone         = $('#edit-phone').val();
    var mailing_addr1 = $('#edit-mailing-address-1').val();
    var mailing_city  = $('#edit-mailing-city').val();
    var mailing_zip   = $('#edit-mailing-zip').val();
    if($('#istextbox-mailing').length) {
        var state = $('#edit-mailing-state').val();
    }

    var contact_error        = 0;
    var altcontact_error     = 0;
    var aFields              = new Array();
    var aErrorFields         = new Array();
    var has_alt_contact      = 'false';
    var isowner              = 'false';
    var is_adding_altcontact = 'false';
    // alternate contact fields
    var ac_fname             = $('#edit-altcontact-firstname').val();
    var ac_lname             = $('#edit-altcontact-lastname').val();
    var ac_email             = $('#edit-altcontact-mail').val();
    var ac_phone             = $('#edit-altcontact-phone').val();
    var ac_addr1             = $('#edit-altmailing-address-1').val();
    var ac_city              = $('#edit-altmailing-city').val();
    var ac_zip               = $('#edit-altmailing-zip').val();
    if($('#istextbox-altmailing').length) {
        var ac_state = $('#edit-altmailing-state').val();
    }

    $('#profile-msg-div').css('display','none');
    $('#profile-alt-msg-div').css('display','none');

    if($('#edit-profile-hasalt-contact').length && $('#edit-profile-hasalt-contact').val() == 'true') {
        has_alt_contact = 'true';
    }

    if($('#edit-profile-addingalt-contact').length && $('#edit-profile-addingalt-contact').val() == '1') {
        is_adding_altcontact = 'true';
    }

    if($('#edit-profile-teslaAccountId').length && $('#edit-profile-teslaAccountId').val() != '') {
        isowner = 'true';
    }

    aFields.push('username');
    aFields.push('first-name');
    aFields.push('last-name');
    aFields.push('mail');
    aFields.push('phone');
    aFields.push('mailing-address-1');
    aFields.push('mailing-city');
    if(state) {
        aFields.push('mailing-state');
    }
    aFields.push('mailing-zip');

    if(has_alt_contact == 'true' || is_adding_altcontact == 'true') {
        aFields.push('altcontact-firstname');
        aFields.push('altcontact-lastname');
        aFields.push('altcontact-mail');
        aFields.push('altcontact-phone');
        aFields.push('altmailing-address-1');
        aFields.push('altmailing-city');
        if($('#istextbox-altmailing').length) {
            aFields.push('altmailing-state');
        }
        aFields.push('altmailing-zip');
    }

    for(var i=0;i<aFields.length;i++) {
        if($('label[for="edit-'+aFields[i]+'"]').length && $('label[for="edit-'+aFields[i]+'"]').attr('style')) {
            $('label[for="edit-'+aFields[i]+'"]').removeAttr('style');
        }
    }

    if(username == '') {
        form_error = 1;
        contact_error++;
        form_error_msg = form_error_msg + '&nbsp;' + $('#edit-profile-username-error').val() + '<br>';
        aErrorFields.push('username');
    }

    if(fname == '') {
        form_error = 1;
        contact_error++;
        form_error_msg = form_error_msg + '&nbsp;' + $('#edit-profile-fname-error').val() + '<br>';
        aErrorFields.push('first-name');
    }

    if(lname == '') {
        form_error = 1;
        contact_error++;
        form_error_msg = form_error_msg + '&nbsp;' + $('#edit-profile-lname-error').val() + '<br>';
        aErrorFields.push('last-name');
    }

    if(email == '') {
        form_error = 1;
        contact_error++;
        form_error_msg = form_error_msg + '&nbsp;' + $('#edit-profile-email-error').val() + '<br>';
        aErrorFields.push('email');
    } else if(email != '' && checkEmail(email) == false) {
        form_error = 1;
        contact_error++;
        form_error_msg = form_error_msg + '&nbsp;' + $('#edit-profile-email-error').val() + '<br>';
        aErrorFields.push('email');
    }

    // validate if is owner, then validate mailing address
    if(isowner == 'true' || has_alt_contact == 'true') {

        if(phone == '') {
            form_error = 1;
            contact_error++;
            form_error_msg = form_error_msg + '&nbsp;' + $('#edit-profile-phone-error').val() + '<br>';
            aErrorFields.push('phone');
        }
        if(mailing_addr1 == '') {
            form_error = 1;
            contact_error++;
            form_error_msg = form_error_msg + '&nbsp;' + $('#edit-profile-mailingaddr1-error').val() + '<br>';
            aErrorFields.push('mailing-address-1');
        }
        if(mailing_city == '') {
            form_error = 1;
            contact_error++;
            form_error_msg = form_error_msg + '&nbsp;' + $('#edit-profile-city-error').val() + '<br>';
            aErrorFields.push('mailing-city');
        }
        if(state) {
            if(mailing_state == '') {
                form_error = 1;
                contact_error++;
                form_error_msg = form_error_msg + '&nbsp;' + $('#edit-profile-state-error').val() + '<br>';
                aErrorFields.push('mailing-state');
            }
        }
        if($('#edit-mailing-country').val() != 'CN') {
            if(mailing_zip == '') {
                form_error = 1;
                contact_error++;
                form_error_msg = form_error_msg + '&nbsp;' + $('#edit-profile-zip-error').val() + '<br>';
                aErrorFields.push('mailing-zip');
            }
        }
    }

    // start validation of alternate contact fields only if any one field has been filled in
    // validate only if at least one text field is filled out at the time of submit
    // if((ac_fname != undefined && ac_fname != '') || (ac_lname != undefined && ac_lname != '') || (ac_email != undefined && ac_email != '') || (ac_phone != undefined && ac_phone != '') || (ac_addr1 != undefined && ac_addr1 != '') || (ac_city != undefined && ac_city != '') || (ac_zip != undefined && ac_zip != '')) {
    if(has_alt_contact == 'true' || is_adding_altcontact == 'true') {
        if(ac_fname == '') {
            form_error = 1;
            form_error_msg = form_error_msg + '&nbsp;' + $('#edit-profile-fname-error').val() + '<br>';
            aErrorFields.push('altcontact-firstname');
            altcontact_error++;
        }
        if(ac_lname == '') {
            form_error = 1;
            form_error_msg = form_error_msg + '&nbsp;' + $('#edit-profile-lname-error').val() + '<br>';
            aErrorFields.push('altcontact-lastname');
            altcontact_error++;
        }
        if(ac_email == '') {
            form_error = 1;
            form_error_msg = form_error_msg + '&nbsp;' + $('#edit-profile-email-error').val() + '<br>';
            aErrorFields.push('altcontact-mail');
            altcontact_error++;
        } else if(ac_email != '' && ac_email != undefined && checkEmail(ac_email) == false) {
            form_error = 1;
            form_error_msg = form_error_msg + '&nbsp;' + $('#edit-profile-email-error').val() + '<br>';
            aErrorFields.push('altcontact-mail');
            altcontact_error++;
        }
        if(ac_phone == '') {
            form_error = 1;
            form_error_msg = form_error_msg + '&nbsp;' + $('#edit-profile-phone-error').val() + '<br>';
            aErrorFields.push('altcontact-phone');
            altcontact_error++;
        }
        if(ac_addr1 == '') {
            form_error = 1;
            form_error_msg = form_error_msg + '&nbsp;' + $('#edit-profile-mailingaddr1-error').val() + '<br>';
            aErrorFields.push('altmailing-address-1');
            altcontact_error++;
        }
        if(ac_city == '') {
            form_error = 1;
            form_error_msg = form_error_msg + '&nbsp;' + $('#edit-profile-city-error').val() + '<br>';
            aErrorFields.push('altmailing-city');
            altcontact_error++;
        }
        if($('#istextbox-altmailing').length) {
            if(ac_state == '') {
                form_error = 1;
                form_error_msg = form_error_msg + '&nbsp;' + $('#edit-profile-state-error').val() + '<br>';
                aErrorFields.push('altmailing-state');
                altcontact_error++;
            }
        }
        if($('#edit-mailing-country').val() != 'CN') {
            if(ac_zip == '') {
                form_error = 1;
                form_error_msg = form_error_msg + '&nbsp;' + $('#edit-profile-zip-error').val() + '<br>';
                aErrorFields.push('altmailing-zip');
                altcontact_error++;
            }
        }
    }

    if(form_error != 0) {
        // remove existing divs
        if($('#page-disable').length) {
            $('#page-disable').remove();
        }
        if($('#error-popup').length) {
            $('#error-popup').remove();
        }
        if($('#processing-div').length && $('#processing-div').css('display') == 'block') {
            $('#processing-div').css('display','none');
        }

        var error_message = Drupal.t('A required field has been left blank. It is highlighted below in red.');
        var alt_error_message = Drupal.t('A required field has been left blank. It is highlighted below in red.');
        if(contact_error > 1) {
            error_message = Drupal.t('Some required fields have been left blank. They are highlighted below in red.');
        }
        if(altcontact_error > 1) {
            alt_error_message = Drupal.t('Some required fields have been left blank. They are highlighted below in red.');
        }

        // weigh which section has more errors and scroll to it.
        if(contact_error != 0) {
            var scrollto_div = 'profile-msg-div';
            $('#profile-msg-div').css('display','block');
            $('#profile-msg-content-div').html(error_message);
            $('#profile-msg-content-div').fadeIn('slow');
            // $('#mailing-country-overlay').fadeOut('slow',function() {
                $('#mailing-country-overlay').remove();
            // });
        } else {
            if(has_alt_contact == 'true' || is_adding_altcontact == 'true') {
                var scrollto_div = 'profile-alt-msg-content-div';
                $('#profile-alt-msg-div').css('display','block');
                $('#profile-alt-msg-content-div').html(alt_error_message);
                $('#profile-alt-msg-content-div').fadeIn('slow');
            }
        }

        if(has_alt_contact == 'true' || is_adding_altcontact == 'true') {
            $('#altmailing-country-overlay').remove();
        }

        $("html, body").animate({ scrollTop: ($("#"+scrollto_div).offset().top)-20 }, "slow",function() {
            if(has_alt_contact == 'true' || is_adding_altcontact == 'true') {
                changeProfileCountry('profile-alt-mailing-addr','altmailing');
            }
            if(!$('#mailing-country-overlay').length) {
                setTimeout(function() {
                    setMailingCountryOverlay('submitUserEditForm');
                },1000);
            }
            if(has_alt_contact == 'true' || is_adding_altcontact == 'true') {
                setTimeout(function() {
                    setAltMailingCountryOverlay('error');
                },1000);
            }
        });

        // $('#page').append('<div id="page-disable"></div>');
        // $('#page').append('<div id="profile-error"></div>');
        // var page_height = $(document).height();
        // var page_width = $(window).width();
        // var window_height = $(window).height();
        // var y_position = ((window_height/2));
        // var x_position = (page_width/2);
        // var div_width = $('#profile-error').width();
        // var div_height = $('#profile-error').height();
        // div_width = div_width/2;
        // div_height = div_height/2;
        // y_position = y_position - div_height;
        // x_position = x_position - div_width;
        // $('#profile-error').css('top',y_position);
        // $('#profile-error').css('left',x_position);

        // var error_msg_hdr = '<p><strong>'+$('#edit-profile-error-hdr').val()+'</strong></p>';
        // form_error_msg = error_msg_hdr + form_error_msg;
        // form_error_msg = form_error_msg + '<br><input type="button" name="closePopup" id="closePopup" value=" '+$('#edit-profile-error-showme').val()+' " />';
        // $('#profile-error').html(form_error_msg);

        if(aErrorFields.length > 0) {
            for(var i=0;i<aErrorFields.length;i++) {
                $('label[for="edit-'+aErrorFields[i]+'"]').attr('style','font-weight:bold;color:#cc0000;');
            }
        }

        // $('#page-disable').css('height',page_height);
        // $('#page-disable').fadeIn('slow', function() {
        //     $('#profile-error').css('display','block');
        // });

        // $('#closePopup').click(function() {
        //     $('#profile-error').css('display','none');
        //     $('#page-disable').fadeOut('slow',function() {
        //         $(this).remove();
        //         $('#profile-error').remove();
        //     });
        // });

        // $('#page-disable').click(function() {
        //     $('#profile-error').css('display','none');
        //     $('#page-disable').fadeOut('slow',function() {
        //         $(this).remove();
        //         $('#profile-error').remove();
        //     });
        // });

    } else {
        // show the "doing something" graphic overlay
        if(!origin) {
            showProcessingDiv('');
        }

        // remove the state/country overlays
        if($('#mailing-country-overlay').length) {
            $('#mailing-country-overlay').css('display','none');
            $('#mailing-state-overlay').css('display','none');
        }
        if($('#altmailing-country-overlay').length) {
            $('#altmailing-country-overlay').css('display','none');
            $('#altmailing-state-overlay').css('display','none');
        }

        // submit the form
        debug.error( $('#user-profile-form').serialize() );
        document.getElementById('user-profile-form').submit();

    }
}

// function submitSignInForm(mode,destination) {
//     if(mode == 'join') {
//         window.location.href=destination;
//     } else {
//         document.forms['user-login'].submit();
//     }
// }

function submitLoginForm(mode,destination) {

    var form_error = 0;
    var username_error = 0;
    var pass_error = 0;
    var display_msg = '';
    var top_offset = -30;

    if(mode == 'join') {
        window.location.href=destination;
    } else {

        if($('#edit-name')) {
            if($('#edit-name').val() == '') {
                form_error = 1;
                username_error = 1;
                username_error_msg = 'Please enter a username';
                if(Drupal.settings.tesla.country == 'DE') {
                    username_error_msg = 'Benutzername eingeben.';
                } else if(Drupal.settings.tesla.country == 'FR') {
                    username_error_msg = 'Veuillez entrer un username.';
                } else if(Drupal.settings.tesla.country == 'IT') {
                    username_error_msg = 'Per favore inserisci uno username.';
                } else if(Drupal.settings.tesla.country == 'NL') {
                    username_error_msg = 'Geef een gebruikersnaam in.';
                } else if(Drupal.settings.tesla.country == 'JP') {
                    username_error_msg = ' ';
                }
            }
        }

        if($('#edit-pass')) {
            if($('#edit-pass').val() == '') {
                form_error = 1;
                pass_error = 1;
                pass_error_msg = 'Please enter a password';
                if(Drupal.settings.tesla.country == 'DE') {
                    pass_error_msg = 'Bitte geben Sie ein gltiges Passwort ein.';
                } else if(Drupal.settings.tesla.country == 'FR') {
                    pass_error_msg = 'Veuiller entrer un mot de passe valide.';
                } else if(Drupal.settings.tesla.country == 'IT') {
                    pass_error_msg = 'Per favore inserisci una password valida.';
                } else if(Drupal.settings.tesla.country == 'NL') {
                    pass_error_msg = 'Geef een wachtwoord in.';
                } else if(Drupal.settings.tesla.country == 'JP') {
                    pass_error_msg = ' ';
                }
            }
        }

        if(form_error > 0) {

            if($('#messages-wrapper').length) {
                if($('#messages-wrapper').css('display') == 'block') {
                    $('#messages-wrapper').remove();
                }
            }

            if(username_error == 1) {
                $('label.edit-name').attr('class','label-error');
                display_msg = username_error_msg;
            }

            if(pass_error == 1) {
                $('label.edit-pass').attr('class','label-error');
                display_msg = pass_error_msg;
                top_offset = 55;
            }

            if(username_error == 1 && pass_error == 1) {
                display_msg = username_error_msg + '<br>' + pass_error_msg;
                top_offset = -26;
            }

            display_msg = Drupal.t('We could not sign you in using the<br/>information you provided. Please try again.');
            top_offset = 55;

            $('#content-body').append('<div id="form-error-popup-rt"></div>');
            var pop_position = $('#edit-name').position();
            var x_position = pop_position.left-270;
            var y_position = pop_position.top+top_offset;
            $('#form-error-popup-rt').css('left',x_position);
            $('#form-error-popup-rt').css('top',y_position);
            $('#form-error-popup-rt').css('width','225px');
            $('#form-error-popup-rt').css('padding-left','15px');
            $('#form-error-popup-rt').css('padding-right','30px');
            $('#form-error-popup-rt').css('padding-top','20px');
            $('#form-error-popup-rt').css('font-size','11px');
            $('#form-error-popup-rt').css('line-height','15px');
            $('#form-error-popup-rt').html(display_msg);
            $('#form-error-popup-rt').fadeIn('fast');
        } else {
            // create login and username cookies
            var tesla_cookie = readCookie('tesla_login');
            var tesla_username_cookie = readCookie('tesla_username');
            // create username save cookie
            // create username for all cases
            var tmp_cookie_val = $('#edit-name').val();
            tmp_cookie_val = encodeURIComponent(tmp_cookie_val);
            createCookie('tesla_username',tmp_cookie_val,360);

            // create tesla_login cookie based on selection
            if($('#keep_signed_in').val() == '1') {
                // create teslalogin cookie
                if(!tesla_cookie) {
                    createCookie('tesla_login','true',360);
                }
            } else {
                if(tesla_cookie) {
                    eraseCookie('tesla_login');
                }
            }

            var login_email_username = $('#edit-name').val();
            var login_register_url = $('#register-url').val();
            $.post("/user/check-shell", { email_username:login_email_username },
                function(data) {
                    if(data == 'shell') {
                        location.href=login_register_url+'?email='+login_email_username+'&shell=true';
                    } else {
                        document.forms['user-login'].submit();
                    }
            });

        }
    }

}

// check fields on each key input & only activate continue button when fields are filled
function checkCreateAcctFields(origin) {

    var form_error = 0;

    // WEB-8822 / TFM
    // --------------
    // var uname = $('#edit-name').val();
    // --------------

    var email = $('#edit-mail').val();

    // trim and re-assign email + username only on blur
    $('#edit-mail').blur(function () {
         $('#edit-mail').val( trim($('#edit-mail').val()));
    });


    // WEB-8822 / TFM
    // --------------
    // $('#edit-name').blur(function () {
    //      $('#edit-name').val( trimWS($('#edit-name').val()));
    // });
    // --------------

    if (origin) {
        var fname = $('#edit-first-name').val();
        var lname = $('#edit-last-name').val();
        var password = $('#edit-pass-pass1').val();
        var password_confirm = $('#edit-pass-pass2').val();

        // WEB-8822 / TFM
        // --------------
        if ($("#edit-mollom-captcha-wrapper").length) {
            var captcha = $('#edit-mollom-captcha').val();
        }
        // --------------

        if (fname === '') {
            form_error = 1;
        }
        else if (lname === '') {
            form_error = 1;
        }
        else if (password === '') {
            form_error = 1;
        }
        else if (password_confirm === '') {
            form_error = 1;
        }
        // WEB-8822 / TFM
        // --------------
        else if (captcha === '') {
            form_error = 1;
        }
        // --------------

        if (
            $('.password-description').length &&
            $('.password-description').css('display') == 'block' &&
            $('#edit-pass-pass2').length &&
            $('#edit-pass-pass2').val() != '')
        {
            $('.password-description').css('display','none');
        }

    }

    // WEB-8822 / TFM
    // --------------
    // if(uname == '') {
    //     form_error = 1;
    // }
    // --------------

    if(checkEmail(email) == false) {
        form_error = 1;
    }

    // WEB-9309 / TFM
    // ------------------------
    // if(form_error == 1) {
    //     // if($('#messages-wrapper').length) {
    //     //     $('#messages-wrapper').fadeOut('slow');
    //     // }
    //     $('#btnCreateAccount').css('opacity','0.5');
    //     $('#btnCreateAccount').unbind('click');
    //     $('#btnCreateAccount').unbind('keyup');
    // } else {

    if (form_error === 0) {
    // ------------------------

        $('#btnCreateAccount').unbind('click');
        $('#btnCreateAccount').unbind('keyup');
        $('#btnCreateAccount').css('opacity','1');
        $('#btnCreateAccount').click(function() {
            submitCreateAcctForm(origin);
        });
        $('#btnCreateAccount').keyup(function(event) {
            checkKeyPressed(event);
        });
    }

}

// submit create account form
function submitCreateAcctForm(origin) {
    var form_error = 0;

    // WEB-8822 / TFM
    // --------------
    var uname_error = 0;
    // --------------

    var email_error = 0;

    // WEB-8822 / TFM
    // --------------
    var uname = $('#edit-name').val();
    // --------------

    var email = $('#edit-mail').val();
    var is_shell = $('#edit-is-shell').val();
    if(origin) {
        var fname = $('#edit-first-name').val();
        var lname = $('#edit-last-name').val();
        var password = $('#edit-pass-pass1').val();
        var password_confirm = $('#edit-pass-pass2').val();

        var hasLetters = password.match(/[a-zA-Z]+/);
        var hasNumbers = password.match(/[0-9]+/);
        var hasPunctuation = password.match(/[^a-zA-Z0-9]+/);
        var hasCasing = password.match(/[a-z]+.*[A-Z]+|[A-Z]+.*[a-z]+/);

        if(fname == '') {
            form_error = 1;
        }
        if(lname == '') {
            form_error = 1;
        }
        if(password == '') {
            form_error = 1;
        }
        if(password_confirm == '') {
            form_error = 1;
        }
    }

    // WEB-8822 / TFM
    // --------------
    // if(uname == '') {
    //     form_error = 1;
    //     uname_error = 'This is not a valid username format. Please try again.';
    // }
    // --------------

    if(checkEmail(email) == false) {
        form_error = 1;
        email_error = 'This is not a valid email address format. Please try again.';
    }
    if(password != password_confirm) {
        form_error = 1;
    }
    if(form_error == 0) {
        if(password.length < 6) {
            error_msg = Drupal.t('For your security, please provide a password at least six characters long that contains at least one number and one letter.');
            form_error = 1;
        } else if(password == uname) {
            error_msg = Drupal.t('For your security, please provide a password at least six characters long that contains at least one number and one letter.');
            form_error = 1;
        }
        else{
            var count = (hasLetters ? 1 : 0) + (hasNumbers ? 1 : 0);
            strength_pass = count > 1 ? "pass" : "fail";
                if(strength_pass == "fail"){
                    error_msg = Drupal.t('For your security, please provide a password at least six characters long that contains at least one number and one letter.');
                    form_error = 1;
                }
        }
    }

    if(form_error == 1) {

        if($('#pass-error').length) {
            $('#pass-error').remove();
        }
        if($('#messages-wrapper').length) {
            $('#messages-wrapper').css('display','none');
        }
        // if($('.password-description').length) {
        //     $('.password-description').css('display','none');
        // }

        $('#btnCreateAccount').unbind('click');

        if(!$('.password-description').length) {
            var position = $('#edit-pass-pass1').position();
            var x_offset = 0;
            var y_offset = 0;
            $('label[for="edit-pass-pass1"]').css('color','#cc0000');
            $('label[for="edit-pass-pass2"]').css('color','#cc0000');

            var pos_x = position.left + x_offset;
            var pos_y = position.top + y_offset;

            if($('#pass-error').length) {
                $('#pass-error').remove();
            }
            // start fade in error popup

            $('#main-content').append('<div id="pass-error"></div>');
            $('#pass-error').html(error_msg);
            $('#pass-error').css('top',pos_y);
            $('#pass-error').css('left',pos_x);
            $('#pass-error').fadeIn('slow');
        }


    } else {
        // create login and username cookies
        var tesla_cookie = readCookie('tesla_login');
        var tesla_username_cookie = readCookie('tesla_username');
        var tesla_email_cookie = readCookie('tesla_email');

        // create username save cookie
        // in all cases
        if(tesla_username_cookie) {
            eraseCookie('tesla_username');
        }
        var tmp_cookie_val = $('#edit-name').val();
        tmp_cookie_val = encodeURIComponent(tmp_cookie_val);
        createCookie('tesla_username',tmp_cookie_val);

        // create email save cookie
        // in all cases
        if(tesla_email_cookie) {
            eraseCookie('tesla_email');
        }
        var tmp_cookie_val = $('#edit-mail').val();
        tmp_cookie_val = encodeURIComponent(tmp_cookie_val);
        createCookie('tesla_email',tmp_cookie_val);

        // create login cookie only if selected, otherwise, clear it.
        if($('#keep_signed_in').val() == '1') {
            // create teslalogin cookie
            if(tesla_cookie) {
                eraseCookie('tesla_login');
            }
            createCookie('tesla_login','true',15);

        } else {
            // otherwise erase teslalogin cookie
            if(tesla_cookie) {
                eraseCookie('tesla_login');
            }
        }
        if(is_shell && is_shell == 'true') {
            debug.log('set the form action');
            var form_action = $('#edit-shell-url').val();
            $('#user-register').attr('action',form_action);
        }

        document.forms['user-register'].submit();

    }
}

// check email regex, includes "+" symbol for gmail
function checkEmail(email) {
    //if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(email)) {
    if(/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(email)) {
        return true;
    } else {
        return false;
    }
}

// trim white-space ie8 compatible
if (typeof String.prototype.trim !== 'function') {
    String.prototype.trim = function() {
        return this.replace(/^\s+|\s+$/g, '');
    }
}
function trim(string) {
    return string.trim();
}

// generic js back
function backBtnSubmit(trigger) {
    var destination;
    if (typeof trigger == 'object') {
        destination = $(trigger).data('destination');
        if (destination) {
            location.href = Drupal.settings.tesla.localePrefix + destination;
        }
    }
    else if (typeof trigger == 'string' && trigger) {
        if (trigger == 'drive_orientation') {
            destination=$('#edit-drive-back-url').val();
        }
        else if (trigger == 'basic_info') {
            destination=$('#edit-basic-back-url').val();
        }
        else {
            destination = Drupal.settings.tesla.localePrefix + '/own';
        }
        location.href = destination;
    } else {
        history.back();
    }
}

// submit login form if enter btn is pressed
function checkKeyPressed(e,method) {
    var unicode=e.keyCode? e.keyCode : e.charCode;
    if (unicode == 13) {
        if (document.getElementById('page-user-login')) {
            submitLoginForm('login');
        }
        else if (document.getElementById('change-reservation-form')) {
            submitChangeReservationForm(method);
            //document.forms['change-reservation-form'].submit();
        }
        else if (document.getElementById('tesla-buy-paymethod-form')) {
            submitPaymentForm();
            //document.forms['tesla-buy-paymethod-form'].submit();
        }
        else if (document.getElementById('tesla-buy-basic-form')) {
            submitBasicForm(method);
            //document.forms['tesla-buy-basic-form'].submit();
        }
        else if (document.getElementById('buy-form-complete-account')) {
            submitCompleteAcctForm();
        }
        else if (document.getElementById('user-pass-reset')) {
            checkResetPasswordFields('submit');
        }
        else if ($('*[id*=page-user-reset-]').length) {
            checkResetPasswordFields();
        }
        else if ($('#page-user-register').length) {
            submitCreateAcctForm('create_account');
        }
        else if ($('#page-user-edit').length || $('#page-user-me-edit').length) {
            submitUserEditForm();
        }
        else if ($('#page-booking-payment').length && (method == 'billing-btnnext-cont' || method == 'billing-btnnext-nocc' || method == 'billing-btnnext-achcont' || method == 'billing-terms-checkbox-div')) {
            submitBookingPaymentForm();
        }
    }
    else if (unicode == 32) {
        if ($('#res_agreement_div').length && !method) {
            setTermsCheckBox();
        }
        if ($('#get_teslaupdates_div').length && method == 'get_teslaupdates_div') {
            setGTUCheckBox();
        }
        if ($('#keep_signed_in').length && method == 'keep_signedin_div') {
            setCreateAcctCheckBox();
        }
        if ($('#get_teslaupdates_div').length && method == 'get_teslaupdates_alt_div') {
            setGTUCheckBox('altmailing');
        }
        if (document.getElementById('buy-form-complete-account')) {
            setCreateAcctCheckBox();
        }
        if ($('#billing-terms-checkbox-div').length && method == 'billing-terms-checkbox-div') {
            setACHPaymentCheckBox();
        }
        if ($('#billing-ach-checkbox-div').length && method == 'billing-ach-checkbox-div') {
            setACHPaymentCheckBox();
        }
    }
}

// display processing overlay
function showProcessingDiv(method) {

    // start fade in error popup
    var processing_img = '<img src="/tesla_theme/images/processing-graphic.gif" />';
    var processing_msg = '';
    $('#page').append('<div id="page-disable"></div>');
    var page_height = $(document).height();
    var window_height = $(window).height();
    var scrollLen = $(window).scrollTop();
    var y_position = (window_height/2)-150;
    y_position = y_position + scrollLen;
    $('#page-disable').css('height',page_height);
    var page_width = $(window).width();
    var x_position = (page_width/2)-250;
    $('#page-disable').css('z-index','9998');
    $('#page-disable').css('filter','alpha(opacity=60)');

    //$('#page').append('<div id="processing-div"></div>');
    $('#page').append(document.getElementById('processing-div'));
    $('#processing-div').css('top',y_position);
    $('#processing-div').css('left',x_position);
    // show custom message based on method var
    if(method == 'pp') {
        // processing_div_html = '<img src="/tesla_theme/images/own/buy_paypal.jpg" />';
        // processing_div_html = processing_div_html + '<p>Please wait, you are being sent to PayPal to complete your reservation.</p>';
        // processing_div_html = processing_div_html + '<input type="button" name="cancel" id="paypal_cancel" value=" Cancel " onclick="cancelPaypalSubmit();" />';
        $('#processing-img').css('display','none');
        processing_msg = 'Please wait, you are being sent to PayPal<br>to complete your reservation.';
        //processing_msg = processing_msg + '<div id="btnCancel" class="btnCancel" align="center" onmouseover="makeCursor(this);" onclick="ppCancel();" style="cursor: pointer;">CANCEL</div>';
    }

    if(processing_msg != '') {
        $('#processing-text-p').html(processing_msg);
    }
    $('#page-disable').fadeIn('slow', function() {
        //$('#processing-div').html(processing_div_html);
        $('#processing-div').css('display','block');
    });

    /*$('#page-disable').click(function() {
        killBuyProcessingDiv();
    });*/

}
// remove processing div
function killProcessingDiv() {
    $('#page-disable').remove();
    $('#processing-div').remove();
}

function checkTextAreaLength(textAreaObj,maxLen) {
    var currentLength = textAreaObj.value.length;
    var currentValue = textAreaObj.value;
    var newValue = '';
    var charsRemaining = maxLen - currentLength;
    if(currentLength > maxLen) {
        newValue = currentValue.substring(0,maxLen);
        document.getElementById(textAreaObj.id).value=newValue;
    }
    if(charsRemaining < 0) {
        charsRemaining = 0;
    }
    document.getElementById(textAreaObj.id+'_chars').value = charsRemaining;
}

function gotoDesignStudio(model,locale,params) {
    var destination = '';
    var subdest = 'design/';
    if (model == 'mx' || model == 'mxs') {
        subdest = '';
    }
    if (locale && locale != '' && locale != 'en_US') {
        if(locale == 'ja_JP') {
            locale = 'jp';
        }
        if(locale == 'zh_CN') {
            locale = 'cn';
        }
    }
    if (locale != '') {
        destination = '/'+model+'/'+subdest;
    } else {
        destination = '/'+locale+'/'+model+'/'+subdest;
    }
    if (params != '') {
        destination += '?' + params;
    }
    window.location.href=destination;
}

function gotoURL(destination,locale) {

    if(locale && locale != '' && locale != 'en_US') {
        if(locale == 'ja_JP') {
            locale = 'jp';
        }
        if(locale == 'zh_CN') {
            locale = 'cn';
        }
        window.location.href='/'+locale+'/'+destination;
    } else {
        window.location.href='/'+destination;
    }

}

// mytesla profile js
function setGTUCheckBox(id) {
    var checkbox = 'edit-get-teslaupdates-check';
    var image = 'get-teslaupdates-checkbox';
    if(id) {
        if(id == 'gtu_div') {
            checkbox = 'newsletter';
            image = 'get-teslaupdates-checkbox';
        } else {
            checkbox = 'edit-get-teslaupdates-alt-check';
            image = 'get-teslaupdates-alt-checkbox';
        }
    }
    if($('#'+checkbox).length) {
        if($('#'+checkbox).val() == '0') {
            $('#'+checkbox).val('1');
            $('#'+image).attr('src','/tesla_theme/images/own/own-terms-checkbox-on.png');
        } else {
            $('#'+checkbox).val('0');
            $('#'+image).attr('src','/tesla_theme/images/own/own-terms-checkbox-off.png');
        }
    }
}

function openAltContactDiv(scroll) {
    changeProfileCountry('profile-alt-mailing-addr','altmailing');
    if($('#edit-profile-hasalt-contact').val() == 'false') {
        $('#edit-profile-addingalt-contact').val(1);
        // $('#btnSelectDO').unbind('click');
    }
    $('#edit-profile-hasalt-contact').val('true');
    // checkProfileRequiredFields('open');
    if($('#profile-alternate-contact').length) {
        if($('#profile-alternate-contact').css('display') == 'none') {
            var altcontactlabel1 = $('#altcontact_label_1').val();
            var altcontactlabeltmp = $('#edit-profile-addcontact-tmp').val();
            $('#profile-addremove-icon').css('background-image','url(/tesla_theme/images/icn_removecontact_32x32.png)');
            $('#profile-addremove-icon').css('float','right');
            $('#profile-addremove-icon').css('backgroundPosition','0px -2px');
            // $('#profile-addremove-icon').css('right','-20');
            $('#profile-addremove-title').css('float','right');
            $('#profile-addremove-title').html(altcontactlabel1);
            $('#profile-addremove-icon').before('<div id="profile-addremove-title-tmp"></div>');
            $('#profile-addremove-title-tmp').html(altcontactlabeltmp);
            $('#profile-alternate-contact').slideDown('slow',function() {
                // set position of country dropdown overlay
                var altCountryPosition = $('#edit-altmailing-country').position();
                var altCountryPositionX = altCountryPosition.left-3;
                var altCountryPositionY = altCountryPosition.top;
                var alt_ctry_code = $('#edit-altmailing-country').val().toLowerCase();
                var alt_ctry_label = $('#edit-altmailing-country option:selected').text().substring(0,24);
                $('#altmailing-country-overlay').css('left',altCountryPositionX);
                $('#altmailing-country-overlay').css('top',altCountryPositionY);
                // if locale supported country, show flag in dropdown
                if(alt_ctry_code == 'us' || alt_ctry_code == 'ca' || alt_ctry_code == 'au' || alt_ctry_code == 'at' || alt_ctry_code == 'be' || alt_ctry_code == 'dk' || alt_ctry_code == 'de' || alt_ctry_code == 'fr' || alt_ctry_code == 'gb' || alt_ctry_code == 'it' || alt_ctry_code == 'nl' || alt_ctry_code == 'ch' || alt_ctry_code == 'hk' || alt_ctry_code == 'jp' || alt_ctry_code == 'cn') {
                    $('#altmailing-country-overlay').html('<img src="/tesla_theme/images/icn_'+alt_ctry_code+'_flag_no_shadow.png" width="16" height="11" class="basic-flag" />&nbsp;'+alt_ctry_label);
                }
                // set position of state/province dropdown overlay
                if(!$('#altmailing-province-istextbox').length && $('#edit-altmailing-state').length) {
                    var provPosition = $('#edit-altmailing-state').position();
                    var provPositionX = provPosition.left - 2;
                    var provPositionY = provPosition.top + 2;
                    $('#altmailing-state-overlay').css('left',provPositionX);
                    $('#altmailing-state-overlay').css('top',provPositionY);
                }

                if(!scroll) {
                    $("html, body").animate({ scrollTop: ($("#profile-addremove-div").offset().top)-30 }, "slow");
                }

                $('#get_teslaupdates_alt_div').fadeIn('fast');
                // $('#altmailing-country-overlay').fadeIn('slow');
                setAltMailingCountryOverlay('origin');
                if($('#edit-profile-hasalt-contact').length && $('#edit-profile-hasalt-contact').val() == 'true') {
                    $('#altmailing-country-overlay').fadeIn('slow');
                }
                // if($('#edit-profile-addingalt-contact').length && $('#edit-profile-addingalt-contact').val() == '1') {
                //     $('#edit-altcontact-firstname').focus();
                // }
                // $('#altmailing-state-overlay').fadeIn('slow');
            });
            $('#profile-addremove-icon').unbind('click');
            $('#profile-addremove-icon').click(function() {
                removeAltContactDiv();
            });
            $('#profile-addremove-title').unbind('click');
            $('#profile-addremove-title').click(function() {
                removeAltContactDiv();
            });
        }
    }
}

function removeAltContactDiv() {
    if($('#profile-alternate-contact').length) {
        if($('#profile-alternate-contact').css('display') == 'block') {
            if($('#edit-profile-addingalt-contact').val() == '1') {
                $('#edit-profile-addingalt-contact').val(0);
            }
            if($('#edit-profile-altcontactid').length && $('#edit-profile-altcontactid').val() != '') {
                // start fade in error popup
                $('#page').append('<div id="page-disable"></div>');
                var page_height = $(document).height();
                var page_width = $(window).width();
                var window_height = $(window).height();
                var y_position = ((window_height/2));
                var x_position = (page_width/2);
                var div_width = $('#profile-removeprompt-div').width();
                var div_height = $('#profile-removeprompt-div').height();
                div_width = div_width/2;
                div_height = div_height/2;
                y_position = y_position - div_height;
                x_position = x_position - div_width;

                $('#page-disable').css('height',page_height);

                $('#profile-removeprompt-div').css('left',x_position);
                $('#profile-removeprompt-div').css('top',y_position);
                $('#profile-popup-closex').css('left',x_position-23);
                $('#profile-popup-closex').css('top',y_position-23);

                $('#page-disable').fadeIn('slow', function() {
                    $('#profile-removeprompt-div').css('display','block');
                    $('#profile-popup-closex').css('display','block');
                    $('#profile-popup-closex').unbind('click');
                    $('#profile-popup-closex').click(function() {
                        $('#removeprompt-btn-confirm-cancel').trigger('click');
                    });
                });
            } else {
                clearProfileAltContactFields();
                $('#profile-alt-msg-div').fadeOut('fast');
                $('#edit-profile-hasalt-contact').val('false');
                $('#profile-alt-mailing-addr').fadeOut('fast');
                $('#get_teslaupdates_alt_div').fadeOut('fast');
                $('#altmailing-state-overlay').remove();
                $('#altmailing-country-overlay').fadeOut('fast',function() {
                    $('#profile-alternate-contact').slideUp('slow',function() {
                        $('#profile-addremove-title-tmp').remove();
                        $('#profile-addremove-icon').css('background-image','url(/tesla_theme/images/icn_addcontact_32x32.png)');
                        $('#profile-addremove-icon').css('background-position','-10px 0px');
                        $('#profile-addremove-icon').css('float','left');
                        $('#profile-addremove-title').css('float','left');
                        $('#profile-addremove-title').html($('#altcontact_label_2').val());
                        $("html, body").animate({ scrollTop: ($("#content-body").offset().top) }, "slow");
                        checkProfileRequiredFields('close');
                        // set the click function for re-opening altcontact div
                        $('#profile-addremove-icon').unbind('click');
                        $('#profile-addremove-icon').click(function() {
                            openAltContactDiv();
                        });
                        $('#profile-addremove-title').unbind('click');
                        $('#profile-addremove-title').click(function() {
                            openAltContactDiv();
                        });
                    });
                });
                $('#altmailing-country-overlay').remove();
            }
        }
    }
}

function clearProfileAltContactFields() {
    var aReqd = new Array();
    aReqd.push('altcontact-firstname');
    aReqd.push('altcontact-lastname');
    aReqd.push('altcontact-mail');
    aReqd.push('altcontact-phone');
    aReqd.push('altcontact-firstname');
    aReqd.push('altmailing-address-1');
    aReqd.push('altmailing-address-2');
    if($('#altmailing-country').val() != 'JP') {
        aReqd.push('altmailing-city');
    }
    if($('#altmailing-province-istextbox').length) {
        aReqd.push('altmailing-state');
    }
    aReqd.push('altmailing-zip');

    for(var i=0;i<aReqd.length;i++) {
        $('#edit-'+aReqd[i]).val('');
    }

}

function openChangePwdDiv() {
    if($('#page-disable')) {
        $('#page-disable').remove();
    }
    // start fade in error popup
    $('#page').append('<div id="page-disable"></div>');
    var page_height = $(document).height();
    var page_width = $(window).width();
    var window_height = $(window).height();
    var y_position = ((window_height/2));
    var x_position = (page_width/2);
    var div_width = $('#profile-changepwd-div').width();
    var div_height = $('#profile-changepwd-div').height();
    div_width = div_width/2;
    div_height = div_height/2;
    y_position = y_position - div_height;
    x_position = x_position - div_width;

    $('#page-disable').css('height',page_height);

    $('#profile-changepwd-div').css('left',x_position);
    $('#profile-changepwd-div').css('top',y_position);
    $('#profile-popup-closex').css('left',x_position-23);
    $('#profile-popup-closex').css('top',y_position-23);

    $('#page-disable').fadeIn('slow', function() {
        $('#profile-changepwd-div').css('display','block');
        $('#edit-changepwd-current').focus();
        $('#profile-popup-closex').css('display','block');
        $('#profile-popup-closex').unbind('click');
        $('#profile-popup-closex').click(function() {
            $('#changepwd-btn-cancel').trigger('click');
        });
    });

}

function openChangePhotoDiv() {
    if($('#page-disable')) {
        $('#page-disable').remove();
    }
    // start fade in error popup
    $('#page').append('<div id="page-disable"></div>');
    var page_height = $(document).height();
    var page_width = $(window).width();
    var window_height = $(window).height();
    var y_position = ((window_height/2));
    var x_position = (page_width/2);
    var div_width = $('#profile-changephoto-div').width();
    var div_height = $('#profile-changephoto-div').height();
    div_width = div_width/2;
    div_height = div_height/2;
    y_position = y_position - div_height;
    x_position = x_position - div_width;
    // if($.browser.msie) {
    //     $('#page-disable').css('opacity','0.6');
    //     $('#page-disable').css('z-index','9999');
    //     $('#page').append($('#profile-changephoto-div'));
    //     $('#profile-changephoto-div').css('z-index','10000');
    // }

    $('#page-disable').css('height',page_height);

    $('#profile-changephoto-div').css('left',x_position);
    $('#profile-changephoto-div').css('top',y_position);
    $('#profile-popup-closex').css('left',x_position-23);
    $('#profile-popup-closex').css('top',y_position-23);

    $('#page-disable').fadeIn('slow', function() {
        $('#profile-changephoto-div').css('display','block');
        $('#profile-popup-closex').css('display','block');
        $('#profile-popup-closex').unbind('click');
        $('#profile-popup-closex').click(function() {
            $('#changephoto-btn-cancel').trigger('click');
        });
    });

}

function setProfileAltContactRadio(value) {
    if(value == 0) {
        $('#profile-contactprefs-radio1').css('background','url(/tesla_theme/images/bg_radio_on.png)');
        $('#profile-contactprefs-radio2').css('background','url(/tesla_theme/images/bg_radio_off.png)');
    } else {
        $('#profile-contactprefs-radio1').css('background','url(/tesla_theme/images/bg_radio_off.png)');
        $('#profile-contactprefs-radio2').css('background','url(/tesla_theme/images/bg_radio_on.png)');
    }
    if($('#contact_prefs').length) {
        $('#contact_prefs').val(value);
    }
}

function setCreateAcctCheckBox() {
    if($('#keep_signed_in').length) {
        if($('#keep_signed_in').val() == '0') {
            $('#keep_signed_in').val('1');
            $('#keep-signedin-checkbox').attr('src','/tesla_theme/images/own/own-terms-checkbox-on.png');
        } else {
            $('#keep_signed_in').val('0');
            $('#keep-signedin-checkbox').attr('src','/tesla_theme/images/own/own-terms-checkbox-off.png');
        }
    }
}

// function setCreateAcctSignInCheckBox() {
//     if($('#keep_signed_in').length) {
//         alert($('#edit-persistent-login').length);
//         $('#edit-persistent-login').prop('checked',true);
//         $('#edit-persistent-login').attr('checked',true);
//         $('#edit-persistent-login')[0].checked;
//         if($('#keep_signed_in').val() == '0') {
//             $('#keep_signed_in').val('1');
//             $('#keep-signedin-checkbox').attr('src','/tesla_theme/images/own/own-terms-checkbox-on.png');
//         } else {
//             $('#keep_signed_in').val('0');
//             $('#keep-signedin-checkbox').attr('src','/tesla_theme/images/own/own-terms-checkbox-off.png');
//         }
//     }
// }

function checkPassEmailField(origin) {
    var email = $('#edit-name').val();
    var form_error = 0;

    if($('#edit-name').length) {
        $('#edit-name').blur(function () {
             $('#edit-name').val( trim(email) );
        });
        if(!email) {
            form_error = 1;
        } else if(email == '') {
            form_error = 1;
        } else if(!origin && checkEmail(email) == false) {
            form_error = 1;
        }
        if($('#edit-pass').length) {
            var password = $('#edit-pass').val();
            if(!password) {
                form_error = 1;
            } else if(password == '') {
                form_error = 1;
            }
        }

        if(form_error == 0) {
            $('#btnSelectDO').css('opacity','1');
            $('#btnSelectDO').unbind('click');
            $('#btnSelectDO').click(function() {
                if(origin && origin == 'login') {
                    submitLoginForm('login');
                } else {
                    submitPassForm();
                }
            });
        } else {
            $('#btnSelectDO').css('opacity','0.5');
            $('#btnSelectDO').unbind('click');
        }
    }
}

function checkChangePasswordFields(action) {

    var form_error = 0;
    var password = $('#edit-pwd').val();
    var password_confirm = $('#edit-pwd-confirm').val();
    var username = $('#edit-username').val();
    var error_msg = Drupal.t('Your passwords don\t match. Please try again.');

    $('label[for="edit-pwd"]').css('color','#666666');
    $('label[for="edit-pwd-confirm"]').css('color','#666666');

    if(password == '' || password == null) {
        form_error = 1;
    }
    if(password_confirm == '' || password_confirm == null) {
        form_error = 1;
    }

    if(action == 'submit') {
        if(password != password_confirm) {
            form_error = 1;
        }
        if(form_error == 0) {
            if(password.match(/[a-z]+/) == null) {
                error_msg = Drupal.t('Your password should contain a lowercase letter, an uppercase letter, and one number.');
                form_error = 1;
            } else if(password.match(/[A-Z]+/) == null) {
                error_msg = Drupal.t('Your password should contain a lowercase letter, an uppercase letter, and one number.');
                form_error = 1;
            } else if(password.match(/[0-9]+/) == null) {
                error_msg = Drupal.t('Your password should contain a lowercase letter, an uppercase letter, and one number.');
                form_error = 1;
            } else if(password.length < 6) {
                error_msg = Drupal.t('Your password must be longer than 6 characters.');
                form_error = 1;
            } else if(password == username) {
                error_msg = Drupal.t('Your password cannot be the same as your username.');
                form_error = 1;
            }
        }
    }

    if(form_error == 0) {
        if(action != 'submit') {
            // submit form
            $('#btnSelectDO').css('opacity','1');
            $('#btnSelectDO').unbind('click');
            $('#btnSelectDO').click(function() {
                checkChangePasswordFields('submit');
            });
        } else {
            if($('#pass-error').length) {
                $('#pass-error').remove();
            }
            // document.forms['user-pass-reset'].submit();
            var userid = $('#edit-uid').val();
            var container = $('#pass-reset-form-container');
            var page_origin = 'change';

            $.post("/user/reset-password", {uid: userid, pass: password, origin: page_origin},
            function(data) {
                if(data === 'error') {
                    error_msg = '<strong>'+Drupal.t('Reset Failed')+'</strong><br/>'+Drupal.t('there seems to have been an error saving your password. Please try again.');
                    setPassResetError('submit',error_msg);
                } else {
                    container.fadeOut(function() {
                        container.html(data);
                        container.fadeIn(function() {});
                    });
                }
            });
        }
    } else {
        setPassResetError(action,error_msg);
    }
}

function checkResetPasswordFields(action) {

    var form_error = 0;
    var password = $('#edit-pass-pass1').val();
    var password_confirm = $('#edit-pass-pass2').val();
    var username = $('#edit-username').val();
    var url_array = $('#edit-request_url').val().split('/');
    var timestamp = url_array.slice(-2)[0];
    var hash = url_array.slice(-2)[1];

    var error_msg = Drupal.t('Your passwords don\t match. Please try again.');

    $('label[for="edit-pass"]').css('color','#666666');
    $('label[for="edit-pass-confirm"]').css('color','#666666');

    if(password == '' || password == null) {
        form_error = 1;
    }
    if(password_confirm == '' || password_confirm == null) {
        form_error = 1;
    }

    if(action == 'submit') {
        var hasLetters = password.match(/[a-zA-Z]+/);
        var hasNumbers = password.match(/[0-9]+/);
        var hasPunctuation = password.match(/[^a-zA-Z0-9]+/);
        var hasCasing = password.match(/[a-z]+.*[A-Z]+|[A-Z]+.*[a-z]+/);
        if(password != password_confirm) {
            form_error = 1;
        }
        if(form_error == 0) {
            if(password.length < 6) {
                error_msg = Drupal.t('Your password must be longer than 6 characters.');
                form_error = 1;
            } else if(password == username) {
                error_msg = Drupal.t('Your password cannot be the same as your username.');
                form_error = 1;
            }
            else{
                var count = (hasLetters ? 1 : 0) + (hasNumbers ? 1 : 0);
                strength_pass = count > 1 ? "pass" : "fail";
                    if(strength_pass == "fail"){
                        error_msg = Drupal.t('For your security, please provide a password at least six characters long that contains at least one number and one letter.');
                        form_error = 1;
                    }
            }
        }
    }

    if(form_error == 0) {
        if(action != 'submit') {
            // submit form
            $('#btnSelectDO').css('opacity','1');
            $('#btnSelectDO').unbind('click');
            $('#btnSelectDO').click(function() {
                checkResetPasswordFields('submit');
            });
        } else {

            if($('#pass-error').length) {
                $('#pass-error').remove();
            }
            // document.forms['user-pass-reset'].submit();
            var userid = $('#edit-uid').val();
            var container = $('#pass-reset-form-container');
            var page_origin = 'reset';
            locale_prefix =  Drupal.settings.tesla.localePrefix; // We need this so t() strings get translated in tesla.buy.inc.
            $.post(locale_prefix +"/user/reset-password", {uid: userid, pass: password, origin: page_origin, hash: hash, timestamp: timestamp},
            function(data) {
                if(data === 'error') {
                    error_msg = '<strong>'+Drupal.t('Reset Failed')+'</strong><br/>'+Drupal.t('there seems to have been an error saving your password. Please try again.');
                    setPassResetError('submit',error_msg);
                } else {
                    container.fadeOut(function() {
                        container.html(data);
                        container.fadeIn(function() {});
                    });
                }
            });
        }
    } else {
        setPassResetError(action,error_msg);
    }

}

function setPassResetError(action,error_msg) {
    if($('#password-description warning').length) {
        $('#password-description warning').css('display','none');
    }
    if(action == 'submit' && !$('.password-description.error').length) {
        if($('#page-user-change-pass').length) {
            var position = $('#edit-pass-pass1').position();
            var x_offset = -270;
            var y_offset = 55;
            $('label[for="edit-pass-pass1"]').css('color','#cc0000');
            $('label[for="edit-pass-pass2"]').css('color','#cc0000');
        } else {
            var position = $('#edit-pass-pass1').position();
            var x_offset = 520;
            var y_offset = 203;
            $('label[for="edit-pass-pass1"]').css('color','#cc0000');
            $('label[for="edit-pass-pass2"]').css('color','#cc0000');
        }

        var pos_x = position.left + x_offset;
        var pos_y = position.top + y_offset;

        if($('#pass-error').length) {
            $('#pass-error').remove();
        }
        // start fade in error popup

        $('#main-content').append('<div id="pass-error"></div>');
        $('#pass-error').html(error_msg);
        $('#pass-error').css('top',pos_y);
        $('#pass-error').css('left',pos_x);
        $('#pass-error').fadeIn('slow');
    } else {
        $('#btnSelectDO').css('opacity','0.5');
        $('#btnSelectDO').unbind('click');
    }
}

function submitPassForm(method) {

    if(method && method == 'cancel') {
        var dest = $('#destination').val();
        var locale_prefix = '';
        if(Drupal.settings.tesla.locale != 'en_US') {
            locale_prefix = Drupal.settings.tesla.locale;
            if(locale_prefix == 'ja_JP') {
                locale_prefix = 'jp';
            }
            if(locale_prefix == 'zh_CN') {
                locale_prefix = 'cn';
            }
            locale_prefix = '/' + locale_prefix;
        }

        dest = locale_prefix + '/user/login';
        window.location.href=dest;
    } else {
        document.forms['user-pass'].submit();
    }

}

function checkRefundMethod(obj) {
    var refund_type = obj.value;
    if($('#tracking_number_p').length) {
        if(refund_type != 'ck') {
            if($('#tracking_number_p').css('display') == 'block') {
                $('#tracking_number_p').fadeOut('slow');
            }
        } else {
            if($('#tracking_number_p').css('display') == 'none') {
                $('#tracking_number_p').fadeIn('slow');
            }
        }
    }
}

function setAchAcctType(elemId) {
    if($('#page-booking-payment').length || $('#page-own-paymethod').length || $('#page-servicesignup-payment').length || $('#page-order').length) {
        $('#billing-ach-accttype').val($('#'+elemId).attr('rel'));
        $('#paymethod_ach_checking').css('background-image','url(/tesla_theme/images/btn_radio_off.png)');
        $('#paymethod_ach_savings').css('background-image','url(/tesla_theme/images/btn_radio_off.png)');
        $('#paymethod_ach_corpchecking').css('background-image','url(/tesla_theme/images/btn_radio_off.png)');
        $('#'+elemId).css('background-image','url(/tesla_theme/images/btn_radio_on.png)');
    }

}

function toggleSubCheckBox(){
    if($('input[id=edit-submitted-subscriptions--c-1]').is(":checked")) {
        $('input[id=edit-submitted-subscriptions--c-1]').attr('checked', false);
        // $("[name*='is_get_tesla_update_checkbox_present']").val('false');
        $('#subsCheckbox').css('background-position', '0px 0px');
    }
    else {
        $('input[id=edit-submitted-subscriptions--c-1]').attr('checked', true);
        // $("[name*='is_get_tesla_update_checkbox_present']").val('true');
        $('#subsCheckbox').css('background-position', '0px -21px');
    }
}

// HOME PAGE
//if ($.fn.cycle) {
//  var heroLeft = 0;
//  $.fn.cycle.transitions.fade2 = function($cont, $slides, opts) {
//      $slides.not(':eq('+opts.currSlide+')').css('opacity',0);
//      opts.before.push(function(curr,next,opts) {
//          $.fn.cycle.commonReset(curr,next,opts);
//          opts.cssBefore.opacity = 0;
//      });
//      opts.animIn    = { opacity: 1 };
//      opts.animOut   = { opacity: 0 };
//      opts.cssBefore = { top: 0, left: heroLeft, width: 1270 };
//  }
//        //jQ does not distinguish chrome from safari
//        $.browser.chrome = /chrome/.test(navigator.userAgent.toLowerCase());
//
//  function reposHero () {
//      var element =  $('#views_slideshow_singleframe_teaser_section_homepage_slideshow-default > div:not(.views_slideshow_singleframe_hidden)');
//      var wClient = $(window).width();
//      //var wElement = element.width();
//      var adjust = (wClient - 1270) / 2;
//
//      if ($.browser.safari) {
//          heroLeft = adjust;
//      } else {
//          heroLeft = (adjust < 0) ? adjust : 0;
//      }
//      element.css('left', heroLeft+"px");
//  }
//}

// Add colorbox css and js to the appropriate conditional in template.php for the required page

/* Tesla.modal();
 * Wrapper for colorbox
 * @param params - additional parameters to pass through to colorbox (e.g. {
 *     "html": $("callback").html(),
 *     "width": 800,
 *     "height": 600,
 *     "title": "My Title",
 *     "onOpen": function(){ ... },
 *     "onLoad": function(){ ... },
 *     "onComplete": function(){ ... },
 *     "onCleanup": function(){ ... },
 *     "onClosed": function(){... }
 * }
 */
Tesla.modal = function(obj, params) {

    if (obj !== null && typeof(obj) != "undefined" ) {
        obj.colorbox(params);
    }
    else {
        return $.colorbox(params);
    }
};

function getLocalePrefix() {
    var localePrefix = ""; // en_US

    if (!(Drupal.settings.tesla.locale === "en_US")) {
        localePrefix = Drupal.settings.tesla.locale;

        if (localePrefix == "ja_JP") {
            localePrefix = "jp";
        }
        if (localePrefix == "zh_CN") {
            localePrefix = "cn";
        }

        localePrefix = "/" + localePrefix;
    }

    return localePrefix;
}

function use12HourClockForLocale() {
    var use12HourClock;
    var locale = Drupal.settings.tesla.locale;
    switch (locale) {
        case "":
        case "en_CA":
        case "en_US":
        case "fr_CA":
        case "en_AU":
        case "en_HK":
            use12HourClock = true;
            break;
        default:
            use12HourClock = false;
            break;
    }
    return use12HourClock;
}

function isEuCountryCode(twoCharCountryCode) {
    var twoCharCountryCode = twoCharCountryCode || Drupal.settings.tesla.country;
    twoCharCountryCode = twoCharCountryCode.toUpperCase();

    var regions_by_country = {
        "AD": "OT",
        "AE": "OT",
        "AF": "OT",
        "AG": "OT",
        "AI": "OT",
        "AL": "OT",
        "AM": "OT",
        "AN": "OT",
        "AO": "OT",
        "AQ": "OT",
        "AR": "OT",
        "AS": "OT",
        "AT": "EU",
        "AU": "AU",
        "AW": "OT",
        "AZ": "OT",
        "BA": "OT",
        "BB": "OT",
        "BD": "OT",
        "BE": "EU",
        "BF": "OT",
        "BG": "EU",
        "BH": "OT",
        "BI": "OT",
        "BJ": "OT",
        "BM": "OT",
        "BN": "OT",
        "BO": "OT",
        "BR": "OT",
        "BS": "OT",
        "BT": "OT",
        "BV": "OT",
        "BW": "OT",
        "BY": "OT",
        "BZ": "OT",
        "CA": "CA",
        "CC": "OT",
        "CD": "OT",
        "CF": "OT",
        "CG": "OT",
        "CH": "EU",
        "CI": "OT",
        "CK": "OT",
        "CL": "OT",
        "CM": "OT",
        "CN": "OT",
        "CO": "OT",
        "CR": "OT",
        "CU": "OT",
        "CV": "OT",
        "CX": "OT",
        "CY": "EU",
        "CZ": "EU",
        "DE": "EU",
        "DJ": "OT",
        "DK": "EU",
        "DM": "OT",
        "DO": "OT",
        "DZ": "OT",
        "EC": "OT",
        "EE": "OT",
        "EG": "OT",
        "EH": "OT",
        "ER": "OT",
        "ES": "EU",
        "EU": "EU",
        "ET": "OT",
        "FI": "EU",
        "FJ": "OT",
        "FK": "OT",
        "FM": "OT",
        "FO": "OT",
        "FR": "EU",
        "GA": "OT",
        "GB": "GB",
        "GD": "OT",
        "GE": "OT",
        "GF": "OT",
        "GH": "OT",
        "GI": "OT",
        "GL": "OT",
        "GM": "OT",
        "GN": "OT",
        "GP": "OT",
        "GQ": "OT",
        "GR": "EU",
        "GS": "OT",
        "GT": "OT",
        "GU": "OT",
        "GW": "OT",
        "GY": "OT",
        "HK": "HK",
        "HM": "OT",
        "HN": "OT",
        "HR": "EU",
        "HT": "OT",
        "HU": "EU",
        "ID": "OT",
        "IE": "EU",
        "IL": "OT",
        "IN": "OT",
        "IO": "OT",
        "IQ": "OT",
        "IR": "OT",
        "IS": "EU",
        "IT": "EU",
        "JM": "OT",
        "JO": "OT",
        "JP": "JP",
        "KE": "OT",
        "KG": "OT",
        "KH": "OT",
        "KI": "OT",
        "KM": "OT",
        "KN": "OT",
        "KP": "OT",
        "KR": "OT",
        "KW": "OT",
        "KY": "OT",
        "KZ": "OT",
        "LA": "OT",
        "LB": "OT",
        "LC": "OT",
        "LI": "EU",
        "LK": "OT",
        "LR": "OT",
        "LS": "OT",
        "LT": "OT",
        "LU": "EU",
        "LV": "OT",
        "LY": "OT",
        "MA": "OT",
        "MC": "EU",
        "MD": "OT",
        "ME": "OT",
        "MG": "OT",
        "MH": "OT",
        "MK": "OT",
        "ML": "OT",
        "MM": "OT",
        "MN": "OT",
        "MO": "OT",
        "MP": "OT",
        "MQ": "OT",
        "MR": "OT",
        "MS": "OT",
        "MT": "EU",
        "MU": "OT",
        "MV": "OT",
        "MW": "OT",
        "MX": "OT",
        "MY": "OT",
        "MZ": "OT",
        "NA": "OT",
        "NC": "OT",
        "NE": "OT",
        "NF": "OT",
        "NG": "OT",
        "NI": "OT",
        "NL": "EU",
        "NO": "EU",
        "NP": "OT",
        "NR": "OT",
        "NU": "OT",
        "NZ": "OT",
        "OM": "OT",
        "PA": "OT",
        "PE": "OT",
        "PF": "OT",
        "PG": "OT",
        "PH": "OT",
        "PK": "OT",
        "PL": "OT",
        "PM": "OT",
        "PN": "OT",
        "PR": "OT",
        "PS": "OT",
        "PT": "OT",
        "PW": "OT",
        "PY": "OT",
        "QA": "OT",
        "RE": "OT",
        "RO": "OT",
        "RS": "OT",
        "RU": "OT",
        "RW": "OT",
        "SA": "OT",
        "SB": "OT",
        "SC": "OT",
        "SD": "OT",
        "SE": "EU",
        "SG": "OT",
        "SH": "OT",
        "SI": "OT",
        "SJ": "OT",
        "SK": "OT",
        "SL": "OT",
        "SM": "OT",
        "SN": "OT",
        "SO": "OT",
        "SR": "OT",
        "ST": "OT",
        "SV": "OT",
        "SY": "OT",
        "SZ": "OT",
        "TC": "OT",
        "TD": "OT",
        "TF": "OT",
        "TG": "OT",
        "TH": "OT",
        "TJ": "OT",
        "TK": "OT",
        "TL": "OT",
        "TM": "OT",
        "TN": "OT",
        "TO": "OT",
        "TR": "OT",
        "TT": "OT",
        "TV": "OT",
        "TW": "OT",
        "TZ": "OT",
        "UA": "OT",
        "UG": "OT",
        "UM": "OT",
        "US": "US",
        "UY": "OT",
        "UZ": "OT",
        "VA": "OT",
        "VC": "OT",
        "VE": "OT",
        "VG": "OT",
        "VI": "OT",
        "VN": "OT",
        "VU": "OT",
        "WF": "OT",
        "WS": "OT",
        "YE": "OT",
        "YT": "OT",
        "ZA": "OT",
        "ZM": "OT",
        "ZW": "OT"
    };

    return regions_by_country[twoCharCountryCode] === "EU";
}

// Enable social sharing widget
function initSocialSharingWidget() {
    var widget = $('#tesla-social-widget');
    var type = null;
    var url = null;
    var message = null;
    var page = document.URL;
    var width = 550
    var height = 450;
    if(widget.length !== 0) {
        widget.find('a').each(function(){
            type = $(this).attr('class');
            switch (type) {
                case 'facebook':
                    url = 'https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(page);
                    break;
                case 'twitter':
                    message = $(this).find('span').text();
                    url = 'https://twitter.com/intent/tweet?text=' + encodeURIComponent(message) + '&url=' + encodeURIComponent(page) + '&via=' + encodeURIComponent('TeslaMotors') + '&related=' + encodeURIComponent('TeslaMotors,elonmusk');
                    break;
                case 'google':
                    url = 'https://plus.google.com/share?url=' + encodeURIComponent(page);
                    break;
            }
            if(url !== null) {
                $(this).attr('href', url);
            }
        });
        widget.on('click', 'a', function(e){
            e.preventDefault();
            window.open($(this).attr('href'), '_blank', 'width=' + width + ', height=' + height);
        });
    }
}

////////////////////////////////////////////////////
// return postalcode formatting for each country
function getPostalCodeRegexMatrix(country_code) {
    console.info( 'getPostalCodeRegexMatrix', country_code );

    var postal_code_matrix = {
        "US": {
            "regex": "^[0-9]{5}",
            "maxlen": "5",
            "minlen": "5",
            "sample": "94304"
              },
        "CA": {
            "regex": "^[a-zA-Z]{1}[0-9]{1}[a-zA-Z]{1}[ ]?[0-9]{1}[a-zA-Z]{1}[0-9]{1}",
            "separator": " ",
            "separator_count": "3",
            "maxlen": "7",
            "minlen": "6",
            "sample": "V3H 1Z7"
              },
        "AD": "",
        "AE": "",
        "AT": {
            "regex": "^[0-9]{4}",
            "maxlen": "4",
            "minlen": "4",
            "sample": "1234"
              },
        "AU": {
            "regex": "^[0-9]{4}[-]?[0-9]{0,3}",
            "maxlen": "8",
            "minlen": "4",
            "sample": "1234-123"
              },
        "BE": {
            "regex": "^[0-9]{4}",
            "maxlen": "4",
            "minlen": "4",
            "sample": "1234"
              },
        "BG": {
            "regex": "^[0-9]{4}",
            "maxlen": "4",
            "minlen": "4",
            "sample": "1234"
              },
        "CH": {
            "regex": "^[0-9]{4}",
            "maxlen": "4",
            "minlen": "4",
            "sample": "1234"
              },
        "CY": {
            "regex": "^[0-9]{4}",
            "maxlen": "4",
            "minlen": "4",
            "sample": "1234"
              },
        "CN": {
            "regex": "^([0-9]{6})?$", //WEB-8715 - is optional
            "maxlen": "6",
            "minlen": "0",
            "sample": "123456"
              },
        "CZ": {
            "regex": "^[0-9]{3}[ ]?[0-9]{2}",
            "separator": " ",
            "separator_count": "3",
            "maxlen": "6",
            "minlen": "5",
            "sample": "123 12"
              },
        "DE": {
            "regex": "^[0-9]{5}",
            "maxlen": "5",
            "minlen": "4",
            "sample": "12345"
              },
        "DK": {
            "regex": "^[0-9]{4}",
            "maxlen": "4",
            "minlen": "4",
            "sample": "1234"
              },
        "EE": {
            "regex": "^[0-9]{5}",
            "maxlen": "5",
            "minlen": "5",
            "sample": "12345"
              },
        "ES": {
            "regex": "^[0-9]{5}",
            "maxlen": "5",
            "minlen": "5",
            "sample": "12345"
              },
        "EU": "",
        "FI": {
            "regex": "^[0-9]{3,5}",
            "maxlen": "5",
            "minlen": "3",
            "sample": "12345"
              },
        "FR": {
            "regex": "^[0-9]{5}",
            "maxlen": "5",
            "minlen": "5",
            "sample": "12345"
              },
        "GB": {
            "regex": "^[A-Z]{1,2}[0-9]{1,2}[A-Z]?[ ][0-9][A-Z]{2}$",
            "maxlen": "9",
            "minlen": "5",
            "sample": "A9 9AA"
              },
        "GI": {
            "regex": "^[A-Z]{1,2}[0-9]{1,2}[A-Z]?[ ][0-9][A-Z]{2}$",
            "maxlen": "9",
            "minlen": "5",
            "sample": "A9 9AA"
              },
        "GR": {
            "regex": "^[0-9]{3}[ ]?[0-9]{2}",
            "separator": " ",
            "separator_count": "3",
            "maxlen": "6",
            "minlen": "5",
            "sample": "123 12"
              },
        "HK": "",
        "HR": {
            "regex": "^[0-9]{5}",
            "maxlen": "5",
            "minlen": "5",
            "sample": "12345"
              },
        "HU": {
            "regex": "^[0-9]{4}",
            "maxlen": "4",
            "minlen": "4",
            "sample": "1234"
              },
        "IE": "",
        "IS": {
            "regex": "^[0-9]{3}",
            "maxlen": "3",
            "minlen": "3",
            "sample": "123"
              },
        "IT": {
            "regex": "^[0-9]{5}",
            "maxlen": "5",
            "minlen": "5",
            "sample": "12345"
              },
        "JP": {
            "regex": "^[0-9]{7}",
            "maxlen": "7",
            "minlen": "7",
            "sample": "1234567"
              },
        "KR": {
            "regex": "^[0-9]{3}[-]?[0-9]{3}",
            "separator": "-",
            "separator_count": "3",
            "maxlen": "7",
            "minlen": "6",
            "sample": "123-123"
              },
        "LI": {
            "regex": "^[0-9]{4}",
            "maxlen": "4",
            "minlen": "4",
            "sample": "1234"
              },
        "LU": {
            "regex": "^[0-9]{4}",
            "maxlen": "4",
            "minlen": "4",
            "sample": "1234"
              },
        "LT": {
            "regex": "^[0-9]{5}",
            "maxlen": "5",
            "minlen": "5",
            "sample": "12345"
              },
        "LV": {
            "regex": "^(LV-)[0-9]{4}",
            "maxlen": "7",
            "minlen": "7",
            "sample": "LV-1234"
              },
        "MC": {
            "regex": "^[0-9]{5}",
            "maxlen": "5",
            "minlen": "5",
            "sample": "12345"
              },
        "MT": "",
        "NL": {
            "regex": "^[0-9]{4}[ ]?[A-Za-z]{2}",
            "separator": " ",
            "separator_count": "4",
            "maxlen": "7",
            "minlen": "6",
            "sample": "1234 AB"
              },
        "NO": {
            "regex": "^[0-9]{4}",
            "maxlen": "4",
            "minlen": "4",
            "sample": "1234"
              },
        "PL": {
            "regex": "^[0-9]{2}[-]?[0-9]{3}",
            "separator": "-",
            "separator_count": "2",
            "maxlen": "6",
            "minlen": "5",
            "sample": "12-123"
              },
        "PT": {
            "regex": "^[0-9]{4}[-]?[0-9]{3}?",
            "separator": "-",
            "separator_count": "4",
            "maxlen": "8",
            "minlen": "4",
            "sample": "1234-123"
              },
        "RO": {
            "regex": "^[0-9]{6}",
            "maxlen": "6",
            "minlen": "6",
            "sample": "123456"
              },
        "RS": "",
        "RU": {
            "regex": "^[0-9]{6}",
            "maxlen": "6",
            "minlen": "6",
            "sample": "123456"
              },
        "SE": {
            "regex": "^[0-9]{3}[ ]?[0-9]{2}",
            "separator": " ",
            "separator_count": "3",
            "maxlen": "6",
            "minlen": "5",
            "sample": "123 12"
              },
        "SI": {
            "regex": "^[0-9]{4}",
            "maxlen": "4",
            "minlen": "4",
            "sample": "1234"
              },
        "SM": {
            "regex": "^[0-9]{5}",
            "maxlen": "5",
            "minlen": "5",
            "sample": "12345"
              },
        "SK": {
            "regex": "^[0-9]{3}[ ]?[0-9]{2}",
            "separator": " ",
            "separator_count": "3",
            "maxlen": "6",
            "minlen": "5",
            "sample": "123 12"
              },
        "TH": {
            "regex": "^[0-9]{5}",
            "maxlen": "5",
            "minlen": "5",
            "sample": "12345"
              },
        "TR": {
            "regex": "^[0-9]{4,5}",
            "maxlen": "5",
            "minlen": "4",
            "sample": "12345"
              }
    }

    return postal_code_matrix[country_code];

}

/*
 * Validate a zipcode given a country
 * @param code - the postal code to validate
 * @param country - the country to validate against
 */
function isValidPostalCode(code, country) {
    console.info( 'isValidPostalCode', code, country );
    code = $.trim(code);
    var format = getPostalCodeRegexMatrix(country);
    if (format) {
        if (code.length < parseInt(format.minlen)) {
            return false;
        }
        if (code.length > parseInt(format.maxlen)) {
            return false;
        }
        var re = new RegExp(format.regex);
        return re.test(code);
    }
    else {
        debug.log('No country found')
        return false;
    }
}

// TO-DO: this is too entagled and not-unit testable
// Should be refactored to use the isValidPostalCode function above
function validatePostalCode(e,whichField,flow) {

    var fieldVal = $('#'+whichField).val();
    var fieldLen = $('#'+whichField).val().length;
    var helpDiv = 'postal-code-help';
    var country = 'US';
    var mode = 'mailing';
    fieldVal = $.trim(fieldVal);

    // set vars if no key/mouse event is passed
    if (typeof e == 'undefined' || e == null) {
        var keyCode = '99';
        var eventType = 'onready';
    } else {
        var keyCode = e.keyCode;
        var eventType = e.type;
    }

    // buy flow: get country from reservation country field.
    if (flow == 'buy' && $('#basic-country').length) {
        country = $('#basic-country').val();
    }
    // buy flow: get country on payment page for cc or ach
    else if(flow == 'buy' && ($('#edit-cc-country').length || $('#edit-ach-country').length)) {
        var payment_method = $('#payment_type_hidden').val();
        if (payment_method == 'cr') {
            country = $('#edit-cc-country').val();
        }
        else if (payment_method == 'ach') {
            country = $('#edit-ach-country').val();
            helpDiv = 'postal-code-help-ach';
        }
    }
    // booking flow: get country on registration and payment page(s)
    else if (flow == 'booking' && $('#country').length) {
        country = $('#country').val();
    }
    // delivery flow:
    else if (flow == 'delivery' && $('#country').length) {
        country = $('#country').val();
    }

    // buy flow: set mode based on field to validate
    if (flow == 'buy' && (whichField == 'edit-PostalCode' || whichField == 'edit-cc-postalcode' || whichField == 'edit-ach-postalcode')) {
        mode = 'delivery';
    }

    // buy flow: update the reservation agreement based on zip code for US.
    if (flow == 'buy' && fieldLen == 5 && $('#page-own-basic').length) {
        updateResAgreement(mode);
    }

    // postal code format validation for countries configured in common.js
    // pulled using getPostalCodeRegexMatrix() function
    var this_country = country;
    if (flow == 'buy' && mode == 'mailing') {
        this_country = $('#edit-mailing-country').val();
        helpDiv = 'postal-code-help-mailing';
    }

    var postal_code_formatting = getPostalCodeRegexMatrix(this_country);
    if (postal_code_formatting) {
        if (postal_code_formatting.separator && postal_code_formatting.separator_count && keyCode != '8') {
            if (fieldLen >= parseInt(postal_code_formatting.separator_count)) { // && fieldLen <= parseInt(postal_code_formatting.separator_count)
                if (!~fieldVal.indexOf(postal_code_formatting.separator)) {
                    var seg1 = fieldVal.substr(0,postal_code_formatting.separator_count);
                    var seg2 = fieldVal.substr(postal_code_formatting.separator_count);
                    fieldVal = seg1 + postal_code_formatting.separator;
                    if(seg2) {
                        fieldVal = fieldVal + seg2;
                    }
                }
                $('#'+whichField).val(fieldVal);
            }
            else if (!~fieldVal.indexOf(postal_code_formatting.separator)) {
                // debug.log('add in the separator after separator_count has been surpassed');
                fieldValFirst = fieldVal.substring(0,parseInt(postal_code_formatting.separator_count));
                fieldValLast = fieldVal.substring(parseInt(postal_code_formatting.separator_count));
                fieldVal = fieldValFirst + postal_code_formatting.separator + fieldValLast;
                fieldLen = fieldVal.length;
            }
        }
        // limit input length
        if (fieldLen > parseInt(postal_code_formatting.maxlen)) {
            // debug.log('limit character input to: '+postal_code_formatting.maxlen);
            fieldVal = fieldVal.substring(0,parseInt(postal_code_formatting.maxlen));
            $('#'+whichField).val(fieldVal);
        }

        fieldLen = $('#'+whichField).val().length;
        if (fieldLen == parseInt(postal_code_formatting.maxlen) || (eventType == 'onready' && fieldLen < parseInt(postal_code_formatting.maxlen))) {
            // debug.log('check the format against the regex: '+postal_code_formatting.regex);
            if (postal_code_formatting.regex && fieldVal.match(postal_code_formatting.regex) == null) {
                $('#'+whichField).addClass('error');
                $('#'+helpDiv).html(Drupal.t('example: ')+postal_code_formatting.sample);
                $('#'+helpDiv).fadeIn('swing');
            }
            else {
                if ($('#'+whichField).hasClass('error')) {
                    $('#'+whichField).removeClass('error');
                    $('#'+helpDiv).hide();
                }
            }
        }
        else if (eventType == 'blur') {
            if (fieldLen < parseInt(postal_code_formatting.minlen)) {
                $('#'+whichField).addClass('error');
                $('#'+helpDiv).html(Drupal.t('format:')+postal_code_formatting.sample);
                $('#'+helpDiv).fadeIn('swing');
            }
        }
    }
}

/*
 * Meets Minimum Age
 * meetsMinimumAge(new Date(year, month, date), 18)
 */
function meetsMinimumAge(birthDate, minAge) {
    var tempDate = new Date(birthDate.getFullYear() + minAge, birthDate.getMonth(), birthDate.getDate());
    if (tempDate <= new Date()) {
        return true;
    }
    else {
        return false;
    }
}

/*
 * Get the Age
 * getAge(new Date(year, month, date));
 */
function getAge(birthDate) {
    var birthdate   = new Date(birthDate.getFullYear(), birthDate.getMonth(), birthDate.getDate());
    var today_date  = new Date();
    var today_year  = today_date.getFullYear();
    var today_month = today_date.getMonth();
    var today_day   = today_date.getDate();
    var age         = today_year - birthDate.getFullYear();

    if ( today_month < (birthDate.getMonth() - 1)) {
        age--;
    }
    if (((birthDate.getMonth() - 1) == today_month) && (today_day < birthDate.getDate())) {
        age--;
    }
    return age;

}

/**
 * Generate url with path prefix
 *
 * @param string Url with beginning slash
 * @return string Url with path prefix
 */
function generateUrlWithPathPrefix(url_with_beginning_slash) {
    var url_with_path_prefix = '';
    if (typeof Drupal !== 'undefined' && typeof Drupal.settings !== 'undefined' && typeof Drupal.settings.tesla.locale !== 'undefined' && Drupal.settings.tesla.locale !== '') {
        url_with_path_prefix += '/' + Drupal.settings.tesla.locale;
        if(Drupal.settings.tesla.locale == 'ja_JP') {
            url_with_path_prefix = '/jp';
        }
        if(Drupal.settings.tesla.locale == 'zh_CN') {
            url_with_path_prefix = '/cn';
        }
    }
    url_with_path_prefix += url_with_beginning_slash;
    return url_with_path_prefix;
}
;
var Tesla = Tesla || {};
if (typeof Tesla.Utils == 'undefined') Tesla.Utils = {};

Tesla.Utils.createCookie = function(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else {
        var expires = "";
    }
    document.cookie = name + "=" + value + expires + "; path=/";
}

Tesla.Utils.readCookie = function(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1,c.length);
        }
        if (c.indexOf(nameEQ) == 0) {
            return c.substring(nameEQ.length,c.length);
        }
    }
    return null;
}

Tesla.Utils.eraseCookie = function(name) {
    Tesla.Utils.createCookie(name,"",-1);
}
;
/*!
 * accounting.js v0.3.2, copyright 2011 Joss Crowcroft, MIT license, http://josscrowcroft.github.com/accounting.js
 */
(function(p,z){function q(a){return!!(""===a||a&&a.charCodeAt&&a.substr)}function m(a){return u?u(a):"[object Array]"===v.call(a)}function r(a){return"[object Object]"===v.call(a)}function s(a,b){var d,a=a||{},b=b||{};for(d in b)b.hasOwnProperty(d)&&null==a[d]&&(a[d]=b[d]);return a}function j(a,b,d){var c=[],e,h;if(!a)return c;if(w&&a.map===w)return a.map(b,d);for(e=0,h=a.length;e<h;e++)c[e]=b.call(d,a[e],e,a);return c}function n(a,b){a=Math.round(Math.abs(a));return isNaN(a)?b:a}function x(a){var b=c.settings.currency.format;"function"===typeof a&&(a=a());return q(a)&&a.match("%v")?{pos:a,neg:a.replace("-","").replace("%v","-%v"),zero:a}:!a||!a.pos||!a.pos.match("%v")?!q(b)?b:c.settings.currency.format={pos:b,neg:b.replace("%v","-%v"),zero:b}:a}var c={version:"0.3.2",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},w=Array.prototype.map,u=Array.isArray,v=Object.prototype.toString,o=c.unformat=c.parse=function(a,b){if(m(a))return j(a,function(a){return o(a,b)});a=a||0;if("number"===typeof a)return a;var b=b||".",c=RegExp("[^0-9-"+b+"]",["g"]),c=parseFloat((""+a).replace(/\((.*)\)/,"-$1").replace(c,"").replace(b,"."));return!isNaN(c)?c:0},y=c.toFixed=function(a,b){var b=n(b,c.settings.number.precision),d=Math.pow(10,b);return(Math.round(c.unformat(a)*d)/d).toFixed(b)},t=c.formatNumber=function(a,b,d,i){if(m(a))return j(a,function(a){return t(a,b,d,i)});var a=o(a),e=s(r(b)?b:{precision:b,thousand:d,decimal:i},c.settings.number),h=n(e.precision),f=0>a?"-":"",g=parseInt(y(Math.abs(a||0),h),10)+"",l=3<g.length?g.length%3:0;return f+(l?g.substr(0,l)+e.thousand:"")+g.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+e.thousand)+(h?e.decimal+y(Math.abs(a),h).split(".")[1]:"")},A=c.formatMoney=function(a,b,d,i,e,h){if(m(a))return j(a,function(a){return A(a,b,d,i,e,h)});var a=o(a),f=s(r(b)?b:{symbol:b,precision:d,thousand:i,decimal:e,format:h},c.settings.currency),g=x(f.format);return(0<a?g.pos:0>a?g.neg:g.zero).replace("%s",f.symbol).replace("%v",t(Math.abs(a),n(f.precision),f.thousand,f.decimal))};c.formatColumn=function(a,b,d,i,e,h){if(!a)return[];var f=s(r(b)?b:{symbol:b,precision:d,thousand:i,decimal:e,format:h},c.settings.currency),g=x(f.format),l=g.pos.indexOf("%s")<g.pos.indexOf("%v")?!0:!1,k=0,a=j(a,function(a){if(m(a))return c.formatColumn(a,f);a=o(a);a=(0<a?g.pos:0>a?g.neg:g.zero).replace("%s",f.symbol).replace("%v",t(Math.abs(a),n(f.precision),f.thousand,f.decimal));if(a.length>k)k=a.length;return a});return j(a,function(a){return q(a)&&a.length<k?l?a.replace(f.symbol,f.symbol+Array(k-a.length+1).join(" ")):Array(k-a.length+1).join(" ")+a:a})};if("undefined"!==typeof exports){if("undefined"!==typeof module&&module.exports)exports=module.exports=c;exports.accounting=c}else"function"===typeof define&&define.amd?define([],function(){return c}):(c.noConflict=function(a){return function(){p.accounting=a;c.noConflict=z;return c}}(p.accounting),p.accounting=c)})(this);;
// moment.js
// version : 1.7.2
// author : Tim Wood
// license : MIT
// momentjs.com
(function(a){function E(a,b,c,d){var e=c.lang();return e[a].call?e[a](c,d):e[a][b]}function F(a,b){return function(c){return K(a.call(this,c),b)}}function G(a){return function(b){var c=a.call(this,b);return c+this.lang().ordinal(c)}}function H(a,b,c){this._d=a,this._isUTC=!!b,this._a=a._a||null,this._lang=c||!1}function I(a){var b=this._data={},c=a.years||a.y||0,d=a.months||a.M||0,e=a.weeks||a.w||0,f=a.days||a.d||0,g=a.hours||a.h||0,h=a.minutes||a.m||0,i=a.seconds||a.s||0,j=a.milliseconds||a.ms||0;this._milliseconds=j+i*1e3+h*6e4+g*36e5,this._days=f+e*7,this._months=d+c*12,b.milliseconds=j%1e3,i+=J(j/1e3),b.seconds=i%60,h+=J(i/60),b.minutes=h%60,g+=J(h/60),b.hours=g%24,f+=J(g/24),f+=e*7,b.days=f%30,d+=J(f/30),b.months=d%12,c+=J(d/12),b.years=c,this._lang=!1}function J(a){return a<0?Math.ceil(a):Math.floor(a)}function K(a,b){var c=a+"";while(c.length<b)c="0"+c;return c}function L(a,b,c){var d=b._milliseconds,e=b._days,f=b._months,g;d&&a._d.setTime(+a+d*c),e&&a.date(a.date()+e*c),f&&(g=a.date(),a.date(1).month(a.month()+f*c).date(Math.min(g,a.daysInMonth())))}function M(a){return Object.prototype.toString.call(a)==="[object Array]"}function N(a,b){var c=Math.min(a.length,b.length),d=Math.abs(a.length-b.length),e=0,f;for(f=0;f<c;f++)~~a[f]!==~~b[f]&&e++;return e+d}function O(a,b,c,d){var e,f,g=[];for(e=0;e<7;e++)g[e]=a[e]=a[e]==null?e===2?1:0:a[e];return a[7]=g[7]=b,a[8]!=null&&(g[8]=a[8]),a[3]+=c||0,a[4]+=d||0,f=new Date(0),b?(f.setUTCFullYear(a[0],a[1],a[2]),f.setUTCHours(a[3],a[4],a[5],a[6])):(f.setFullYear(a[0],a[1],a[2]),f.setHours(a[3],a[4],a[5],a[6])),f._a=g,f}function P(a,c){var d,e,g=[];!c&&h&&(c=require("./lang/"+a));for(d=0;d<i.length;d++)c[i[d]]=c[i[d]]||f.en[i[d]];for(d=0;d<12;d++)e=b([2e3,d]),g[d]=new RegExp("^"+(c.months[d]||c.months(e,""))+"|^"+(c.monthsShort[d]||c.monthsShort(e,"")).replace(".",""),"i");return c.monthsParse=c.monthsParse||g,f[a]=c,c}function Q(a){var c=typeof a=="string"&&a||a&&a._lang||null;return c?f[c]||P(c):b}function R(a){return a.match(/\[.*\]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function S(a){var b=a.match(k),c,d;for(c=0,d=b.length;c<d;c++)D[b[c]]?b[c]=D[b[c]]:b[c]=R(b[c]);return function(e){var f="";for(c=0;c<d;c++)f+=typeof b[c].call=="function"?b[c].call(e,a):b[c];return f}}function T(a,b){function d(b){return a.lang().longDateFormat[b]||b}var c=5;while(c--&&l.test(b))b=b.replace(l,d);return A[b]||(A[b]=S(b)),A[b](a)}function U(a){switch(a){case"DDDD":return p;case"YYYY":return q;case"S":case"SS":case"SSS":case"DDD":return o;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return r;case"Z":case"ZZ":return s;case"T":return t;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return n;default:return new RegExp(a.replace("\\",""))}}function V(a,b,c,d){var e,f;switch(a){case"M":case"MM":c[1]=b==null?0:~~b-1;break;case"MMM":case"MMMM":for(e=0;e<12;e++)if(Q().monthsParse[e].test(b)){c[1]=e,f=!0;break}f||(c[8]=!1);break;case"D":case"DD":case"DDD":case"DDDD":b!=null&&(c[2]=~~b);break;case"YY":c[0]=~~b+(~~b>70?1900:2e3);break;case"YYYY":c[0]=~~Math.abs(b);break;case"a":case"A":d.isPm=(b+"").toLowerCase()==="pm";break;case"H":case"HH":case"h":case"hh":c[3]=~~b;break;case"m":case"mm":c[4]=~~b;break;case"s":case"ss":c[5]=~~b;break;case"S":case"SS":case"SSS":c[6]=~~(("0."+b)*1e3);break;case"Z":case"ZZ":d.isUTC=!0,e=(b+"").match(x),e&&e[1]&&(d.tzh=~~e[1]),e&&e[2]&&(d.tzm=~~e[2]),e&&e[0]==="+"&&(d.tzh=-d.tzh,d.tzm=-d.tzm)}b==null&&(c[8]=!1)}function W(a,b){var c=[0,0,1,0,0,0,0],d={tzh:0,tzm:0},e=b.match(k),f,g;for(f=0;f<e.length;f++)g=(U(e[f]).exec(a)||[])[0],g&&(a=a.slice(a.indexOf(g)+g.length)),D[e[f]]&&V(e[f],g,c,d);return d.isPm&&c[3]<12&&(c[3]+=12),d.isPm===!1&&c[3]===12&&(c[3]=0),O(c,d.isUTC,d.tzh,d.tzm)}function X(a,b){var c,d=a.match(m)||[],e,f=99,g,h,i;for(g=0;g<b.length;g++)h=W(a,b[g]),e=T(new H(h),b[g]).match(m)||[],i=N(d,e),i<f&&(f=i,c=h);return c}function Y(a){var b="YYYY-MM-DDT",c;if(u.exec(a)){for(c=0;c<4;c++)if(w[c][1].exec(a)){b+=w[c][0];break}return s.exec(a)?W(a,b+" Z"):W(a,b)}return new Date(a)}function Z(a,b,c,d,e){var f=e.relativeTime[a];return typeof f=="function"?f(b||1,!!c,a,d):f.replace(/%d/i,b||1)}function $(a,b,c){var e=d(Math.abs(a)/1e3),f=d(e/60),g=d(f/60),h=d(g/24),i=d(h/365),j=e<45&&["s",e]||f===1&&["m"]||f<45&&["mm",f]||g===1&&["h"]||g<22&&["hh",g]||h===1&&["d"]||h<=25&&["dd",h]||h<=45&&["M"]||h<345&&["MM",d(h/30)]||i===1&&["y"]||["yy",i];return j[2]=b,j[3]=a>0,j[4]=c,Z.apply({},j)}function _(a,c){b.fn[a]=function(a){var b=this._isUTC?"UTC":"";return a!=null?(this._d["set"+b+c](a),this):this._d["get"+b+c]()}}function ab(a){b.duration.fn[a]=function(){return this._data[a]}}function bb(a,c){b.duration.fn["as"+a]=function(){return+this/c}}var b,c="1.7.2",d=Math.round,e,f={},g="en",h=typeof module!="undefined"&&module.exports,i="months|monthsShort|weekdays|weekdaysShort|weekdaysMin|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),j=/^\/?Date\((\-?\d+)/i,k=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|.)/g,l=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?)/g,m=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,n=/\d\d?/,o=/\d{1,3}/,p=/\d{3}/,q=/\d{1,4}/,r=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,s=/Z|[\+\-]\d\d:?\d\d/i,t=/T/i,u=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,v="YYYY-MM-DDTHH:mm:ssZ",w=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],x=/([\+\-]|\d\d)/gi,y="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),z={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},A={},B="DDD w M D d".split(" "),C="M D H h m s w".split(" "),D={M:function(){return this.month()+1},MMM:function(a){return E("monthsShort",this.month(),this,a)},MMMM:function(a){return E("months",this.month(),this,a)},D:function(){return this.date()},DDD:function(){var a=new Date(this.year(),this.month(),this.date()),b=new Date(this.year(),0,1);return~~((a-b)/864e5+1.5)},d:function(){return this.day()},dd:function(a){return E("weekdaysMin",this.day(),this,a)},ddd:function(a){return E("weekdaysShort",this.day(),this,a)},dddd:function(a){return E("weekdays",this.day(),this,a)},w:function(){var a=new Date(this.year(),this.month(),this.date()-this.day()+5),b=new Date(a.getFullYear(),0,4);return~~((a-b)/864e5/7+1.5)},YY:function(){return K(this.year()%100,2)},YYYY:function(){return K(this.year(),4)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return K(~~(this.milliseconds()/10),2)},SSS:function(){return K(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return a<0&&(a=-a,b="-"),b+K(~~(a/60),2)+":"+K(~~a%60,2)},ZZ:function(){var a=-this.zone(),b="+";return a<0&&(a=-a,b="-"),b+K(~~(10*a/6),4)}};while(B.length)e=B.pop(),D[e+"o"]=G(D[e]);while(C.length)e=C.pop(),D[e+e]=F(D[e],2);D.DDDD=F(D.DDD,3),b=function(c,d){if(c===null||c==="")return null;var e,f;return b.isMoment(c)?new H(new Date(+c._d),c._isUTC,c._lang):(d?M(d)?e=X(c,d):e=W(c,d):(f=j.exec(c),e=c===a?new Date:f?new Date(+f[1]):c instanceof Date?c:M(c)?O(c):typeof c=="string"?Y(c):new Date(c)),new H(e))},b.utc=function(a,c){return M(a)?new H(O(a,!0),!0):(typeof a=="string"&&!s.exec(a)&&(a+=" +0000",c&&(c+=" Z")),b(a,c).utc())},b.unix=function(a){return b(a*1e3)},b.duration=function(a,c){var d=b.isDuration(a),e=typeof a=="number",f=d?a._data:e?{}:a,g;return e&&(c?f[c]=a:f.milliseconds=a),g=new I(f),d&&(g._lang=a._lang),g},b.humanizeDuration=function(a,c,d){return b.duration(a,c===!0?null:c).humanize(c===!0?!0:d)},b.version=c,b.defaultFormat=v,b.lang=function(a,c){var d;if(!a)return g;(c||!f[a])&&P(a,c);if(f[a]){for(d=0;d<i.length;d++)b[i[d]]=f[a][i[d]];b.monthsParse=f[a].monthsParse,g=a}},b.langData=Q,b.isMoment=function(a){return a instanceof H},b.isDuration=function(a){return a instanceof I},b.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(a){var b=a%10;return~~(a%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th"}}),b.fn=H.prototype={clone:function(){return b(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds(),!!this._isUTC]},isValid:function(){return this._a?this._a[8]!=null?!!this._a[8]:!N(this._a,(this._a[7]?b.utc(this._a):b(this._a)).toArray()):!isNaN(this._d.getTime())},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(a){return T(this,a?a:b.defaultFormat)},add:function(a,c){var d=c?b.duration(+c,a):b.duration(a);return L(this,d,1),this},subtract:function(a,c){var d=c?b.duration(+c,a):b.duration(a);return L(this,d,-1),this},diff:function(a,c,e){var f=this._isUTC?b(a).utc():b(a).local(),g=(this.zone()-f.zone())*6e4,h=this._d-f._d-g,i=this.year()-f.year(),j=this.month()-f.month(),k=this.date()-f.date(),l;return c==="months"?l=i*12+j+k/30:c==="years"?l=i+(j+k/30)/12:l=c==="seconds"?h/1e3:c==="minutes"?h/6e4:c==="hours"?h/36e5:c==="days"?h/864e5:c==="weeks"?h/6048e5:h,e?l:d(l)},from:function(a,c){return b.duration(this.diff(a)).lang(this._lang).humanize(!c)},fromNow:function(a){return this.from(b(),a)},calendar:function(){var a=this.diff(b().sod(),"days",!0),c=this.lang().calendar,d=c.sameElse,e=a<-6?d:a<-1?c.lastWeek:a<0?c.lastDay:a<1?c.sameDay:a<2?c.nextDay:a<7?c.nextWeek:d;return this.format(typeof e=="function"?e.apply(this):e)},isLeapYear:function(){var a=this.year();return a%4===0&&a%100!==0||a%400===0},isDST:function(){return this.zone()<b([this.year()]).zone()||this.zone()<b([this.year(),5]).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return a==null?b:this.add({d:a-b})},startOf:function(a){switch(a.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return this},endOf:function(a){return this.startOf(a).add(a.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return b.utc([this.year(),this.month()+1,0]).date()},lang:function(b){return b===a?Q(this):(this._lang=b,this)}};for(e=0;e<y.length;e++)_(y[e].toLowerCase(),y[e]);_("year","FullYear"),b.duration.fn=I.prototype={weeks:function(){return J(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months*2592e6},humanize:function(a){var b=+this,c=this.lang().relativeTime,d=$(b,!a,this.lang()),e=b<=0?c.past:c.future;return a&&(typeof e=="function"?d=e(d):d=e.replace(/%s/i,d)),d},lang:b.fn.lang};for(e in z)z.hasOwnProperty(e)&&(bb(e,z[e]),ab(e.toLowerCase()));bb("Weeks",6048e5),h&&(module.exports=b),typeof ender=="undefined"&&(this.moment=b),typeof define=="function"&&define.amd&&define("moment",[],function(){return b})}).call(this);;
/*  Localization specific code goes here
    Requires accounting.min.js
*/
var Tesla = Tesla || {};

// List of countries flagged as EU other (see: tesla.locale.inc)
var euOtherCountries = ['BG', 'CZ', 'EE', 'FI', 'GI', 'GR', 'HU', 'LV', 'LI', 'LT', 'LU', 'MC', 'PL', 'PT', 'RO', 'RU', 'SM', 'SK', 'SI', 'ES', 'TR'];

var kmCountries = new Array("de_AT", "de_CH", "de_DE", "en_AT", "en_AU", "en_BE", "en_CA", "en_CH", "en_DK", "en_EU", "en_HK", "en_IT", "en_NL", "es_ES", "fr_BE", "fr_CH", "fr_FR", "it_CH", "it_IT", "jp", "nl_NL", "no_NO", "fr_CA");

var currency_locale = {
         'AD': {
             currency:'EUR',
             symbol: '&#8364;',
             position: 'postfix',
             thousand: '.',
             decimal: ',',
             format : "%v %s"
         },
         'AT': {
             currency:'EUR',
             symbol: '&#8364;',
             format : "%v %s",
             thousand: '.',
             decimal: ','
         },
         'en_AT': {
             currency:'EUR',
             symbol: '&#8364;',
             format : "%v %s",
             thousand: '.',
             decimal: ','
         },
         'de_AT': {
             currency:'EUR',
             symbol: '&#8364;',
             format : "%v %s",
             thousand: '.',
             decimal: ','
         },
         'AU': {
             currency:'AUD',
             symbol: '$'
         },
         'en_AU': {
             currency:'AUD',
             symbol: '$'
         },
         'BE': {
             currency:'EUR',
             symbol: '&#8364;',
             format : "%s %v",
             thousand: '.',
             decimal: ','
         },
         'en_BE': {
             currency:'EUR',
             symbol: '&#8364;',
             format : "%s %v",
             thousand: '.',
             decimal: ','
         },
         'fr_BE': {
             currency:'EUR',
             symbol: '&#8364;',
             format : "%s %v",
             thousand: '.',
             decimal: ','
         },
         'CA': {
             currency: 'CAD',
             symbol:'$',
             format: "%s%v",
             decimal: ".",
             thousand: ","
         },
         'en_CA': {
             currency: 'CAD',
             symbol:'$'
         },
         'fr_CA': {
             currency: 'CAD',
             symbol:'$',
             format : "%v %s",
             thousand: ' ',
             decimal: ','
         },
         'CH': {
             currency: 'CHF',
             symbol:'CHF',
             format : "%s %v",
             thousand: "'",
             decimal: '.'
         },
         'de_CH': {
             currency: 'CHF',
             symbol:'CHF',
             format : "%s %v",
             thousand: "'",
             decimal: '.'
         },
         'fr_CH': {
             currency: 'CHF',
             symbol:'CHF',
             format : "%s %v",
             thousand: "'",
             decimal: '.'
         },
         'it_CH': {
             currency: 'CHF',
             symbol:'CHF',
             format : "%s %v",
             thousand: "'",
             decimal: '.'
         },
         'CN': {
             currency:'CNY',
             symbol: '&yen;',
             thousand: ',',
             decimal: '.',
             format: "%s %v"
         },
         'CY': {
             currency:'EUR',
             symbol: '&#8364;',
             position: 'postfix',
             format : "%s %v",
             thousand: '.',
             decimal: ','
         },
         'DE': {
             currency:'EUR',
             symbol: '&#8364;',
             thousand: '.',
             decimal: ',',
             format : "%v %s"
         },
         'de_DE': {
             currency:'EUR',
             symbol: '&#8364;',
             thousand: '.',
             decimal: ',',
             format : "%v %s"
         },
         'DK': {
             currency:'DKK',
             symbol: 'kr.',
             thousand: '.',
             decimal: ',',
             format : "%s %v"
         },
         'en_DK': {
             currency:'DKK',
             symbol: 'kr.',
             thousand: '.',
             decimal: ',',
             format : "%s %v"
         },
         'da_DK': {
             currency:'DKK',
             symbol: 'kr.',
             thousand: '.',
             decimal: ',',
             format : "%s %v"
         },
         'EE': {
             currency:'EUR',
             symbol: '&#8364;',
             thousand: '.',
             decimal: ',',
             position: 'postfix',
             format : "%v %s"
         },
         'ES': {
             currency:'EUR',
             symbol: '&#8364;',
             thousand: '.',
             decimal: ',',
             position: 'prefix',
             format : "%s %v"
         },
         'EU': {
             currency:'EUR',
             symbol: '&#8364;',
             thousand: '.',
             decimal: ',',
             position: 'prefix',
             format : "%s %v"
         },
         'en_EU': {
             currency:'EUR',
             symbol: '&#8364;',
             thousand: '.',
             decimal: ',',
             position: 'prefix',
             format : "%s %v"
         },
         'FI': {
             currency:'EUR',
             symbol: '&#8364;',
             thousand: ' ',
             decimal: ',',
             position: 'postfix',
             format : "%s %v"
         },
         'FR': {
             currency:'EUR',
             symbol: '&#8364;',
             thousand: ' ',
             decimal: ',',
             format : "%v %s"
         },
         'fr_FR': {
             currency:'EUR',
             symbol: '&#8364;',
             thousand: ' ',
             decimal: ',',
             format : "%v %s"
         },
         'GB': {
             currency:'GBP',
             symbol: '&pound;'
         },
         'en_GB': {
             currency:'GBP',
             symbol: '&pound;'
         },
         'GR': {
             currency:'EUR',
             symbol: '&#8364;',
             thousand: '.',
             decimal: ',',
             position: 'postfix',
             format : "%v %s"
         },
         'HK': {
             currency:'HKD',
             symbol: '$'
         },
         'en_HK': {
             currency:'HKD',
             symbol: 'HK$',
             position: 'prefix'
//             format : "%s %v"
         },
         'IE': {
             currency:'EUR',
             symbol: '&#8364;'
         },
         'IT': {
             currency:'EUR',
             symbol: '&#8364;',
             format: '%s %v',
             thousand: '.',
             decimal: ','
         },
         'it_IT': {
             currency:'EUR',
             symbol: '&#8364;',
             format: '%s %v',
             thousand: '.',
             decimal: ','
         },
         'LU': {
             currency:'EUR',
             symbol: '&#8364;',
             position: 'prefix',
             thousand: '.',
             decimal: ','
         },
         'MC': {
             currency:'EUR',
             symbol: '&#8364;',
             position: 'postfix',
             thousand: ' ',
             decimal: ',',
             format : "%v %s"
         },
         'MT': {
             currency:'EUR',
             symbol: '&#8364;',
             thousand: '.',
             decimal: ','
         },
         'NL': {
             currency:'EUR',
             symbol: '&#8364;',
             format: '%s %v',
             thousand: '.',
             decimal: ','
         },
         'nl_NL': {
             currency:'EUR',
             symbol: '&#8364;',
             format: '%s %v',
             thousand: '.',
             decimal: ','
         },
         'NO': {
             currency:'NOK',
             symbol: 'kr.',
             thousand: '.',
             decimal: ',',
             format : "%s %v"
         },
         'no_NO': {
             currency:'NOK',
             symbol: 'kr.',
             thousand: '.',
             decimal: ',',
             format : "%s %v"
         },
         'sv_SE': {
             currency:'SEK',
             symbol: 'kr.',
             thousand: '.',
             decimal: ',',
             format : "%s %v"
         },
         'SE': {
             currency:'SEK',
             symbol: 'kr',
             thousand: '.',
             decimal: ',',
             format : "%v %s"
         },
         'PT': {
             currency:'EUR',
             symbol: '&#8364;',
             thousand: '.',
             decimal: ',',
             position: 'postfix',
             format : "%v %s"
         },
         'JP': {
             currency:'JPY',
             symbol: '&yen;'
         },
         'ja_JP': {
             currency:'JPY',
             symbol: '&yen;'
         },
         'US': {
             currency:'USD',
             symbol: '$',
             format: "%s%v",
             decimal: ".",
             thousand: ","
         },
         'en_US': {
             currency:'USD',
             symbol: '$'
         }
     };

Tesla.formatMoney =  function(value, region, precision, showCurrSymbol) {

  var currency_default, attrname;
   /* These are taken from the acountancy defaults, apart from currency */
   currency_default = {
      currency: 'USD', // This is custom, we add it.
      symbol: "$",   // default currency symbol is '$'
      format : "%s%v",  // controls output: %s = symbol, %v = value (can be object, see docs)
      decimal : ".",    // decimal point separator
      thousand : ",",   // thousands separator
      precision : 2,    // decimal places
      grouping : 3    // digit grouping (not implemented yet)
    };

  // Set currency defaults in the accounting.settings.currency object.
  if (!region || region == 'default') {
    for (var def_attr in currency_default) {
      accounting.settings.currency[def_attr] = currency_default[def_attr];
    }
  } else { // Read from the currency_locale object
    for (var reg_attr in currency_locale[region]) {
       accounting.settings.currency[reg_attr] = currency_locale[region][reg_attr];
            // Show currency symbol or not
        if ( showCurrSymbol == false ){
            accounting.settings.currency["symbol"] = "";
        }
    }
  }
  // set decimal places if sent as an arg, otherwise, use default setting.
  accounting.settings.currency.precision = typeof precision == 'undefined' ? accounting.settings.currency.precision : precision;

  // Run our values through the accounting formatMoney method.
  if(value || value === 0) {
    return accounting.formatMoney(value, accounting.settings.currency);
  }

  return "";

};

function localizeCost(c, floating_points) {
  var i18n_c, i18n_c_string;
  if (Drupal.settings.tesla) { // Added on Document ready in common.js
    if (Drupal.settings.tesla.locale === 'fr_CA') {
      i18n_c = Number(c).toFixed(floating_points).replace('.',',');
      i18n_c_string = i18n_c + " $";
    } else {
      i18n_c = Number(c).toFixed(floating_points);
      i18n_c_string = "$" + i18n_c;
    }
  }
  return i18n_c_string;
}

function switchToMiles(dm) {
  if (Drupal.settings.tesla.locale === 'fr_CA' || Drupal.settings.tesla.locale === 'en_CA') {
	dm = dm / 1.6
  }
  return dm;
}

function localizeDate(m, day, year) {

    var teslaRegion = '';

    if ( Drupal.settings.tesla.locale == 'de_CH' ) {
        teslaRegion = 'DE';
    }
    else if ( Drupal.settings.tesla.locale == 'fr_CH' ) {
        teslaRegion = 'FR';
    }
    else if ( Drupal.settings.tesla.locale == 'it_CH' ) {
        teslaRegion = 'IT';
    }
    else {
        teslaRegion = Drupal.settings.tesla.region;
    }

    switch(teslaRegion) {
    case 'CA':
      if (Drupal.settings.tesla.locale == 'fr_CA') {
        monthArray = {1: "Janvier", 2: "Fvrier", 3: "Mars", 4: "Avril", 5: "Mai", 6: "Juin", 7: "Juillet", 8: "Aot", 9: "Septembre", 10: "Octobre", 11: "Novembre", 12: "Dcembre"};
    	month = monthArray[m];
        curCarInfo.date = day+" "+month+" "+year;
      }
      else {
        monthArray = {1: "January", 2: "February", 3: "March", 4: "April", 5: "May", 6: "June", 7: "July", 8: "August", 9: "September", 10: "October", 11: "November", 12: "December"};
        month = monthArray[m];
        curCarInfo.date = day+" "+month+", "+year;
      }
      break;
    case 'FR':
      monthArray = {1: "Janvier", 2: "Fvrier", 3: "Mars", 4: "Avril", 5: "Mai", 6: "Juin", 7: "Juillet", 8: "Aot", 9: "Septembre", 10: "Octobre", 11: "Novembre", 12: "Dcembre"};
      month = monthArray[m];
      curCarInfo.date = day+" "+month+" "+year;
      break;
    case 'EN':
      monthArray = {1: "January", 2: "February", 3: "March", 4: "April", 5: "May", 6: "June", 7: "July", 8: "August", 9: "September", 10: "October", 11: "November", 12: "December"};
      month = monthArray[m];
      curCarInfo.date = day+" "+month+", "+year;
      break;
    case 'DE':
      monthArray = {1: "Januar", 2: "Februar", 3: "Mrz", 4: "April", 5: "Mai", 6: "Juni", 7: "Juli", 8: "August", 9: "September", 10: "October", 11: "November", 12: "Dezember"};
      month = monthArray[m];
      curCarInfo.date = day+". "+month+" "+year;
      break;
    case 'IT':
      monthArray = {1: "January", 2: "Febbraio", 3: "Marzo", 4: "Aprile", 5: "May", 6: "Giugno", 7: "Luglio", 8: "August", 9: "September", 10: "Ottobre", 11: "Novembre", 12: "Dicembre"};
      month = monthArray[m];
      curCarInfo.date = day+" "+month+" "+year;
      break;
    case 'JP':
      monthArray = {1: "1", 2: "2", 3: "3", 4: "4", 5: "5", 6: "6", 7: "7", 8: "8", 9: "9", 10: "10", 11: "11", 12: "12"};
      month = monthArray[m];
      curCarInfo.date = year+""+month+""+day+"";
      break;
    case 'NO':
      monthArray = {1: "Januar", 2: "februar", 3: "Mars", 4: "April", 5: "May", 6: "June", 7: "Juli", 8: "August", 9: "September", 10: "Oktober", 11: "November", 12: "Desember"};
      month = monthArray[m];
      curCarInfo.date = day+". "+month+" "+year;
      break;
    case 'NL':
      monthArray = {1: "Januari", 2: "Februari", 3: "March", 4: "April", 5: "Mei", 6: "June", 7: "July", 8: "August", 9: "September", 10: "Oktober", 11: "November", 12: "December"};
      month = monthArray[m];
      curCarInfo.date = day+" "+month+" "+year;
      break;
    default:
      monthArray = {1: "January", 2: "February", 3: "March", 4: "April", 5: "May", 6: "June", 7: "July", 8: "August", 9: "September", 10: "October", 11: "November", 12: "December"};
      month = monthArray[m];
      curCarInfo.date = month+" "+day+", "+year;
    }

    return curCarInfo.date;

}

/**
 * Is EU other country
 *
 * @param string Country code
 * @return boolean Is EU other country
 */
Tesla.isEuOtherCountry =  function(countryCode) {
    return jQuery.inArray(countryCode, euOtherCountries) > -1;
};

/**
 * Maps the saved locale to the user country
 * Used when manipulating TC.userCountry for EU other countries where mismatch may occur
 *
 * @param string Country code as specificed by TC.userCountry
 * @param string Locale saved in the configuration
 * @return string Country code as specificed by TC.userCountry
 */
Tesla.mapSavedLocaleToUserCountry =  function(userCountry, savedLocale) {
    isEuOtherCountry = this.isEuOtherCountry(userCountry);
    // MAP LI country (for de_CH) to CH
    if (savedLocale == 'de_CH' && userCountry != 'CH' && isEuOtherCountry) {
        userCountry = 'CH';
    }
    // Map EU other countries
    else if (savedLocale == 'en_EU' && userCountry != 'EU' && isEuOtherCountry) {
        userCountry = 'EU';
    }
    return userCountry;
};

/* These are the moment.js i18n config objects.
 *  We will load them into Drupal.settings.momentConfig.
 */
var momentConfig = {};

momentConfig.de_DE = {
    months : "Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),
    monthsShort : "Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),
    weekdays : "Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),
    weekdaysShort : "So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),
    weekdaysMin : "So_Mo_Di_Mi_Do_Fr_Sa".split("_"),
    longDateFormat : {
        LT: "H:mm U\\hr",
        L : "DD/MM/YYYY",
        LL : "D. MMMM YYYY",
        LLL : "D. MMMM YYYY LT",
        LLLL : "dddd, D. MMMM YYYY LT"
    },
    calendar : {
        sameDay: "[Heute um] LT",
        sameElse: "L",
        nextDay: '[Morgen um] LT',
        nextWeek: 'dddd [um] LT',
        lastDay: '[Gestern um] LT',
        lastWeek: '[letzten] dddd [um] LT'
    },
    relativeTime : {
        future : "in %s",
        past : "vor %s",
        s : "ein paar Sekunden",
        m : "einer Minute",
        mm : "%d Minuten",
        h : "einer Stunde",
        hh : "%d Stunden",
        d : "einem Tag",
        dd : "%d Tagen",
        M : "einem Monat",
        MM : "%d Monaten",
        y : "einem Jahr",
        yy : "%d Jahren"
    },
    ordinal : function (number) {
        return '.';
    }
};

momentConfig.de_AT = {
    months : "Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),
    monthsShort : "Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),
    weekdays : "Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),
    weekdaysShort : "So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),
    weekdaysMin : "So_Mo_Di_Mi_Do_Fr_Sa".split("_"),
    longDateFormat : {
        LT: "H:mm U\\hr",
        L : "DD/MM/YYYY",
        LL : "D. MMMM YYYY",
        LLL : "D. MMMM YYYY LT",
        LLLL : "dddd, D. MMMM YYYY LT"
    },
    calendar : {
        sameDay: "[Heute um] LT",
        sameElse: "L",
        nextDay: '[Morgen um] LT',
        nextWeek: 'dddd [um] LT',
        lastDay: '[Gestern um] LT',
        lastWeek: '[letzten] dddd [um] LT'
    },
    relativeTime : {
        future : "in %s",
        past : "vor %s",
        s : "ein paar Sekunden",
        m : "einer Minute",
        mm : "%d Minuten",
        h : "einer Stunde",
        hh : "%d Stunden",
        d : "einem Tag",
        dd : "%d Tagen",
        M : "einem Monat",
        MM : "%d Monaten",
        y : "einem Jahr",
        yy : "%d Jahren"
    },
    ordinal : function (number) {
        return '.';
    }
};

momentConfig.de_CH = {
    months : "Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),
    monthsShort : "Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),
    weekdays : "Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),
    weekdaysShort : "So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),
    weekdaysMin : "So_Mo_Di_Mi_Do_Fr_Sa".split("_"),
    longDateFormat : {
        LT: "H:mm U\\hr",
        L : "DD/MM/YYYY",
        LL : "D. MMMM YYYY",
        LLL : "D. MMMM YYYY LT",
        LLLL : "dddd, D. MMMM YYYY LT"
    },
    calendar : {
        sameDay: "[Heute um] LT",
        sameElse: "L",
        nextDay: '[Morgen um] LT',
        nextWeek: 'dddd [um] LT',
        lastDay: '[Gestern um] LT',
        lastWeek: '[letzten] dddd [um] LT'
    },
    relativeTime : {
        future : "in %s",
        past : "vor %s",
        s : "ein paar Sekunden",
        m : "einer Minute",
        mm : "%d Minuten",
        h : "einer Stunde",
        hh : "%d Stunden",
        d : "einem Tag",
        dd : "%d Tagen",
        M : "einem Monat",
        MM : "%d Monaten",
        y : "einem Jahr",
        yy : "%d Jahren"
    },
    ordinal : function (number) {
        return '.';
    }
};


momentConfig.en_BE = {
    months : "January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
    monthsShort : "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
    weekdays : "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
    weekdaysShort : "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),
    weekdaysMin : "Su_Mo_Tu_We_Th_Fr_Sa".split("_"),
    longDateFormat : {
        LT : "h:mm A",
        L : "DD/MM/YYYY",
        LL : "D MMMM YYYY",
        LLL : "D MMMM YYYY LT",
        LLLL : "dddd, D MMMM YYYY LT"
    },
    calendar : {
        sameDay : '[Today at] LT',
        nextDay : '[Tomorrow at] LT',
        nextWeek : 'dddd [at] LT',
        lastDay : '[Yesterday at] LT',
        lastWeek : '[last] dddd [at] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : "in %s",
        past : "%s ago",
        s : "a few seconds",
        m : "a minute",
        mm : "%d minutes",
        h : "an hour",
        hh : "%d hours",
        d : "a day",
        dd : "%d days",
        M : "a month",
        MM : "%d months",
        y : "a year",
        yy : "%d years"
    },
    ordinal : function (number) {
        var b = number % 10;
        return (~~ (number % 100 / 10) === 1) ? 'th' :
            (b === 1) ? 'st' :
            (b === 2) ? 'nd' :
            (b === 3) ? 'rd' : 'th';
    }
};

momentConfig.en_DK = {
    months : "January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
    monthsShort : "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
    weekdays : "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
    weekdaysShort : "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),
    weekdaysMin : "Su_Mo_Tu_We_Th_Fr_Sa".split("_"),
    longDateFormat : {
        LT : "h:mm A",
        L : "DD/MM/YYYY",
        LL : "D MMMM YYYY",
        LLL : "D MMMM YYYY LT",
        LLLL : "dddd, D MMMM YYYY LT"
    },
    calendar : {
        sameDay : '[Today at] LT',
        nextDay : '[Tomorrow at] LT',
        nextWeek : 'dddd [at] LT',
        lastDay : '[Yesterday at] LT',
        lastWeek : '[last] dddd [at] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : "in %s",
        past : "%s ago",
        s : "a few seconds",
        m : "a minute",
        mm : "%d minutes",
        h : "an hour",
        hh : "%d hours",
        d : "a day",
        dd : "%d days",
        M : "a month",
        MM : "%d months",
        y : "a year",
        yy : "%d years"
    },
    ordinal : function (number) {
        var b = number % 10;
        return (~~ (number % 100 / 10) === 1) ? 'th' :
            (b === 1) ? 'st' :
            (b === 2) ? 'nd' :
            (b === 3) ? 'rd' : 'th';
    }
};
momentConfig.en_GB = {
    months : "January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
    monthsShort : "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
    weekdays : "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
    weekdaysShort : "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),
    weekdaysMin : "Su_Mo_Tu_We_Th_Fr_Sa".split("_"),
    longDateFormat : {
        LT : "h:mm A",
        L : "DD/MM/YYYY",
        LL : "D MMMM YYYY",
        LLL : "D MMMM YYYY LT",
        LLLL : "dddd, D MMMM YYYY LT"
    },
    calendar : {
        sameDay : '[Today at] LT',
        nextDay : '[Tomorrow at] LT',
        nextWeek : 'dddd [at] LT',
        lastDay : '[Yesterday at] LT',
        lastWeek : '[last] dddd [at] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : "in %s",
        past : "%s ago",
        s : "a few seconds",
        m : "a minute",
        mm : "%d minutes",
        h : "an hour",
        hh : "%d hours",
        d : "a day",
        dd : "%d days",
        M : "a month",
        MM : "%d months",
        y : "a year",
        yy : "%d years"
    },
    ordinal : function (number) {
        var b = number % 10;
        return (~~ (number % 100 / 10) === 1) ? 'th' :
            (b === 1) ? 'st' :
            (b === 2) ? 'nd' :
            (b === 3) ? 'rd' : 'th';
    }
};

momentConfig.en_US = {
    months : "January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
    monthsShort : "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
    weekdays : "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
    weekdaysShort : "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),
    weekdaysMin : "Su_Mo_Tu_We_Th_Fr_Sa".split("_"),
    longDateFormat : {
        LT : "h:mm A",
        L : "MM/DD/YYYY",
        LL : "MMMM D YYYY",
        LLL : "MMMM D YYYY LT",
        LLLL : "dddd, MMMM D YYYY LT"
    },
    meridiem : function (hours, minutes, isLower) {
        if (hours > 11) {
            return isLower ? 'pm' : 'PM';
        } else {
            return isLower ? 'am' : 'AM';
        }
    },
    calendar : {
        sameDay : '[Today at] LT',
        nextDay : '[Tomorrow at] LT',
        nextWeek : 'dddd [at] LT',
        lastDay : '[Yesterday at] LT',
        lastWeek : '[last] dddd [at] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : "in %s",
        past : "%s ago",
        s : "a few seconds",
        m : "a minute",
        mm : "%d minutes",
        h : "an hour",
        hh : "%d hours",
        d : "a day",
        dd : "%d days",
        M : "a month",
        MM : "%d months",
        y : "a year",
        yy : "%d years"
    },
    ordinal : function (number) {
        var b = number % 10;
        return (~~ (number % 100 / 10) === 1) ? 'th' :
            (b === 1) ? 'st' :
            (b === 2) ? 'nd' :
            (b === 3) ? 'rd' : 'th';
    }

};

momentConfig.fr_FR = {
    months : "Janvier_Fvrier_Mars_Avril_Mai_Juin_Juillet_Aout_Septembre_Octobre_Novembre_Dcembre".split("_"),
    monthsShort : "Jan_Fev_Mar_Avr_Mai_Juin_Juil_Aou_Sep_Oct_Nov_Dec".split("_"),
    weekdays : "Dimanche_Lundi_Mardi_Mercredi_Jeudi_Vendredi_Samedi".split("_"),
    weekdaysShort : "Dim_Lun_Mar_Mer_Jeu_Ven_Sam".split("_"),
    longDateFormat : {
        L : "DD/MM/YYYY",
        LL : "D MMMM YYYY",
        LLL : "D MMMM YYYY HH:mm",
        LLLL : "dddd, D MMMM YYYY HH:mm"
    },
    meridiem : {
        AM : 'AM',
        am : 'am',
        PM : 'PM',
        pm : 'pm'
    },
    calendar : {
        sameDay: "[Ajourd'hui  ] LT",
        nextDay: '[Demain  ] LT',
        nextWeek: 'dddd [ ] LT',
        lastDay: '[Hier  ] LT',
        lastWeek: 'dddd [denier  ] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : "in %s",
        past : "il y a %s",
        s : "secondes",
        m : "une minute",
        mm : "%d minutes",
        h : "une heure",
        hh : "%d heures",
        d : "un jour",
        dd : "%d jours",
        M : "un mois",
        MM : "%d mois",
        y : "une anne",
        yy : "%d annes"
    },
    ordinal : function (number) {
      return (~~ (number % 100 / 10) === 1) ? 'er' : 'me';
    }
};

momentConfig.fr_CH = {
    months : "Janvier_Fvrier_Mars_Avril_Mai_Juin_Juillet_Aout_Septembre_Octobre_Novembre_Dcembre".split("_"),
    monthsShort : "Jan_Fev_Mar_Avr_Mai_Juin_Juil_Aou_Sep_Oct_Nov_Dec".split("_"),
    weekdays : "Dimanche_Lundi_Mardi_Mercredi_Jeudi_Vendredi_Samedi".split("_"),
    weekdaysShort : "Dim_Lun_Mar_Mer_Jeu_Ven_Sam".split("_"),
    longDateFormat : {
        L : "DD/MM/YYYY",
        LL : "D MMMM YYYY",
        LLL : "D MMMM YYYY HH:mm",
        LLLL : "dddd, D MMMM YYYY HH:mm"
    },
    meridiem : {
        AM : 'AM',
        am : 'am',
        PM : 'PM',
        pm : 'pm'
    },
    calendar : {
        sameDay: "[Ajourd'hui  ] LT",
        nextDay: '[Demain  ] LT',
        nextWeek: 'dddd [ ] LT',
        lastDay: '[Hier  ] LT',
        lastWeek: 'dddd [denier  ] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : "in %s",
        past : "il y a %s",
        s : "secondes",
        m : "une minute",
        mm : "%d minutes",
        h : "une heure",
        hh : "%d heures",
        d : "un jour",
        dd : "%d jours",
        M : "un mois",
        MM : "%d mois",
        y : "une anne",
        yy : "%d annes"
    },
    ordinal : function (number) {
      return (~~ (number % 100 / 10) === 1) ? 'er' : 'me';
    }
};

momentConfig.it_CH = {
    months : "Gennaio_Febbraio_Marzo_Aprile_Maggio_Giugno_Luglio_Agosto_Settembre_Ottobre_Novembre_Dicembre".split("_"),
    monthsShort : "Gen_Feb_Mar_Apr_Mag_Giu_Lug_Ago_Set_Ott_Nov_Dic".split("_"),
    weekdays : "Domenica_Luned_Marted_Mercoled_Gioved_Venerd_Sabato".split("_"),
    weekdaysShort : "Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),
    weekdaysMin : "D_L_Ma_Me_G_V_S".split("_"),
    longDateFormat : {
        LT : "HH:mm",
        L : "DD/MM/YYYY",
        LL : "D MMMM YYYY",
        LLL : "D MMMM YYYY LT",
        LLLL : "dddd, D MMMM YYYY LT"
    },
    calendar : {
        sameDay: '[Oggi alle] LT',
        nextDay: '[Domani alle] LT',
        nextWeek: 'dddd [alle] LT',
        lastDay: '[Ieri alle] LT',
        lastWeek: '[lo scorso] dddd [alle] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : "in %s",
        past : "%s fa",
        s : "secondi",
        m : "un minuto",
        mm : "%d minuti",
        h : "un'ora",
        hh : "%d ore",
        d : "un giorno",
        dd : "%d giorni",
        M : "un mese",
        MM : "%d mesi",
        y : "un anno",
        yy : "%d anni"
    },
    ordinal: function () {
        return '';
    }
};

momentConfig.it_IT = {
    months : "Gennaio_Febbraio_Marzo_Aprile_Maggio_Giugno_Luglio_Agosto_Settembre_Ottobre_Novembre_Dicembre".split("_"),
    monthsShort : "Gen_Feb_Mar_Apr_Mag_Giu_Lug_Ago_Set_Ott_Nov_Dic".split("_"),
    weekdays : "Domenica_Luned_Marted_Mercoled_Gioved_Venerd_Sabato".split("_"),
    weekdaysShort : "Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),
    weekdaysMin : "D_L_Ma_Me_G_V_S".split("_"),
    longDateFormat : {
        LT : "HH:mm",
        L : "DD/MM/YYYY",
        LL : "D MMMM YYYY",
        LLL : "D MMMM YYYY LT",
        LLLL : "dddd, D MMMM YYYY LT"
    },
    calendar : {
        sameDay: '[Oggi alle] LT',
        nextDay: '[Domani alle] LT',
        nextWeek: 'dddd [alle] LT',
        lastDay: '[Ieri alle] LT',
        lastWeek: '[lo scorso] dddd [alle] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : "in %s",
        past : "%s fa",
        s : "secondi",
        m : "un minuto",
        mm : "%d minuti",
        h : "un'ora",
        hh : "%d ore",
        d : "un giorno",
        dd : "%d giorni",
        M : "un mese",
        MM : "%d mesi",
        y : "un anno",
        yy : "%d anni"
    },
    ordinal: function () {
        return '';
    }
};

momentConfig.nl_NL = {
    months : "januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),
    monthsShort : function (m, format) {
        var monthsShortWithDots = "jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_");
        var monthsShortWithoutDots = "jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_");
        if (/-MMM-/.test(format)) {
            return monthsShortWithoutDots[m.month()];
        } else {
            return monthsShortWithDots[m.month()];
        }
    },
    weekdays : "zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),
    weekdaysShort : "zo._ma._di._wo._do._vr._za.".split("_"),
    weekdaysMin : "Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),
    longDateFormat : {
        LT : "HH:mm",
        L : "DD/MM/YYYY",
        LL : "D MMMM YYYY",
        LLL : "D MMMM YYYY LT",
        LLLL : "dddd D MMMM YYYY LT"
    },
    calendar : {
        sameDay: '[Vandaag om] LT',
        nextDay: '[Morgen om] LT',
        nextWeek: 'dddd [om] LT',
        lastDay: '[Gisteren om] LT',
        lastWeek: '[afgelopen] dddd [om] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : "over %s",
        past : "%s geleden",
        s : "een paar seconden",
        m : "n minuut",
        mm : "%d minuten",
        h : "n uur",
        hh : "%d uur",
        d : "n dag",
        dd : "%d dagen",
        M : "n maand",
        MM : "%d maanden",
        y : "n jaar",
        yy : "%d jaar"
    },
    ordinal : function (number) {
        return (number === 1 || number === 8 || number >= 20) ? 'ste' : 'de';
    }
};

momentConfig.no_NO = {
    months : "januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),
    monthsShort : "jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),
    weekdays : "sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),
    weekdaysShort : "sn_man_tir_ons_tor_fre_lr".split("_"),
    weekdaysMin : "s_ma_ti_on_to_fr_l".split("_"),
    longDateFormat : {
        LT : "HH:mm",
        L : "DD/MM/YYYY",
        LL : "D MMMM YYYY",
        LLL : "D MMMM YYYY LT",
        LLLL : "dddd D MMMM YYYY LT"
    },
    calendar : {
        sameDay: '[I dag klokken] LT',
        nextDay: '[I morgen klokken] LT',
        nextWeek: 'dddd [klokken] LT',
        lastDay: '[I gr klokken] LT',
        lastWeek: '[Forrige] dddd [klokken] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : "om %s",
        past : "for %s siden",
        s : "noen sekunder",
        m : "ett minutt",
        mm : "%d minutter",
        h : "en time",
        hh : "%d timer",
        d : "en dag",
        dd : "%d dager",
        M : "en mned",
        MM : "%d mneder",
        y : "ett r",
        yy : "%d r"
    },
    ordinal : function (number) {
        return '.';
    }
};

momentConfig.en_CA = {
    months : "January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
    monthsShort : "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
    weekdays : "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
    weekdaysShort : "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),
    weekdaysMin : "Su_Mo_Tu_We_Th_Fr_Sa".split("_"),
    longDateFormat : {
        LT : "h:mm A",
        L : "MM/DD/YYYY",
        LL : "MMMM D YYYY",
        LLL : "MMMM D YYYY LT",
        LLLL : "dddd, MMMM D YYYY LT"
    },
    meridiem : function (hours, minutes, isLower) {
        if (hours > 11) {
            return isLower ? 'pm' : 'PM';
        } else {
            return isLower ? 'am' : 'AM';
        }
    },
    calendar : {
        sameDay : '[Today at] LT',
        nextDay : '[Tomorrow at] LT',
        nextWeek : 'dddd [at] LT',
        lastDay : '[Yesterday at] LT',
        lastWeek : '[last] dddd [at] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : "in %s",
        past : "%s ago",
        s : "a few seconds",
        m : "a minute",
        mm : "%d minutes",
        h : "an hour",
        hh : "%d hours",
        d : "a day",
        dd : "%d days",
        M : "a month",
        MM : "%d months",
        y : "a year",
        yy : "%d years"
    },
    ordinal : function (number) {
        var b = number % 10;
        return (~~ (number % 100 / 10) === 1) ? 'th' :
            (b === 1) ? 'st' :
            (b === 2) ? 'nd' :
            (b === 3) ? 'rd' : 'th';
    }

};

momentConfig.fr_CA = {
    months : "January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
    monthsShort : "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
    weekdays : "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
    weekdaysShort : "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),
    weekdaysMin : "Su_Mo_Tu_We_Th_Fr_Sa".split("_"),
    longDateFormat : {
        LT : "h:mm A",
        L : "MM/DD/YYYY",
        LL : "MMMM D YYYY",
        LLL : "MMMM D YYYY LT",
        LLLL : "dddd, MMMM D YYYY LT"
    },
    meridiem : function (hours, minutes, isLower) {
        if (hours > 11) {
            return isLower ? 'pm' : 'PM';
        } else {
            return isLower ? 'am' : 'AM';
        }
    },
    calendar : {
        sameDay : '[Today at] LT',
        nextDay : '[Tomorrow at] LT',
        nextWeek : 'dddd [at] LT',
        lastDay : '[Yesterday at] LT',
        lastWeek : '[last] dddd [at] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : "in %s",
        past : "%s ago",
        s : "a few seconds",
        m : "a minute",
        mm : "%d minutes",
        h : "an hour",
        hh : "%d hours",
        d : "a day",
        dd : "%d days",
        M : "a month",
        MM : "%d months",
        y : "a year",
        yy : "%d years"
    },
    ordinal : function (number) {
        var b = number % 10;
        return (~~ (number % 100 / 10) === 1) ? 'th' :
            (b === 1) ? 'st' :
            (b === 2) ? 'nd' :
            (b === 3) ? 'rd' : 'th';
    }

};

momentConfig.en_EU = {
    months : "January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
    monthsShort : "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
    weekdays : "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
    weekdaysShort : "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),
    weekdaysMin : "Su_Mo_Tu_We_Th_Fr_Sa".split("_"),
    longDateFormat : {
        LT : "h:mm A",
        L : "DD/MM/YYYY",
        LL : "D MMMM YYYY",
        LLL : "D MMMM YYYY LT",
        LLLL : "dddd, D MMMM YYYY LT"
    },
    calendar : {
        sameDay : '[Today at] LT',
        nextDay : '[Tomorrow at] LT',
        nextWeek : 'dddd [at] LT',
        lastDay : '[Yesterday at] LT',
        lastWeek : '[last] dddd [at] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : "in %s",
        past : "%s ago",
        s : "a few seconds",
        m : "a minute",
        mm : "%d minutes",
        h : "an hour",
        hh : "%d hours",
        d : "a day",
        dd : "%d days",
        M : "a month",
        MM : "%d months",
        y : "a year",
        yy : "%d years"
    },
    ordinal : function (number) {
        var b = number % 10;
        return (~~ (number % 100 / 10) === 1) ? 'th' :
            (b === 1) ? 'st' :
            (b === 2) ? 'nd' :
            (b === 3) ? 'rd' : 'th';
    }
};

if ((typeof(Drupal) !== "undefined") && Drupal.settings) {
    Drupal.settings.momentConfig = momentConfig;
}
;
$(document).ready(function() {
	//this is where we store subnav divs that we display in the flyout navigation
	var subnavDivs={};
	//delay
	var subnavbackUpDelay;
	var subnavDownDelay;
	//correct positioning for the sliding nav
	var showY;
	var hideY;
	function prepareNav(){
		//cache divs
		var $slideNav=$("#slide-nav-main");
		//delay before the subnav slides down. 
		var slideNavDownDelay=300;
		//navigation states
		var collapsedState={name:"collapsed",
							showSubAndSwitchState:function(ref){
								$slideNav.animate({top:showY}, 500);
								ref.context.setState(ref.context.getExpandedState());
								ref.context.state.showSub();
							},
							showSub:function(ref){
								clearInterval(subnavDownDelay);
								subnavDownDelay=setTimeout(function(){
									ref.showSubAndSwitchState(ref)}, slideNavDownDelay);
							},
							hideSub:function(){
								clearInterval(subnavDownDelay);
							}
		};
		var expandedState={
							name:"expanded",
							mainMenuPositionX:null,
							subnavbackUpDelay:null,
							slideNavWrapperWidth:null,
							showSub:function(){
								 clearInterval(this.subnavbackUpDelay);
								 this.showHideSubnavDiv(); 	
							},
							hideSub:function(ref){
								clearInterval(ref.subnavbackUpDelay);
								ref.subnavbackUpDelay=setTimeout(function(){ref.hideSubDelay(ref)}, 800);
								
							},
							hideSubDelay:function(ref){
								if(!ref.context.okToClose) return;
								$slideNav.animate({top:hideY}, 500);
								ref.context.setState(ref.context.getCollapsedState());
							},
							showHideSubnavDiv:function(){
								var $newSubnav=subnavDivs[this.context.menuNumber];
								if($newSubnav.css("display")!="none"){
									return;
								};
								for ( var sub in subnavDivs){
									subnavDivs[sub].fadeOut(100);
								}
								//calculate the position of the subnav based on the position of the main nav item
								
								var leftOffset=this.mainMenuPositionX+this.context.menuPosition;
								//available width for the positionning 
								var availableWidth=this.slideNavWrapperWidth;
								//measure the width of the sub div
								leftOffset=Math.min(leftOffset, availableWidth-$newSubnav.outerWidth(false));
								//position the subnav
								$newSubnav.css("left", leftOffset);
								$newSubnav.stop(true, true);
								$newSubnav.fadeIn(250);
								
							}
		};
		//this where we keep track of states: collapsed and exteneded and also execute onmouseOver and Out functions
		var stateContext={
			collapsed:collapsedState,
			expanded:expandedState,
			state:null,
			okToClose:true,
			menuNumber:null,
			menuPosition:0,

			setState:function(state){
				this.state=state;
			},
			getCollapsedState:function(){
				return collapsedState;
			},
			getExpandedState:function(){
				return expandedState;
			},
			doCollapse:function(){
				this.state.hideSub(this.state);
			},
			doExpand:function(e){
				var $targetOver=$(e.target);
				var $menuItem=$targetOver.parent();
				this.menuNumber=getMenuNumber($menuItem);
				this.menuPosition=$menuItem.position().left;
				this.state.showSub(stateContext.getCollapsedState());
			},
			onSlideBackOver:function(e){
				this.okToClose=false;
			},
			onSlideBackOut:function(e){
				this.okToClose=true;
				this.doCollapse();
			},
			init:function(){
				//cache selectors
				this.expanded.mainMenuPositionX=$("#main-nav-wrapper ul[class*=main-menu]").position().left,
				this.expanded.slideNavWrapperWidth=$("#slide-nav-wrapper").outerWidth(false);
				collapsedState.context=expandedState.context=this;	
				this.state=this.collapsed;
			}
		
		};
		//parse DOM
		hideY=-$slideNav.height()+$("#main-nav-back").height()-5;
		showY=$("#main-nav-back").height();
		//position the slide nav so it's hidden on load
		$slideNav.css("top", hideY);
		//attach on mouseover event to the main nav items
		$("ul.main-menu").find("li a").each( function(index) {
			//let's find a subnav div with the same class
			menuNumber=getMenuNumber($(this).parent());
			var $matchingSubnav=$("#slide-nav-wrapper div[class*="+menuNumber+"]");
			if($matchingSubnav.find("ul li").length!=0 ){
				//store the subnav div
				subnavDivs[menuNumber]=$matchingSubnav;	
				$(this).mouseover(function(e){
					stateContext.doExpand(e)}).mouseout(function(e){stateContext.doCollapse(e, stateContext)});
			}
			
	 });
	// attach on mouseover event to the slide-nav
		$slideNav.mouseover(function(e){
			stateContext.onSlideBackOver(e, stateContext);
		}).mouseout(function(e){
			stateContext.onSlideBackOut(e, stateContext)
		})
		//init state machine
		stateContext.init();
	
	 } //End prepare nav	
	 
	function getMenuNumber($menuItem){
		//regex to find menu number in the mouseover main nav item class
		var regex=/menu-\d+/;
		return regex.exec($menuItem.attr("class"));
	}	
	
	prepareNav();

});

;
//let's not polute global space
var footerNS = footerNS || {};
$(document).ready(localeSelectInit);

function localeSelectInit(){
	footerNS.locale_wrapper=$("#locale-select-wrapper");
	footerNS.locale_overlay=$("#select-locale-overlay");
	footerNS.locale_overlay.hide().css("opacity", "0");
	footerNS.locale_wrapper.hide();
	$("#locale-close-button").click(function(){
		toggleLocaleSelector();
		return false;
    });
	footerNS.locale_overlay.click(toggleLocaleSelector);
	$("#locale-select").bind("click", function(e){
        e.stopPropagation();
	});
	var chooseRegionLink=$("#choose-locale");
	chooseRegionLink.attr("href", "#").click(function() {
		toggleLocaleSelector();
		return false;
	});
	chooseRegionLink.attr("class", Drupal.settings.tesla.locale || "en_US");
}

function toggleLocaleSelector(e){
	if(footerNS.locale_overlay.css("opacity") == "0"){
		footerNS.locale_overlay.css("display", "block");
		var topCss= Math.max($(window).scrollTop()+40,($(window).scrollTop())+($(window).height() -  footerNS.locale_wrapper.outerHeight()) / 2)+"px";
		footerNS.locale_wrapper.css("top", topCss);
		footerNS.locale_wrapper.css("left", Math.max(0,($(window).width()-footerNS.locale_wrapper.outerWidth())/2)+$(window).scrollLeft()+"px");
		footerNS.locale_overlay.animate({opacity:0.7});
		footerNS.locale_wrapper.fadeIn(810);
	}else{
		footerNS.locale_overlay.animate({opacity:0}, function(){
			$(this).css("display", "none");
		});
		footerNS.locale_wrapper.fadeOut(490);
	}
	return false;
}
;
/*
 * JavaScript Debug - v0.3 - 6/8/2009
 * http://benalman.com/projects/javascript-debug-console-log/
 * 
 * Copyright (c) 2009 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 * 
 * With lots of help from Paul Irish!
 * http://paulirish.com/
 */
window.debug=(function(){var c=this,e=Array.prototype.slice,b=c.console,i={},f,g,j=9,d=["error","warn","info","debug","log"],m="assert clear count dir dirxml group groupEnd profile profileEnd time timeEnd trace".split(" "),k=m.length,a=[];while(--k>=0){(function(n){i[n]=function(){j!==0&&b&&b[n]&&b[n].apply(b,arguments)}})(m[k])}k=d.length;while(--k>=0){(function(n,o){i[o]=function(){var q=e.call(arguments),p=[o].concat(q);a.push(p);h(p);if(!b||!l(n)){return}b.firebug?b[o].apply(c,q):b[o]?b[o](q):b.log(q)}})(k,d[k])}function h(n){if(f&&(g||!b||!b.log)){f.apply(c,n)}}i.setLevel=function(n){j=typeof n==="number"?n:9};function l(n){return j>0?j>n:d.length+j<=n}i.setCallback=function(){var o=e.call(arguments),n=a.length,p=n;f=o.shift()||null;g=typeof o[0]==="boolean"?o.shift():false;p-=typeof o[0]==="number"?o.shift():n;while(p<n){h(a[p++])}};return i})();
//window.debug = {debug: function(){}, info: function(){}, log: function(){}, setLevel: function(){}, warn: function(){}, error: function(){} }  // TESTING ONLY DISABLE !!!
log = function(str){try{console.log(str);}catch(err){}}
;
/**
 * Browser detect - based on (with TESLA MODIFICATIONS / ADDITIONS)
 * http://www.quirksmode.org/js/detect.html
 *
 * Usage:
 * The following are available immediately upon invoking this script:
 * BrowserDetect.browser; // Browser name
 * BrowserDetect.version; // Browser version
 * BrowserDetect.OS       // OS name
 * BrowserDetect.summary  // Summary object with the above items concatted together
 *
 * Example:
 * // Initialize BrowserDetect object if it hasn't already been done
 * if (typeof(BrowserDetect) !== "undefined" && typeof(BrowserDetect.summary) === "undefined") {
 *    BrowserDetect.init();
 * }
 * // +
 * // Set the BrowserDetect propery as input value
 * if (typeof(BrowserDetect) !== "undefined" && typeof(BrowserDetect.setValueToInput) !== "undefined") {
 *     var browserDetectInput = $('#browser_detect_summary');
 *     if (browserDetectInput.length && browserDetectInput.val() === '') {
 *         BrowserDetect.setValueToInput(browserDetectInput, 'summary');
 *     }
 * }
 */
var BrowserDetect = {
    init: function () {
        this.browser = this.searchString(this.dataBrowser) || "An unknown browser";
        this.version = this.searchVersion(navigator.userAgent)
            || this.searchVersion(navigator.appVersion)
            || "an unknown version";
        this.OS = this.searchString(this.dataOS) || "an unknown OS";
        // TESLA ADDITION: Get the summary in one call
        this.summary = { "browser": this.browser,
                         "version": this.version,
                         "OS": this.OS
                       };
    },
    // TESLA ADDITION: Function to set value to input
    setValueToInput: function(obj, prop) {
        if (typeof(this.prop) === "undefined") {
            prop = 'summary';
        }
        var propValue = this[prop];
        if (obj.length && typeof(propValue) !== "undefined") {
            propValue = (typeof propValue === 'object') ? JSON.stringify(propValue) : propValue;
            obj.val(propValue);
        }
    },
    searchString: function (data) {
        for (var i=0;i<data.length;i++) {
            var dataString = data[i].string;
            var dataProp = data[i].prop;
            this.versionSearchString = data[i].versionSearch || data[i].identity;
            if (dataString) {
                if (dataString.indexOf(data[i].subString) != -1)
                    return data[i].identity;
            }
            else if (dataProp)
                return data[i].identity;
        }
    },
    searchVersion: function (dataString) {
        var index = dataString.indexOf(this.versionSearchString);
        if (index == -1) return;
        return parseFloat(dataString.substring(index+this.versionSearchString.length+1));
    },
    dataBrowser: [
        {
            string: navigator.userAgent,
            subString: "Chrome",
            identity: "Chrome"
        },
        {   string: navigator.userAgent,
            subString: "OmniWeb",
            versionSearch: "OmniWeb/",
            identity: "OmniWeb"
        },
        {
            string: navigator.vendor,
            subString: "Apple",
            identity: "Safari",
            versionSearch: "Version"
        },
        {
            prop: window.opera,
            identity: "Opera",
            versionSearch: "Version"
        },
        {
            string: navigator.vendor,
            subString: "iCab",
            identity: "iCab"
        },
        {
            string: navigator.vendor,
            subString: "KDE",
            identity: "Konqueror"
        },
        {
            string: navigator.userAgent,
            subString: "Firefox",
            identity: "Firefox"
        },
        {
            string: navigator.vendor,
            subString: "Camino",
            identity: "Camino"
        },
        {       // for newer Netscapes (6+)
            string: navigator.userAgent,
            subString: "Netscape",
            identity: "Netscape"
        },
        {
            string: navigator.userAgent,
            subString: "MSIE",
            identity: "Explorer",
            versionSearch: "MSIE"
        },
        {
            string: navigator.userAgent,
            subString: "Gecko",
            identity: "Mozilla",
            versionSearch: "rv"
        },
        {       // for older Netscapes (4-)
            string: navigator.userAgent,
            subString: "Mozilla",
            identity: "Netscape",
            versionSearch: "Mozilla"
        }
    ],
    dataOS : [
        {
            string: navigator.platform,
            subString: "Win",
            identity: "Windows"
        },
        {
            string: navigator.platform,
            subString: "Mac",
            identity: "Mac"
        },
        {
               string: navigator.userAgent,
               subString: "iPhone",
               identity: "iPhone/iPod"
        },
        {
            string: navigator.platform,
            subString: "Linux",
            identity: "Linux"
        }
    ]

};
// TESLA MODIFICATION: DON'T auto-init this script on every page
// if (typeof(BrowserDetect) === "undefined") {
//      BrowserDetect.init();
// }
;

